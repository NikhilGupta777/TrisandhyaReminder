var c5=Object.defineProperty;var YE=n=>{throw TypeError(n)};var d5=(n,e,t)=>e in n?c5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var J=(n,e,t)=>d5(n,typeof e!="symbol"?e+"":e,t),a1=(n,e,t)=>e.has(n)||YE("Cannot "+t);var c=(n,e,t)=>(a1(n,e,"read from private field"),t?t.call(n):e.get(n)),A=(n,e,t)=>e.has(n)?YE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),C=(n,e,t,s)=>(a1(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),k=(n,e,t)=>(a1(n,e,"access private method"),t);var Ot=(n,e,t,s)=>({set _(r){C(n,e,r,t)},get _(){return c(n,e,s)}});function u5(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in n)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();function mC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xP={exports:{}},ew={},yP={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xy=Symbol.for("react.element"),h5=Symbol.for("react.portal"),f5=Symbol.for("react.fragment"),m5=Symbol.for("react.strict_mode"),p5=Symbol.for("react.profiler"),g5=Symbol.for("react.provider"),x5=Symbol.for("react.context"),y5=Symbol.for("react.forward_ref"),v5=Symbol.for("react.suspense"),b5=Symbol.for("react.memo"),w5=Symbol.for("react.lazy"),XE=Symbol.iterator;function S5(n){return n===null||typeof n!="object"?null:(n=XE&&n[XE]||n["@@iterator"],typeof n=="function"?n:null)}var vP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bP=Object.assign,wP={};function Im(n,e,t){this.props=n,this.context=e,this.refs=wP,this.updater=t||vP}Im.prototype.isReactComponent={};Im.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Im.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function SP(){}SP.prototype=Im.prototype;function pC(n,e,t){this.props=n,this.context=e,this.refs=wP,this.updater=t||vP}var gC=pC.prototype=new SP;gC.constructor=pC;bP(gC,Im.prototype);gC.isPureReactComponent=!0;var QE=Array.isArray,NP=Object.prototype.hasOwnProperty,xC={current:null},jP={key:!0,ref:!0,__self:!0,__source:!0};function CP(n,e,t){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)NP.call(e,s)&&!jP.hasOwnProperty(s)&&(r[s]=e[s]);var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){for(var d=Array(l),u=0;u<l;u++)d[u]=arguments[u+2];r.children=d}if(n&&n.defaultProps)for(s in l=n.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:xy,type:n,key:i,ref:o,props:r,_owner:xC.current}}function N5(n,e){return{$$typeof:xy,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function yC(n){return typeof n=="object"&&n!==null&&n.$$typeof===xy}function j5(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var JE=/\/+/g;function o1(n,e){return typeof n=="object"&&n!==null&&n.key!=null?j5(""+n.key):e.toString(36)}function _v(n,e,t,s,r){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case xy:case h5:o=!0}}if(o)return o=n,r=r(o),n=s===""?"."+o1(o,0):s,QE(r)?(t="",n!=null&&(t=n.replace(JE,"$&/")+"/"),_v(r,e,t,"",function(u){return u})):r!=null&&(yC(r)&&(r=N5(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(JE,"$&/")+"/")+n)),e.push(r)),1;if(o=0,s=s===""?".":s+":",QE(n))for(var l=0;l<n.length;l++){i=n[l];var d=s+o1(i,l);o+=_v(i,e,t,d,r)}else if(d=S5(n),typeof d=="function")for(n=d.call(n),l=0;!(i=n.next()).done;)i=i.value,d=s+o1(i,l++),o+=_v(i,e,t,d,r);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ky(n,e,t){if(n==null)return n;var s=[],r=0;return _v(n,s,"","",function(i){return e.call(t,i,r++)}),s}function C5(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var fs={current:null},Mv={transition:null},A5={ReactCurrentDispatcher:fs,ReactCurrentBatchConfig:Mv,ReactCurrentOwner:xC};function AP(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:Ky,forEach:function(n,e,t){Ky(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Ky(n,function(){e++}),e},toArray:function(n){return Ky(n,function(e){return e})||[]},only:function(n){if(!yC(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ie.Component=Im;Ie.Fragment=f5;Ie.Profiler=p5;Ie.PureComponent=pC;Ie.StrictMode=m5;Ie.Suspense=v5;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A5;Ie.act=AP;Ie.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=bP({},n.props),r=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=xC.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(d in e)NP.call(e,d)&&!jP.hasOwnProperty(d)&&(s[d]=e[d]===void 0&&l!==void 0?l[d]:e[d])}var d=arguments.length-2;if(d===1)s.children=t;else if(1<d){l=Array(d);for(var u=0;u<d;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:xy,type:n.type,key:r,ref:i,props:s,_owner:o}};Ie.createContext=function(n){return n={$$typeof:x5,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:g5,_context:n},n.Consumer=n};Ie.createElement=CP;Ie.createFactory=function(n){var e=CP.bind(null,n);return e.type=n,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(n){return{$$typeof:y5,render:n}};Ie.isValidElement=yC;Ie.lazy=function(n){return{$$typeof:w5,_payload:{_status:-1,_result:n},_init:C5}};Ie.memo=function(n,e){return{$$typeof:b5,type:n,compare:e===void 0?null:e}};Ie.startTransition=function(n){var e=Mv.transition;Mv.transition={};try{n()}finally{Mv.transition=e}};Ie.unstable_act=AP;Ie.useCallback=function(n,e){return fs.current.useCallback(n,e)};Ie.useContext=function(n){return fs.current.useContext(n)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(n){return fs.current.useDeferredValue(n)};Ie.useEffect=function(n,e){return fs.current.useEffect(n,e)};Ie.useId=function(){return fs.current.useId()};Ie.useImperativeHandle=function(n,e,t){return fs.current.useImperativeHandle(n,e,t)};Ie.useInsertionEffect=function(n,e){return fs.current.useInsertionEffect(n,e)};Ie.useLayoutEffect=function(n,e){return fs.current.useLayoutEffect(n,e)};Ie.useMemo=function(n,e){return fs.current.useMemo(n,e)};Ie.useReducer=function(n,e,t){return fs.current.useReducer(n,e,t)};Ie.useRef=function(n){return fs.current.useRef(n)};Ie.useState=function(n){return fs.current.useState(n)};Ie.useSyncExternalStore=function(n,e,t){return fs.current.useSyncExternalStore(n,e,t)};Ie.useTransition=function(){return fs.current.useTransition()};Ie.version="18.3.1";yP.exports=Ie;var x=yP.exports;const ut=mC(x),EP=u5({__proto__:null,default:ut},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E5=x,k5=Symbol.for("react.element"),T5=Symbol.for("react.fragment"),P5=Object.prototype.hasOwnProperty,_5=E5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,M5={key:!0,ref:!0,__self:!0,__source:!0};function kP(n,e,t){var s,r={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)P5.call(e,s)&&!M5.hasOwnProperty(s)&&(r[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:k5,type:n,key:i,ref:o,props:r,_owner:_5.current}}ew.Fragment=T5;ew.jsx=kP;ew.jsxs=kP;xP.exports=ew;var a=xP.exports,TP={exports:{}},mr={},PP={exports:{}},_P={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e($,K){var D=$.length;$.push(K);e:for(;0<D;){var M=D-1>>>1,q=$[M];if(0<r(q,K))$[M]=K,$[D]=q,D=M;else break e}}function t($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var K=$[0],D=$.pop();if(D!==K){$[0]=D;e:for(var M=0,q=$.length,z=q>>>1;M<z;){var G=2*(M+1)-1,W=$[G],X=G+1,V=$[X];if(0>r(W,D))X<q&&0>r(V,W)?($[M]=V,$[X]=D,M=X):($[M]=W,$[G]=D,M=G);else if(X<q&&0>r(V,D))$[M]=V,$[X]=D,M=X;else break e}}return K}function r($,K){var D=$.sortIndex-K.sortIndex;return D!==0?D:$.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var d=[],u=[],h=1,f=null,m=3,p=!1,b=!1,g=!1,N=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S($){for(var K=t(u);K!==null;){if(K.callback===null)s(u);else if(K.startTime<=$)s(u),K.sortIndex=K.expirationTime,e(d,K);else break;K=t(u)}}function w($){if(g=!1,S($),!b)if(t(d)!==null)b=!0,F(j);else{var K=t(u);K!==null&&H(w,K.startTime-$)}}function j($,K){b=!1,g&&(g=!1,v(P),P=-1),p=!0;var D=m;try{for(S(K),f=t(d);f!==null&&(!(f.expirationTime>K)||$&&!I());){var M=f.callback;if(typeof M=="function"){f.callback=null,m=f.priorityLevel;var q=M(f.expirationTime<=K);K=n.unstable_now(),typeof q=="function"?f.callback=q:f===t(d)&&s(d),S(K)}else s(d);f=t(d)}if(f!==null)var z=!0;else{var G=t(u);G!==null&&H(w,G.startTime-K),z=!1}return z}finally{f=null,m=D,p=!1}}var E=!1,T=null,P=-1,_=5,R=-1;function I(){return!(n.unstable_now()-R<_)}function L(){if(T!==null){var $=n.unstable_now();R=$;var K=!0;try{K=T(!0,$)}finally{K?U():(E=!1,T=null)}}else E=!1}var U;if(typeof y=="function")U=function(){y(L)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,Q=B.port2;B.port1.onmessage=L,U=function(){Q.postMessage(null)}}else U=function(){N(L,0)};function F($){T=$,E||(E=!0,U())}function H($,K){P=N(function(){$(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){b||p||(b=!0,F(j))},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function($){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var D=m;m=K;try{return $()}finally{m=D}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,K){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var D=m;m=$;try{return K()}finally{m=D}},n.unstable_scheduleCallback=function($,K,D){var M=n.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?M+D:M):D=M,$){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=D+q,$={id:h++,callback:K,priorityLevel:$,startTime:D,expirationTime:q,sortIndex:-1},D>M?($.sortIndex=D,e(u,$),t(d)===null&&$===t(u)&&(g?(v(P),P=-1):g=!0,H(w,D-M))):($.sortIndex=q,e(d,$),b||p||(b=!0,F(j))),$},n.unstable_shouldYield=I,n.unstable_wrapCallback=function($){var K=m;return function(){var D=m;m=K;try{return $.apply(this,arguments)}finally{m=D}}}})(_P);PP.exports=_P;var R5=PP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D5=x,hr=R5;function te(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var MP=new Set,Zp={};function Mu(n,e){xm(n,e),xm(n+"Capture",e)}function xm(n,e){for(Zp[n]=e,n=0;n<e.length;n++)MP.add(e[n])}var Co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lS=Object.prototype.hasOwnProperty,I5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ZE={},ek={};function L5(n){return lS.call(ek,n)?!0:lS.call(ZE,n)?!1:I5.test(n)?ek[n]=!0:(ZE[n]=!0,!1)}function F5(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function O5(n,e,t,s){if(e===null||typeof e>"u"||F5(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ms(n,e,t,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Fn[n]=new ms(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Fn[e]=new ms(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Fn[n]=new ms(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Fn[n]=new ms(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Fn[n]=new ms(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Fn[n]=new ms(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Fn[n]=new ms(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Fn[n]=new ms(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Fn[n]=new ms(n,5,!1,n.toLowerCase(),null,!1,!1)});var vC=/[\-:]([a-z])/g;function bC(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(vC,bC);Fn[e]=new ms(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(vC,bC);Fn[e]=new ms(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(vC,bC);Fn[e]=new ms(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Fn[n]=new ms(n,1,!1,n.toLowerCase(),null,!1,!1)});Fn.xlinkHref=new ms("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Fn[n]=new ms(n,1,!1,n.toLowerCase(),null,!0,!0)});function wC(n,e,t,s){var r=Fn.hasOwnProperty(e)?Fn[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(O5(e,t,r,s)&&(t=null),s||r===null?L5(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,s=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var Oo=D5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yy=Symbol.for("react.element"),eh=Symbol.for("react.portal"),th=Symbol.for("react.fragment"),SC=Symbol.for("react.strict_mode"),cS=Symbol.for("react.profiler"),RP=Symbol.for("react.provider"),DP=Symbol.for("react.context"),NC=Symbol.for("react.forward_ref"),dS=Symbol.for("react.suspense"),uS=Symbol.for("react.suspense_list"),jC=Symbol.for("react.memo"),Xo=Symbol.for("react.lazy"),IP=Symbol.for("react.offscreen"),tk=Symbol.iterator;function Xm(n){return n===null||typeof n!="object"?null:(n=tk&&n[tk]||n["@@iterator"],typeof n=="function"?n:null)}var Ft=Object.assign,l1;function hp(n){if(l1===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);l1=e&&e[1]||""}return`
`+l1+n}var c1=!1;function d1(n,e){if(!n||c1)return"";c1=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){s=u}n.call(e.prototype)}else{try{throw Error()}catch(u){s=u}n()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,l=i.length-1;1<=o&&0<=l&&r[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==i[l]){var d=`
`+r[o].replace(" at new "," at ");return n.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",n.displayName)),d}while(1<=o&&0<=l);break}}}finally{c1=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?hp(n):""}function B5(n){switch(n.tag){case 5:return hp(n.type);case 16:return hp("Lazy");case 13:return hp("Suspense");case 19:return hp("SuspenseList");case 0:case 2:case 15:return n=d1(n.type,!1),n;case 11:return n=d1(n.type.render,!1),n;case 1:return n=d1(n.type,!0),n;default:return""}}function hS(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case th:return"Fragment";case eh:return"Portal";case cS:return"Profiler";case SC:return"StrictMode";case dS:return"Suspense";case uS:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case DP:return(n.displayName||"Context")+".Consumer";case RP:return(n._context.displayName||"Context")+".Provider";case NC:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case jC:return e=n.displayName||null,e!==null?e:hS(n.type)||"Memo";case Xo:e=n._payload,n=n._init;try{return hS(n(e))}catch{}}return null}function $5(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hS(e);case 8:return e===SC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gc(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function LP(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function z5(n){var e=LP(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Xy(n){n._valueTracker||(n._valueTracker=z5(n))}function FP(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=LP(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function R0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function fS(n,e){var t=e.checked;return Ft({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function nk(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=gc(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function OP(n,e){e=e.checked,e!=null&&wC(n,"checked",e,!1)}function mS(n,e){OP(n,e);var t=gc(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?pS(n,e.type,t):e.hasOwnProperty("defaultValue")&&pS(n,e.type,gc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function sk(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function pS(n,e,t){(e!=="number"||R0(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var fp=Array.isArray;function xh(n,e,t,s){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&s&&(n[t].defaultSelected=!0)}else{for(t=""+gc(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,s&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function gS(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return Ft({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function rk(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(te(92));if(fp(t)){if(1<t.length)throw Error(te(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:gc(t)}}function BP(n,e){var t=gc(e.value),s=gc(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function ik(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function $P(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xS(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?$P(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Qy,zP=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Qy=Qy||document.createElement("div"),Qy.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qy.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function eg(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Bp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},U5=["Webkit","ms","Moz","O"];Object.keys(Bp).forEach(function(n){U5.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Bp[e]=Bp[n]})});function UP(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Bp.hasOwnProperty(n)&&Bp[n]?(""+e).trim():e+"px"}function HP(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,r=UP(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,r):n[t]=r}}var H5=Ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yS(n,e){if(e){if(H5[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function vS(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bS=null;function CC(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var wS=null,yh=null,vh=null;function ak(n){if(n=by(n)){if(typeof wS!="function")throw Error(te(280));var e=n.stateNode;e&&(e=iw(e),wS(n.stateNode,n.type,e))}}function VP(n){yh?vh?vh.push(n):vh=[n]:yh=n}function WP(){if(yh){var n=yh,e=vh;if(vh=yh=null,ak(n),e)for(n=0;n<e.length;n++)ak(e[n])}}function GP(n,e){return n(e)}function qP(){}var u1=!1;function KP(n,e,t){if(u1)return n(e,t);u1=!0;try{return GP(n,e,t)}finally{u1=!1,(yh!==null||vh!==null)&&(qP(),WP())}}function tg(n,e){var t=n.stateNode;if(t===null)return null;var s=iw(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(te(231,e,typeof t));return t}var SS=!1;if(Co)try{var Qm={};Object.defineProperty(Qm,"passive",{get:function(){SS=!0}}),window.addEventListener("test",Qm,Qm),window.removeEventListener("test",Qm,Qm)}catch{SS=!1}function V5(n,e,t,s,r,i,o,l,d){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var $p=!1,D0=null,I0=!1,NS=null,W5={onError:function(n){$p=!0,D0=n}};function G5(n,e,t,s,r,i,o,l,d){$p=!1,D0=null,V5.apply(W5,arguments)}function q5(n,e,t,s,r,i,o,l,d){if(G5.apply(this,arguments),$p){if($p){var u=D0;$p=!1,D0=null}else throw Error(te(198));I0||(I0=!0,NS=u)}}function Ru(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function YP(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function ok(n){if(Ru(n)!==n)throw Error(te(188))}function K5(n){var e=n.alternate;if(!e){if(e=Ru(n),e===null)throw Error(te(188));return e!==n?null:n}for(var t=n,s=e;;){var r=t.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){t=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===t)return ok(r),n;if(i===s)return ok(r),e;i=i.sibling}throw Error(te(188))}if(t.return!==s.return)t=r,s=i;else{for(var o=!1,l=r.child;l;){if(l===t){o=!0,t=r,s=i;break}if(l===s){o=!0,s=r,t=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===t){o=!0,t=i,s=r;break}if(l===s){o=!0,s=i,t=r;break}l=l.sibling}if(!o)throw Error(te(189))}}if(t.alternate!==s)throw Error(te(190))}if(t.tag!==3)throw Error(te(188));return t.stateNode.current===t?n:e}function XP(n){return n=K5(n),n!==null?QP(n):null}function QP(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=QP(n);if(e!==null)return e;n=n.sibling}return null}var JP=hr.unstable_scheduleCallback,lk=hr.unstable_cancelCallback,Y5=hr.unstable_shouldYield,X5=hr.unstable_requestPaint,Qt=hr.unstable_now,Q5=hr.unstable_getCurrentPriorityLevel,AC=hr.unstable_ImmediatePriority,ZP=hr.unstable_UserBlockingPriority,L0=hr.unstable_NormalPriority,J5=hr.unstable_LowPriority,e_=hr.unstable_IdlePriority,tw=null,da=null;function Z5(n){if(da&&typeof da.onCommitFiberRoot=="function")try{da.onCommitFiberRoot(tw,n,void 0,(n.current.flags&128)===128)}catch{}}var pi=Math.clz32?Math.clz32:nB,eB=Math.log,tB=Math.LN2;function nB(n){return n>>>=0,n===0?32:31-(eB(n)/tB|0)|0}var Jy=64,Zy=4194304;function mp(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function F0(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,r=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var l=o&~r;l!==0?s=mp(l):(i&=o,i!==0&&(s=mp(i)))}else o=t&~r,o!==0?s=mp(o):i!==0&&(s=mp(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-pi(e),r=1<<t,s|=n[t],e&=~r;return s}function sB(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rB(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,r=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-pi(i),l=1<<o,d=r[o];d===-1?(!(l&t)||l&s)&&(r[o]=sB(l,e)):d<=e&&(n.expiredLanes|=l),i&=~l}}function jS(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function t_(){var n=Jy;return Jy<<=1,!(Jy&4194240)&&(Jy=64),n}function h1(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function yy(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-pi(e),n[e]=t}function iB(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-pi(t),i=1<<r;e[r]=0,s[r]=-1,n[r]=-1,t&=~i}}function EC(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-pi(t),r=1<<s;r&e|n[s]&e&&(n[s]|=e),t&=~r}}var Ze=0;function n_(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var s_,kC,r_,i_,a_,CS=!1,ev=[],ic=null,ac=null,oc=null,ng=new Map,sg=new Map,Jo=[],aB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ck(n,e){switch(n){case"focusin":case"focusout":ic=null;break;case"dragenter":case"dragleave":ac=null;break;case"mouseover":case"mouseout":oc=null;break;case"pointerover":case"pointerout":ng.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sg.delete(e.pointerId)}}function Jm(n,e,t,s,r,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=by(e),e!==null&&kC(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function oB(n,e,t,s,r){switch(e){case"focusin":return ic=Jm(ic,n,e,t,s,r),!0;case"dragenter":return ac=Jm(ac,n,e,t,s,r),!0;case"mouseover":return oc=Jm(oc,n,e,t,s,r),!0;case"pointerover":var i=r.pointerId;return ng.set(i,Jm(ng.get(i)||null,n,e,t,s,r)),!0;case"gotpointercapture":return i=r.pointerId,sg.set(i,Jm(sg.get(i)||null,n,e,t,s,r)),!0}return!1}function o_(n){var e=Wc(n.target);if(e!==null){var t=Ru(e);if(t!==null){if(e=t.tag,e===13){if(e=YP(t),e!==null){n.blockedOn=e,a_(n.priority,function(){r_(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Rv(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=AS(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);bS=s,t.target.dispatchEvent(s),bS=null}else return e=by(t),e!==null&&kC(e),n.blockedOn=t,!1;e.shift()}return!0}function dk(n,e,t){Rv(n)&&t.delete(e)}function lB(){CS=!1,ic!==null&&Rv(ic)&&(ic=null),ac!==null&&Rv(ac)&&(ac=null),oc!==null&&Rv(oc)&&(oc=null),ng.forEach(dk),sg.forEach(dk)}function Zm(n,e){n.blockedOn===e&&(n.blockedOn=null,CS||(CS=!0,hr.unstable_scheduleCallback(hr.unstable_NormalPriority,lB)))}function rg(n){function e(r){return Zm(r,n)}if(0<ev.length){Zm(ev[0],n);for(var t=1;t<ev.length;t++){var s=ev[t];s.blockedOn===n&&(s.blockedOn=null)}}for(ic!==null&&Zm(ic,n),ac!==null&&Zm(ac,n),oc!==null&&Zm(oc,n),ng.forEach(e),sg.forEach(e),t=0;t<Jo.length;t++)s=Jo[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<Jo.length&&(t=Jo[0],t.blockedOn===null);)o_(t),t.blockedOn===null&&Jo.shift()}var bh=Oo.ReactCurrentBatchConfig,O0=!0;function cB(n,e,t,s){var r=Ze,i=bh.transition;bh.transition=null;try{Ze=1,TC(n,e,t,s)}finally{Ze=r,bh.transition=i}}function dB(n,e,t,s){var r=Ze,i=bh.transition;bh.transition=null;try{Ze=4,TC(n,e,t,s)}finally{Ze=r,bh.transition=i}}function TC(n,e,t,s){if(O0){var r=AS(n,e,t,s);if(r===null)S1(n,e,s,B0,t),ck(n,s);else if(oB(r,n,e,t,s))s.stopPropagation();else if(ck(n,s),e&4&&-1<aB.indexOf(n)){for(;r!==null;){var i=by(r);if(i!==null&&s_(i),i=AS(n,e,t,s),i===null&&S1(n,e,s,B0,t),i===r)break;r=i}r!==null&&s.stopPropagation()}else S1(n,e,s,null,t)}}var B0=null;function AS(n,e,t,s){if(B0=null,n=CC(s),n=Wc(n),n!==null)if(e=Ru(n),e===null)n=null;else if(t=e.tag,t===13){if(n=YP(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return B0=n,null}function l_(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Q5()){case AC:return 1;case ZP:return 4;case L0:case J5:return 16;case e_:return 536870912;default:return 16}default:return 16}}var sc=null,PC=null,Dv=null;function c_(){if(Dv)return Dv;var n,e=PC,t=e.length,s,r="value"in sc?sc.value:sc.textContent,i=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(s=1;s<=o&&e[t-s]===r[i-s];s++);return Dv=r.slice(n,1<s?1-s:void 0)}function Iv(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function tv(){return!0}function uk(){return!1}function pr(n){function e(t,s,r,i,o){this._reactName=t,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(t=n[l],this[l]=t?t(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?tv:uk,this.isPropagationStopped=uk,this}return Ft(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=tv)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=tv)},persist:function(){},isPersistent:tv}),e}var Lm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_C=pr(Lm),vy=Ft({},Lm,{view:0,detail:0}),uB=pr(vy),f1,m1,ep,nw=Ft({},vy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:MC,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ep&&(ep&&n.type==="mousemove"?(f1=n.screenX-ep.screenX,m1=n.screenY-ep.screenY):m1=f1=0,ep=n),f1)},movementY:function(n){return"movementY"in n?n.movementY:m1}}),hk=pr(nw),hB=Ft({},nw,{dataTransfer:0}),fB=pr(hB),mB=Ft({},vy,{relatedTarget:0}),p1=pr(mB),pB=Ft({},Lm,{animationName:0,elapsedTime:0,pseudoElement:0}),gB=pr(pB),xB=Ft({},Lm,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),yB=pr(xB),vB=Ft({},Lm,{data:0}),fk=pr(vB),bB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NB(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=SB[n])?!!e[n]:!1}function MC(){return NB}var jB=Ft({},vy,{key:function(n){if(n.key){var e=bB[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Iv(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?wB[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:MC,charCode:function(n){return n.type==="keypress"?Iv(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Iv(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),CB=pr(jB),AB=Ft({},nw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mk=pr(AB),EB=Ft({},vy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:MC}),kB=pr(EB),TB=Ft({},Lm,{propertyName:0,elapsedTime:0,pseudoElement:0}),PB=pr(TB),_B=Ft({},nw,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),MB=pr(_B),RB=[9,13,27,32],RC=Co&&"CompositionEvent"in window,zp=null;Co&&"documentMode"in document&&(zp=document.documentMode);var DB=Co&&"TextEvent"in window&&!zp,d_=Co&&(!RC||zp&&8<zp&&11>=zp),pk=" ",gk=!1;function u_(n,e){switch(n){case"keyup":return RB.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function h_(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var nh=!1;function IB(n,e){switch(n){case"compositionend":return h_(e);case"keypress":return e.which!==32?null:(gk=!0,pk);case"textInput":return n=e.data,n===pk&&gk?null:n;default:return null}}function LB(n,e){if(nh)return n==="compositionend"||!RC&&u_(n,e)?(n=c_(),Dv=PC=sc=null,nh=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return d_&&e.locale!=="ko"?null:e.data;default:return null}}var FB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xk(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!FB[n.type]:e==="textarea"}function f_(n,e,t,s){VP(s),e=$0(e,"onChange"),0<e.length&&(t=new _C("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var Up=null,ig=null;function OB(n){j_(n,0)}function sw(n){var e=ih(n);if(FP(e))return n}function BB(n,e){if(n==="change")return e}var m_=!1;if(Co){var g1;if(Co){var x1="oninput"in document;if(!x1){var yk=document.createElement("div");yk.setAttribute("oninput","return;"),x1=typeof yk.oninput=="function"}g1=x1}else g1=!1;m_=g1&&(!document.documentMode||9<document.documentMode)}function vk(){Up&&(Up.detachEvent("onpropertychange",p_),ig=Up=null)}function p_(n){if(n.propertyName==="value"&&sw(ig)){var e=[];f_(e,ig,n,CC(n)),KP(OB,e)}}function $B(n,e,t){n==="focusin"?(vk(),Up=e,ig=t,Up.attachEvent("onpropertychange",p_)):n==="focusout"&&vk()}function zB(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return sw(ig)}function UB(n,e){if(n==="click")return sw(e)}function HB(n,e){if(n==="input"||n==="change")return sw(e)}function VB(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var vi=typeof Object.is=="function"?Object.is:VB;function ag(n,e){if(vi(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var r=t[s];if(!lS.call(e,r)||!vi(n[r],e[r]))return!1}return!0}function bk(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function wk(n,e){var t=bk(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=bk(t)}}function g_(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?g_(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function x_(){for(var n=window,e=R0();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=R0(n.document)}return e}function DC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function WB(n){var e=x_(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&g_(t.ownerDocument.documentElement,t)){if(s!==null&&DC(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!n.extend&&i>s&&(r=s,s=i,i=r),r=wk(t,i);var o=wk(t,s);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),i>s?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var GB=Co&&"documentMode"in document&&11>=document.documentMode,sh=null,ES=null,Hp=null,kS=!1;function Sk(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;kS||sh==null||sh!==R0(s)||(s=sh,"selectionStart"in s&&DC(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Hp&&ag(Hp,s)||(Hp=s,s=$0(ES,"onSelect"),0<s.length&&(e=new _C("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=sh)))}function nv(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var rh={animationend:nv("Animation","AnimationEnd"),animationiteration:nv("Animation","AnimationIteration"),animationstart:nv("Animation","AnimationStart"),transitionend:nv("Transition","TransitionEnd")},y1={},y_={};Co&&(y_=document.createElement("div").style,"AnimationEvent"in window||(delete rh.animationend.animation,delete rh.animationiteration.animation,delete rh.animationstart.animation),"TransitionEvent"in window||delete rh.transitionend.transition);function rw(n){if(y1[n])return y1[n];if(!rh[n])return n;var e=rh[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in y_)return y1[n]=e[t];return n}var v_=rw("animationend"),b_=rw("animationiteration"),w_=rw("animationstart"),S_=rw("transitionend"),N_=new Map,Nk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tc(n,e){N_.set(n,e),Mu(e,[n])}for(var v1=0;v1<Nk.length;v1++){var b1=Nk[v1],qB=b1.toLowerCase(),KB=b1[0].toUpperCase()+b1.slice(1);Tc(qB,"on"+KB)}Tc(v_,"onAnimationEnd");Tc(b_,"onAnimationIteration");Tc(w_,"onAnimationStart");Tc("dblclick","onDoubleClick");Tc("focusin","onFocus");Tc("focusout","onBlur");Tc(S_,"onTransitionEnd");xm("onMouseEnter",["mouseout","mouseover"]);xm("onMouseLeave",["mouseout","mouseover"]);xm("onPointerEnter",["pointerout","pointerover"]);xm("onPointerLeave",["pointerout","pointerover"]);Mu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YB=new Set("cancel close invalid load scroll toggle".split(" ").concat(pp));function jk(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,q5(s,e,void 0,n),n.currentTarget=null}function j_(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],d=l.instance,u=l.currentTarget;if(l=l.listener,d!==i&&r.isPropagationStopped())break e;jk(r,l,u),i=d}else for(o=0;o<s.length;o++){if(l=s[o],d=l.instance,u=l.currentTarget,l=l.listener,d!==i&&r.isPropagationStopped())break e;jk(r,l,u),i=d}}}if(I0)throw n=NS,I0=!1,NS=null,n}function vt(n,e){var t=e[RS];t===void 0&&(t=e[RS]=new Set);var s=n+"__bubble";t.has(s)||(C_(e,n,2,!1),t.add(s))}function w1(n,e,t){var s=0;e&&(s|=4),C_(t,n,s,e)}var sv="_reactListening"+Math.random().toString(36).slice(2);function og(n){if(!n[sv]){n[sv]=!0,MP.forEach(function(t){t!=="selectionchange"&&(YB.has(t)||w1(t,!1,n),w1(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[sv]||(e[sv]=!0,w1("selectionchange",!1,e))}}function C_(n,e,t,s){switch(l_(e)){case 1:var r=cB;break;case 4:r=dB;break;default:r=TC}t=r.bind(null,e,t,n),r=void 0,!SS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function S1(n,e,t,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;o=o.return}for(;l!==null;){if(o=Wc(l),o===null)return;if(d=o.tag,d===5||d===6){s=i=o;continue e}l=l.parentNode}}s=s.return}KP(function(){var u=i,h=CC(t),f=[];e:{var m=N_.get(n);if(m!==void 0){var p=_C,b=n;switch(n){case"keypress":if(Iv(t)===0)break e;case"keydown":case"keyup":p=CB;break;case"focusin":b="focus",p=p1;break;case"focusout":b="blur",p=p1;break;case"beforeblur":case"afterblur":p=p1;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=hk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=fB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=kB;break;case v_:case b_:case w_:p=gB;break;case S_:p=PB;break;case"scroll":p=uB;break;case"wheel":p=MB;break;case"copy":case"cut":case"paste":p=yB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=mk}var g=(e&4)!==0,N=!g&&n==="scroll",v=g?m!==null?m+"Capture":null:m;g=[];for(var y=u,S;y!==null;){S=y;var w=S.stateNode;if(S.tag===5&&w!==null&&(S=w,v!==null&&(w=tg(y,v),w!=null&&g.push(lg(y,w,S)))),N)break;y=y.return}0<g.length&&(m=new p(m,b,null,t,h),f.push({event:m,listeners:g}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",m&&t!==bS&&(b=t.relatedTarget||t.fromElement)&&(Wc(b)||b[Ao]))break e;if((p||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,p?(b=t.relatedTarget||t.toElement,p=u,b=b?Wc(b):null,b!==null&&(N=Ru(b),b!==N||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=u),p!==b)){if(g=hk,w="onMouseLeave",v="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(g=mk,w="onPointerLeave",v="onPointerEnter",y="pointer"),N=p==null?m:ih(p),S=b==null?m:ih(b),m=new g(w,y+"leave",p,t,h),m.target=N,m.relatedTarget=S,w=null,Wc(h)===u&&(g=new g(v,y+"enter",b,t,h),g.target=S,g.relatedTarget=N,w=g),N=w,p&&b)t:{for(g=p,v=b,y=0,S=g;S;S=$u(S))y++;for(S=0,w=v;w;w=$u(w))S++;for(;0<y-S;)g=$u(g),y--;for(;0<S-y;)v=$u(v),S--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break t;g=$u(g),v=$u(v)}g=null}else g=null;p!==null&&Ck(f,m,p,g,!1),b!==null&&N!==null&&Ck(f,N,b,g,!0)}}e:{if(m=u?ih(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var j=BB;else if(xk(m))if(m_)j=HB;else{j=zB;var E=$B}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=UB);if(j&&(j=j(n,u))){f_(f,j,t,h);break e}E&&E(n,m,u),n==="focusout"&&(E=m._wrapperState)&&E.controlled&&m.type==="number"&&pS(m,"number",m.value)}switch(E=u?ih(u):window,n){case"focusin":(xk(E)||E.contentEditable==="true")&&(sh=E,ES=u,Hp=null);break;case"focusout":Hp=ES=sh=null;break;case"mousedown":kS=!0;break;case"contextmenu":case"mouseup":case"dragend":kS=!1,Sk(f,t,h);break;case"selectionchange":if(GB)break;case"keydown":case"keyup":Sk(f,t,h)}var T;if(RC)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else nh?u_(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(d_&&t.locale!=="ko"&&(nh||P!=="onCompositionStart"?P==="onCompositionEnd"&&nh&&(T=c_()):(sc=h,PC="value"in sc?sc.value:sc.textContent,nh=!0)),E=$0(u,P),0<E.length&&(P=new fk(P,n,null,t,h),f.push({event:P,listeners:E}),T?P.data=T:(T=h_(t),T!==null&&(P.data=T)))),(T=DB?IB(n,t):LB(n,t))&&(u=$0(u,"onBeforeInput"),0<u.length&&(h=new fk("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:u}),h.data=T))}j_(f,e)})}function lg(n,e,t){return{instance:n,listener:e,currentTarget:t}}function $0(n,e){for(var t=e+"Capture",s=[];n!==null;){var r=n,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=tg(n,t),i!=null&&s.unshift(lg(n,i,r)),i=tg(n,e),i!=null&&s.push(lg(n,i,r))),n=n.return}return s}function $u(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Ck(n,e,t,s,r){for(var i=e._reactName,o=[];t!==null&&t!==s;){var l=t,d=l.alternate,u=l.stateNode;if(d!==null&&d===s)break;l.tag===5&&u!==null&&(l=u,r?(d=tg(t,i),d!=null&&o.unshift(lg(t,d,l))):r||(d=tg(t,i),d!=null&&o.push(lg(t,d,l)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var XB=/\r\n?/g,QB=/\u0000|\uFFFD/g;function Ak(n){return(typeof n=="string"?n:""+n).replace(XB,`
`).replace(QB,"")}function rv(n,e,t){if(e=Ak(e),Ak(n)!==e&&t)throw Error(te(425))}function z0(){}var TS=null,PS=null;function _S(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var MS=typeof setTimeout=="function"?setTimeout:void 0,JB=typeof clearTimeout=="function"?clearTimeout:void 0,Ek=typeof Promise=="function"?Promise:void 0,ZB=typeof queueMicrotask=="function"?queueMicrotask:typeof Ek<"u"?function(n){return Ek.resolve(null).then(n).catch(e6)}:MS;function e6(n){setTimeout(function(){throw n})}function N1(n,e){var t=e,s=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(s===0){n.removeChild(r),rg(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=r}while(t);rg(e)}function lc(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function kk(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Fm=Math.random().toString(36).slice(2),aa="__reactFiber$"+Fm,cg="__reactProps$"+Fm,Ao="__reactContainer$"+Fm,RS="__reactEvents$"+Fm,t6="__reactListeners$"+Fm,n6="__reactHandles$"+Fm;function Wc(n){var e=n[aa];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ao]||t[aa]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=kk(n);n!==null;){if(t=n[aa])return t;n=kk(n)}return e}n=t,t=n.parentNode}return null}function by(n){return n=n[aa]||n[Ao],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ih(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(te(33))}function iw(n){return n[cg]||null}var DS=[],ah=-1;function Pc(n){return{current:n}}function St(n){0>ah||(n.current=DS[ah],DS[ah]=null,ah--)}function mt(n,e){ah++,DS[ah]=n.current,n.current=e}var xc={},es=Pc(xc),Ps=Pc(!1),gu=xc;function ym(n,e){var t=n.type.contextTypes;if(!t)return xc;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in t)r[i]=e[i];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function _s(n){return n=n.childContextTypes,n!=null}function U0(){St(Ps),St(es)}function Tk(n,e,t){if(es.current!==xc)throw Error(te(168));mt(es,e),mt(Ps,t)}function A_(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(te(108,$5(n)||"Unknown",r));return Ft({},t,s)}function H0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||xc,gu=es.current,mt(es,n),mt(Ps,Ps.current),!0}function Pk(n,e,t){var s=n.stateNode;if(!s)throw Error(te(169));t?(n=A_(n,e,gu),s.__reactInternalMemoizedMergedChildContext=n,St(Ps),St(es),mt(es,n)):St(Ps),mt(Ps,t)}var Ma=null,aw=!1,j1=!1;function E_(n){Ma===null?Ma=[n]:Ma.push(n)}function s6(n){aw=!0,E_(n)}function _c(){if(!j1&&Ma!==null){j1=!0;var n=0,e=Ze;try{var t=Ma;for(Ze=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}Ma=null,aw=!1}catch(r){throw Ma!==null&&(Ma=Ma.slice(n+1)),JP(AC,_c),r}finally{Ze=e,j1=!1}}return null}var oh=[],lh=0,V0=null,W0=0,Rr=[],Dr=0,xu=null,go=1,xo="";function Lc(n,e){oh[lh++]=W0,oh[lh++]=V0,V0=n,W0=e}function k_(n,e,t){Rr[Dr++]=go,Rr[Dr++]=xo,Rr[Dr++]=xu,xu=n;var s=go;n=xo;var r=32-pi(s)-1;s&=~(1<<r),t+=1;var i=32-pi(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,go=1<<32-pi(e)+r|t<<r|s,xo=i+n}else go=1<<i|t<<r|s,xo=n}function IC(n){n.return!==null&&(Lc(n,1),k_(n,1,0))}function LC(n){for(;n===V0;)V0=oh[--lh],oh[lh]=null,W0=oh[--lh],oh[lh]=null;for(;n===xu;)xu=Rr[--Dr],Rr[Dr]=null,xo=Rr[--Dr],Rr[Dr]=null,go=Rr[--Dr],Rr[Dr]=null}var ar=null,ir=null,Pt=!1,hi=null;function T_(n,e){var t=Or(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function _k(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ar=n,ir=lc(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ar=n,ir=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=xu!==null?{id:go,overflow:xo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Or(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ar=n,ir=null,!0):!1;default:return!1}}function IS(n){return(n.mode&1)!==0&&(n.flags&128)===0}function LS(n){if(Pt){var e=ir;if(e){var t=e;if(!_k(n,e)){if(IS(n))throw Error(te(418));e=lc(t.nextSibling);var s=ar;e&&_k(n,e)?T_(s,t):(n.flags=n.flags&-4097|2,Pt=!1,ar=n)}}else{if(IS(n))throw Error(te(418));n.flags=n.flags&-4097|2,Pt=!1,ar=n}}}function Mk(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ar=n}function iv(n){if(n!==ar)return!1;if(!Pt)return Mk(n),Pt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!_S(n.type,n.memoizedProps)),e&&(e=ir)){if(IS(n))throw P_(),Error(te(418));for(;e;)T_(n,e),e=lc(e.nextSibling)}if(Mk(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(te(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ir=lc(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ir=null}}else ir=ar?lc(n.stateNode.nextSibling):null;return!0}function P_(){for(var n=ir;n;)n=lc(n.nextSibling)}function vm(){ir=ar=null,Pt=!1}function FC(n){hi===null?hi=[n]:hi.push(n)}var r6=Oo.ReactCurrentBatchConfig;function tp(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(te(309));var s=t.stateNode}if(!s)throw Error(te(147,n));var r=s,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=r.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error(te(284));if(!t._owner)throw Error(te(290,n))}return n}function av(n,e){throw n=Object.prototype.toString.call(e),Error(te(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Rk(n){var e=n._init;return e(n._payload)}function __(n){function e(v,y){if(n){var S=v.deletions;S===null?(v.deletions=[y],v.flags|=16):S.push(y)}}function t(v,y){if(!n)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function s(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function r(v,y){return v=hc(v,y),v.index=0,v.sibling=null,v}function i(v,y,S){return v.index=S,n?(S=v.alternate,S!==null?(S=S.index,S<y?(v.flags|=2,y):S):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function l(v,y,S,w){return y===null||y.tag!==6?(y=_1(S,v.mode,w),y.return=v,y):(y=r(y,S),y.return=v,y)}function d(v,y,S,w){var j=S.type;return j===th?h(v,y,S.props.children,w,S.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Xo&&Rk(j)===y.type)?(w=r(y,S.props),w.ref=tp(v,y,S),w.return=v,w):(w=Uv(S.type,S.key,S.props,null,v.mode,w),w.ref=tp(v,y,S),w.return=v,w)}function u(v,y,S,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=M1(S,v.mode,w),y.return=v,y):(y=r(y,S.children||[]),y.return=v,y)}function h(v,y,S,w,j){return y===null||y.tag!==7?(y=pu(S,v.mode,w,j),y.return=v,y):(y=r(y,S),y.return=v,y)}function f(v,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=_1(""+y,v.mode,S),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Yy:return S=Uv(y.type,y.key,y.props,null,v.mode,S),S.ref=tp(v,null,y),S.return=v,S;case eh:return y=M1(y,v.mode,S),y.return=v,y;case Xo:var w=y._init;return f(v,w(y._payload),S)}if(fp(y)||Xm(y))return y=pu(y,v.mode,S,null),y.return=v,y;av(v,y)}return null}function m(v,y,S,w){var j=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return j!==null?null:l(v,y,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Yy:return S.key===j?d(v,y,S,w):null;case eh:return S.key===j?u(v,y,S,w):null;case Xo:return j=S._init,m(v,y,j(S._payload),w)}if(fp(S)||Xm(S))return j!==null?null:h(v,y,S,w,null);av(v,S)}return null}function p(v,y,S,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(S)||null,l(y,v,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Yy:return v=v.get(w.key===null?S:w.key)||null,d(y,v,w,j);case eh:return v=v.get(w.key===null?S:w.key)||null,u(y,v,w,j);case Xo:var E=w._init;return p(v,y,S,E(w._payload),j)}if(fp(w)||Xm(w))return v=v.get(S)||null,h(y,v,w,j,null);av(y,w)}return null}function b(v,y,S,w){for(var j=null,E=null,T=y,P=y=0,_=null;T!==null&&P<S.length;P++){T.index>P?(_=T,T=null):_=T.sibling;var R=m(v,T,S[P],w);if(R===null){T===null&&(T=_);break}n&&T&&R.alternate===null&&e(v,T),y=i(R,y,P),E===null?j=R:E.sibling=R,E=R,T=_}if(P===S.length)return t(v,T),Pt&&Lc(v,P),j;if(T===null){for(;P<S.length;P++)T=f(v,S[P],w),T!==null&&(y=i(T,y,P),E===null?j=T:E.sibling=T,E=T);return Pt&&Lc(v,P),j}for(T=s(v,T);P<S.length;P++)_=p(T,v,P,S[P],w),_!==null&&(n&&_.alternate!==null&&T.delete(_.key===null?P:_.key),y=i(_,y,P),E===null?j=_:E.sibling=_,E=_);return n&&T.forEach(function(I){return e(v,I)}),Pt&&Lc(v,P),j}function g(v,y,S,w){var j=Xm(S);if(typeof j!="function")throw Error(te(150));if(S=j.call(S),S==null)throw Error(te(151));for(var E=j=null,T=y,P=y=0,_=null,R=S.next();T!==null&&!R.done;P++,R=S.next()){T.index>P?(_=T,T=null):_=T.sibling;var I=m(v,T,R.value,w);if(I===null){T===null&&(T=_);break}n&&T&&I.alternate===null&&e(v,T),y=i(I,y,P),E===null?j=I:E.sibling=I,E=I,T=_}if(R.done)return t(v,T),Pt&&Lc(v,P),j;if(T===null){for(;!R.done;P++,R=S.next())R=f(v,R.value,w),R!==null&&(y=i(R,y,P),E===null?j=R:E.sibling=R,E=R);return Pt&&Lc(v,P),j}for(T=s(v,T);!R.done;P++,R=S.next())R=p(T,v,P,R.value,w),R!==null&&(n&&R.alternate!==null&&T.delete(R.key===null?P:R.key),y=i(R,y,P),E===null?j=R:E.sibling=R,E=R);return n&&T.forEach(function(L){return e(v,L)}),Pt&&Lc(v,P),j}function N(v,y,S,w){if(typeof S=="object"&&S!==null&&S.type===th&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Yy:e:{for(var j=S.key,E=y;E!==null;){if(E.key===j){if(j=S.type,j===th){if(E.tag===7){t(v,E.sibling),y=r(E,S.props.children),y.return=v,v=y;break e}}else if(E.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Xo&&Rk(j)===E.type){t(v,E.sibling),y=r(E,S.props),y.ref=tp(v,E,S),y.return=v,v=y;break e}t(v,E);break}else e(v,E);E=E.sibling}S.type===th?(y=pu(S.props.children,v.mode,w,S.key),y.return=v,v=y):(w=Uv(S.type,S.key,S.props,null,v.mode,w),w.ref=tp(v,y,S),w.return=v,v=w)}return o(v);case eh:e:{for(E=S.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){t(v,y.sibling),y=r(y,S.children||[]),y.return=v,v=y;break e}else{t(v,y);break}else e(v,y);y=y.sibling}y=M1(S,v.mode,w),y.return=v,v=y}return o(v);case Xo:return E=S._init,N(v,y,E(S._payload),w)}if(fp(S))return b(v,y,S,w);if(Xm(S))return g(v,y,S,w);av(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(t(v,y.sibling),y=r(y,S),y.return=v,v=y):(t(v,y),y=_1(S,v.mode,w),y.return=v,v=y),o(v)):t(v,y)}return N}var bm=__(!0),M_=__(!1),G0=Pc(null),q0=null,ch=null,OC=null;function BC(){OC=ch=q0=null}function $C(n){var e=G0.current;St(G0),n._currentValue=e}function FS(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function wh(n,e){q0=n,OC=ch=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Ts=!0),n.firstContext=null)}function Ur(n){var e=n._currentValue;if(OC!==n)if(n={context:n,memoizedValue:e,next:null},ch===null){if(q0===null)throw Error(te(308));ch=n,q0.dependencies={lanes:0,firstContext:n}}else ch=ch.next=n;return e}var Gc=null;function zC(n){Gc===null?Gc=[n]:Gc.push(n)}function R_(n,e,t,s){var r=e.interleaved;return r===null?(t.next=t,zC(e)):(t.next=r.next,r.next=t),e.interleaved=t,Eo(n,s)}function Eo(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Qo=!1;function UC(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D_(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function yo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function cc(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,ze&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,Eo(n,t)}return r=s.interleaved,r===null?(e.next=e,zC(s)):(e.next=r.next,r.next=e),s.interleaved=e,Eo(n,t)}function Lv(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,EC(n,t)}}function Dk(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var r=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?r=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?r=i=e:i=i.next=e}else r=i=e;t={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function K0(n,e,t,s){var r=n.updateQueue;Qo=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var d=l,u=d.next;d.next=null,o===null?i=u:o.next=u,o=d;var h=n.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=d))}if(i!==null){var f=r.baseState;o=0,h=u=d=null,l=i;do{var m=l.lane,p=l.eventTime;if((s&m)===m){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=n,g=l;switch(m=e,p=t,g.tag){case 1:if(b=g.payload,typeof b=="function"){f=b.call(p,f,m);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=g.payload,m=typeof b=="function"?b.call(p,f,m):b,m==null)break e;f=Ft({},f,m);break e;case 2:Qo=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,m=r.effects,m===null?r.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=p,d=f):h=h.next=p,o|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;m=l,l=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(!0);if(h===null&&(d=f),r.baseState=d,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);vu|=o,n.lanes=o,n.memoizedState=f}}function Ik(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],r=s.callback;if(r!==null){if(s.callback=null,s=t,typeof r!="function")throw Error(te(191,r));r.call(s)}}}var wy={},ua=Pc(wy),dg=Pc(wy),ug=Pc(wy);function qc(n){if(n===wy)throw Error(te(174));return n}function HC(n,e){switch(mt(ug,e),mt(dg,n),mt(ua,wy),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xS(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=xS(e,n)}St(ua),mt(ua,e)}function wm(){St(ua),St(dg),St(ug)}function I_(n){qc(ug.current);var e=qc(ua.current),t=xS(e,n.type);e!==t&&(mt(dg,n),mt(ua,t))}function VC(n){dg.current===n&&(St(ua),St(dg))}var Rt=Pc(0);function Y0(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var C1=[];function WC(){for(var n=0;n<C1.length;n++)C1[n]._workInProgressVersionPrimary=null;C1.length=0}var Fv=Oo.ReactCurrentDispatcher,A1=Oo.ReactCurrentBatchConfig,yu=0,It=null,cn=null,bn=null,X0=!1,Vp=!1,hg=0,i6=0;function $n(){throw Error(te(321))}function GC(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!vi(n[t],e[t]))return!1;return!0}function qC(n,e,t,s,r,i){if(yu=i,It=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fv.current=n===null||n.memoizedState===null?c6:d6,n=t(s,r),Vp){i=0;do{if(Vp=!1,hg=0,25<=i)throw Error(te(301));i+=1,bn=cn=null,e.updateQueue=null,Fv.current=u6,n=t(s,r)}while(Vp)}if(Fv.current=Q0,e=cn!==null&&cn.next!==null,yu=0,bn=cn=It=null,X0=!1,e)throw Error(te(300));return n}function KC(){var n=hg!==0;return hg=0,n}function Mi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?It.memoizedState=bn=n:bn=bn.next=n,bn}function Hr(){if(cn===null){var n=It.alternate;n=n!==null?n.memoizedState:null}else n=cn.next;var e=bn===null?It.memoizedState:bn.next;if(e!==null)bn=e,cn=n;else{if(n===null)throw Error(te(310));cn=n,n={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},bn===null?It.memoizedState=bn=n:bn=bn.next=n}return bn}function fg(n,e){return typeof e=="function"?e(n):e}function E1(n){var e=Hr(),t=e.queue;if(t===null)throw Error(te(311));t.lastRenderedReducer=n;var s=cn,r=s.baseQueue,i=t.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,t.pending=null}if(r!==null){i=r.next,s=s.baseState;var l=o=null,d=null,u=i;do{var h=u.lane;if((yu&h)===h)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:n(s,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(l=d=f,o=s):d=d.next=f,It.lanes|=h,vu|=h}u=u.next}while(u!==null&&u!==i);d===null?o=s:d.next=l,vi(s,e.memoizedState)||(Ts=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=d,t.lastRenderedState=s}if(n=t.interleaved,n!==null){r=n;do i=r.lane,It.lanes|=i,vu|=i,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function k1(n){var e=Hr(),t=e.queue;if(t===null)throw Error(te(311));t.lastRenderedReducer=n;var s=t.dispatch,r=t.pending,i=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do i=n(i,o.action),o=o.next;while(o!==r);vi(i,e.memoizedState)||(Ts=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,s]}function L_(){}function F_(n,e){var t=It,s=Hr(),r=e(),i=!vi(s.memoizedState,r);if(i&&(s.memoizedState=r,Ts=!0),s=s.queue,YC($_.bind(null,t,s,n),[n]),s.getSnapshot!==e||i||bn!==null&&bn.memoizedState.tag&1){if(t.flags|=2048,mg(9,B_.bind(null,t,s,r,e),void 0,null),wn===null)throw Error(te(349));yu&30||O_(t,e,r)}return r}function O_(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=It.updateQueue,e===null?(e={lastEffect:null,stores:null},It.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function B_(n,e,t,s){e.value=t,e.getSnapshot=s,z_(e)&&U_(n)}function $_(n,e,t){return t(function(){z_(e)&&U_(n)})}function z_(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!vi(n,t)}catch{return!0}}function U_(n){var e=Eo(n,1);e!==null&&gi(e,n,1,-1)}function Lk(n){var e=Mi();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fg,lastRenderedState:n},e.queue=n,n=n.dispatch=l6.bind(null,It,n),[e.memoizedState,n]}function mg(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=It.updateQueue,e===null?(e={lastEffect:null,stores:null},It.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function H_(){return Hr().memoizedState}function Ov(n,e,t,s){var r=Mi();It.flags|=n,r.memoizedState=mg(1|e,t,void 0,s===void 0?null:s)}function ow(n,e,t,s){var r=Hr();s=s===void 0?null:s;var i=void 0;if(cn!==null){var o=cn.memoizedState;if(i=o.destroy,s!==null&&GC(s,o.deps)){r.memoizedState=mg(e,t,i,s);return}}It.flags|=n,r.memoizedState=mg(1|e,t,i,s)}function Fk(n,e){return Ov(8390656,8,n,e)}function YC(n,e){return ow(2048,8,n,e)}function V_(n,e){return ow(4,2,n,e)}function W_(n,e){return ow(4,4,n,e)}function G_(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function q_(n,e,t){return t=t!=null?t.concat([n]):null,ow(4,4,G_.bind(null,e,n),t)}function XC(){}function K_(n,e){var t=Hr();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&GC(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function Y_(n,e){var t=Hr();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&GC(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function X_(n,e,t){return yu&21?(vi(t,e)||(t=t_(),It.lanes|=t,vu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Ts=!0),n.memoizedState=t)}function a6(n,e){var t=Ze;Ze=t!==0&&4>t?t:4,n(!0);var s=A1.transition;A1.transition={};try{n(!1),e()}finally{Ze=t,A1.transition=s}}function Q_(){return Hr().memoizedState}function o6(n,e,t){var s=uc(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},J_(n))Z_(e,t);else if(t=R_(n,e,t,s),t!==null){var r=us();gi(t,n,s,r),eM(t,e,s)}}function l6(n,e,t){var s=uc(n),r={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(J_(n))Z_(e,r);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,t);if(r.hasEagerState=!0,r.eagerState=l,vi(l,o)){var d=e.interleaved;d===null?(r.next=r,zC(e)):(r.next=d.next,d.next=r),e.interleaved=r;return}}catch{}finally{}t=R_(n,e,r,s),t!==null&&(r=us(),gi(t,n,s,r),eM(t,e,s))}}function J_(n){var e=n.alternate;return n===It||e!==null&&e===It}function Z_(n,e){Vp=X0=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function eM(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,EC(n,t)}}var Q0={readContext:Ur,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useInsertionEffect:$n,useLayoutEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useMutableSource:$n,useSyncExternalStore:$n,useId:$n,unstable_isNewReconciler:!1},c6={readContext:Ur,useCallback:function(n,e){return Mi().memoizedState=[n,e===void 0?null:e],n},useContext:Ur,useEffect:Fk,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Ov(4194308,4,G_.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Ov(4194308,4,n,e)},useInsertionEffect:function(n,e){return Ov(4,2,n,e)},useMemo:function(n,e){var t=Mi();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=Mi();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=o6.bind(null,It,n),[s.memoizedState,n]},useRef:function(n){var e=Mi();return n={current:n},e.memoizedState=n},useState:Lk,useDebugValue:XC,useDeferredValue:function(n){return Mi().memoizedState=n},useTransition:function(){var n=Lk(!1),e=n[0];return n=a6.bind(null,n[1]),Mi().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=It,r=Mi();if(Pt){if(t===void 0)throw Error(te(407));t=t()}else{if(t=e(),wn===null)throw Error(te(349));yu&30||O_(s,e,t)}r.memoizedState=t;var i={value:t,getSnapshot:e};return r.queue=i,Fk($_.bind(null,s,i,n),[n]),s.flags|=2048,mg(9,B_.bind(null,s,i,t,e),void 0,null),t},useId:function(){var n=Mi(),e=wn.identifierPrefix;if(Pt){var t=xo,s=go;t=(s&~(1<<32-pi(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=hg++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=i6++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},d6={readContext:Ur,useCallback:K_,useContext:Ur,useEffect:YC,useImperativeHandle:q_,useInsertionEffect:V_,useLayoutEffect:W_,useMemo:Y_,useReducer:E1,useRef:H_,useState:function(){return E1(fg)},useDebugValue:XC,useDeferredValue:function(n){var e=Hr();return X_(e,cn.memoizedState,n)},useTransition:function(){var n=E1(fg)[0],e=Hr().memoizedState;return[n,e]},useMutableSource:L_,useSyncExternalStore:F_,useId:Q_,unstable_isNewReconciler:!1},u6={readContext:Ur,useCallback:K_,useContext:Ur,useEffect:YC,useImperativeHandle:q_,useInsertionEffect:V_,useLayoutEffect:W_,useMemo:Y_,useReducer:k1,useRef:H_,useState:function(){return k1(fg)},useDebugValue:XC,useDeferredValue:function(n){var e=Hr();return cn===null?e.memoizedState=n:X_(e,cn.memoizedState,n)},useTransition:function(){var n=k1(fg)[0],e=Hr().memoizedState;return[n,e]},useMutableSource:L_,useSyncExternalStore:F_,useId:Q_,unstable_isNewReconciler:!1};function Qr(n,e){if(n&&n.defaultProps){e=Ft({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function OS(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:Ft({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var lw={isMounted:function(n){return(n=n._reactInternals)?Ru(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=us(),r=uc(n),i=yo(s,r);i.payload=e,t!=null&&(i.callback=t),e=cc(n,i,r),e!==null&&(gi(e,n,r,s),Lv(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=us(),r=uc(n),i=yo(s,r);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=cc(n,i,r),e!==null&&(gi(e,n,r,s),Lv(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=us(),s=uc(n),r=yo(t,s);r.tag=2,e!=null&&(r.callback=e),e=cc(n,r,s),e!==null&&(gi(e,n,s,t),Lv(e,n,s))}};function Ok(n,e,t,s,r,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!ag(t,s)||!ag(r,i):!0}function tM(n,e,t){var s=!1,r=xc,i=e.contextType;return typeof i=="object"&&i!==null?i=Ur(i):(r=_s(e)?gu:es.current,s=e.contextTypes,i=(s=s!=null)?ym(n,r):xc),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lw,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=i),e}function Bk(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&lw.enqueueReplaceState(e,e.state,null)}function BS(n,e,t,s){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},UC(n);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Ur(i):(i=_s(e)?gu:es.current,r.context=ym(n,i)),r.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(OS(n,e,i,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&lw.enqueueReplaceState(r,r.state,null),K0(n,t,r,s),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Sm(n,e){try{var t="",s=e;do t+=B5(s),s=s.return;while(s);var r=t}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:r,digest:null}}function T1(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function $S(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var h6=typeof WeakMap=="function"?WeakMap:Map;function nM(n,e,t){t=yo(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){Z0||(Z0=!0,XS=s),$S(n,e)},t}function sM(n,e,t){t=yo(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;t.payload=function(){return s(r)},t.callback=function(){$S(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){$S(n,e),typeof s!="function"&&(dc===null?dc=new Set([this]):dc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function $k(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new h6;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(t)||(r.add(t),n=A6.bind(null,n,e,t),e.then(n,n))}function zk(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Uk(n,e,t,s,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=yo(-1,1),e.tag=2,cc(t,e,1))),t.lanes|=1),n)}var f6=Oo.ReactCurrentOwner,Ts=!1;function cs(n,e,t,s){e.child=n===null?M_(e,null,t,s):bm(e,n.child,t,s)}function Hk(n,e,t,s,r){t=t.render;var i=e.ref;return wh(e,r),s=qC(n,e,t,s,i,r),t=KC(),n!==null&&!Ts?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,ko(n,e,r)):(Pt&&t&&IC(e),e.flags|=1,cs(n,e,s,r),e.child)}function Vk(n,e,t,s,r){if(n===null){var i=t.type;return typeof i=="function"&&!rA(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,rM(n,e,i,s,r)):(n=Uv(t.type,null,s,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&r)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:ag,t(o,s)&&n.ref===e.ref)return ko(n,e,r)}return e.flags|=1,n=hc(i,s),n.ref=e.ref,n.return=e,e.child=n}function rM(n,e,t,s,r){if(n!==null){var i=n.memoizedProps;if(ag(i,s)&&n.ref===e.ref)if(Ts=!1,e.pendingProps=s=i,(n.lanes&r)!==0)n.flags&131072&&(Ts=!0);else return e.lanes=n.lanes,ko(n,e,r)}return zS(n,e,t,s,r)}function iM(n,e,t){var s=e.pendingProps,r=s.children,i=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(uh,tr),tr|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,mt(uh,tr),tr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:t,mt(uh,tr),tr|=s}else i!==null?(s=i.baseLanes|t,e.memoizedState=null):s=t,mt(uh,tr),tr|=s;return cs(n,e,r,t),e.child}function aM(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function zS(n,e,t,s,r){var i=_s(t)?gu:es.current;return i=ym(e,i),wh(e,r),t=qC(n,e,t,s,i,r),s=KC(),n!==null&&!Ts?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,ko(n,e,r)):(Pt&&s&&IC(e),e.flags|=1,cs(n,e,t,r),e.child)}function Wk(n,e,t,s,r){if(_s(t)){var i=!0;H0(e)}else i=!1;if(wh(e,r),e.stateNode===null)Bv(n,e),tM(e,t,s),BS(e,t,s,r),s=!0;else if(n===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var d=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Ur(u):(u=_s(t)?gu:es.current,u=ym(e,u));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||d!==u)&&Bk(e,o,s,u),Qo=!1;var m=e.memoizedState;o.state=m,K0(e,s,o,r),d=e.memoizedState,l!==s||m!==d||Ps.current||Qo?(typeof h=="function"&&(OS(e,t,h,s),d=e.memoizedState),(l=Qo||Ok(e,t,l,s,m,d,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=d),o.props=s,o.state=d,o.context=u,s=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,D_(n,e),l=e.memoizedProps,u=e.type===e.elementType?l:Qr(e.type,l),o.props=u,f=e.pendingProps,m=o.context,d=t.contextType,typeof d=="object"&&d!==null?d=Ur(d):(d=_s(t)?gu:es.current,d=ym(e,d));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==d)&&Bk(e,o,s,d),Qo=!1,m=e.memoizedState,o.state=m,K0(e,s,o,r);var b=e.memoizedState;l!==f||m!==b||Ps.current||Qo?(typeof p=="function"&&(OS(e,t,p,s),b=e.memoizedState),(u=Qo||Ok(e,t,u,s,m,b,d)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,b,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,b,d)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=b),o.props=s,o.state=b,o.context=d,s=u):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),s=!1)}return US(n,e,t,s,i,r)}function US(n,e,t,s,r,i){aM(n,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&Pk(e,t,!1),ko(n,e,i);s=e.stateNode,f6.current=e;var l=o&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&o?(e.child=bm(e,n.child,null,i),e.child=bm(e,null,l,i)):cs(n,e,l,i),e.memoizedState=s.state,r&&Pk(e,t,!0),e.child}function oM(n){var e=n.stateNode;e.pendingContext?Tk(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Tk(n,e.context,!1),HC(n,e.containerInfo)}function Gk(n,e,t,s,r){return vm(),FC(r),e.flags|=256,cs(n,e,t,s),e.child}var HS={dehydrated:null,treeContext:null,retryLane:0};function VS(n){return{baseLanes:n,cachePool:null,transitions:null}}function lM(n,e,t){var s=e.pendingProps,r=Rt.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=n!==null&&n.memoizedState===null?!1:(r&2)!==0),l?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),mt(Rt,r&1),n===null)return LS(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,n=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=uw(o,s,0,null),n=pu(n,s,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=VS(t),e.memoizedState=HS,n):QC(e,o));if(r=n.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return m6(n,e,o,s,l,r,t);if(i){i=s.fallback,o=e.mode,r=n.child,l=r.sibling;var d={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=d,e.deletions=null):(s=hc(r,d),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=hc(l,i):(i=pu(i,o,t,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=n.child.memoizedState,o=o===null?VS(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=HS,s}return i=n.child,n=i.sibling,s=hc(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function QC(n,e){return e=uw({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function ov(n,e,t,s){return s!==null&&FC(s),bm(e,n.child,null,t),n=QC(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function m6(n,e,t,s,r,i,o){if(t)return e.flags&256?(e.flags&=-257,s=T1(Error(te(422))),ov(n,e,o,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=uw({mode:"visible",children:s.children},r,0,null),i=pu(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&bm(e,n.child,null,o),e.child.memoizedState=VS(o),e.memoizedState=HS,i);if(!(e.mode&1))return ov(n,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(te(419)),s=T1(i,s,void 0),ov(n,e,o,s)}if(l=(o&n.childLanes)!==0,Ts||l){if(s=wn,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Eo(n,r),gi(s,n,r,-1))}return sA(),s=T1(Error(te(421))),ov(n,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=E6.bind(null,n),r._reactRetry=e,null):(n=i.treeContext,ir=lc(r.nextSibling),ar=e,Pt=!0,hi=null,n!==null&&(Rr[Dr++]=go,Rr[Dr++]=xo,Rr[Dr++]=xu,go=n.id,xo=n.overflow,xu=e),e=QC(e,s.children),e.flags|=4096,e)}function qk(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),FS(n.return,e,t)}function P1(n,e,t,s,r){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=t,i.tailMode=r)}function cM(n,e,t){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(cs(n,e,s.children,t),s=Rt.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&qk(n,t,e);else if(n.tag===19)qk(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(mt(Rt,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Y0(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),P1(e,!1,r,t,i);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Y0(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}P1(e,!0,t,null,i);break;case"together":P1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bv(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ko(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),vu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(te(153));if(e.child!==null){for(n=e.child,t=hc(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=hc(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function p6(n,e,t){switch(e.tag){case 3:oM(e),vm();break;case 5:I_(e);break;case 1:_s(e.type)&&H0(e);break;case 4:HC(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;mt(G0,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(mt(Rt,Rt.current&1),e.flags|=128,null):t&e.child.childLanes?lM(n,e,t):(mt(Rt,Rt.current&1),n=ko(n,e,t),n!==null?n.sibling:null);mt(Rt,Rt.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return cM(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),mt(Rt,Rt.current),s)break;return null;case 22:case 23:return e.lanes=0,iM(n,e,t)}return ko(n,e,t)}var dM,WS,uM,hM;dM=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};WS=function(){};uM=function(n,e,t,s){var r=n.memoizedProps;if(r!==s){n=e.stateNode,qc(ua.current);var i=null;switch(t){case"input":r=fS(n,r),s=fS(n,s),i=[];break;case"select":r=Ft({},r,{value:void 0}),s=Ft({},s,{value:void 0}),i=[];break;case"textarea":r=gS(n,r),s=gS(n,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=z0)}yS(t,s);var o;t=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Zp.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var d=s[u];if(l=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&d!==l&&(d!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in d)d.hasOwnProperty(o)&&l[o]!==d[o]&&(t||(t={}),t[o]=d[o])}else t||(i||(i=[]),i.push(u,t)),t=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,l=l?l.__html:void 0,d!=null&&l!==d&&(i=i||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Zp.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&vt("scroll",n),i||l===d||(i=[])):(i=i||[]).push(u,d))}t&&(i=i||[]).push("style",t);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};hM=function(n,e,t,s){t!==s&&(e.flags|=4)};function np(n,e){if(!Pt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function zn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function g6(n,e,t){var s=e.pendingProps;switch(LC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(e),null;case 1:return _s(e.type)&&U0(),zn(e),null;case 3:return s=e.stateNode,wm(),St(Ps),St(es),WC(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(iv(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hi!==null&&(ZS(hi),hi=null))),WS(n,e),zn(e),null;case 5:VC(e);var r=qc(ug.current);if(t=e.type,n!==null&&e.stateNode!=null)uM(n,e,t,s,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(te(166));return zn(e),null}if(n=qc(ua.current),iv(e)){s=e.stateNode,t=e.type;var i=e.memoizedProps;switch(s[aa]=e,s[cg]=i,n=(e.mode&1)!==0,t){case"dialog":vt("cancel",s),vt("close",s);break;case"iframe":case"object":case"embed":vt("load",s);break;case"video":case"audio":for(r=0;r<pp.length;r++)vt(pp[r],s);break;case"source":vt("error",s);break;case"img":case"image":case"link":vt("error",s),vt("load",s);break;case"details":vt("toggle",s);break;case"input":nk(s,i),vt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},vt("invalid",s);break;case"textarea":rk(s,i),vt("invalid",s)}yS(t,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&rv(s.textContent,l,n),r=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&rv(s.textContent,l,n),r=["children",""+l]):Zp.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&vt("scroll",s)}switch(t){case"input":Xy(s),sk(s,i,!0);break;case"textarea":Xy(s),ik(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=z0)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=$P(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=o.createElement(t,{is:s.is}):(n=o.createElement(t),t==="select"&&(o=n,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):n=o.createElementNS(n,t),n[aa]=e,n[cg]=s,dM(n,e,!1,!1),e.stateNode=n;e:{switch(o=vS(t,s),t){case"dialog":vt("cancel",n),vt("close",n),r=s;break;case"iframe":case"object":case"embed":vt("load",n),r=s;break;case"video":case"audio":for(r=0;r<pp.length;r++)vt(pp[r],n);r=s;break;case"source":vt("error",n),r=s;break;case"img":case"image":case"link":vt("error",n),vt("load",n),r=s;break;case"details":vt("toggle",n),r=s;break;case"input":nk(n,s),r=fS(n,s),vt("invalid",n);break;case"option":r=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},r=Ft({},s,{value:void 0}),vt("invalid",n);break;case"textarea":rk(n,s),r=gS(n,s),vt("invalid",n);break;default:r=s}yS(t,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var d=l[i];i==="style"?HP(n,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&zP(n,d)):i==="children"?typeof d=="string"?(t!=="textarea"||d!=="")&&eg(n,d):typeof d=="number"&&eg(n,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Zp.hasOwnProperty(i)?d!=null&&i==="onScroll"&&vt("scroll",n):d!=null&&wC(n,i,d,o))}switch(t){case"input":Xy(n),sk(n,s,!1);break;case"textarea":Xy(n),ik(n);break;case"option":s.value!=null&&n.setAttribute("value",""+gc(s.value));break;case"select":n.multiple=!!s.multiple,i=s.value,i!=null?xh(n,!!s.multiple,i,!1):s.defaultValue!=null&&xh(n,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=z0)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return zn(e),null;case 6:if(n&&e.stateNode!=null)hM(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(te(166));if(t=qc(ug.current),qc(ua.current),iv(e)){if(s=e.stateNode,t=e.memoizedProps,s[aa]=e,(i=s.nodeValue!==t)&&(n=ar,n!==null))switch(n.tag){case 3:rv(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&rv(s.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[aa]=e,e.stateNode=s}return zn(e),null;case 13:if(St(Rt),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Pt&&ir!==null&&e.mode&1&&!(e.flags&128))P_(),vm(),e.flags|=98560,i=!1;else if(i=iv(e),s!==null&&s.dehydrated!==null){if(n===null){if(!i)throw Error(te(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(te(317));i[aa]=e}else vm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zn(e),i=!1}else hi!==null&&(ZS(hi),hi=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||Rt.current&1?un===0&&(un=3):sA())),e.updateQueue!==null&&(e.flags|=4),zn(e),null);case 4:return wm(),WS(n,e),n===null&&og(e.stateNode.containerInfo),zn(e),null;case 10:return $C(e.type._context),zn(e),null;case 17:return _s(e.type)&&U0(),zn(e),null;case 19:if(St(Rt),i=e.memoizedState,i===null)return zn(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)np(i,!1);else{if(un!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Y0(n),o!==null){for(e.flags|=128,np(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)i=t,n=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return mt(Rt,Rt.current&1|2),e.child}n=n.sibling}i.tail!==null&&Qt()>Nm&&(e.flags|=128,s=!0,np(i,!1),e.lanes=4194304)}else{if(!s)if(n=Y0(o),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),np(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Pt)return zn(e),null}else 2*Qt()-i.renderingStartTime>Nm&&t!==1073741824&&(e.flags|=128,s=!0,np(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Qt(),e.sibling=null,t=Rt.current,mt(Rt,s?t&1|2:t&1),e):(zn(e),null);case 22:case 23:return nA(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?tr&1073741824&&(zn(e),e.subtreeFlags&6&&(e.flags|=8192)):zn(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}function x6(n,e){switch(LC(e),e.tag){case 1:return _s(e.type)&&U0(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return wm(),St(Ps),St(es),WC(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return VC(e),null;case 13:if(St(Rt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(te(340));vm()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return St(Rt),null;case 4:return wm(),null;case 10:return $C(e.type._context),null;case 22:case 23:return nA(),null;case 24:return null;default:return null}}var lv=!1,Jn=!1,y6=typeof WeakSet=="function"?WeakSet:Set,fe=null;function dh(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){Wt(n,e,s)}else t.current=null}function GS(n,e,t){try{t()}catch(s){Wt(n,e,s)}}var Kk=!1;function v6(n,e){if(TS=O0,n=x_(),DC(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,l=-1,d=-1,u=0,h=0,f=n,m=null;t:for(;;){for(var p;f!==t||r!==0&&f.nodeType!==3||(l=o+r),f!==i||s!==0&&f.nodeType!==3||(d=o+s),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===n)break t;if(m===t&&++u===r&&(l=o),m===i&&++h===s&&(d=o),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}t=l===-1||d===-1?null:{start:l,end:d}}else t=null}t=t||{start:0,end:0}}else t=null;for(PS={focusedElem:n,selectionRange:t},O0=!1,fe=e;fe!==null;)if(e=fe,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,fe=n;else for(;fe!==null;){e=fe;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var g=b.memoizedProps,N=b.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:Qr(e.type,g),N);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(w){Wt(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,fe=n;break}fe=e.return}return b=Kk,Kk=!1,b}function Wp(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&n)===n){var i=r.destroy;r.destroy=void 0,i!==void 0&&GS(e,t,i)}r=r.next}while(r!==s)}}function cw(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function qS(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function fM(n){var e=n.alternate;e!==null&&(n.alternate=null,fM(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[aa],delete e[cg],delete e[RS],delete e[t6],delete e[n6])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function mM(n){return n.tag===5||n.tag===3||n.tag===4}function Yk(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||mM(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function KS(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=z0));else if(s!==4&&(n=n.child,n!==null))for(KS(n,e,t),n=n.sibling;n!==null;)KS(n,e,t),n=n.sibling}function YS(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(YS(n,e,t),n=n.sibling;n!==null;)YS(n,e,t),n=n.sibling}var _n=null,ui=!1;function Uo(n,e,t){for(t=t.child;t!==null;)pM(n,e,t),t=t.sibling}function pM(n,e,t){if(da&&typeof da.onCommitFiberUnmount=="function")try{da.onCommitFiberUnmount(tw,t)}catch{}switch(t.tag){case 5:Jn||dh(t,e);case 6:var s=_n,r=ui;_n=null,Uo(n,e,t),_n=s,ui=r,_n!==null&&(ui?(n=_n,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):_n.removeChild(t.stateNode));break;case 18:_n!==null&&(ui?(n=_n,t=t.stateNode,n.nodeType===8?N1(n.parentNode,t):n.nodeType===1&&N1(n,t),rg(n)):N1(_n,t.stateNode));break;case 4:s=_n,r=ui,_n=t.stateNode.containerInfo,ui=!0,Uo(n,e,t),_n=s,ui=r;break;case 0:case 11:case 14:case 15:if(!Jn&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&GS(t,e,o),r=r.next}while(r!==s)}Uo(n,e,t);break;case 1:if(!Jn&&(dh(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(l){Wt(t,e,l)}Uo(n,e,t);break;case 21:Uo(n,e,t);break;case 22:t.mode&1?(Jn=(s=Jn)||t.memoizedState!==null,Uo(n,e,t),Jn=s):Uo(n,e,t);break;default:Uo(n,e,t)}}function Xk(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new y6),e.forEach(function(s){var r=k6.bind(null,n,s);t.has(s)||(t.add(s),s.then(r,r))})}}function qr(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var r=t[s];try{var i=n,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:_n=l.stateNode,ui=!1;break e;case 3:_n=l.stateNode.containerInfo,ui=!0;break e;case 4:_n=l.stateNode.containerInfo,ui=!0;break e}l=l.return}if(_n===null)throw Error(te(160));pM(i,o,r),_n=null,ui=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(u){Wt(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gM(e,n),e=e.sibling}function gM(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(qr(e,n),Ei(n),s&4){try{Wp(3,n,n.return),cw(3,n)}catch(g){Wt(n,n.return,g)}try{Wp(5,n,n.return)}catch(g){Wt(n,n.return,g)}}break;case 1:qr(e,n),Ei(n),s&512&&t!==null&&dh(t,t.return);break;case 5:if(qr(e,n),Ei(n),s&512&&t!==null&&dh(t,t.return),n.flags&32){var r=n.stateNode;try{eg(r,"")}catch(g){Wt(n,n.return,g)}}if(s&4&&(r=n.stateNode,r!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,l=n.type,d=n.updateQueue;if(n.updateQueue=null,d!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&OP(r,i),vS(l,o);var u=vS(l,i);for(o=0;o<d.length;o+=2){var h=d[o],f=d[o+1];h==="style"?HP(r,f):h==="dangerouslySetInnerHTML"?zP(r,f):h==="children"?eg(r,f):wC(r,h,f,u)}switch(l){case"input":mS(r,i);break;case"textarea":BP(r,i);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?xh(r,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?xh(r,!!i.multiple,i.defaultValue,!0):xh(r,!!i.multiple,i.multiple?[]:"",!1))}r[cg]=i}catch(g){Wt(n,n.return,g)}}break;case 6:if(qr(e,n),Ei(n),s&4){if(n.stateNode===null)throw Error(te(162));r=n.stateNode,i=n.memoizedProps;try{r.nodeValue=i}catch(g){Wt(n,n.return,g)}}break;case 3:if(qr(e,n),Ei(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{rg(e.containerInfo)}catch(g){Wt(n,n.return,g)}break;case 4:qr(e,n),Ei(n);break;case 13:qr(e,n),Ei(n),r=n.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(eA=Qt())),s&4&&Xk(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Jn=(u=Jn)||h,qr(e,n),Jn=u):qr(e,n),Ei(n),s&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(fe=n,h=n.child;h!==null;){for(f=fe=h;fe!==null;){switch(m=fe,p=m.child,m.tag){case 0:case 11:case 14:case 15:Wp(4,m,m.return);break;case 1:dh(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){s=m,t=m.return;try{e=s,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(g){Wt(s,t,g)}}break;case 5:dh(m,m.return);break;case 22:if(m.memoizedState!==null){Jk(f);continue}}p!==null?(p.return=m,fe=p):Jk(f)}h=h.sibling}e:for(h=null,f=n;;){if(f.tag===5){if(h===null){h=f;try{r=f.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,d=f.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,l.style.display=UP("display",o))}catch(g){Wt(n,n.return,g)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Wt(n,n.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:qr(e,n),Ei(n),s&4&&Xk(n);break;case 21:break;default:qr(e,n),Ei(n)}}function Ei(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(mM(t)){var s=t;break e}t=t.return}throw Error(te(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(eg(r,""),s.flags&=-33);var i=Yk(n);YS(n,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,l=Yk(n);KS(n,l,o);break;default:throw Error(te(161))}}catch(d){Wt(n,n.return,d)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function b6(n,e,t){fe=n,xM(n)}function xM(n,e,t){for(var s=(n.mode&1)!==0;fe!==null;){var r=fe,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||lv;if(!o){var l=r.alternate,d=l!==null&&l.memoizedState!==null||Jn;l=lv;var u=Jn;if(lv=o,(Jn=d)&&!u)for(fe=r;fe!==null;)o=fe,d=o.child,o.tag===22&&o.memoizedState!==null?Zk(r):d!==null?(d.return=o,fe=d):Zk(r);for(;i!==null;)fe=i,xM(i),i=i.sibling;fe=r,lv=l,Jn=u}Qk(n)}else r.subtreeFlags&8772&&i!==null?(i.return=r,fe=i):Qk(n)}}function Qk(n){for(;fe!==null;){var e=fe;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jn||cw(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Jn)if(t===null)s.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Qr(e.type,t.memoizedProps);s.componentDidUpdate(r,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ik(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Ik(e,o,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&t.focus();break;case"img":d.src&&(t.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&rg(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}Jn||e.flags&512&&qS(e)}catch(m){Wt(e,e.return,m)}}if(e===n){fe=null;break}if(t=e.sibling,t!==null){t.return=e.return,fe=t;break}fe=e.return}}function Jk(n){for(;fe!==null;){var e=fe;if(e===n){fe=null;break}var t=e.sibling;if(t!==null){t.return=e.return,fe=t;break}fe=e.return}}function Zk(n){for(;fe!==null;){var e=fe;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{cw(4,e)}catch(d){Wt(e,t,d)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(d){Wt(e,r,d)}}var i=e.return;try{qS(e)}catch(d){Wt(e,i,d)}break;case 5:var o=e.return;try{qS(e)}catch(d){Wt(e,o,d)}}}catch(d){Wt(e,e.return,d)}if(e===n){fe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,fe=l;break}fe=e.return}}var w6=Math.ceil,J0=Oo.ReactCurrentDispatcher,JC=Oo.ReactCurrentOwner,Br=Oo.ReactCurrentBatchConfig,ze=0,wn=null,nn=null,Ln=0,tr=0,uh=Pc(0),un=0,pg=null,vu=0,dw=0,ZC=0,Gp=null,ks=null,eA=0,Nm=1/0,Ta=null,Z0=!1,XS=null,dc=null,cv=!1,rc=null,eb=0,qp=0,QS=null,$v=-1,zv=0;function us(){return ze&6?Qt():$v!==-1?$v:$v=Qt()}function uc(n){return n.mode&1?ze&2&&Ln!==0?Ln&-Ln:r6.transition!==null?(zv===0&&(zv=t_()),zv):(n=Ze,n!==0||(n=window.event,n=n===void 0?16:l_(n.type)),n):1}function gi(n,e,t,s){if(50<qp)throw qp=0,QS=null,Error(te(185));yy(n,t,s),(!(ze&2)||n!==wn)&&(n===wn&&(!(ze&2)&&(dw|=t),un===4&&Zo(n,Ln)),Ms(n,s),t===1&&ze===0&&!(e.mode&1)&&(Nm=Qt()+500,aw&&_c()))}function Ms(n,e){var t=n.callbackNode;rB(n,e);var s=F0(n,n===wn?Ln:0);if(s===0)t!==null&&lk(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&lk(t),e===1)n.tag===0?s6(e2.bind(null,n)):E_(e2.bind(null,n)),ZB(function(){!(ze&6)&&_c()}),t=null;else{switch(n_(s)){case 1:t=AC;break;case 4:t=ZP;break;case 16:t=L0;break;case 536870912:t=e_;break;default:t=L0}t=CM(t,yM.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function yM(n,e){if($v=-1,zv=0,ze&6)throw Error(te(327));var t=n.callbackNode;if(Sh()&&n.callbackNode!==t)return null;var s=F0(n,n===wn?Ln:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=tb(n,s);else{e=s;var r=ze;ze|=2;var i=bM();(wn!==n||Ln!==e)&&(Ta=null,Nm=Qt()+500,mu(n,e));do try{j6();break}catch(l){vM(n,l)}while(!0);BC(),J0.current=i,ze=r,nn!==null?e=0:(wn=null,Ln=0,e=un)}if(e!==0){if(e===2&&(r=jS(n),r!==0&&(s=r,e=JS(n,r))),e===1)throw t=pg,mu(n,0),Zo(n,s),Ms(n,Qt()),t;if(e===6)Zo(n,s);else{if(r=n.current.alternate,!(s&30)&&!S6(r)&&(e=tb(n,s),e===2&&(i=jS(n),i!==0&&(s=i,e=JS(n,i))),e===1))throw t=pg,mu(n,0),Zo(n,s),Ms(n,Qt()),t;switch(n.finishedWork=r,n.finishedLanes=s,e){case 0:case 1:throw Error(te(345));case 2:Fc(n,ks,Ta);break;case 3:if(Zo(n,s),(s&130023424)===s&&(e=eA+500-Qt(),10<e)){if(F0(n,0)!==0)break;if(r=n.suspendedLanes,(r&s)!==s){us(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=MS(Fc.bind(null,n,ks,Ta),e);break}Fc(n,ks,Ta);break;case 4:if(Zo(n,s),(s&4194240)===s)break;for(e=n.eventTimes,r=-1;0<s;){var o=31-pi(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=Qt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*w6(s/1960))-s,10<s){n.timeoutHandle=MS(Fc.bind(null,n,ks,Ta),s);break}Fc(n,ks,Ta);break;case 5:Fc(n,ks,Ta);break;default:throw Error(te(329))}}}return Ms(n,Qt()),n.callbackNode===t?yM.bind(null,n):null}function JS(n,e){var t=Gp;return n.current.memoizedState.isDehydrated&&(mu(n,e).flags|=256),n=tb(n,e),n!==2&&(e=ks,ks=t,e!==null&&ZS(e)),n}function ZS(n){ks===null?ks=n:ks.push.apply(ks,n)}function S6(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var r=t[s],i=r.getSnapshot;r=r.value;try{if(!vi(i(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zo(n,e){for(e&=~ZC,e&=~dw,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-pi(e),s=1<<t;n[t]=-1,e&=~s}}function e2(n){if(ze&6)throw Error(te(327));Sh();var e=F0(n,0);if(!(e&1))return Ms(n,Qt()),null;var t=tb(n,e);if(n.tag!==0&&t===2){var s=jS(n);s!==0&&(e=s,t=JS(n,s))}if(t===1)throw t=pg,mu(n,0),Zo(n,e),Ms(n,Qt()),t;if(t===6)throw Error(te(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Fc(n,ks,Ta),Ms(n,Qt()),null}function tA(n,e){var t=ze;ze|=1;try{return n(e)}finally{ze=t,ze===0&&(Nm=Qt()+500,aw&&_c())}}function bu(n){rc!==null&&rc.tag===0&&!(ze&6)&&Sh();var e=ze;ze|=1;var t=Br.transition,s=Ze;try{if(Br.transition=null,Ze=1,n)return n()}finally{Ze=s,Br.transition=t,ze=e,!(ze&6)&&_c()}}function nA(){tr=uh.current,St(uh)}function mu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,JB(t)),nn!==null)for(t=nn.return;t!==null;){var s=t;switch(LC(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&U0();break;case 3:wm(),St(Ps),St(es),WC();break;case 5:VC(s);break;case 4:wm();break;case 13:St(Rt);break;case 19:St(Rt);break;case 10:$C(s.type._context);break;case 22:case 23:nA()}t=t.return}if(wn=n,nn=n=hc(n.current,null),Ln=tr=e,un=0,pg=null,ZC=dw=vu=0,ks=Gp=null,Gc!==null){for(e=0;e<Gc.length;e++)if(t=Gc[e],s=t.interleaved,s!==null){t.interleaved=null;var r=s.next,i=t.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}t.pending=s}Gc=null}return n}function vM(n,e){do{var t=nn;try{if(BC(),Fv.current=Q0,X0){for(var s=It.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}X0=!1}if(yu=0,bn=cn=It=null,Vp=!1,hg=0,JC.current=null,t===null||t.return===null){un=1,pg=e,nn=null;break}e:{var i=n,o=t.return,l=t,d=e;if(e=Ln,l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=zk(o);if(p!==null){p.flags&=-257,Uk(p,o,l,i,e),p.mode&1&&$k(i,u,e),e=p,d=u;var b=e.updateQueue;if(b===null){var g=new Set;g.add(d),e.updateQueue=g}else b.add(d);break e}else{if(!(e&1)){$k(i,u,e),sA();break e}d=Error(te(426))}}else if(Pt&&l.mode&1){var N=zk(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Uk(N,o,l,i,e),FC(Sm(d,l));break e}}i=d=Sm(d,l),un!==4&&(un=2),Gp===null?Gp=[i]:Gp.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=nM(i,d,e);Dk(i,v);break e;case 1:l=d;var y=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(dc===null||!dc.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=sM(i,l,e);Dk(i,w);break e}}i=i.return}while(i!==null)}SM(t)}catch(j){e=j,nn===t&&t!==null&&(nn=t=t.return);continue}break}while(!0)}function bM(){var n=J0.current;return J0.current=Q0,n===null?Q0:n}function sA(){(un===0||un===3||un===2)&&(un=4),wn===null||!(vu&268435455)&&!(dw&268435455)||Zo(wn,Ln)}function tb(n,e){var t=ze;ze|=2;var s=bM();(wn!==n||Ln!==e)&&(Ta=null,mu(n,e));do try{N6();break}catch(r){vM(n,r)}while(!0);if(BC(),ze=t,J0.current=s,nn!==null)throw Error(te(261));return wn=null,Ln=0,un}function N6(){for(;nn!==null;)wM(nn)}function j6(){for(;nn!==null&&!Y5();)wM(nn)}function wM(n){var e=jM(n.alternate,n,tr);n.memoizedProps=n.pendingProps,e===null?SM(n):nn=e,JC.current=null}function SM(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=x6(t,e),t!==null){t.flags&=32767,nn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{un=6,nn=null;return}}else if(t=g6(t,e,tr),t!==null){nn=t;return}if(e=e.sibling,e!==null){nn=e;return}nn=e=n}while(e!==null);un===0&&(un=5)}function Fc(n,e,t){var s=Ze,r=Br.transition;try{Br.transition=null,Ze=1,C6(n,e,t,s)}finally{Br.transition=r,Ze=s}return null}function C6(n,e,t,s){do Sh();while(rc!==null);if(ze&6)throw Error(te(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(te(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(iB(n,i),n===wn&&(nn=wn=null,Ln=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||cv||(cv=!0,CM(L0,function(){return Sh(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=Br.transition,Br.transition=null;var o=Ze;Ze=1;var l=ze;ze|=4,JC.current=null,v6(n,t),gM(t,n),WB(PS),O0=!!TS,PS=TS=null,n.current=t,b6(t),X5(),ze=l,Ze=o,Br.transition=i}else n.current=t;if(cv&&(cv=!1,rc=n,eb=r),i=n.pendingLanes,i===0&&(dc=null),Z5(t.stateNode),Ms(n,Qt()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],s(r.value,{componentStack:r.stack,digest:r.digest});if(Z0)throw Z0=!1,n=XS,XS=null,n;return eb&1&&n.tag!==0&&Sh(),i=n.pendingLanes,i&1?n===QS?qp++:(qp=0,QS=n):qp=0,_c(),null}function Sh(){if(rc!==null){var n=n_(eb),e=Br.transition,t=Ze;try{if(Br.transition=null,Ze=16>n?16:n,rc===null)var s=!1;else{if(n=rc,rc=null,eb=0,ze&6)throw Error(te(331));var r=ze;for(ze|=4,fe=n.current;fe!==null;){var i=fe,o=i.child;if(fe.flags&16){var l=i.deletions;if(l!==null){for(var d=0;d<l.length;d++){var u=l[d];for(fe=u;fe!==null;){var h=fe;switch(h.tag){case 0:case 11:case 15:Wp(8,h,i)}var f=h.child;if(f!==null)f.return=h,fe=f;else for(;fe!==null;){h=fe;var m=h.sibling,p=h.return;if(fM(h),h===u){fe=null;break}if(m!==null){m.return=p,fe=m;break}fe=p}}}var b=i.alternate;if(b!==null){var g=b.child;if(g!==null){b.child=null;do{var N=g.sibling;g.sibling=null,g=N}while(g!==null)}}fe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,fe=o;else e:for(;fe!==null;){if(i=fe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Wp(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,fe=v;break e}fe=i.return}}var y=n.current;for(fe=y;fe!==null;){o=fe;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,fe=S;else e:for(o=y;fe!==null;){if(l=fe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:cw(9,l)}}catch(j){Wt(l,l.return,j)}if(l===o){fe=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,fe=w;break e}fe=l.return}}if(ze=r,_c(),da&&typeof da.onPostCommitFiberRoot=="function")try{da.onPostCommitFiberRoot(tw,n)}catch{}s=!0}return s}finally{Ze=t,Br.transition=e}}return!1}function t2(n,e,t){e=Sm(t,e),e=nM(n,e,1),n=cc(n,e,1),e=us(),n!==null&&(yy(n,1,e),Ms(n,e))}function Wt(n,e,t){if(n.tag===3)t2(n,n,t);else for(;e!==null;){if(e.tag===3){t2(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(dc===null||!dc.has(s))){n=Sm(t,n),n=sM(e,n,1),e=cc(e,n,1),n=us(),e!==null&&(yy(e,1,n),Ms(e,n));break}}e=e.return}}function A6(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=us(),n.pingedLanes|=n.suspendedLanes&t,wn===n&&(Ln&t)===t&&(un===4||un===3&&(Ln&130023424)===Ln&&500>Qt()-eA?mu(n,0):ZC|=t),Ms(n,e)}function NM(n,e){e===0&&(n.mode&1?(e=Zy,Zy<<=1,!(Zy&130023424)&&(Zy=4194304)):e=1);var t=us();n=Eo(n,e),n!==null&&(yy(n,e,t),Ms(n,t))}function E6(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),NM(n,t)}function k6(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(te(314))}s!==null&&s.delete(e),NM(n,t)}var jM;jM=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ps.current)Ts=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Ts=!1,p6(n,e,t);Ts=!!(n.flags&131072)}else Ts=!1,Pt&&e.flags&1048576&&k_(e,W0,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Bv(n,e),n=e.pendingProps;var r=ym(e,es.current);wh(e,t),r=qC(null,e,s,n,r,t);var i=KC();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_s(s)?(i=!0,H0(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,UC(e),r.updater=lw,e.stateNode=r,r._reactInternals=e,BS(e,s,n,t),e=US(null,e,s,!0,i,t)):(e.tag=0,Pt&&i&&IC(e),cs(null,e,r,t),e=e.child),e;case 16:s=e.elementType;e:{switch(Bv(n,e),n=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=P6(s),n=Qr(s,n),r){case 0:e=zS(null,e,s,n,t);break e;case 1:e=Wk(null,e,s,n,t);break e;case 11:e=Hk(null,e,s,n,t);break e;case 14:e=Vk(null,e,s,Qr(s.type,n),t);break e}throw Error(te(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Qr(s,r),zS(n,e,s,r,t);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Qr(s,r),Wk(n,e,s,r,t);case 3:e:{if(oM(e),n===null)throw Error(te(387));s=e.pendingProps,i=e.memoizedState,r=i.element,D_(n,e),K0(e,s,null,t);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Sm(Error(te(423)),e),e=Gk(n,e,s,t,r);break e}else if(s!==r){r=Sm(Error(te(424)),e),e=Gk(n,e,s,t,r);break e}else for(ir=lc(e.stateNode.containerInfo.firstChild),ar=e,Pt=!0,hi=null,t=M_(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(vm(),s===r){e=ko(n,e,t);break e}cs(n,e,s,t)}e=e.child}return e;case 5:return I_(e),n===null&&LS(e),s=e.type,r=e.pendingProps,i=n!==null?n.memoizedProps:null,o=r.children,_S(s,r)?o=null:i!==null&&_S(s,i)&&(e.flags|=32),aM(n,e),cs(n,e,o,t),e.child;case 6:return n===null&&LS(e),null;case 13:return lM(n,e,t);case 4:return HC(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=bm(e,null,s,t):cs(n,e,s,t),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Qr(s,r),Hk(n,e,s,r,t);case 7:return cs(n,e,e.pendingProps,t),e.child;case 8:return cs(n,e,e.pendingProps.children,t),e.child;case 12:return cs(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,mt(G0,s._currentValue),s._currentValue=o,i!==null)if(vi(i.value,o)){if(i.children===r.children&&!Ps.current){e=ko(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var d=l.firstContext;d!==null;){if(d.context===s){if(i.tag===1){d=yo(-1,t&-t),d.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?d.next=d:(d.next=h.next,h.next=d),u.pending=d}}i.lanes|=t,d=i.alternate,d!==null&&(d.lanes|=t),FS(i.return,t,e),l.lanes|=t;break}d=d.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(te(341));o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),FS(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}cs(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,wh(e,t),r=Ur(r),s=s(r),e.flags|=1,cs(n,e,s,t),e.child;case 14:return s=e.type,r=Qr(s,e.pendingProps),r=Qr(s.type,r),Vk(n,e,s,r,t);case 15:return rM(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Qr(s,r),Bv(n,e),e.tag=1,_s(s)?(n=!0,H0(e)):n=!1,wh(e,t),tM(e,s,r),BS(e,s,r,t),US(null,e,s,!0,n,t);case 19:return cM(n,e,t);case 22:return iM(n,e,t)}throw Error(te(156,e.tag))};function CM(n,e){return JP(n,e)}function T6(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(n,e,t,s){return new T6(n,e,t,s)}function rA(n){return n=n.prototype,!(!n||!n.isReactComponent)}function P6(n){if(typeof n=="function")return rA(n)?1:0;if(n!=null){if(n=n.$$typeof,n===NC)return 11;if(n===jC)return 14}return 2}function hc(n,e){var t=n.alternate;return t===null?(t=Or(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Uv(n,e,t,s,r,i){var o=2;if(s=n,typeof n=="function")rA(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case th:return pu(t.children,r,i,e);case SC:o=8,r|=8;break;case cS:return n=Or(12,t,e,r|2),n.elementType=cS,n.lanes=i,n;case dS:return n=Or(13,t,e,r),n.elementType=dS,n.lanes=i,n;case uS:return n=Or(19,t,e,r),n.elementType=uS,n.lanes=i,n;case IP:return uw(t,r,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case RP:o=10;break e;case DP:o=9;break e;case NC:o=11;break e;case jC:o=14;break e;case Xo:o=16,s=null;break e}throw Error(te(130,n==null?n:typeof n,""))}return e=Or(o,t,e,r),e.elementType=n,e.type=s,e.lanes=i,e}function pu(n,e,t,s){return n=Or(7,n,s,e),n.lanes=t,n}function uw(n,e,t,s){return n=Or(22,n,s,e),n.elementType=IP,n.lanes=t,n.stateNode={isHidden:!1},n}function _1(n,e,t){return n=Or(6,n,null,e),n.lanes=t,n}function M1(n,e,t){return e=Or(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function _6(n,e,t,s,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=h1(0),this.expirationTimes=h1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=h1(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function iA(n,e,t,s,r,i,o,l,d){return n=new _6(n,e,t,l,d),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Or(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},UC(i),n}function M6(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:eh,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function AM(n){if(!n)return xc;n=n._reactInternals;e:{if(Ru(n)!==n||n.tag!==1)throw Error(te(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_s(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(n.tag===1){var t=n.type;if(_s(t))return A_(n,t,e)}return e}function EM(n,e,t,s,r,i,o,l,d){return n=iA(t,s,!0,n,r,i,o,l,d),n.context=AM(null),t=n.current,s=us(),r=uc(t),i=yo(s,r),i.callback=e??null,cc(t,i,r),n.current.lanes=r,yy(n,r,s),Ms(n,s),n}function hw(n,e,t,s){var r=e.current,i=us(),o=uc(r);return t=AM(t),e.context===null?e.context=t:e.pendingContext=t,e=yo(i,o),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=cc(r,e,o),n!==null&&(gi(n,r,o,i),Lv(n,r,o)),o}function nb(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function n2(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function aA(n,e){n2(n,e),(n=n.alternate)&&n2(n,e)}function R6(){return null}var kM=typeof reportError=="function"?reportError:function(n){console.error(n)};function oA(n){this._internalRoot=n}fw.prototype.render=oA.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(te(409));hw(n,e,null,null)};fw.prototype.unmount=oA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;bu(function(){hw(null,n,null,null)}),e[Ao]=null}};function fw(n){this._internalRoot=n}fw.prototype.unstable_scheduleHydration=function(n){if(n){var e=i_();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Jo.length&&e!==0&&e<Jo[t].priority;t++);Jo.splice(t,0,n),t===0&&o_(n)}};function lA(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function mw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function s2(){}function D6(n,e,t,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var u=nb(o);i.call(u)}}var o=EM(e,s,n,0,null,!1,!1,"",s2);return n._reactRootContainer=o,n[Ao]=o.current,og(n.nodeType===8?n.parentNode:n),bu(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof s=="function"){var l=s;s=function(){var u=nb(d);l.call(u)}}var d=iA(n,0,!1,null,null,!1,!1,"",s2);return n._reactRootContainer=d,n[Ao]=d.current,og(n.nodeType===8?n.parentNode:n),bu(function(){hw(e,d,t,s)}),d}function pw(n,e,t,s,r){var i=t._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var l=r;r=function(){var d=nb(o);l.call(d)}}hw(e,o,n,r)}else o=D6(t,e,n,r,s);return nb(o)}s_=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=mp(e.pendingLanes);t!==0&&(EC(e,t|1),Ms(e,Qt()),!(ze&6)&&(Nm=Qt()+500,_c()))}break;case 13:bu(function(){var s=Eo(n,1);if(s!==null){var r=us();gi(s,n,1,r)}}),aA(n,1)}};kC=function(n){if(n.tag===13){var e=Eo(n,134217728);if(e!==null){var t=us();gi(e,n,134217728,t)}aA(n,134217728)}};r_=function(n){if(n.tag===13){var e=uc(n),t=Eo(n,e);if(t!==null){var s=us();gi(t,n,e,s)}aA(n,e)}};i_=function(){return Ze};a_=function(n,e){var t=Ze;try{return Ze=n,e()}finally{Ze=t}};wS=function(n,e,t){switch(e){case"input":if(mS(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var r=iw(s);if(!r)throw Error(te(90));FP(s),mS(s,r)}}}break;case"textarea":BP(n,t);break;case"select":e=t.value,e!=null&&xh(n,!!t.multiple,e,!1)}};GP=tA;qP=bu;var I6={usingClientEntryPoint:!1,Events:[by,ih,iw,VP,WP,tA]},sp={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},L6={bundleType:sp.bundleType,version:sp.version,rendererPackageName:sp.rendererPackageName,rendererConfig:sp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=XP(n),n===null?null:n.stateNode},findFiberByHostInstance:sp.findFiberByHostInstance||R6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dv.isDisabled&&dv.supportsFiber)try{tw=dv.inject(L6),da=dv}catch{}}mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I6;mr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lA(e))throw Error(te(200));return M6(n,e,null,t)};mr.createRoot=function(n,e){if(!lA(n))throw Error(te(299));var t=!1,s="",r=kM;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=iA(n,1,!1,null,null,t,!1,s,r),n[Ao]=e.current,og(n.nodeType===8?n.parentNode:n),new oA(e)};mr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(te(188)):(n=Object.keys(n).join(","),Error(te(268,n)));return n=XP(e),n=n===null?null:n.stateNode,n};mr.flushSync=function(n){return bu(n)};mr.hydrate=function(n,e,t){if(!mw(e))throw Error(te(200));return pw(null,n,e,!0,t)};mr.hydrateRoot=function(n,e,t){if(!lA(n))throw Error(te(405));var s=t!=null&&t.hydratedSources||null,r=!1,i="",o=kM;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=EM(e,null,n,1,t??null,r,!1,i,o),n[Ao]=e.current,og(n),s)for(n=0;n<s.length;n++)t=s[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new fw(e)};mr.render=function(n,e,t){if(!mw(e))throw Error(te(200));return pw(null,n,e,!1,t)};mr.unmountComponentAtNode=function(n){if(!mw(n))throw Error(te(40));return n._reactRootContainer?(bu(function(){pw(null,null,n,!1,function(){n._reactRootContainer=null,n[Ao]=null})}),!0):!1};mr.unstable_batchedUpdates=tA;mr.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!mw(t))throw Error(te(200));if(n==null||n._reactInternals===void 0)throw Error(te(38));return pw(n,e,t,!1,s)};mr.version="18.3.1-next-f1338f8080-20240426";function TM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TM)}catch(n){console.error(n)}}TM(),TP.exports=mr;var Du=TP.exports;const F6=mC(Du);var PM,r2=Du;PM=r2.createRoot,r2.hydrateRoot;function O6(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,s,r,i,o=[],l="",d=n.split("/");for(d[0]||d.shift();r=d.shift();)t=r[0],t==="*"?(o.push(t),l+=r[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(s=r.indexOf("?",1),i=r.indexOf(".",1),o.push(r.substring(1,~s?s:~i?i:r.length)),l+=~s&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~s?"?":"")+"\\"+r.substring(i))):l+="/"+r;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var _M={exports:{}},MM={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jm=x;function B6(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var $6=typeof Object.is=="function"?Object.is:B6,z6=jm.useState,U6=jm.useEffect,H6=jm.useLayoutEffect,V6=jm.useDebugValue;function W6(n,e){var t=e(),s=z6({inst:{value:t,getSnapshot:e}}),r=s[0].inst,i=s[1];return H6(function(){r.value=t,r.getSnapshot=e,R1(r)&&i({inst:r})},[n,t,e]),U6(function(){return R1(r)&&i({inst:r}),n(function(){R1(r)&&i({inst:r})})},[n]),V6(t),t}function R1(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!$6(n,t)}catch{return!0}}function G6(n,e){return e()}var q6=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?G6:W6;MM.useSyncExternalStore=jm.useSyncExternalStore!==void 0?jm.useSyncExternalStore:q6;_M.exports=MM;var K6=_M.exports;const Y6=EP.useInsertionEffect,X6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Q6=X6?x.useLayoutEffect:x.useEffect,J6=Y6||Q6,RM=n=>{const e=x.useRef([n,(...t)=>e[0](...t)]).current;return J6(()=>{e[0]=n}),e[1]},Z6="popstate",cA="pushState",dA="replaceState",e$="hashchange",i2=[Z6,cA,dA,e$],t$=n=>{for(const e of i2)addEventListener(e,n);return()=>{for(const e of i2)removeEventListener(e,n)}},DM=(n,e)=>K6.useSyncExternalStore(t$,n,e),n$=()=>location.search,s$=({ssrSearch:n=""}={})=>DM(n$,()=>n),a2=()=>location.pathname,r$=({ssrPath:n}={})=>DM(a2,n?()=>n:a2),i$=(n,{replace:e=!1,state:t=null}={})=>history[e?dA:cA](t,"",n),a$=(n={})=>[r$(n),i$],o2=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[o2]>"u"){for(const n of[cA,dA]){const e=history[n];history[n]=function(){const t=e.apply(this,arguments),s=new Event(n);return s.arguments=arguments,dispatchEvent(s),t}}Object.defineProperty(window,o2,{value:!0})}const o$=(n,e)=>e.toLowerCase().indexOf(n.toLowerCase())?"~"+e:e.slice(n.length)||"/",IM=(n="")=>n==="/"?"":n,l$=(n,e)=>n[0]==="~"?n.slice(1):IM(e)+n,c$=(n="",e)=>o$(l2(IM(n)),l2(e)),l2=n=>{try{return decodeURI(n)}catch{return n}},LM={hook:a$,searchHook:s$,parser:O6,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:n=>n},FM=x.createContext(LM),Sy=()=>x.useContext(FM),OM={},BM=x.createContext(OM),gw=()=>x.useContext(BM),xw=n=>{const[e,t]=n.hook(n);return[c$(n.base,e),RM((s,r)=>t(l$(s,n.base),r))]},ba=()=>xw(Sy()),$M=(n,e,t,s)=>{const{pattern:r,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:n(e||"*",s),o=r.exec(t)||[],[l,...d]=o;return l!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((f,m)=>[f,d[m]])):o.groups;let h={...d};return u&&Object.assign(h,u),h})(),...s?[l]:[]]:[!1,null]},zM=({children:n,...e})=>{var h,f;const t=Sy(),s=e.hook?LM:t;let r=s;const[i,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let l=x.useRef({}),d=l.current,u=d;for(let m in s){const p=m==="base"?s[m]+(e[m]||""):e[m]||s[m];d===u&&p!==u[m]&&(l.current=u={...u}),u[m]=p,p!==s[m]&&(r=u)}return x.createElement(FM.Provider,{value:r,children:n})},c2=({children:n,component:e},t)=>e?x.createElement(e,{params:t}):typeof n=="function"?n(t):n,d$=n=>{let e=x.useRef(OM),t=e.current;for(const s in n)n[s]!==t[s]&&(t=n);return Object.keys(n).length===0&&(t=n),e.current=t},Me=({path:n,nest:e,match:t,...s})=>{const r=Sy(),[i]=xw(r),[o,l,d]=t??$M(r.parser,n,i,e),u=d$({...gw(),...l});if(!o)return null;const h=d?x.createElement(zM,{base:d},c2(s,u)):c2(s,u);return x.createElement(BM.Provider,{value:u,children:h})},fc=x.forwardRef((n,e)=>{const t=Sy(),[s,r]=xw(t),{to:i="",href:o=i,onClick:l,asChild:d,children:u,className:h,replace:f,state:m,...p}=n,b=RM(N=>{N.ctrlKey||N.metaKey||N.altKey||N.shiftKey||N.button!==0||(l==null||l(N),N.defaultPrevented||(N.preventDefault(),r(o,n)))}),g=t.hrefs(o[0]==="~"?o.slice(1):t.base+o,t);return d&&x.isValidElement(u)?x.cloneElement(u,{onClick:b,href:g}):x.createElement("a",{...p,onClick:b,href:g,className:h!=null&&h.call?h(s===o):h,children:u,ref:e})}),UM=n=>Array.isArray(n)?n.flatMap(e=>UM(e&&e.type===x.Fragment?e.props.children:e)):[n],uA=({children:n,location:e})=>{const t=Sy(),[s]=xw(t);for(const r of UM(n)){let i=0;if(x.isValidElement(r)&&(i=$M(t.parser,r.props.path,e||s,r.props.nest))[0])return x.cloneElement(r,{match:i})}return null};var Om=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},wu=typeof window>"u"||"Deno"in globalThis;function Mr(){}function u$(n,e){return typeof n=="function"?n(e):n}function eN(n){return typeof n=="number"&&n>=0&&n!==1/0}function HM(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Nh(n,e){return typeof n=="function"?n(e):n}function fi(n,e){return typeof n=="function"?n(e):n}function d2(n,e){const{type:t="all",exact:s,fetchStatus:r,predicate:i,queryKey:o,stale:l}=n;if(o){if(s){if(e.queryHash!==hA(o,e.options))return!1}else if(!gg(e.queryKey,o))return!1}if(t!=="all"){const d=e.isActive();if(t==="active"&&!d||t==="inactive"&&d)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||r&&r!==e.state.fetchStatus||i&&!i(e))}function u2(n,e){const{exact:t,status:s,predicate:r,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(Su(e.options.mutationKey)!==Su(i))return!1}else if(!gg(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function hA(n,e){return((e==null?void 0:e.queryKeyHashFn)||Su)(n)}function Su(n){return JSON.stringify(n,(e,t)=>tN(t)?Object.keys(t).sort().reduce((s,r)=>(s[r]=t[r],s),{}):t)}function gg(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!gg(n[t],e[t])):!1}function VM(n,e){if(n===e)return n;const t=h2(n)&&h2(e);if(t||tN(n)&&tN(e)){const s=t?n:Object.keys(n),r=s.length,i=t?e:Object.keys(e),o=i.length,l=t?[]:{};let d=0;for(let u=0;u<o;u++){const h=t?u:i[u];(!t&&s.includes(h)||t)&&n[h]===void 0&&e[h]===void 0?(l[h]=void 0,d++):(l[h]=VM(n[h],e[h]),l[h]===n[h]&&n[h]!==void 0&&d++)}return r===o&&d===r?n:l}return e}function sb(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function h2(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function tN(n){if(!f2(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!f2(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function f2(n){return Object.prototype.toString.call(n)==="[object Object]"}function h$(n){return new Promise(e=>{setTimeout(e,n)})}function nN(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?VM(n,e):e}function f$(n,e,t=0){const s=[...n,e];return t&&s.length>t?s.slice(1):s}function m$(n,e,t=0){const s=[e,...n];return t&&s.length>t?s.slice(0,-1):s}var fA=Symbol();function WM(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===fA?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Yc,el,_h,iP,p$=(iP=class extends Om{constructor(){super();A(this,Yc);A(this,el);A(this,_h);C(this,_h,e=>{if(!wu&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){c(this,el)||this.setEventListener(c(this,_h))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,el))==null||e.call(this),C(this,el,void 0))}setEventListener(e){var t;C(this,_h,e),(t=c(this,el))==null||t.call(this),C(this,el,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){c(this,Yc)!==e&&(C(this,Yc,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof c(this,Yc)=="boolean"?c(this,Yc):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Yc=new WeakMap,el=new WeakMap,_h=new WeakMap,iP),mA=new p$,Mh,tl,Rh,aP,g$=(aP=class extends Om{constructor(){super();A(this,Mh,!0);A(this,tl);A(this,Rh);C(this,Rh,e=>{if(!wu&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){c(this,tl)||this.setEventListener(c(this,Rh))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,tl))==null||e.call(this),C(this,tl,void 0))}setEventListener(e){var t;C(this,Rh,e),(t=c(this,tl))==null||t.call(this),C(this,tl,e(this.setOnline.bind(this)))}setOnline(e){c(this,Mh)!==e&&(C(this,Mh,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return c(this,Mh)}},Mh=new WeakMap,tl=new WeakMap,Rh=new WeakMap,aP),rb=new g$;function sN(){let n,e;const t=new Promise((r,i)=>{n=r,e=i});t.status="pending",t.catch(()=>{});function s(r){Object.assign(t,r),delete t.resolve,delete t.reject}return t.resolve=r=>{s({status:"fulfilled",value:r}),n(r)},t.reject=r=>{s({status:"rejected",reason:r}),e(r)},t}function x$(n){return Math.min(1e3*2**n,3e4)}function GM(n){return(n??"online")==="online"?rb.isOnline():!0}var qM=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function D1(n){return n instanceof qM}function KM(n){let e=!1,t=0,s=!1,r;const i=sN(),o=g=>{var N;s||(m(new qM(g)),(N=n.abort)==null||N.call(n))},l=()=>{e=!0},d=()=>{e=!1},u=()=>mA.isFocused()&&(n.networkMode==="always"||rb.isOnline())&&n.canRun(),h=()=>GM(n.networkMode)&&n.canRun(),f=g=>{var N;s||(s=!0,(N=n.onSuccess)==null||N.call(n,g),r==null||r(),i.resolve(g))},m=g=>{var N;s||(s=!0,(N=n.onError)==null||N.call(n,g),r==null||r(),i.reject(g))},p=()=>new Promise(g=>{var N;r=v=>{(s||u())&&g(v)},(N=n.onPause)==null||N.call(n)}).then(()=>{var g;r=void 0,s||(g=n.onContinue)==null||g.call(n)}),b=()=>{if(s)return;let g;const N=t===0?n.initialPromise:void 0;try{g=N??n.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(f).catch(v=>{var E;if(s)return;const y=n.retry??(wu?0:3),S=n.retryDelay??x$,w=typeof S=="function"?S(t,v):S,j=y===!0||typeof y=="number"&&t<y||typeof y=="function"&&y(t,v);if(e||!j){m(v);return}t++,(E=n.onFail)==null||E.call(n,t,v),h$(w).then(()=>u()?void 0:p()).then(()=>{e?m(v):b()})})};return{promise:i,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:l,continueRetry:d,canStart:h,start:()=>(h()?b():p().then(b),i)}}function y$(){let n=[],e=0,t=l=>{l()},s=l=>{l()},r=l=>setTimeout(l,0);const i=l=>{e?n.push(l):r(()=>{t(l)})},o=()=>{const l=n;n=[],l.length&&r(()=>{s(()=>{l.forEach(d=>{t(d)})})})};return{batch:l=>{let d;e++;try{d=l()}finally{e--,e||o()}return d},batchCalls:l=>(...d)=>{i(()=>{l(...d)})},schedule:i,setNotifyFunction:l=>{t=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{r=l}}}var dn=y$(),Xc,oP,YM=(oP=class{constructor(){A(this,Xc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),eN(this.gcTime)&&C(this,Xc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(wu?1/0:5*60*1e3))}clearGcTimeout(){c(this,Xc)&&(clearTimeout(c(this,Xc)),C(this,Xc,void 0))}},Xc=new WeakMap,oP),Dh,Ih,br,Vn,Rg,Qc,Jr,Ca,lP,v$=(lP=class extends YM{constructor(e){super();A(this,Jr);A(this,Dh);A(this,Ih);A(this,br);A(this,Vn);A(this,Rg);A(this,Qc);C(this,Qc,!1),C(this,Rg,e.defaultOptions),this.setOptions(e.options),this.observers=[],C(this,br,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,C(this,Dh,b$(this.options)),this.state=e.state??c(this,Dh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=c(this,Vn))==null?void 0:e.promise}setOptions(e){this.options={...c(this,Rg),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&c(this,br).remove(this)}setData(e,t){const s=nN(this.state.data,e,this.options);return k(this,Jr,Ca).call(this,{data:s,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),s}setState(e,t){k(this,Jr,Ca).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var s,r;const t=(s=c(this,Vn))==null?void 0:s.promise;return(r=c(this,Vn))==null||r.cancel(e),t?t.then(Mr).catch(Mr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(c(this,Dh))}isActive(){return this.observers.some(e=>fi(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===fA||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!HM(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=c(this,Vn))==null||t.continue()}onOnline(){var t;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=c(this,Vn))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),c(this,br).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(c(this,Vn)&&(c(this,Qc)?c(this,Vn).cancel({revert:!0}):c(this,Vn).cancelRetry()),this.scheduleGc()),c(this,br).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||k(this,Jr,Ca).call(this,{type:"invalidate"})}fetch(e,t){var d,u,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(c(this,Vn))return c(this,Vn).continueRetry(),c(this,Vn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(m=>m.options.queryFn);f&&this.setOptions(f.options)}const s=new AbortController,r=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(C(this,Qc,!0),s.signal)})},i=()=>{const f=WM(this.options,t),m={queryKey:this.queryKey,meta:this.meta};return r(m),C(this,Qc,!1),this.options.persister?this.options.persister(f,m,this):f(m)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};r(o),(d=this.options.behavior)==null||d.onFetch(o,this),C(this,Ih,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&k(this,Jr,Ca).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta});const l=f=>{var m,p,b,g;D1(f)&&f.silent||k(this,Jr,Ca).call(this,{type:"error",error:f}),D1(f)||((p=(m=c(this,br).config).onError)==null||p.call(m,f,this),(g=(b=c(this,br).config).onSettled)==null||g.call(b,this.state.data,f,this)),this.scheduleGc()};return C(this,Vn,KM({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:s.abort.bind(s),onSuccess:f=>{var m,p,b,g;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(N){l(N);return}(p=(m=c(this,br).config).onSuccess)==null||p.call(m,f,this),(g=(b=c(this,br).config).onSettled)==null||g.call(b,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,m)=>{k(this,Jr,Ca).call(this,{type:"failed",failureCount:f,error:m})},onPause:()=>{k(this,Jr,Ca).call(this,{type:"pause"})},onContinue:()=>{k(this,Jr,Ca).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),c(this,Vn).start()}},Dh=new WeakMap,Ih=new WeakMap,br=new WeakMap,Vn=new WeakMap,Rg=new WeakMap,Qc=new WeakMap,Jr=new WeakSet,Ca=function(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...XM(s.data,this.options),fetchMeta:e.meta??null};case"success":return{...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return D1(r)&&r.revert&&c(this,Ih)?{...c(this,Ih),fetchStatus:"idle"}:{...s,error:r,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),dn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),c(this,br).notify({query:this,type:"updated",action:e})})},lP);function XM(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:GM(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function b$(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,s=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Ri,cP,w$=(cP=class extends Om{constructor(e={}){super();A(this,Ri);this.config=e,C(this,Ri,new Map)}build(e,t,s){const r=t.queryKey,i=t.queryHash??hA(r,t);let o=this.get(i);return o||(o=new v$({cache:this,queryKey:r,queryHash:i,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){c(this,Ri).has(e.queryHash)||(c(this,Ri).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=c(this,Ri).get(e.queryHash);t&&(e.destroy(),t===e&&c(this,Ri).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){dn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return c(this,Ri).get(e)}getAll(){return[...c(this,Ri).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>d2(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>d2(e,s)):t}notify(e){dn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){dn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){dn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ri=new WeakMap,cP),Di,ss,Jc,Ii,qo,dP,S$=(dP=class extends YM{constructor(e){super();A(this,Ii);A(this,Di);A(this,ss);A(this,Jc);this.mutationId=e.mutationId,C(this,ss,e.mutationCache),C(this,Di,[]),this.state=e.state||QM(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){c(this,Di).includes(e)||(c(this,Di).push(e),this.clearGcTimeout(),c(this,ss).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){C(this,Di,c(this,Di).filter(t=>t!==e)),this.scheduleGc(),c(this,ss).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){c(this,Di).length||(this.state.status==="pending"?this.scheduleGc():c(this,ss).remove(this))}continue(){var e;return((e=c(this,Jc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var r,i,o,l,d,u,h,f,m,p,b,g,N,v,y,S,w,j,E,T;C(this,Jc,KM({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(P,_)=>{k(this,Ii,qo).call(this,{type:"failed",failureCount:P,error:_})},onPause:()=>{k(this,Ii,qo).call(this,{type:"pause"})},onContinue:()=>{k(this,Ii,qo).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>c(this,ss).canRun(this)}));const t=this.state.status==="pending",s=!c(this,Jc).canStart();try{if(!t){k(this,Ii,qo).call(this,{type:"pending",variables:e,isPaused:s}),await((i=(r=c(this,ss).config).onMutate)==null?void 0:i.call(r,e,this));const _=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,e));_!==this.state.context&&k(this,Ii,qo).call(this,{type:"pending",context:_,variables:e,isPaused:s})}const P=await c(this,Jc).start();return await((u=(d=c(this,ss).config).onSuccess)==null?void 0:u.call(d,P,e,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,P,e,this.state.context)),await((p=(m=c(this,ss).config).onSettled)==null?void 0:p.call(m,P,null,this.state.variables,this.state.context,this)),await((g=(b=this.options).onSettled)==null?void 0:g.call(b,P,null,e,this.state.context)),k(this,Ii,qo).call(this,{type:"success",data:P}),P}catch(P){try{throw await((v=(N=c(this,ss).config).onError)==null?void 0:v.call(N,P,e,this.state.context,this)),await((S=(y=this.options).onError)==null?void 0:S.call(y,P,e,this.state.context)),await((j=(w=c(this,ss).config).onSettled)==null?void 0:j.call(w,void 0,P,this.state.variables,this.state.context,this)),await((T=(E=this.options).onSettled)==null?void 0:T.call(E,void 0,P,e,this.state.context)),P}finally{k(this,Ii,qo).call(this,{type:"error",error:P})}}finally{c(this,ss).runNext(this)}}},Di=new WeakMap,ss=new WeakMap,Jc=new WeakMap,Ii=new WeakSet,qo=function(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),dn.batch(()=>{c(this,Di).forEach(s=>{s.onMutationUpdate(e)}),c(this,ss).notify({mutation:this,type:"updated",action:e})})},dP);function QM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ls,Dg,uP,N$=(uP=class extends Om{constructor(e={}){super();A(this,Ls);A(this,Dg);this.config=e,C(this,Ls,new Map),C(this,Dg,Date.now())}build(e,t,s){const r=new S$({mutationCache:this,mutationId:++Ot(this,Dg)._,options:e.defaultMutationOptions(t),state:s});return this.add(r),r}add(e){const t=uv(e),s=c(this,Ls).get(t)??[];s.push(e),c(this,Ls).set(t,s),this.notify({type:"added",mutation:e})}remove(e){var s;const t=uv(e);if(c(this,Ls).has(t)){const r=(s=c(this,Ls).get(t))==null?void 0:s.filter(i=>i!==e);r&&(r.length===0?c(this,Ls).delete(t):c(this,Ls).set(t,r))}this.notify({type:"removed",mutation:e})}canRun(e){var s;const t=(s=c(this,Ls).get(uv(e)))==null?void 0:s.find(r=>r.state.status==="pending");return!t||t===e}runNext(e){var s;const t=(s=c(this,Ls).get(uv(e)))==null?void 0:s.find(r=>r!==e&&r.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){dn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...c(this,Ls).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(s=>u2(t,s))}findAll(e={}){return this.getAll().filter(t=>u2(e,t))}notify(e){dn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return dn.batch(()=>Promise.all(e.map(t=>t.continue().catch(Mr))))}},Ls=new WeakMap,Dg=new WeakMap,uP);function uv(n){var e;return((e=n.options.scope)==null?void 0:e.id)??String(n.mutationId)}function m2(n){return{onFetch:(e,t)=>{var h,f,m,p,b;const s=e.options,r=(m=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((b=e.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},d=0;const u=async()=>{let g=!1;const N=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},v=WM(e.options,e.fetchOptions),y=async(S,w,j)=>{if(g)return Promise.reject();if(w==null&&S.pages.length)return Promise.resolve(S);const E={queryKey:e.queryKey,pageParam:w,direction:j?"backward":"forward",meta:e.options.meta};N(E);const T=await v(E),{maxPages:P}=e.options,_=j?m$:f$;return{pages:_(S.pages,T,P),pageParams:_(S.pageParams,w,P)}};if(r&&i.length){const S=r==="backward",w=S?j$:p2,j={pages:i,pageParams:o},E=w(s,j);l=await y(j,E,S)}else{const S=n??i.length;do{const w=d===0?o[0]??s.initialPageParam:p2(s,l);if(d>0&&w==null)break;l=await y(l,w),d++}while(d<S)}return l};e.options.persister?e.fetchFn=()=>{var g,N;return(N=(g=e.options).persister)==null?void 0:N.call(g,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function p2(n,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?n.getNextPageParam(e[s],e,t[s],t):void 0}function j$(n,{pages:e,pageParams:t}){var s;return e.length>0?(s=n.getPreviousPageParam)==null?void 0:s.call(n,e[0],e,t[0],t):void 0}var Bt,nl,sl,Lh,Fh,rl,Oh,Bh,hP,C$=(hP=class{constructor(n={}){A(this,Bt);A(this,nl);A(this,sl);A(this,Lh);A(this,Fh);A(this,rl);A(this,Oh);A(this,Bh);C(this,Bt,n.queryCache||new w$),C(this,nl,n.mutationCache||new N$),C(this,sl,n.defaultOptions||{}),C(this,Lh,new Map),C(this,Fh,new Map),C(this,rl,0)}mount(){Ot(this,rl)._++,c(this,rl)===1&&(C(this,Oh,mA.subscribe(async n=>{n&&(await this.resumePausedMutations(),c(this,Bt).onFocus())})),C(this,Bh,rb.subscribe(async n=>{n&&(await this.resumePausedMutations(),c(this,Bt).onOnline())})))}unmount(){var n,e;Ot(this,rl)._--,c(this,rl)===0&&((n=c(this,Oh))==null||n.call(this),C(this,Oh,void 0),(e=c(this,Bh))==null||e.call(this),C(this,Bh,void 0))}isFetching(n){return c(this,Bt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return c(this,nl).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=c(this,Bt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.getQueryData(n.queryKey);if(e===void 0)return this.fetchQuery(n);{const t=this.defaultQueryOptions(n),s=c(this,Bt).build(this,t);return n.revalidateIfStale&&s.isStaleByTime(Nh(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(n){return c(this,Bt).findAll(n).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(n,e,t){const s=this.defaultQueryOptions({queryKey:n}),r=c(this,Bt).get(s.queryHash),i=r==null?void 0:r.state.data,o=u$(e,i);if(o!==void 0)return c(this,Bt).build(this,s).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return dn.batch(()=>c(this,Bt).findAll(n).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=c(this,Bt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=c(this,Bt);dn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=c(this,Bt),s={type:"active",...n};return dn.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries(s,e)))}cancelQueries(n={},e={}){const t={revert:!0,...e},s=dn.batch(()=>c(this,Bt).findAll(n).map(r=>r.cancel(t)));return Promise.all(s).then(Mr).catch(Mr)}invalidateQueries(n={},e={}){return dn.batch(()=>{if(c(this,Bt).findAll(n).forEach(s=>{s.invalidate()}),n.refetchType==="none")return Promise.resolve();const t={...n,type:n.refetchType??n.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(n={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},s=dn.batch(()=>c(this,Bt).findAll(n).filter(r=>!r.isDisabled()).map(r=>{let i=r.fetch(void 0,t);return t.throwOnError||(i=i.catch(Mr)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(Mr)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=c(this,Bt).build(this,e);return t.isStaleByTime(Nh(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Mr).catch(Mr)}fetchInfiniteQuery(n){return n.behavior=m2(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Mr).catch(Mr)}ensureInfiniteQueryData(n){return n.behavior=m2(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return rb.isOnline()?c(this,nl).resumePausedMutations():Promise.resolve()}getQueryCache(){return c(this,Bt)}getMutationCache(){return c(this,nl)}getDefaultOptions(){return c(this,sl)}setDefaultOptions(n){C(this,sl,n)}setQueryDefaults(n,e){c(this,Lh).set(Su(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...c(this,Lh).values()];let t={};return e.forEach(s=>{gg(n,s.queryKey)&&(t={...t,...s.defaultOptions})}),t}setMutationDefaults(n,e){c(this,Fh).set(Su(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...c(this,Fh).values()];let t={};return e.forEach(s=>{gg(n,s.mutationKey)&&(t={...t,...s.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...c(this,sl).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=hA(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===fA&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...c(this,sl).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){c(this,Bt).clear(),c(this,nl).clear()}},Bt=new WeakMap,nl=new WeakMap,sl=new WeakMap,Lh=new WeakMap,Fh=new WeakMap,rl=new WeakMap,Oh=new WeakMap,Bh=new WeakMap,hP),ys,Be,Ig,rs,Zc,$h,il,Li,Lg,zh,Uh,ed,td,al,Hh,qe,gp,rN,iN,aN,oN,lN,cN,dN,JM,fP,A$=(fP=class extends Om{constructor(e,t){super();A(this,qe);A(this,ys);A(this,Be);A(this,Ig);A(this,rs);A(this,Zc);A(this,$h);A(this,il);A(this,Li);A(this,Lg);A(this,zh);A(this,Uh);A(this,ed);A(this,td);A(this,al);A(this,Hh,new Set);this.options=t,C(this,ys,e),C(this,Li,null),C(this,il,sN()),this.options.experimental_prefetchInRender||c(this,il).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(c(this,Be).addObserver(this),g2(c(this,Be),this.options)?k(this,qe,gp).call(this):this.updateResult(),k(this,qe,oN).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return uN(c(this,Be),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return uN(c(this,Be),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,k(this,qe,lN).call(this),k(this,qe,cN).call(this),c(this,Be).removeObserver(this)}setOptions(e,t){const s=this.options,r=c(this,Be);if(this.options=c(this,ys).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof fi(this.options.enabled,c(this,Be))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");k(this,qe,dN).call(this),c(this,Be).setOptions(this.options),s._defaulted&&!sb(this.options,s)&&c(this,ys).getQueryCache().notify({type:"observerOptionsUpdated",query:c(this,Be),observer:this});const i=this.hasListeners();i&&x2(c(this,Be),r,this.options,s)&&k(this,qe,gp).call(this),this.updateResult(t),i&&(c(this,Be)!==r||fi(this.options.enabled,c(this,Be))!==fi(s.enabled,c(this,Be))||Nh(this.options.staleTime,c(this,Be))!==Nh(s.staleTime,c(this,Be)))&&k(this,qe,rN).call(this);const o=k(this,qe,iN).call(this);i&&(c(this,Be)!==r||fi(this.options.enabled,c(this,Be))!==fi(s.enabled,c(this,Be))||o!==c(this,al))&&k(this,qe,aN).call(this,o)}getOptimisticResult(e){const t=c(this,ys).getQueryCache().build(c(this,ys),e),s=this.createResult(t,e);return k$(this,s)&&(C(this,rs,s),C(this,$h,this.options),C(this,Zc,c(this,Be).state)),s}getCurrentResult(){return c(this,rs)}trackResult(e,t){const s={};return Object.keys(e).forEach(r=>{Object.defineProperty(s,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),t==null||t(r),e[r])})}),s}trackProp(e){c(this,Hh).add(e)}getCurrentQuery(){return c(this,Be)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=c(this,ys).defaultQueryOptions(e),s=c(this,ys).getQueryCache().build(c(this,ys),t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return k(this,qe,gp).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),c(this,rs)))}createResult(e,t){var P;const s=c(this,Be),r=this.options,i=c(this,rs),o=c(this,Zc),l=c(this,$h),u=e!==s?e.state:c(this,Ig),{state:h}=e;let f={...h},m=!1,p;if(t._optimisticResults){const _=this.hasListeners(),R=!_&&g2(e,t),I=_&&x2(e,s,t,r);(R||I)&&(f={...f,...XM(h.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:b,errorUpdatedAt:g,status:N}=f;if(t.select&&f.data!==void 0)if(i&&f.data===(o==null?void 0:o.data)&&t.select===c(this,Lg))p=c(this,zh);else try{C(this,Lg,t.select),p=t.select(f.data),p=nN(i==null?void 0:i.data,p,t),C(this,zh,p),C(this,Li,null)}catch(_){C(this,Li,_)}else p=f.data;if(t.placeholderData!==void 0&&p===void 0&&N==="pending"){let _;if(i!=null&&i.isPlaceholderData&&t.placeholderData===(l==null?void 0:l.placeholderData))_=i.data;else if(_=typeof t.placeholderData=="function"?t.placeholderData((P=c(this,Uh))==null?void 0:P.state.data,c(this,Uh)):t.placeholderData,t.select&&_!==void 0)try{_=t.select(_),C(this,Li,null)}catch(R){C(this,Li,R)}_!==void 0&&(N="success",p=nN(i==null?void 0:i.data,_,t),m=!0)}c(this,Li)&&(b=c(this,Li),p=c(this,zh),g=Date.now(),N="error");const v=f.fetchStatus==="fetching",y=N==="pending",S=N==="error",w=y&&v,j=p!==void 0,T={status:N,fetchStatus:f.fetchStatus,isPending:y,isSuccess:N==="success",isError:S,isInitialLoading:w,isLoading:w,data:p,dataUpdatedAt:f.dataUpdatedAt,error:b,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&!y,isLoadingError:S&&!j,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:S&&j,isStale:pA(e,t),refetch:this.refetch,promise:c(this,il)};if(this.options.experimental_prefetchInRender){const _=L=>{T.status==="error"?L.reject(T.error):T.data!==void 0&&L.resolve(T.data)},R=()=>{const L=C(this,il,T.promise=sN());_(L)},I=c(this,il);switch(I.status){case"pending":e.queryHash===s.queryHash&&_(I);break;case"fulfilled":(T.status==="error"||T.data!==I.value)&&R();break;case"rejected":(T.status!=="error"||T.error!==I.reason)&&R();break}}return T}updateResult(e){const t=c(this,rs),s=this.createResult(c(this,Be),this.options);if(C(this,Zc,c(this,Be).state),C(this,$h,this.options),c(this,Zc).data!==void 0&&C(this,Uh,c(this,Be)),sb(s,t))return;C(this,rs,s);const r={},i=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!c(this,Hh).size)return!0;const d=new Set(l??c(this,Hh));return this.options.throwOnError&&d.add("error"),Object.keys(c(this,rs)).some(u=>{const h=u;return c(this,rs)[h]!==t[h]&&d.has(h)})};(e==null?void 0:e.listeners)!==!1&&i()&&(r.listeners=!0),k(this,qe,JM).call(this,{...r,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&k(this,qe,oN).call(this)}},ys=new WeakMap,Be=new WeakMap,Ig=new WeakMap,rs=new WeakMap,Zc=new WeakMap,$h=new WeakMap,il=new WeakMap,Li=new WeakMap,Lg=new WeakMap,zh=new WeakMap,Uh=new WeakMap,ed=new WeakMap,td=new WeakMap,al=new WeakMap,Hh=new WeakMap,qe=new WeakSet,gp=function(e){k(this,qe,dN).call(this);let t=c(this,Be).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(Mr)),t},rN=function(){k(this,qe,lN).call(this);const e=Nh(this.options.staleTime,c(this,Be));if(wu||c(this,rs).isStale||!eN(e))return;const s=HM(c(this,rs).dataUpdatedAt,e)+1;C(this,ed,setTimeout(()=>{c(this,rs).isStale||this.updateResult()},s))},iN=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(c(this,Be)):this.options.refetchInterval)??!1},aN=function(e){k(this,qe,cN).call(this),C(this,al,e),!(wu||fi(this.options.enabled,c(this,Be))===!1||!eN(c(this,al))||c(this,al)===0)&&C(this,td,setInterval(()=>{(this.options.refetchIntervalInBackground||mA.isFocused())&&k(this,qe,gp).call(this)},c(this,al)))},oN=function(){k(this,qe,rN).call(this),k(this,qe,aN).call(this,k(this,qe,iN).call(this))},lN=function(){c(this,ed)&&(clearTimeout(c(this,ed)),C(this,ed,void 0))},cN=function(){c(this,td)&&(clearInterval(c(this,td)),C(this,td,void 0))},dN=function(){const e=c(this,ys).getQueryCache().build(c(this,ys),this.options);if(e===c(this,Be))return;const t=c(this,Be);C(this,Be,e),C(this,Ig,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},JM=function(e){dn.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(c(this,rs))}),c(this,ys).getQueryCache().notify({query:c(this,Be),type:"observerResultsUpdated"})})},fP);function E$(n,e){return fi(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function g2(n,e){return E$(n,e)||n.state.data!==void 0&&uN(n,e,e.refetchOnMount)}function uN(n,e,t){if(fi(e.enabled,n)!==!1){const s=typeof t=="function"?t(n):t;return s==="always"||s!==!1&&pA(n,e)}return!1}function x2(n,e,t,s){return(n!==e||fi(s.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&pA(n,t)}function pA(n,e){return fi(e.enabled,n)!==!1&&n.isStaleByTime(Nh(e.staleTime,n))}function k$(n,e){return!sb(n.getCurrentResult(),e)}var ol,ll,vs,Ra,So,Hv,hN,mP,T$=(mP=class extends Om{constructor(t,s){super();A(this,So);A(this,ol);A(this,ll);A(this,vs);A(this,Ra);C(this,ol,t),this.setOptions(s),this.bindMethods(),k(this,So,Hv).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const s=this.options;this.options=c(this,ol).defaultMutationOptions(t),sb(this.options,s)||c(this,ol).getMutationCache().notify({type:"observerOptionsUpdated",mutation:c(this,vs),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Su(s.mutationKey)!==Su(this.options.mutationKey)?this.reset():((r=c(this,vs))==null?void 0:r.state.status)==="pending"&&c(this,vs).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=c(this,vs))==null||t.removeObserver(this)}onMutationUpdate(t){k(this,So,Hv).call(this),k(this,So,hN).call(this,t)}getCurrentResult(){return c(this,ll)}reset(){var t;(t=c(this,vs))==null||t.removeObserver(this),C(this,vs,void 0),k(this,So,Hv).call(this),k(this,So,hN).call(this)}mutate(t,s){var r;return C(this,Ra,s),(r=c(this,vs))==null||r.removeObserver(this),C(this,vs,c(this,ol).getMutationCache().build(c(this,ol),this.options)),c(this,vs).addObserver(this),c(this,vs).execute(t)}},ol=new WeakMap,ll=new WeakMap,vs=new WeakMap,Ra=new WeakMap,So=new WeakSet,Hv=function(){var s;const t=((s=c(this,vs))==null?void 0:s.state)??QM();C(this,ll,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},hN=function(t){dn.batch(()=>{var s,r,i,o,l,d,u,h;if(c(this,Ra)&&this.hasListeners()){const f=c(this,ll).variables,m=c(this,ll).context;(t==null?void 0:t.type)==="success"?((r=(s=c(this,Ra)).onSuccess)==null||r.call(s,t.data,f,m),(o=(i=c(this,Ra)).onSettled)==null||o.call(i,t.data,null,f,m)):(t==null?void 0:t.type)==="error"&&((d=(l=c(this,Ra)).onError)==null||d.call(l,t.error,f,m),(h=(u=c(this,Ra)).onSettled)==null||h.call(u,void 0,t.error,f,m))}this.listeners.forEach(f=>{f(c(this,ll))})})},mP),ZM=x.createContext(void 0),gA=n=>{const e=x.useContext(ZM);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},P$=({client:n,children:e})=>(x.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),a.jsx(ZM.Provider,{value:n,children:e})),eR=x.createContext(!1),_$=()=>x.useContext(eR);eR.Provider;function M$(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var R$=x.createContext(M$()),D$=()=>x.useContext(R$);function tR(n,e){return typeof n=="function"?n(...e):!!n}function fN(){}var I$=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},L$=n=>{x.useEffect(()=>{n.clearReset()},[n])},F$=({result:n,errorResetBoundary:e,throwOnError:t,query:s})=>n.isError&&!e.isReset()&&!n.isFetching&&s&&tR(t,[n.error,s]),O$=n=>{n.suspense&&(n.staleTime===void 0&&(n.staleTime=1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},B$=(n,e)=>n.isLoading&&n.isFetching&&!e,$$=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,y2=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function z$(n,e,t){var h,f,m,p,b;const s=gA(),r=_$(),i=D$(),o=s.defaultQueryOptions(n);(f=(h=s.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",O$(o),I$(o,i),L$(i);const l=!s.getQueryCache().get(o.queryHash),[d]=x.useState(()=>new e(s,o)),u=d.getOptimisticResult(o);if(x.useSyncExternalStore(x.useCallback(g=>{const N=r?fN:d.subscribe(dn.batchCalls(g));return d.updateResult(),N},[d,r]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),x.useEffect(()=>{d.setOptions(o,{listeners:!1})},[o,d]),$$(o,u))throw y2(o,d,i);if(F$({result:u,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash)}))throw u.error;if((p=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||p.call(m,o,u),o.experimental_prefetchInRender&&!wu&&B$(u,r)){const g=l?y2(o,d,i):(b=s.getQueryCache().get(o.queryHash))==null?void 0:b.promise;g==null||g.catch(fN).finally(()=>{d.updateResult()})}return o.notifyOnChangeProps?u:d.trackResult(u)}function Te(n,e){return z$(n,A$)}function Oe(n,e){const t=gA(),[s]=x.useState(()=>new T$(t,n));x.useEffect(()=>{s.setOptions(n)},[s,n]);const r=x.useSyncExternalStore(x.useCallback(o=>s.subscribe(dn.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=x.useCallback((o,l)=>{s.mutate(o,l).catch(fN)},[s]);if(r.error&&tR(s.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:i,mutateAsync:r.mutate}}async function nR(n){if(!n.ok){const e=await n.text()||n.statusText;throw new Error(`${n.status}: ${e}`)}}async function Ve(n,e,t){const s=await fetch(e,{method:n,headers:t?{"Content-Type":"application/json"}:{},body:t?JSON.stringify(t):void 0,credentials:"include"});return await nR(s),s}const U$=({on401:n})=>async({queryKey:e})=>{const t=await fetch(e.join("/"),{credentials:"include"});return n==="returnNull"&&t.status===401?null:(await nR(t),await t.json())},Re=new C$({defaultOptions:{queries:{queryFn:U$({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),H$=1,V$=1e6;let I1=0;function W$(){return I1=(I1+1)%Number.MAX_SAFE_INTEGER,I1.toString()}const L1=new Map,v2=n=>{if(L1.has(n))return;const e=setTimeout(()=>{L1.delete(n),Kp({type:"REMOVE_TOAST",toastId:n})},V$);L1.set(n,e)},G$=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,H$)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?v2(t):n.toasts.forEach(s=>{v2(s.id)}),{...n,toasts:n.toasts.map(s=>s.id===t||t===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Vv=[];let Wv={toasts:[]};function Kp(n){Wv=G$(Wv,n),Vv.forEach(e=>{e(Wv)})}function q$({...n}){const e=W$(),t=r=>Kp({type:"UPDATE_TOAST",toast:{...r,id:e}}),s=()=>Kp({type:"DISMISS_TOAST",toastId:e});return Kp({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:r=>{r||s()}}}),{id:e,dismiss:s,update:t}}function On(){const[n,e]=x.useState(Wv);return x.useEffect(()=>(Vv.push(e),()=>{const t=Vv.indexOf(e);t>-1&&Vv.splice(t,1)}),[n]),{...n,toast:q$,dismiss:t=>Kp({type:"DISMISS_TOAST",toastId:t})}}function oe(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function b2(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function sR(...n){return e=>{let t=!1;const s=n.map(r=>{const i=b2(r,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():b2(n[r],null)}}}}function we(...n){return x.useCallback(sR(...n),n)}function K$(n,e){const t=x.createContext(e),s=i=>{const{children:o,...l}=i,d=x.useMemo(()=>l,Object.values(l));return a.jsx(t.Provider,{value:d,children:o})};s.displayName=n+"Provider";function r(i){const o=x.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${n}\``)}return[s,r]}function Nn(n,e=[]){let t=[];function s(i,o){const l=x.createContext(o),d=t.length;t=[...t,o];const u=f=>{var v;const{scope:m,children:p,...b}=f,g=((v=m==null?void 0:m[n])==null?void 0:v[d])||l,N=x.useMemo(()=>b,Object.values(b));return a.jsx(g.Provider,{value:N,children:p})};u.displayName=i+"Provider";function h(f,m){var g;const p=((g=m==null?void 0:m[n])==null?void 0:g[d])||l,b=x.useContext(p);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const r=()=>{const i=t.map(o=>x.createContext(o));return function(l){const d=(l==null?void 0:l[n])||i;return x.useMemo(()=>({[`__scope${n}`]:{...l,[n]:d}}),[l,d])}};return r.scopeName=n,[s,Y$(r,...e)]}function Y$(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const s=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const o=s.reduce((l,{useScope:d,scopeName:u})=>{const f=d(i)[`__scope${u}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Nu(n){const e=X$(n),t=x.forwardRef((s,r)=>{const{children:i,...o}=s,l=x.Children.toArray(i),d=l.find(Q$);if(d){const u=d.props.children,h=l.map(f=>f===d?x.Children.count(u)>1?x.Children.only(null):x.isValidElement(u)?u.props.children:null:f);return a.jsx(e,{...o,ref:r,children:x.isValidElement(u)?x.cloneElement(u,void 0,h):null})}return a.jsx(e,{...o,ref:r,children:i})});return t.displayName=`${n}.Slot`,t}var xA=Nu("Slot");function X$(n){const e=x.forwardRef((t,s)=>{const{children:r,...i}=t;if(x.isValidElement(r)){const o=Z$(r),l=J$(i,r.props);return r.type!==x.Fragment&&(l.ref=s?sR(s,o):o),x.cloneElement(r,l)}return x.Children.count(r)>1?x.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var rR=Symbol("radix.slottable");function iR(n){const e=({children:t})=>a.jsx(a.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=rR,e}function Q$(n){return x.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===rR}function J$(n,e){const t={...e};for(const s in e){const r=n[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?t[s]=(...l)=>{i(...l),r(...l)}:r&&(t[s]=r):s==="style"?t[s]={...r,...i}:s==="className"&&(t[s]=[r,i].filter(Boolean).join(" "))}return{...n,...t}}function Z$(n){var s,r;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Ny(n){const e=n+"CollectionProvider",[t,s]=Nn(e),[r,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:N,children:v}=g,y=ut.useRef(null),S=ut.useRef(new Map).current;return a.jsx(r,{scope:N,itemMap:S,collectionRef:y,children:v})};o.displayName=e;const l=n+"CollectionSlot",d=Nu(l),u=ut.forwardRef((g,N)=>{const{scope:v,children:y}=g,S=i(l,v),w=we(N,S.collectionRef);return a.jsx(d,{ref:w,children:y})});u.displayName=l;const h=n+"CollectionItemSlot",f="data-radix-collection-item",m=Nu(h),p=ut.forwardRef((g,N)=>{const{scope:v,children:y,...S}=g,w=ut.useRef(null),j=we(N,w),E=i(h,v);return ut.useEffect(()=>(E.itemMap.set(w,{ref:w,...S}),()=>void E.itemMap.delete(w))),a.jsx(m,{[f]:"",ref:j,children:y})});p.displayName=h;function b(g){const N=i(n+"CollectionConsumer",g);return ut.useCallback(()=>{const y=N.collectionRef.current;if(!y)return[];const S=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(N.itemMap.values()).sort((E,T)=>S.indexOf(E.ref.current)-S.indexOf(T.ref.current))},[N.collectionRef,N.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},b,s]}var ez=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],pe=ez.reduce((n,e)=>{const t=Nu(`Primitive.${e}`),s=x.forwardRef((r,i)=>{const{asChild:o,...l}=r,d=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(d,{...l,ref:i})});return s.displayName=`Primitive.${e}`,{...n,[e]:s}},{});function aR(n,e){n&&Du.flushSync(()=>n.dispatchEvent(e))}function Gt(n){const e=x.useRef(n);return x.useEffect(()=>{e.current=n}),x.useMemo(()=>(...t)=>{var s;return(s=e.current)==null?void 0:s.call(e,...t)},[])}function tz(n,e=globalThis==null?void 0:globalThis.document){const t=Gt(n);x.useEffect(()=>{const s=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[t,e])}var nz="DismissableLayer",mN="dismissableLayer.update",sz="dismissableLayer.pointerDownOutside",rz="dismissableLayer.focusOutside",w2,oR=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Bm=x.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...d}=n,u=x.useContext(oR),[h,f]=x.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=x.useState({}),b=we(e,T=>f(T)),g=Array.from(u.layers),[N]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(N),y=h?g.indexOf(h):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,w=y>=v,j=az(T=>{const P=T.target,_=[...u.branches].some(R=>R.contains(P));!w||_||(r==null||r(T),o==null||o(T),T.defaultPrevented||l==null||l())},m),E=oz(T=>{const P=T.target;[...u.branches].some(R=>R.contains(P))||(i==null||i(T),o==null||o(T),T.defaultPrevented||l==null||l())},m);return tz(T=>{y===u.layers.size-1&&(s==null||s(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},m),x.useEffect(()=>{if(h)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(w2=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),S2(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=w2)}},[h,m,t,u]),x.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),S2())},[h,u]),x.useEffect(()=>{const T=()=>p({});return document.addEventListener(mN,T),()=>document.removeEventListener(mN,T)},[]),a.jsx(pe.div,{...d,ref:b,style:{pointerEvents:S?w?"auto":"none":void 0,...n.style},onFocusCapture:oe(n.onFocusCapture,E.onFocusCapture),onBlurCapture:oe(n.onBlurCapture,E.onBlurCapture),onPointerDownCapture:oe(n.onPointerDownCapture,j.onPointerDownCapture)})});Bm.displayName=nz;var iz="DismissableLayerBranch",lR=x.forwardRef((n,e)=>{const t=x.useContext(oR),s=x.useRef(null),r=we(e,s);return x.useEffect(()=>{const i=s.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),a.jsx(pe.div,{...n,ref:r})});lR.displayName=iz;function az(n,e=globalThis==null?void 0:globalThis.document){const t=Gt(n),s=x.useRef(!1),r=x.useRef(()=>{});return x.useEffect(()=>{const i=l=>{if(l.target&&!s.current){let d=function(){cR(sz,t,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=d,e.addEventListener("click",r.current,{once:!0})):d()}else e.removeEventListener("click",r.current);s.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function oz(n,e=globalThis==null?void 0:globalThis.document){const t=Gt(n),s=x.useRef(!1);return x.useEffect(()=>{const r=i=>{i.target&&!s.current&&cR(rz,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function S2(){const n=new CustomEvent(mN);document.dispatchEvent(n)}function cR(n,e,t,{discrete:s}){const r=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),s?aR(r,i):r.dispatchEvent(i)}var lz=Bm,cz=lR,Jt=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},dz="Portal",jy=x.forwardRef((n,e)=>{var l;const{container:t,...s}=n,[r,i]=x.useState(!1);Jt(()=>i(!0),[]);const o=t||r&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?F6.createPortal(a.jsx(pe.div,{...s,ref:e}),o):null});jy.displayName=dz;function uz(n,e){return x.useReducer((t,s)=>e[t][s]??t,n)}var ps=n=>{const{present:e,children:t}=n,s=hz(e),r=typeof t=="function"?t({present:s.isPresent}):x.Children.only(t),i=we(s.ref,fz(r));return typeof t=="function"||s.isPresent?x.cloneElement(r,{ref:i}):null};ps.displayName="Presence";function hz(n){const[e,t]=x.useState(),s=x.useRef({}),r=x.useRef(n),i=x.useRef("none"),o=n?"mounted":"unmounted",[l,d]=uz(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const u=hv(s.current);i.current=l==="mounted"?u:"none"},[l]),Jt(()=>{const u=s.current,h=r.current;if(h!==n){const m=i.current,p=hv(u);n?d("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?d("UNMOUNT"):d(h&&m!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,d]),Jt(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=p=>{const g=hv(s.current).includes(p.animationName);if(p.target===e&&g&&(d("ANIMATION_END"),!r.current)){const N=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=N)})}},m=p=>{p.target===e&&(i.current=hv(s.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(u=>{u&&(s.current=getComputedStyle(u)),t(u)},[])}}function hv(n){return(n==null?void 0:n.animationName)||"none"}function fz(n){var s,r;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Ds({prop:n,defaultProp:e,onChange:t=()=>{}}){const[s,r]=mz({defaultProp:e,onChange:t}),i=n!==void 0,o=i?n:s,l=Gt(t),d=x.useCallback(u=>{if(i){const f=typeof u=="function"?u(n):u;f!==n&&l(f)}else r(u)},[i,n,r,l]);return[o,d]}function mz({defaultProp:n,onChange:e}){const t=x.useState(n),[s]=t,r=x.useRef(s),i=Gt(e);return x.useEffect(()=>{r.current!==s&&(i(s),r.current=s)},[s,r,i]),t}var pz="VisuallyHidden",Cy=x.forwardRef((n,e)=>a.jsx(pe.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));Cy.displayName=pz;var gz=Cy,yA="ToastProvider",[vA,xz,yz]=Ny("Toast"),[dR,hQ]=Nn("Toast",[yz]),[vz,yw]=dR(yA),uR=n=>{const{__scopeToast:e,label:t="Notification",duration:s=5e3,swipeDirection:r="right",swipeThreshold:i=50,children:o}=n,[l,d]=x.useState(null),[u,h]=x.useState(0),f=x.useRef(!1),m=x.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${yA}\`. Expected non-empty \`string\`.`),a.jsx(vA.Provider,{scope:e,children:a.jsx(vz,{scope:e,label:t,duration:s,swipeDirection:r,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:d,onToastAdd:x.useCallback(()=>h(p=>p+1),[]),onToastRemove:x.useCallback(()=>h(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};uR.displayName=yA;var hR="ToastViewport",bz=["F8"],pN="toast.viewportPause",gN="toast.viewportResume",fR=x.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:s=bz,label:r="Notifications ({hotkey})",...i}=n,o=yw(hR,t),l=xz(t),d=x.useRef(null),u=x.useRef(null),h=x.useRef(null),f=x.useRef(null),m=we(e,f,o.onViewportChange),p=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=o.toastCount>0;x.useEffect(()=>{const N=v=>{var S;s.length!==0&&s.every(w=>v[w]||v.code===w)&&((S=f.current)==null||S.focus())};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[s]),x.useEffect(()=>{const N=d.current,v=f.current;if(b&&N&&v){const y=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(pN);v.dispatchEvent(E),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(gN);v.dispatchEvent(E),o.isClosePausedRef.current=!1}},w=E=>{!N.contains(E.relatedTarget)&&S()},j=()=>{N.contains(document.activeElement)||S()};return N.addEventListener("focusin",y),N.addEventListener("focusout",w),N.addEventListener("pointermove",y),N.addEventListener("pointerleave",j),window.addEventListener("blur",y),window.addEventListener("focus",S),()=>{N.removeEventListener("focusin",y),N.removeEventListener("focusout",w),N.removeEventListener("pointermove",y),N.removeEventListener("pointerleave",j),window.removeEventListener("blur",y),window.removeEventListener("focus",S)}}},[b,o.isClosePausedRef]);const g=x.useCallback(({tabbingDirection:N})=>{const y=l().map(S=>{const w=S.ref.current,j=[w,...Rz(w)];return N==="forwards"?j:j.reverse()});return(N==="forwards"?y.reverse():y).flat()},[l]);return x.useEffect(()=>{const N=f.current;if(N){const v=y=>{var j,E,T;const S=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!S){const P=document.activeElement,_=y.shiftKey;if(y.target===N&&_){(j=u.current)==null||j.focus();return}const L=g({tabbingDirection:_?"backwards":"forwards"}),U=L.findIndex(B=>B===P);F1(L.slice(U+1))?y.preventDefault():_?(E=u.current)==null||E.focus():(T=h.current)==null||T.focus()}};return N.addEventListener("keydown",v),()=>N.removeEventListener("keydown",v)}},[l,g]),a.jsxs(cz,{ref:d,role:"region","aria-label":r.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&a.jsx(xN,{ref:u,onFocusFromOutsideViewport:()=>{const N=g({tabbingDirection:"forwards"});F1(N)}}),a.jsx(vA.Slot,{scope:t,children:a.jsx(pe.ol,{tabIndex:-1,...i,ref:m})}),b&&a.jsx(xN,{ref:h,onFocusFromOutsideViewport:()=>{const N=g({tabbingDirection:"backwards"});F1(N)}})]})});fR.displayName=hR;var mR="ToastFocusProxy",xN=x.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:s,...r}=n,i=yw(mR,t);return a.jsx(Cy,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&s()}})});xN.displayName=mR;var vw="Toast",wz="toast.swipeStart",Sz="toast.swipeMove",Nz="toast.swipeCancel",jz="toast.swipeEnd",pR=x.forwardRef((n,e)=>{const{forceMount:t,open:s,defaultOpen:r,onOpenChange:i,...o}=n,[l=!0,d]=Ds({prop:s,defaultProp:r,onChange:i});return a.jsx(ps,{present:t||l,children:a.jsx(Ez,{open:l,...o,ref:e,onClose:()=>d(!1),onPause:Gt(n.onPause),onResume:Gt(n.onResume),onSwipeStart:oe(n.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:oe(n.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:oe(n.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:oe(n.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),d(!1)})})})});pR.displayName=vw;var[Cz,Az]=dR(vw,{onClose(){}}),Ez=x.forwardRef((n,e)=>{const{__scopeToast:t,type:s="foreground",duration:r,open:i,onClose:o,onEscapeKeyDown:l,onPause:d,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:p,...b}=n,g=yw(vw,t),[N,v]=x.useState(null),y=we(e,B=>v(B)),S=x.useRef(null),w=x.useRef(null),j=r||g.duration,E=x.useRef(0),T=x.useRef(j),P=x.useRef(0),{onToastAdd:_,onToastRemove:R}=g,I=Gt(()=>{var Q;(N==null?void 0:N.contains(document.activeElement))&&((Q=g.viewport)==null||Q.focus()),o()}),L=x.useCallback(B=>{!B||B===1/0||(window.clearTimeout(P.current),E.current=new Date().getTime(),P.current=window.setTimeout(I,B))},[I]);x.useEffect(()=>{const B=g.viewport;if(B){const Q=()=>{L(T.current),u==null||u()},F=()=>{const H=new Date().getTime()-E.current;T.current=T.current-H,window.clearTimeout(P.current),d==null||d()};return B.addEventListener(pN,F),B.addEventListener(gN,Q),()=>{B.removeEventListener(pN,F),B.removeEventListener(gN,Q)}}},[g.viewport,j,d,u,L]),x.useEffect(()=>{i&&!g.isClosePausedRef.current&&L(j)},[i,j,g.isClosePausedRef,L]),x.useEffect(()=>(_(),()=>R()),[_,R]);const U=x.useMemo(()=>N?SR(N):null,[N]);return g.viewport?a.jsxs(a.Fragment,{children:[U&&a.jsx(kz,{__scopeToast:t,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:U}),a.jsx(Cz,{scope:t,onClose:I,children:Du.createPortal(a.jsx(vA.ItemSlot,{scope:t,children:a.jsx(lz,{asChild:!0,onEscapeKeyDown:oe(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||I(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(pe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...b,ref:y,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:oe(n.onKeyDown,B=>{B.key==="Escape"&&(l==null||l(B.nativeEvent),B.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:oe(n.onPointerDown,B=>{B.button===0&&(S.current={x:B.clientX,y:B.clientY})}),onPointerMove:oe(n.onPointerMove,B=>{if(!S.current)return;const Q=B.clientX-S.current.x,F=B.clientY-S.current.y,H=!!w.current,$=["left","right"].includes(g.swipeDirection),K=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,D=$?K(0,Q):0,M=$?0:K(0,F),q=B.pointerType==="touch"?10:2,z={x:D,y:M},G={originalEvent:B,delta:z};H?(w.current=z,fv(Sz,f,G,{discrete:!1})):N2(z,g.swipeDirection,q)?(w.current=z,fv(wz,h,G,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(Q)>q||Math.abs(F)>q)&&(S.current=null)}),onPointerUp:oe(n.onPointerUp,B=>{const Q=w.current,F=B.target;if(F.hasPointerCapture(B.pointerId)&&F.releasePointerCapture(B.pointerId),w.current=null,S.current=null,Q){const H=B.currentTarget,$={originalEvent:B,delta:Q};N2(Q,g.swipeDirection,g.swipeThreshold)?fv(jz,p,$,{discrete:!0}):fv(Nz,m,$,{discrete:!0}),H.addEventListener("click",K=>K.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),kz=n=>{const{__scopeToast:e,children:t,...s}=n,r=yw(vw,e),[i,o]=x.useState(!1),[l,d]=x.useState(!1);return _z(()=>o(!0)),x.useEffect(()=>{const u=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(jy,{asChild:!0,children:a.jsx(Cy,{...s,children:i&&a.jsxs(a.Fragment,{children:[r.label," ",t]})})})},Tz="ToastTitle",gR=x.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return a.jsx(pe.div,{...s,ref:e})});gR.displayName=Tz;var Pz="ToastDescription",xR=x.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return a.jsx(pe.div,{...s,ref:e})});xR.displayName=Pz;var yR="ToastAction",vR=x.forwardRef((n,e)=>{const{altText:t,...s}=n;return t.trim()?a.jsx(wR,{altText:t,asChild:!0,children:a.jsx(bA,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${yR}\`. Expected non-empty \`string\`.`),null)});vR.displayName=yR;var bR="ToastClose",bA=x.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n,r=Az(bR,t);return a.jsx(wR,{asChild:!0,children:a.jsx(pe.button,{type:"button",...s,ref:e,onClick:oe(n.onClick,r.onClose)})})});bA.displayName=bR;var wR=x.forwardRef((n,e)=>{const{__scopeToast:t,altText:s,...r}=n;return a.jsx(pe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...r,ref:e})});function SR(n){const e=[];return Array.from(n.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),Mz(s)){const r=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!r)if(i){const o=s.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...SR(s))}}),e}function fv(n,e,t,{discrete:s}){const r=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),s?aR(r,i):r.dispatchEvent(i)}var N2=(n,e,t=0)=>{const s=Math.abs(n.x),r=Math.abs(n.y),i=s>r;return e==="left"||e==="right"?i&&s>t:!i&&r>t};function _z(n=()=>{}){const e=Gt(n);Jt(()=>{let t=0,s=0;return t=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(s)}},[e])}function Mz(n){return n.nodeType===n.ELEMENT_NODE}function Rz(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function F1(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var Dz=uR,NR=fR,jR=pR,CR=gR,AR=xR,ER=vR,kR=bA;function TR(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=TR(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function $m(){for(var n,e,t=0,s="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=TR(n))&&(s&&(s+=" "),s+=e);return s}const j2=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,C2=$m,Iu=(n,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return C2(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:i}=e,o=Object.keys(r).map(u=>{const h=t==null?void 0:t[u],f=i==null?void 0:i[u];if(h===null)return null;const m=j2(h)||j2(f);return r[u][m]}),l=t&&Object.entries(t).reduce((u,h)=>{let[f,m]=h;return m===void 0||(u[f]=m),u},{}),d=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,h)=>{let{class:f,className:m,...p}=h;return Object.entries(p).every(b=>{let[g,N]=b;return Array.isArray(N)?N.includes({...i,...l}[g]):{...i,...l}[g]===N})?[...u,f,m]:u},[]);return C2(n,o,d,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iz=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PR=(...n)=>n.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fz=x.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:o,...l},d)=>x.createElement("svg",{ref:d,...Lz,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:PR("lucide",r),...l},[...o.map(([u,h])=>x.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=(n,e)=>{const t=x.forwardRef(({className:s,...r},i)=>x.createElement(Fz,{ref:i,iconNode:e,className:PR(`lucide-${Iz(n)}`,s),...r}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oz=ne("AlarmClock",[["circle",{cx:"12",cy:"13",r:"8",key:"3y4lt7"}],["path",{d:"M12 9v4l2 2",key:"1c63tq"}],["path",{d:"M5 3 2 6",key:"18tl5t"}],["path",{d:"m22 6-3-3",key:"1opdir"}],["path",{d:"M6.38 18.7 4 21",key:"17xu3x"}],["path",{d:"M17.64 18.67 20 21",key:"kv2oe2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=ne("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=ne("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bz=ne("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=ne("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=ne("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=ne("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=ne("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=ne("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=ne("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $z=ne("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=ne("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=ne("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=ne("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zz=ne("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uz=ne("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=ne("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hz=ne("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=ne("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=ne("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=ne("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=ne("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=ne("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wz=ne("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gz=ne("Folders",[["path",{d:"M20 17a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3.9a2 2 0 0 1-1.69-.9l-.81-1.2a2 2 0 0 0-1.67-.9H8a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2Z",key:"4u7rpt"}],["path",{d:"M2 8v11a2 2 0 0 0 2 2h14",key:"1eicx1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qz=ne("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kz=ne("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=ne("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=ne("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=ne("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=ne("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yz=ne("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=ne("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=ne("ListMusic",[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=ne("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xz=ne("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qz=ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=ne("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=ne("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jz=ne("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zz=ne("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=ne("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=ne("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=ne("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=ne("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=ne("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=ne("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=ne("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=ne("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=ne("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=ne("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=ne("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=ne("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=ne("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=ne("Repeat1",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=ne("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=ne("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=ne("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=ne("ScrollText",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=ne("Scroll",[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=ne("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=ne("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=ne("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=ne("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=ne("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=ne("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=ne("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=ne("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=ne("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=ne("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=ne("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=ne("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=ne("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=ne("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=ne("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=ne("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=ne("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),TA="-",gU=n=>{const e=yU(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:o=>{const l=o.split(TA);return l[0]===""&&l.length!==1&&l.shift(),zR(l,e)||xU(o)},getConflictingClassGroupIds:(o,l)=>{const d=t[o]||[];return l&&s[o]?[...d,...s[o]]:d}}},zR=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],s=e.nextPart.get(t),r=s?zR(n.slice(1),s):void 0;if(r)return r;if(e.validators.length===0)return;const i=n.join(TA);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},M2=/^\[(.+)\]$/,xU=n=>{if(M2.test(n)){const e=M2.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},yU=n=>{const{theme:e,prefix:t}=n,s={nextPart:new Map,validators:[]};return bU(Object.entries(n.classGroups),t).forEach(([i,o])=>{NN(o,s,i,e)}),s},NN=(n,e,t,s)=>{n.forEach(r=>{if(typeof r=="string"){const i=r===""?e:R2(e,r);i.classGroupId=t;return}if(typeof r=="function"){if(vU(r)){NN(r(s),e,t,s);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([i,o])=>{NN(o,R2(e,i),t,s)})})},R2=(n,e)=>{let t=n;return e.split(TA).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},vU=n=>n.isThemeGetter,bU=(n,e)=>e?n.map(([t,s])=>{const r=s.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[t,r]}):n,wU=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const r=(i,o)=>{t.set(i,o),e++,e>n&&(e=0,s=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=s.get(i))!==void 0)return r(i,o),o},set(i,o){t.has(i)?t.set(i,o):r(i,o)}}},UR="!",SU=n=>{const{separator:e,experimentalParseClassName:t}=n,s=e.length===1,r=e[0],i=e.length,o=l=>{const d=[];let u=0,h=0,f;for(let N=0;N<l.length;N++){let v=l[N];if(u===0){if(v===r&&(s||l.slice(N,N+i)===e)){d.push(l.slice(h,N)),h=N+i;continue}if(v==="/"){f=N;continue}}v==="["?u++:v==="]"&&u--}const m=d.length===0?l:l.substring(h),p=m.startsWith(UR),b=p?m.substring(1):m,g=f&&f>h?f-h:void 0;return{modifiers:d,hasImportantModifier:p,baseClassName:b,maybePostfixModifierPosition:g}};return t?l=>t({className:l,parseClassName:o}):o},NU=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},jU=n=>({cache:wU(n.cacheSize),parseClassName:SU(n),...gU(n)}),CU=/\s+/,AU=(n,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:r}=e,i=[],o=n.trim().split(CU);let l="";for(let d=o.length-1;d>=0;d-=1){const u=o[d],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:p}=t(u);let b=!!p,g=s(b?m.substring(0,p):m);if(!g){if(!b){l=u+(l.length>0?" "+l:l);continue}if(g=s(m),!g){l=u+(l.length>0?" "+l:l);continue}b=!1}const N=NU(h).join(":"),v=f?N+UR:N,y=v+g;if(i.includes(y))continue;i.push(y);const S=r(g,b);for(let w=0;w<S.length;++w){const j=S[w];i.push(v+j)}l=u+(l.length>0?" "+l:l)}return l};function EU(){let n=0,e,t,s="";for(;n<arguments.length;)(e=arguments[n++])&&(t=HR(e))&&(s&&(s+=" "),s+=t);return s}const HR=n=>{if(typeof n=="string")return n;let e,t="";for(let s=0;s<n.length;s++)n[s]&&(e=HR(n[s]))&&(t&&(t+=" "),t+=e);return t};function kU(n,...e){let t,s,r,i=o;function o(d){const u=e.reduce((h,f)=>f(h),n());return t=jU(u),s=t.cache.get,r=t.cache.set,i=l,l(d)}function l(d){const u=s(d);if(u)return u;const h=AU(d,t);return r(d,h),h}return function(){return i(EU.apply(null,arguments))}}const yt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},VR=/^\[(?:([a-z-]+):)?(.+)\]$/i,TU=/^\d+\/\d+$/,PU=new Set(["px","full","screen"]),_U=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,MU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,RU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,DU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,IU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ja=n=>jh(n)||PU.has(n)||TU.test(n),Ho=n=>zm(n,"length",HU),jh=n=>!!n&&!Number.isNaN(Number(n)),O1=n=>zm(n,"number",jh),rp=n=>!!n&&Number.isInteger(Number(n)),LU=n=>n.endsWith("%")&&jh(n.slice(0,-1)),Ae=n=>VR.test(n),Vo=n=>_U.test(n),FU=new Set(["length","size","percentage"]),OU=n=>zm(n,FU,WR),BU=n=>zm(n,"position",WR),$U=new Set(["image","url"]),zU=n=>zm(n,$U,WU),UU=n=>zm(n,"",VU),ip=()=>!0,zm=(n,e,t)=>{const s=VR.exec(n);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},HU=n=>MU.test(n)&&!RU.test(n),WR=()=>!1,VU=n=>DU.test(n),WU=n=>IU.test(n),GU=()=>{const n=yt("colors"),e=yt("spacing"),t=yt("blur"),s=yt("brightness"),r=yt("borderColor"),i=yt("borderRadius"),o=yt("borderSpacing"),l=yt("borderWidth"),d=yt("contrast"),u=yt("grayscale"),h=yt("hueRotate"),f=yt("invert"),m=yt("gap"),p=yt("gradientColorStops"),b=yt("gradientColorStopPositions"),g=yt("inset"),N=yt("margin"),v=yt("opacity"),y=yt("padding"),S=yt("saturate"),w=yt("scale"),j=yt("sepia"),E=yt("skew"),T=yt("space"),P=yt("translate"),_=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",Ae,e],L=()=>[Ae,e],U=()=>["",ja,Ho],B=()=>["auto",jh,Ae],Q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],F=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],K=()=>["","0",Ae],D=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>[jh,Ae];return{cacheSize:500,separator:":",theme:{colors:[ip],spacing:[ja,Ho],blur:["none","",Vo,Ae],brightness:M(),borderColor:[n],borderRadius:["none","","full",Vo,Ae],borderSpacing:L(),borderWidth:U(),contrast:M(),grayscale:K(),hueRotate:M(),invert:K(),gap:L(),gradientColorStops:[n],gradientColorStopPositions:[LU,Ho],inset:I(),margin:I(),opacity:M(),padding:L(),saturate:M(),scale:M(),sepia:K(),skew:M(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",Ae]}],container:["container"],columns:[{columns:[Vo]}],"break-after":[{"break-after":D()}],"break-before":[{"break-before":D()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Q(),Ae]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",rp,Ae]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ae]}],grow:[{grow:K()}],shrink:[{shrink:K()}],order:[{order:["first","last","none",rp,Ae]}],"grid-cols":[{"grid-cols":[ip]}],"col-start-end":[{col:["auto",{span:["full",rp,Ae]},Ae]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[ip]}],"row-start-end":[{row:["auto",{span:[rp,Ae]},Ae]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ae]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ae]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[N]}],mx:[{mx:[N]}],my:[{my:[N]}],ms:[{ms:[N]}],me:[{me:[N]}],mt:[{mt:[N]}],mr:[{mr:[N]}],mb:[{mb:[N]}],ml:[{ml:[N]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ae,e]}],"min-w":[{"min-w":[Ae,e,"min","max","fit"]}],"max-w":[{"max-w":[Ae,e,"none","full","min","max","fit","prose",{screen:[Vo]},Vo]}],h:[{h:[Ae,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ae,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ae,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ae,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Vo,Ho]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",O1]}],"font-family":[{font:[ip]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ae]}],"line-clamp":[{"line-clamp":["none",jh,O1]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ja,Ae]}],"list-image":[{"list-image":["none",Ae]}],"list-style-type":[{list:["none","disc","decimal",Ae]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ja,Ho]}],"underline-offset":[{"underline-offset":["auto",ja,Ae]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ae]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ae]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Q(),BU]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",OU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},zU]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...F(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:F()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...F()]}],"outline-offset":[{"outline-offset":[ja,Ae]}],"outline-w":[{outline:[ja,Ho]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[ja,Ho]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Vo,UU]}],"shadow-color":[{shadow:[ip]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",Vo,Ae]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ae]}],duration:[{duration:M()}],ease:[{ease:["linear","in","out","in-out",Ae]}],delay:[{delay:M()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ae]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[rp,Ae]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ae]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ae]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ae]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[ja,Ho,O1]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},qU=kU(GU);function ee(...n){return qU($m(n))}const KU=Dz,GR=x.forwardRef(({className:n,...e},t)=>a.jsx(NR,{ref:t,className:ee("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));GR.displayName=NR.displayName;const YU=Iu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),qR=x.forwardRef(({className:n,variant:e,...t},s)=>a.jsx(jR,{ref:s,className:ee(YU({variant:e}),n),...t}));qR.displayName=jR.displayName;const XU=x.forwardRef(({className:n,...e},t)=>a.jsx(ER,{ref:t,className:ee("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));XU.displayName=ER.displayName;const KR=x.forwardRef(({className:n,...e},t)=>a.jsx(kR,{ref:t,className:ee("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:a.jsx(bc,{className:"h-4 w-4"})}));KR.displayName=kR.displayName;const YR=x.forwardRef(({className:n,...e},t)=>a.jsx(CR,{ref:t,className:ee("text-sm font-semibold",n),...e}));YR.displayName=CR.displayName;const XR=x.forwardRef(({className:n,...e},t)=>a.jsx(AR,{ref:t,className:ee("text-sm opacity-90",n),...e}));XR.displayName=AR.displayName;function QU(){const{toasts:n}=On();return a.jsxs(KU,{children:[n.map(function({id:e,title:t,description:s,action:r,...i}){return a.jsxs(qR,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[t&&a.jsx(YR,{children:t}),s&&a.jsx(XR,{children:s})]}),r,a.jsx(KR,{})]},e)}),a.jsx(GR,{})]})}var JU=EP[" useId ".trim().toString()]||(()=>{}),ZU=0;function $r(n){const[e,t]=x.useState(JU());return Jt(()=>{n||t(s=>s??String(ZU++))},[n]),n||(e?`radix-${e}`:"")}const eH=["top","right","bottom","left"],wc=Math.min,sr=Math.max,ab=Math.round,mv=Math.floor,fa=n=>({x:n,y:n}),tH={left:"right",right:"left",bottom:"top",top:"bottom"},nH={start:"end",end:"start"};function jN(n,e,t){return sr(n,wc(e,t))}function _o(n,e){return typeof n=="function"?n(e):n}function Mo(n){return n.split("-")[0]}function Um(n){return n.split("-")[1]}function PA(n){return n==="x"?"y":"x"}function _A(n){return n==="y"?"height":"width"}function Sc(n){return["top","bottom"].includes(Mo(n))?"y":"x"}function MA(n){return PA(Sc(n))}function sH(n,e,t){t===void 0&&(t=!1);const s=Um(n),r=MA(n),i=_A(r);let o=r==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=ob(o)),[o,ob(o)]}function rH(n){const e=ob(n);return[CN(n),e,CN(e)]}function CN(n){return n.replace(/start|end/g,e=>nH[e])}function iH(n,e,t){const s=["left","right"],r=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?r:s:e?s:r;case"left":case"right":return e?i:o;default:return[]}}function aH(n,e,t,s){const r=Um(n);let i=iH(Mo(n),t==="start",s);return r&&(i=i.map(o=>o+"-"+r),e&&(i=i.concat(i.map(CN)))),i}function ob(n){return n.replace(/left|right|bottom|top/g,e=>tH[e])}function oH(n){return{top:0,right:0,bottom:0,left:0,...n}}function QR(n){return typeof n!="number"?oH(n):{top:n,right:n,bottom:n,left:n}}function lb(n){const{x:e,y:t,width:s,height:r}=n;return{width:s,height:r,top:t,left:e,right:e+s,bottom:t+r,x:e,y:t}}function D2(n,e,t){let{reference:s,floating:r}=n;const i=Sc(e),o=MA(e),l=_A(o),d=Mo(e),u=i==="y",h=s.x+s.width/2-r.width/2,f=s.y+s.height/2-r.height/2,m=s[l]/2-r[l]/2;let p;switch(d){case"top":p={x:h,y:s.y-r.height};break;case"bottom":p={x:h,y:s.y+s.height};break;case"right":p={x:s.x+s.width,y:f};break;case"left":p={x:s.x-r.width,y:f};break;default:p={x:s.x,y:s.y}}switch(Um(e)){case"start":p[o]-=m*(t&&u?-1:1);break;case"end":p[o]+=m*(t&&u?-1:1);break}return p}const lH=async(n,e,t)=>{const{placement:s="bottom",strategy:r="absolute",middleware:i=[],platform:o}=t,l=i.filter(Boolean),d=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:n,floating:e,strategy:r}),{x:h,y:f}=D2(u,s,d),m=s,p={},b=0;for(let g=0;g<l.length;g++){const{name:N,fn:v}=l[g],{x:y,y:S,data:w,reset:j}=await v({x:h,y:f,initialPlacement:s,placement:m,strategy:r,middlewareData:p,rects:u,platform:o,elements:{reference:n,floating:e}});h=y??h,f=S??f,p={...p,[N]:{...p[N],...w}},j&&b<=50&&(b++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(u=j.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:r}):j.rects),{x:h,y:f}=D2(u,m,d)),g=-1)}return{x:h,y:f,placement:m,strategy:r,middlewareData:p}};async function yg(n,e){var t;e===void 0&&(e={});const{x:s,y:r,platform:i,rects:o,elements:l,strategy:d}=n,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:p=0}=_o(e,n),b=QR(p),N=l[m?f==="floating"?"reference":"floating":f],v=lb(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(N)))==null||t?N:N.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:d})),y=f==="floating"?{x:s,y:r,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),w=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},j=lb(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:S,strategy:d}):y);return{top:(v.top-j.top+b.top)/w.y,bottom:(j.bottom-v.bottom+b.bottom)/w.y,left:(v.left-j.left+b.left)/w.x,right:(j.right-v.right+b.right)/w.x}}const cH=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:s,placement:r,rects:i,platform:o,elements:l,middlewareData:d}=e,{element:u,padding:h=0}=_o(n,e)||{};if(u==null)return{};const f=QR(h),m={x:t,y:s},p=MA(r),b=_A(p),g=await o.getDimensions(u),N=p==="y",v=N?"top":"left",y=N?"bottom":"right",S=N?"clientHeight":"clientWidth",w=i.reference[b]+i.reference[p]-m[p]-i.floating[b],j=m[p]-i.reference[p],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let T=E?E[S]:0;(!T||!await(o.isElement==null?void 0:o.isElement(E)))&&(T=l.floating[S]||i.floating[b]);const P=w/2-j/2,_=T/2-g[b]/2-1,R=wc(f[v],_),I=wc(f[y],_),L=R,U=T-g[b]-I,B=T/2-g[b]/2+P,Q=jN(L,B,U),F=!d.arrow&&Um(r)!=null&&B!==Q&&i.reference[b]/2-(B<L?R:I)-g[b]/2<0,H=F?B<L?B-L:B-U:0;return{[p]:m[p]+H,data:{[p]:Q,centerOffset:B-Q-H,...F&&{alignmentOffset:H}},reset:F}}}),dH=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,s;const{placement:r,middlewareData:i,rects:o,initialPlacement:l,platform:d,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:g=!0,...N}=_o(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const v=Mo(r),y=Sc(l),S=Mo(l)===l,w=await(d.isRTL==null?void 0:d.isRTL(u.floating)),j=m||(S||!g?[ob(l)]:rH(l)),E=b!=="none";!m&&E&&j.push(...aH(l,g,b,w));const T=[l,...j],P=await yg(e,N),_=[];let R=((s=i.flip)==null?void 0:s.overflows)||[];if(h&&_.push(P[v]),f){const B=sH(r,o,w);_.push(P[B[0]],P[B[1]])}if(R=[...R,{placement:r,overflows:_}],!_.every(B=>B<=0)){var I,L;const B=(((I=i.flip)==null?void 0:I.index)||0)+1,Q=T[B];if(Q)return{data:{index:B,overflows:R},reset:{placement:Q}};let F=(L=R.filter(H=>H.overflows[0]<=0).sort((H,$)=>H.overflows[1]-$.overflows[1])[0])==null?void 0:L.placement;if(!F)switch(p){case"bestFit":{var U;const H=(U=R.filter($=>{if(E){const K=Sc($.placement);return K===y||K==="y"}return!0}).map($=>[$.placement,$.overflows.filter(K=>K>0).reduce((K,D)=>K+D,0)]).sort(($,K)=>$[1]-K[1])[0])==null?void 0:U[0];H&&(F=H);break}case"initialPlacement":F=l;break}if(r!==F)return{reset:{placement:F}}}return{}}}};function I2(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function L2(n){return eH.some(e=>n[e]>=0)}const uH=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:s="referenceHidden",...r}=_o(n,e);switch(s){case"referenceHidden":{const i=await yg(e,{...r,elementContext:"reference"}),o=I2(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:L2(o)}}}case"escaped":{const i=await yg(e,{...r,altBoundary:!0}),o=I2(i,t.floating);return{data:{escapedOffsets:o,escaped:L2(o)}}}default:return{}}}}};async function hH(n,e){const{placement:t,platform:s,elements:r}=n,i=await(s.isRTL==null?void 0:s.isRTL(r.floating)),o=Mo(t),l=Um(t),d=Sc(t)==="y",u=["left","top"].includes(o)?-1:1,h=i&&d?-1:1,f=_o(e,n);let{mainAxis:m,crossAxis:p,alignmentAxis:b}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof b=="number"&&(p=l==="end"?b*-1:b),d?{x:p*h,y:m*u}:{x:m*u,y:p*h}}const fH=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,s;const{x:r,y:i,placement:o,middlewareData:l}=e,d=await hH(e,n);return o===((t=l.offset)==null?void 0:t.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:r+d.x,y:i+d.y,data:{...d,placement:o}}}}},mH=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:s,placement:r}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:N=>{let{x:v,y}=N;return{x:v,y}}},...d}=_o(n,e),u={x:t,y:s},h=await yg(e,d),f=Sc(Mo(r)),m=PA(f);let p=u[m],b=u[f];if(i){const N=m==="y"?"top":"left",v=m==="y"?"bottom":"right",y=p+h[N],S=p-h[v];p=jN(y,p,S)}if(o){const N=f==="y"?"top":"left",v=f==="y"?"bottom":"right",y=b+h[N],S=b-h[v];b=jN(y,b,S)}const g=l.fn({...e,[m]:p,[f]:b});return{...g,data:{x:g.x-t,y:g.y-s,enabled:{[m]:i,[f]:o}}}}}},pH=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:s,placement:r,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:d=!0,crossAxis:u=!0}=_o(n,e),h={x:t,y:s},f=Sc(r),m=PA(f);let p=h[m],b=h[f];const g=_o(l,e),N=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(d){const S=m==="y"?"height":"width",w=i.reference[m]-i.floating[S]+N.mainAxis,j=i.reference[m]+i.reference[S]-N.mainAxis;p<w?p=w:p>j&&(p=j)}if(u){var v,y;const S=m==="y"?"width":"height",w=["top","left"].includes(Mo(r)),j=i.reference[f]-i.floating[S]+(w&&((v=o.offset)==null?void 0:v[f])||0)+(w?0:N.crossAxis),E=i.reference[f]+i.reference[S]+(w?0:((y=o.offset)==null?void 0:y[f])||0)-(w?N.crossAxis:0);b<j?b=j:b>E&&(b=E)}return{[m]:p,[f]:b}}}},gH=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,s;const{placement:r,rects:i,platform:o,elements:l}=e,{apply:d=()=>{},...u}=_o(n,e),h=await yg(e,u),f=Mo(r),m=Um(r),p=Sc(r)==="y",{width:b,height:g}=i.floating;let N,v;f==="top"||f==="bottom"?(N=f,v=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(v=f,N=m==="end"?"top":"bottom");const y=g-h.top-h.bottom,S=b-h.left-h.right,w=wc(g-h[N],y),j=wc(b-h[v],S),E=!e.middlewareData.shift;let T=w,P=j;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(P=S),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(T=y),E&&!m){const R=sr(h.left,0),I=sr(h.right,0),L=sr(h.top,0),U=sr(h.bottom,0);p?P=b-2*(R!==0||I!==0?R+I:sr(h.left,h.right)):T=g-2*(L!==0||U!==0?L+U:sr(h.top,h.bottom))}await d({...e,availableWidth:P,availableHeight:T});const _=await o.getDimensions(l.floating);return b!==_.width||g!==_.height?{reset:{rects:!0}}:{}}}};function Nw(){return typeof window<"u"}function Hm(n){return JR(n)?(n.nodeName||"").toLowerCase():"#document"}function cr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Sa(n){var e;return(e=(JR(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function JR(n){return Nw()?n instanceof Node||n instanceof cr(n).Node:!1}function bi(n){return Nw()?n instanceof Element||n instanceof cr(n).Element:!1}function ga(n){return Nw()?n instanceof HTMLElement||n instanceof cr(n).HTMLElement:!1}function F2(n){return!Nw()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof cr(n).ShadowRoot}function Ay(n){const{overflow:e,overflowX:t,overflowY:s,display:r}=wi(n);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!["inline","contents"].includes(r)}function xH(n){return["table","td","th"].includes(Hm(n))}function jw(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function RA(n){const e=DA(),t=bi(n)?wi(n):n;return["transform","translate","scale","rotate","perspective"].some(s=>t[s]?t[s]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(t.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(t.contain||"").includes(s))}function yH(n){let e=Nc(n);for(;ga(e)&&!Am(e);){if(RA(e))return e;if(jw(e))return null;e=Nc(e)}return null}function DA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Am(n){return["html","body","#document"].includes(Hm(n))}function wi(n){return cr(n).getComputedStyle(n)}function Cw(n){return bi(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Nc(n){if(Hm(n)==="html")return n;const e=n.assignedSlot||n.parentNode||F2(n)&&n.host||Sa(n);return F2(e)?e.host:e}function ZR(n){const e=Nc(n);return Am(e)?n.ownerDocument?n.ownerDocument.body:n.body:ga(e)&&Ay(e)?e:ZR(e)}function vg(n,e,t){var s;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=ZR(n),i=r===((s=n.ownerDocument)==null?void 0:s.body),o=cr(r);if(i){const l=AN(o);return e.concat(o,o.visualViewport||[],Ay(r)?r:[],l&&t?vg(l):[])}return e.concat(r,vg(r,[],t))}function AN(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function eD(n){const e=wi(n);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const r=ga(n),i=r?n.offsetWidth:t,o=r?n.offsetHeight:s,l=ab(t)!==i||ab(s)!==o;return l&&(t=i,s=o),{width:t,height:s,$:l}}function IA(n){return bi(n)?n:n.contextElement}function Ch(n){const e=IA(n);if(!ga(e))return fa(1);const t=e.getBoundingClientRect(),{width:s,height:r,$:i}=eD(e);let o=(i?ab(t.width):t.width)/s,l=(i?ab(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const vH=fa(0);function tD(n){const e=cr(n);return!DA()||!e.visualViewport?vH:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function bH(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==cr(n)?!1:e}function Eu(n,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=IA(n);let o=fa(1);e&&(s?bi(s)&&(o=Ch(s)):o=Ch(n));const l=bH(i,t,s)?tD(i):fa(0);let d=(r.left+l.x)/o.x,u=(r.top+l.y)/o.y,h=r.width/o.x,f=r.height/o.y;if(i){const m=cr(i),p=s&&bi(s)?cr(s):s;let b=m,g=AN(b);for(;g&&s&&p!==b;){const N=Ch(g),v=g.getBoundingClientRect(),y=wi(g),S=v.left+(g.clientLeft+parseFloat(y.paddingLeft))*N.x,w=v.top+(g.clientTop+parseFloat(y.paddingTop))*N.y;d*=N.x,u*=N.y,h*=N.x,f*=N.y,d+=S,u+=w,b=cr(g),g=AN(b)}}return lb({width:h,height:f,x:d,y:u})}function LA(n,e){const t=Cw(n).scrollLeft;return e?e.left+t:Eu(Sa(n)).left+t}function nD(n,e,t){t===void 0&&(t=!1);const s=n.getBoundingClientRect(),r=s.left+e.scrollLeft-(t?0:LA(n,s)),i=s.top+e.scrollTop;return{x:r,y:i}}function wH(n){let{elements:e,rect:t,offsetParent:s,strategy:r}=n;const i=r==="fixed",o=Sa(s),l=e?jw(e.floating):!1;if(s===o||l&&i)return t;let d={scrollLeft:0,scrollTop:0},u=fa(1);const h=fa(0),f=ga(s);if((f||!f&&!i)&&((Hm(s)!=="body"||Ay(o))&&(d=Cw(s)),ga(s))){const p=Eu(s);u=Ch(s),h.x=p.x+s.clientLeft,h.y=p.y+s.clientTop}const m=o&&!f&&!i?nD(o,d,!0):fa(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-d.scrollLeft*u.x+h.x+m.x,y:t.y*u.y-d.scrollTop*u.y+h.y+m.y}}function SH(n){return Array.from(n.getClientRects())}function NH(n){const e=Sa(n),t=Cw(n),s=n.ownerDocument.body,r=sr(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),i=sr(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let o=-t.scrollLeft+LA(n);const l=-t.scrollTop;return wi(s).direction==="rtl"&&(o+=sr(e.clientWidth,s.clientWidth)-r),{width:r,height:i,x:o,y:l}}function jH(n,e){const t=cr(n),s=Sa(n),r=t.visualViewport;let i=s.clientWidth,o=s.clientHeight,l=0,d=0;if(r){i=r.width,o=r.height;const u=DA();(!u||u&&e==="fixed")&&(l=r.offsetLeft,d=r.offsetTop)}return{width:i,height:o,x:l,y:d}}function CH(n,e){const t=Eu(n,!0,e==="fixed"),s=t.top+n.clientTop,r=t.left+n.clientLeft,i=ga(n)?Ch(n):fa(1),o=n.clientWidth*i.x,l=n.clientHeight*i.y,d=r*i.x,u=s*i.y;return{width:o,height:l,x:d,y:u}}function O2(n,e,t){let s;if(e==="viewport")s=jH(n,t);else if(e==="document")s=NH(Sa(n));else if(bi(e))s=CH(e,t);else{const r=tD(n);s={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return lb(s)}function sD(n,e){const t=Nc(n);return t===e||!bi(t)||Am(t)?!1:wi(t).position==="fixed"||sD(t,e)}function AH(n,e){const t=e.get(n);if(t)return t;let s=vg(n,[],!1).filter(l=>bi(l)&&Hm(l)!=="body"),r=null;const i=wi(n).position==="fixed";let o=i?Nc(n):n;for(;bi(o)&&!Am(o);){const l=wi(o),d=RA(o);!d&&l.position==="fixed"&&(r=null),(i?!d&&!r:!d&&l.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Ay(o)&&!d&&sD(n,o))?s=s.filter(h=>h!==o):r=l,o=Nc(o)}return e.set(n,s),s}function EH(n){let{element:e,boundary:t,rootBoundary:s,strategy:r}=n;const o=[...t==="clippingAncestors"?jw(e)?[]:AH(e,this._c):[].concat(t),s],l=o[0],d=o.reduce((u,h)=>{const f=O2(e,h,r);return u.top=sr(f.top,u.top),u.right=wc(f.right,u.right),u.bottom=wc(f.bottom,u.bottom),u.left=sr(f.left,u.left),u},O2(e,l,r));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function kH(n){const{width:e,height:t}=eD(n);return{width:e,height:t}}function TH(n,e,t){const s=ga(e),r=Sa(e),i=t==="fixed",o=Eu(n,!0,i,e);let l={scrollLeft:0,scrollTop:0};const d=fa(0);if(s||!s&&!i)if((Hm(e)!=="body"||Ay(r))&&(l=Cw(e)),s){const m=Eu(e,!0,i,e);d.x=m.x+e.clientLeft,d.y=m.y+e.clientTop}else r&&(d.x=LA(r));const u=r&&!s&&!i?nD(r,l):fa(0),h=o.left+l.scrollLeft-d.x-u.x,f=o.top+l.scrollTop-d.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function B1(n){return wi(n).position==="static"}function B2(n,e){if(!ga(n)||wi(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Sa(n)===t&&(t=t.ownerDocument.body),t}function rD(n,e){const t=cr(n);if(jw(n))return t;if(!ga(n)){let r=Nc(n);for(;r&&!Am(r);){if(bi(r)&&!B1(r))return r;r=Nc(r)}return t}let s=B2(n,e);for(;s&&xH(s)&&B1(s);)s=B2(s,e);return s&&Am(s)&&B1(s)&&!RA(s)?t:s||yH(n)||t}const PH=async function(n){const e=this.getOffsetParent||rD,t=this.getDimensions,s=await t(n.floating);return{reference:TH(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function _H(n){return wi(n).direction==="rtl"}const MH={convertOffsetParentRelativeRectToViewportRelativeRect:wH,getDocumentElement:Sa,getClippingRect:EH,getOffsetParent:rD,getElementRects:PH,getClientRects:SH,getDimensions:kH,getScale:Ch,isElement:bi,isRTL:_H};function iD(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function RH(n,e){let t=null,s;const r=Sa(n);function i(){var l;clearTimeout(s),(l=t)==null||l.disconnect(),t=null}function o(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),i();const u=n.getBoundingClientRect(),{left:h,top:f,width:m,height:p}=u;if(l||e(),!m||!p)return;const b=mv(f),g=mv(r.clientWidth-(h+m)),N=mv(r.clientHeight-(f+p)),v=mv(h),S={rootMargin:-b+"px "+-g+"px "+-N+"px "+-v+"px",threshold:sr(0,wc(1,d))||1};let w=!0;function j(E){const T=E[0].intersectionRatio;if(T!==d){if(!w)return o();T?o(!1,T):s=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!iD(u,n.getBoundingClientRect())&&o(),w=!1}try{t=new IntersectionObserver(j,{...S,root:r.ownerDocument})}catch{t=new IntersectionObserver(j,S)}t.observe(n)}return o(!0),i}function DH(n,e,t,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=s,u=IA(n),h=r||i?[...u?vg(u):[],...vg(e)]:[];h.forEach(v=>{r&&v.addEventListener("scroll",t,{passive:!0}),i&&v.addEventListener("resize",t)});const f=u&&l?RH(u,t):null;let m=-1,p=null;o&&(p=new ResizeObserver(v=>{let[y]=v;y&&y.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var S;(S=p)==null||S.observe(e)})),t()}),u&&!d&&p.observe(u),p.observe(e));let b,g=d?Eu(n):null;d&&N();function N(){const v=Eu(n);g&&!iD(g,v)&&t(),g=v,b=requestAnimationFrame(N)}return t(),()=>{var v;h.forEach(y=>{r&&y.removeEventListener("scroll",t),i&&y.removeEventListener("resize",t)}),f==null||f(),(v=p)==null||v.disconnect(),p=null,d&&cancelAnimationFrame(b)}}const IH=fH,LH=mH,FH=dH,OH=gH,BH=uH,$2=cH,$H=pH,zH=(n,e,t)=>{const s=new Map,r={platform:MH,...t},i={...r.platform,_c:s};return lH(n,e,{...r,platform:i})};var Yv=typeof document<"u"?x.useLayoutEffect:x.useEffect;function cb(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,s,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(s=t;s--!==0;)if(!cb(n[s],e[s]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(s=t;s--!==0;)if(!{}.hasOwnProperty.call(e,r[s]))return!1;for(s=t;s--!==0;){const i=r[s];if(!(i==="_owner"&&n.$$typeof)&&!cb(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function aD(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function z2(n,e){const t=aD(n);return Math.round(e*t)/t}function $1(n){const e=x.useRef(n);return Yv(()=>{e.current=n}),e}function UH(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:s=[],platform:r,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:d,open:u}=n,[h,f]=x.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[m,p]=x.useState(s);cb(m,s)||p(s);const[b,g]=x.useState(null),[N,v]=x.useState(null),y=x.useCallback($=>{$!==E.current&&(E.current=$,g($))},[]),S=x.useCallback($=>{$!==T.current&&(T.current=$,v($))},[]),w=i||b,j=o||N,E=x.useRef(null),T=x.useRef(null),P=x.useRef(h),_=d!=null,R=$1(d),I=$1(r),L=$1(u),U=x.useCallback(()=>{if(!E.current||!T.current)return;const $={placement:e,strategy:t,middleware:m};I.current&&($.platform=I.current),zH(E.current,T.current,$).then(K=>{const D={...K,isPositioned:L.current!==!1};B.current&&!cb(P.current,D)&&(P.current=D,Du.flushSync(()=>{f(D)}))})},[m,e,t,I,L]);Yv(()=>{u===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,f($=>({...$,isPositioned:!1})))},[u]);const B=x.useRef(!1);Yv(()=>(B.current=!0,()=>{B.current=!1}),[]),Yv(()=>{if(w&&(E.current=w),j&&(T.current=j),w&&j){if(R.current)return R.current(w,j,U);U()}},[w,j,U,R,_]);const Q=x.useMemo(()=>({reference:E,floating:T,setReference:y,setFloating:S}),[y,S]),F=x.useMemo(()=>({reference:w,floating:j}),[w,j]),H=x.useMemo(()=>{const $={position:t,left:0,top:0};if(!F.floating)return $;const K=z2(F.floating,h.x),D=z2(F.floating,h.y);return l?{...$,transform:"translate("+K+"px, "+D+"px)",...aD(F.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:K,top:D}},[t,l,F.floating,h.x,h.y]);return x.useMemo(()=>({...h,update:U,refs:Q,elements:F,floatingStyles:H}),[h,U,Q,F,H])}const HH=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:s,padding:r}=typeof n=="function"?n(t):n;return s&&e(s)?s.current!=null?$2({element:s.current,padding:r}).fn(t):{}:s?$2({element:s,padding:r}).fn(t):{}}}},VH=(n,e)=>({...IH(n),options:[n,e]}),WH=(n,e)=>({...LH(n),options:[n,e]}),GH=(n,e)=>({...$H(n),options:[n,e]}),qH=(n,e)=>({...FH(n),options:[n,e]}),KH=(n,e)=>({...OH(n),options:[n,e]}),YH=(n,e)=>({...BH(n),options:[n,e]}),XH=(n,e)=>({...HH(n),options:[n,e]});var QH="Arrow",oD=x.forwardRef((n,e)=>{const{children:t,width:s=10,height:r=5,...i}=n;return a.jsx(pe.svg,{...i,ref:e,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});oD.displayName=QH;var JH=oD;function Aw(n){const[e,t]=x.useState(void 0);return Jt(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let o,l;if("borderBoxSize"in i){const d=i.borderBoxSize,u=Array.isArray(d)?d[0]:d;o=u.inlineSize,l=u.blockSize}else o=n.offsetWidth,l=n.offsetHeight;t({width:o,height:l})});return s.observe(n,{box:"border-box"}),()=>s.unobserve(n)}else t(void 0)},[n]),e}var FA="Popper",[lD,Vm]=Nn(FA),[ZH,cD]=lD(FA),dD=n=>{const{__scopePopper:e,children:t}=n,[s,r]=x.useState(null);return a.jsx(ZH,{scope:e,anchor:s,onAnchorChange:r,children:t})};dD.displayName=FA;var uD="PopperAnchor",hD=x.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:s,...r}=n,i=cD(uD,t),o=x.useRef(null),l=we(e,o);return x.useEffect(()=>{i.onAnchorChange((s==null?void 0:s.current)||o.current)}),s?null:a.jsx(pe.div,{...r,ref:l})});hD.displayName=uD;var OA="PopperContent",[e8,t8]=lD(OA),fD=x.forwardRef((n,e)=>{var V,se,ve,ae,ce,xe;const{__scopePopper:t,side:s="bottom",sideOffset:r=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:b,...g}=n,N=cD(OA,t),[v,y]=x.useState(null),S=we(e,ge=>y(ge)),[w,j]=x.useState(null),E=Aw(w),T=(E==null?void 0:E.width)??0,P=(E==null?void 0:E.height)??0,_=s+(i!=="center"?"-"+i:""),R=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},I=Array.isArray(u)?u:[u],L=I.length>0,U={padding:R,boundary:I.filter(s8),altBoundary:L},{refs:B,floatingStyles:Q,placement:F,isPositioned:H,middlewareData:$}=UH({strategy:"fixed",placement:_,whileElementsMounted:(...ge)=>DH(...ge,{animationFrame:p==="always"}),elements:{reference:N.anchor},middleware:[VH({mainAxis:r+P,alignmentAxis:o}),d&&WH({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?GH():void 0,...U}),d&&qH({...U}),KH({...U,apply:({elements:ge,rects:le,availableWidth:_e,availableHeight:Le})=>{const{width:At,height:jn}=le.reference,Bn=ge.floating.style;Bn.setProperty("--radix-popper-available-width",`${_e}px`),Bn.setProperty("--radix-popper-available-height",`${Le}px`),Bn.setProperty("--radix-popper-anchor-width",`${At}px`),Bn.setProperty("--radix-popper-anchor-height",`${jn}px`)}}),w&&XH({element:w,padding:l}),r8({arrowWidth:T,arrowHeight:P}),m&&YH({strategy:"referenceHidden",...U})]}),[K,D]=gD(F),M=Gt(b);Jt(()=>{H&&(M==null||M())},[H,M]);const q=(V=$.arrow)==null?void 0:V.x,z=(se=$.arrow)==null?void 0:se.y,G=((ve=$.arrow)==null?void 0:ve.centerOffset)!==0,[W,X]=x.useState();return Jt(()=>{v&&X(window.getComputedStyle(v).zIndex)},[v]),a.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...Q,transform:H?Q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:W,"--radix-popper-transform-origin":[(ae=$.transformOrigin)==null?void 0:ae.x,(ce=$.transformOrigin)==null?void 0:ce.y].join(" "),...((xe=$.hide)==null?void 0:xe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:a.jsx(e8,{scope:t,placedSide:K,onArrowChange:j,arrowX:q,arrowY:z,shouldHideArrow:G,children:a.jsx(pe.div,{"data-side":K,"data-align":D,...g,ref:S,style:{...g.style,animation:H?void 0:"none"}})})})});fD.displayName=OA;var mD="PopperArrow",n8={top:"bottom",right:"left",bottom:"top",left:"right"},pD=x.forwardRef(function(e,t){const{__scopePopper:s,...r}=e,i=t8(mD,s),o=n8[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(JH,{...r,ref:t,style:{...r.style,display:"block"}})})});pD.displayName=mD;function s8(n){return n!==null}var r8=n=>({name:"transformOrigin",options:n,fn(e){var N,v,y;const{placement:t,rects:s,middlewareData:r}=e,o=((N=r.arrow)==null?void 0:N.centerOffset)!==0,l=o?0:n.arrowWidth,d=o?0:n.arrowHeight,[u,h]=gD(t),f={start:"0%",center:"50%",end:"100%"}[h],m=(((v=r.arrow)==null?void 0:v.x)??0)+l/2,p=(((y=r.arrow)==null?void 0:y.y)??0)+d/2;let b="",g="";return u==="bottom"?(b=o?f:`${m}px`,g=`${-d}px`):u==="top"?(b=o?f:`${m}px`,g=`${s.floating.height+d}px`):u==="right"?(b=`${-d}px`,g=o?f:`${p}px`):u==="left"&&(b=`${s.floating.width+d}px`,g=o?f:`${p}px`),{data:{x:b,y:g}}}});function gD(n){const[e,t="center"]=n.split("-");return[e,t]}var BA=dD,Ew=hD,$A=fD,zA=pD,[kw,fQ]=Nn("Tooltip",[Vm]),Tw=Vm(),xD="TooltipProvider",i8=700,EN="tooltip.open",[a8,UA]=kw(xD),yD=n=>{const{__scopeTooltip:e,delayDuration:t=i8,skipDelayDuration:s=300,disableHoverableContent:r=!1,children:i}=n,o=x.useRef(!0),l=x.useRef(!1),d=x.useRef(0);return x.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),a.jsx(a8,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:x.useCallback(()=>{window.clearTimeout(d.current),o.current=!1},[]),onClose:x.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:x.useCallback(u=>{l.current=u},[]),disableHoverableContent:r,children:i})};yD.displayName=xD;var Pw="Tooltip",[o8,_w]=kw(Pw),vD=n=>{const{__scopeTooltip:e,children:t,open:s,defaultOpen:r=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=n,d=UA(Pw,n.__scopeTooltip),u=Tw(e),[h,f]=x.useState(null),m=$r(),p=x.useRef(0),b=o??d.disableHoverableContent,g=l??d.delayDuration,N=x.useRef(!1),[v=!1,y]=Ds({prop:s,defaultProp:r,onChange:T=>{T?(d.onOpen(),document.dispatchEvent(new CustomEvent(EN))):d.onClose(),i==null||i(T)}}),S=x.useMemo(()=>v?N.current?"delayed-open":"instant-open":"closed",[v]),w=x.useCallback(()=>{window.clearTimeout(p.current),p.current=0,N.current=!1,y(!0)},[y]),j=x.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y(!1)},[y]),E=x.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{N.current=!0,y(!0),p.current=0},g)},[g,y]);return x.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),a.jsx(BA,{...u,children:a.jsx(o8,{scope:e,contentId:m,open:v,stateAttribute:S,trigger:h,onTriggerChange:f,onTriggerEnter:x.useCallback(()=>{d.isOpenDelayedRef.current?E():w()},[d.isOpenDelayedRef,E,w]),onTriggerLeave:x.useCallback(()=>{b?j():(window.clearTimeout(p.current),p.current=0)},[j,b]),onOpen:w,onClose:j,disableHoverableContent:b,children:t})})};vD.displayName=Pw;var kN="TooltipTrigger",bD=x.forwardRef((n,e)=>{const{__scopeTooltip:t,...s}=n,r=_w(kN,t),i=UA(kN,t),o=Tw(t),l=x.useRef(null),d=we(e,l,r.onTriggerChange),u=x.useRef(!1),h=x.useRef(!1),f=x.useCallback(()=>u.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(Ew,{asChild:!0,...o,children:a.jsx(pe.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...s,ref:d,onPointerMove:oe(n.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(r.onTriggerEnter(),h.current=!0)}),onPointerLeave:oe(n.onPointerLeave,()=>{r.onTriggerLeave(),h.current=!1}),onPointerDown:oe(n.onPointerDown,()=>{r.open&&r.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:oe(n.onFocus,()=>{u.current||r.onOpen()}),onBlur:oe(n.onBlur,r.onClose),onClick:oe(n.onClick,r.onClose)})})});bD.displayName=kN;var l8="TooltipPortal",[mQ,c8]=kw(l8,{forceMount:void 0}),Em="TooltipContent",wD=x.forwardRef((n,e)=>{const t=c8(Em,n.__scopeTooltip),{forceMount:s=t.forceMount,side:r="top",...i}=n,o=_w(Em,n.__scopeTooltip);return a.jsx(ps,{present:s||o.open,children:o.disableHoverableContent?a.jsx(SD,{side:r,...i,ref:e}):a.jsx(d8,{side:r,...i,ref:e})})}),d8=x.forwardRef((n,e)=>{const t=_w(Em,n.__scopeTooltip),s=UA(Em,n.__scopeTooltip),r=x.useRef(null),i=we(e,r),[o,l]=x.useState(null),{trigger:d,onClose:u}=t,h=r.current,{onPointerInTransitChange:f}=s,m=x.useCallback(()=>{l(null),f(!1)},[f]),p=x.useCallback((b,g)=>{const N=b.currentTarget,v={x:b.clientX,y:b.clientY},y=p8(v,N.getBoundingClientRect()),S=g8(v,y),w=x8(g.getBoundingClientRect()),j=v8([...S,...w]);l(j),f(!0)},[f]);return x.useEffect(()=>()=>m(),[m]),x.useEffect(()=>{if(d&&h){const b=N=>p(N,h),g=N=>p(N,d);return d.addEventListener("pointerleave",b),h.addEventListener("pointerleave",g),()=>{d.removeEventListener("pointerleave",b),h.removeEventListener("pointerleave",g)}}},[d,h,p,m]),x.useEffect(()=>{if(o){const b=g=>{const N=g.target,v={x:g.clientX,y:g.clientY},y=(d==null?void 0:d.contains(N))||(h==null?void 0:h.contains(N)),S=!y8(v,o);y?m():S&&(m(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[d,h,o,u,m]),a.jsx(SD,{...n,ref:i})}),[u8,h8]=kw(Pw,{isInside:!1}),f8=iR("TooltipContent"),SD=x.forwardRef((n,e)=>{const{__scopeTooltip:t,children:s,"aria-label":r,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=n,d=_w(Em,t),u=Tw(t),{onClose:h}=d;return x.useEffect(()=>(document.addEventListener(EN,h),()=>document.removeEventListener(EN,h)),[h]),x.useEffect(()=>{if(d.trigger){const f=m=>{const p=m.target;p!=null&&p.contains(d.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[d.trigger,h]),a.jsx(Bm,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:a.jsxs($A,{"data-state":d.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(f8,{children:s}),a.jsx(u8,{scope:t,isInside:!0,children:a.jsx(gz,{id:d.contentId,role:"tooltip",children:r||s})})]})})});wD.displayName=Em;var ND="TooltipArrow",m8=x.forwardRef((n,e)=>{const{__scopeTooltip:t,...s}=n,r=Tw(t);return h8(ND,t).isInside?null:a.jsx(zA,{...r,...s,ref:e})});m8.displayName=ND;function p8(n,e){const t=Math.abs(e.top-n.y),s=Math.abs(e.bottom-n.y),r=Math.abs(e.right-n.x),i=Math.abs(e.left-n.x);switch(Math.min(t,s,r,i)){case i:return"left";case r:return"right";case t:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function g8(n,e,t=5){const s=[];switch(e){case"top":s.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":s.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":s.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":s.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return s}function x8(n){const{top:e,right:t,bottom:s,left:r}=n;return[{x:r,y:e},{x:t,y:e},{x:t,y:s},{x:r,y:s}]}function y8(n,e){const{x:t,y:s}=n;let r=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i].x,d=e[i].y,u=e[o].x,h=e[o].y;d>s!=h>s&&t<(u-l)*(s-d)/(h-d)+l&&(r=!r)}return r}function v8(n){const e=n.slice();return e.sort((t,s)=>t.x<s.x?-1:t.x>s.x?1:t.y<s.y?-1:t.y>s.y?1:0),b8(e)}function b8(n){if(n.length<=1)return n.slice();const e=[];for(let s=0;s<n.length;s++){const r=n[s];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(r.y-o.y)>=(i.y-o.y)*(r.x-o.x))e.pop();else break}e.push(r)}e.pop();const t=[];for(let s=n.length-1;s>=0;s--){const r=n[s];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(r.y-o.y)>=(i.y-o.y)*(r.x-o.x))t.pop();else break}t.push(r)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var w8=yD,S8=vD,N8=bD,jD=wD;const CD=w8,j8=S8,C8=N8,AD=x.forwardRef(({className:n,sideOffset:e=4,...t},s)=>a.jsx(jD,{ref:s,sideOffset:e,className:ee("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...t}));AD.displayName=jD.displayName;const z1=768;function A8(){const[n,e]=x.useState(void 0);return x.useEffect(()=>{const t=window.matchMedia(`(max-width: ${z1-1}px)`),s=()=>{e(window.innerWidth<z1)};return t.addEventListener("change",s),e(window.innerWidth<z1),()=>t.removeEventListener("change",s)},[]),!!n}const HA=Iu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),O=x.forwardRef(({className:n,variant:e,size:t,asChild:s=!1,...r},i)=>{const o=s?xA:"button";return a.jsx(o,{className:ee(HA({variant:e,size:t,className:n})),ref:i,...r})});O.displayName="Button";const re=x.forwardRef(({className:n,type:e,...t},s)=>a.jsx("input",{type:e,className:ee("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:s,...t}));re.displayName="Input";var E8="Separator",U2="horizontal",k8=["horizontal","vertical"],ED=x.forwardRef((n,e)=>{const{decorative:t,orientation:s=U2,...r}=n,i=T8(s)?s:U2,l=t?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(pe.div,{"data-orientation":i,...l,...r,ref:e})});ED.displayName=E8;function T8(n){return k8.includes(n)}var kD=ED;const Kc=x.forwardRef(({className:n,orientation:e="horizontal",decorative:t=!0,...s},r)=>a.jsx(kD,{ref:r,decorative:t,orientation:e,className:ee("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...s}));Kc.displayName=kD.displayName;var U1="focusScope.autoFocusOnMount",H1="focusScope.autoFocusOnUnmount",H2={bubbles:!1,cancelable:!0},P8="FocusScope",Mw=x.forwardRef((n,e)=>{const{loop:t=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:i,...o}=n,[l,d]=x.useState(null),u=Gt(r),h=Gt(i),f=x.useRef(null),m=we(e,g=>d(g)),p=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(s){let g=function(S){if(p.paused||!l)return;const w=S.target;l.contains(w)?f.current=w:Ko(f.current,{select:!0})},N=function(S){if(p.paused||!l)return;const w=S.relatedTarget;w!==null&&(l.contains(w)||Ko(f.current,{select:!0}))},v=function(S){if(document.activeElement===document.body)for(const j of S)j.removedNodes.length>0&&Ko(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",N);const y=new MutationObserver(v);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",N),y.disconnect()}}},[s,l,p.paused]),x.useEffect(()=>{if(l){W2.add(p);const g=document.activeElement;if(!l.contains(g)){const v=new CustomEvent(U1,H2);l.addEventListener(U1,u),l.dispatchEvent(v),v.defaultPrevented||(_8(L8(TD(l)),{select:!0}),document.activeElement===g&&Ko(l))}return()=>{l.removeEventListener(U1,u),setTimeout(()=>{const v=new CustomEvent(H1,H2);l.addEventListener(H1,h),l.dispatchEvent(v),v.defaultPrevented||Ko(g??document.body,{select:!0}),l.removeEventListener(H1,h),W2.remove(p)},0)}}},[l,u,h,p]);const b=x.useCallback(g=>{if(!t&&!s||p.paused)return;const N=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(N&&v){const y=g.currentTarget,[S,w]=M8(y);S&&w?!g.shiftKey&&v===w?(g.preventDefault(),t&&Ko(S,{select:!0})):g.shiftKey&&v===S&&(g.preventDefault(),t&&Ko(w,{select:!0})):v===y&&g.preventDefault()}},[t,s,p.paused]);return a.jsx(pe.div,{tabIndex:-1,...o,ref:m,onKeyDown:b})});Mw.displayName=P8;function _8(n,{select:e=!1}={}){const t=document.activeElement;for(const s of n)if(Ko(s,{select:e}),document.activeElement!==t)return}function M8(n){const e=TD(n),t=V2(e,n),s=V2(e.reverse(),n);return[t,s]}function TD(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function V2(n,e){for(const t of n)if(!R8(t,{upTo:e}))return t}function R8(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function D8(n){return n instanceof HTMLInputElement&&"select"in n}function Ko(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&D8(n)&&e&&n.select()}}var W2=I8();function I8(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=G2(n,e),n.unshift(e)},remove(e){var t;n=G2(n,e),(t=n[0])==null||t.resume()}}}function G2(n,e){const t=[...n],s=t.indexOf(e);return s!==-1&&t.splice(s,1),t}function L8(n){return n.filter(e=>e.tagName!=="A")}var V1=0;function VA(){x.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??q2()),document.body.insertAdjacentElement("beforeend",n[1]??q2()),V1++,()=>{V1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),V1--}},[])}function q2(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var oa=function(){return oa=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++){t=arguments[s];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},oa.apply(this,arguments)};function PD(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t}function F8(n,e,t){if(t||arguments.length===2)for(var s=0,r=e.length,i;s<r;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return n.concat(i||Array.prototype.slice.call(e))}var Xv="right-scroll-bar-position",Qv="width-before-scroll-bar",O8="with-scroll-bars-hidden",B8="--removed-body-scroll-bar-size";function W1(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function $8(n,e){var t=x.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(s){var r=t.value;r!==s&&(t.value=s,t.callback(s,r))}}}})[0];return t.callback=e,t.facade}var z8=typeof window<"u"?x.useLayoutEffect:x.useEffect,K2=new WeakMap;function U8(n,e){var t=$8(null,function(s){return n.forEach(function(r){return W1(r,s)})});return z8(function(){var s=K2.get(t);if(s){var r=new Set(s),i=new Set(n),o=t.current;r.forEach(function(l){i.has(l)||W1(l,null)}),i.forEach(function(l){r.has(l)||W1(l,o)})}K2.set(t,n)},[n]),t}function H8(n){return n}function V8(n,e){e===void 0&&(e=H8);var t=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var o=e(i,s);return t.push(o),function(){t=t.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(s=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(l){return i(l)},filter:function(){return t}}},assignMedium:function(i){s=!0;var o=[];if(t.length){var l=t;t=[],l.forEach(i),o=t}var d=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(d)};u(),t={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),t}}}};return r}function W8(n){n===void 0&&(n={});var e=V8(null);return e.options=oa({async:!0,ssr:!1},n),e}var _D=function(n){var e=n.sideCar,t=PD(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return x.createElement(s,oa({},t))};_D.isSideCarExport=!0;function G8(n,e){return n.useMedium(e),_D}var MD=W8(),G1=function(){},Rw=x.forwardRef(function(n,e){var t=x.useRef(null),s=x.useState({onScrollCapture:G1,onWheelCapture:G1,onTouchMoveCapture:G1}),r=s[0],i=s[1],o=n.forwardProps,l=n.children,d=n.className,u=n.removeScrollBar,h=n.enabled,f=n.shards,m=n.sideCar,p=n.noIsolation,b=n.inert,g=n.allowPinchZoom,N=n.as,v=N===void 0?"div":N,y=n.gapMode,S=PD(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=m,j=U8([t,e]),E=oa(oa({},S),r);return x.createElement(x.Fragment,null,h&&x.createElement(w,{sideCar:MD,removeScrollBar:u,shards:f,noIsolation:p,inert:b,setCallbacks:i,allowPinchZoom:!!g,lockRef:t,gapMode:y}),o?x.cloneElement(x.Children.only(l),oa(oa({},E),{ref:j})):x.createElement(v,oa({},E,{className:d,ref:j}),l))});Rw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Rw.classNames={fullWidth:Qv,zeroRight:Xv};var q8=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function K8(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=q8();return e&&n.setAttribute("nonce",e),n}function Y8(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function X8(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var Q8=function(){var n=0,e=null;return{add:function(t){n==0&&(e=K8())&&(Y8(e,t),X8(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},J8=function(){var n=Q8();return function(e,t){x.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},RD=function(){var n=J8(),e=function(t){var s=t.styles,r=t.dynamic;return n(s,r),null};return e},Z8={left:0,top:0,right:0,gap:0},q1=function(n){return parseInt(n||"",10)||0},eV=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],s=e[n==="padding"?"paddingTop":"marginTop"],r=e[n==="padding"?"paddingRight":"marginRight"];return[q1(t),q1(s),q1(r)]},tV=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return Z8;var e=eV(n),t=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-t+e[2]-e[0])}},nV=RD(),Ah="data-scroll-locked",sV=function(n,e,t,s){var r=n.left,i=n.top,o=n.right,l=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(O8,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(Ah,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),t==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Xv,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Qv,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Xv," .").concat(Xv,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Qv," .").concat(Qv,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Ah,`] {
    `).concat(B8,": ").concat(l,`px;
  }
`)},Y2=function(){var n=parseInt(document.body.getAttribute(Ah)||"0",10);return isFinite(n)?n:0},rV=function(){x.useEffect(function(){return document.body.setAttribute(Ah,(Y2()+1).toString()),function(){var n=Y2()-1;n<=0?document.body.removeAttribute(Ah):document.body.setAttribute(Ah,n.toString())}},[])},iV=function(n){var e=n.noRelative,t=n.noImportant,s=n.gapMode,r=s===void 0?"margin":s;rV();var i=x.useMemo(function(){return tV(r)},[r]);return x.createElement(nV,{styles:sV(i,!e,r,t?"":"!important")})},TN=!1;if(typeof window<"u")try{var pv=Object.defineProperty({},"passive",{get:function(){return TN=!0,!0}});window.addEventListener("test",pv,pv),window.removeEventListener("test",pv,pv)}catch{TN=!1}var zu=TN?{passive:!1}:!1,aV=function(n){return n.tagName==="TEXTAREA"},DD=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!aV(n)&&t[e]==="visible")},oV=function(n){return DD(n,"overflowY")},lV=function(n){return DD(n,"overflowX")},X2=function(n,e){var t=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=ID(n,s);if(r){var i=LD(n,s),o=i[1],l=i[2];if(o>l)return!0}s=s.parentNode}while(s&&s!==t.body);return!1},cV=function(n){var e=n.scrollTop,t=n.scrollHeight,s=n.clientHeight;return[e,t,s]},dV=function(n){var e=n.scrollLeft,t=n.scrollWidth,s=n.clientWidth;return[e,t,s]},ID=function(n,e){return n==="v"?oV(e):lV(e)},LD=function(n,e){return n==="v"?cV(e):dV(e)},uV=function(n,e){return n==="h"&&e==="rtl"?-1:1},hV=function(n,e,t,s,r){var i=uV(n,window.getComputedStyle(e).direction),o=i*s,l=t.target,d=e.contains(l),u=!1,h=o>0,f=0,m=0;do{var p=LD(n,l),b=p[0],g=p[1],N=p[2],v=g-N-i*b;(b||v)&&ID(n,l)&&(f+=v,m+=b),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!d&&l!==document.body||d&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!r)||!h&&(Math.abs(m)<1||!r))&&(u=!0),u},gv=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Q2=function(n){return[n.deltaX,n.deltaY]},J2=function(n){return n&&"current"in n?n.current:n},fV=function(n,e){return n[0]===e[0]&&n[1]===e[1]},mV=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},pV=0,Uu=[];function gV(n){var e=x.useRef([]),t=x.useRef([0,0]),s=x.useRef(),r=x.useState(pV++)[0],i=x.useState(RD)[0],o=x.useRef(n);x.useEffect(function(){o.current=n},[n]),x.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(r));var g=F8([n.lockRef.current],(n.shards||[]).map(J2),!0).filter(Boolean);return g.forEach(function(N){return N.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),g.forEach(function(N){return N.classList.remove("allow-interactivity-".concat(r))})}}},[n.inert,n.lockRef.current,n.shards]);var l=x.useCallback(function(g,N){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var v=gv(g),y=t.current,S="deltaX"in g?g.deltaX:y[0]-v[0],w="deltaY"in g?g.deltaY:y[1]-v[1],j,E=g.target,T=Math.abs(S)>Math.abs(w)?"h":"v";if("touches"in g&&T==="h"&&E.type==="range")return!1;var P=X2(T,E);if(!P)return!0;if(P?j=T:(j=T==="v"?"h":"v",P=X2(T,E)),!P)return!1;if(!s.current&&"changedTouches"in g&&(S||w)&&(s.current=j),!j)return!0;var _=s.current||j;return hV(_,N,g,_==="h"?S:w,!0)},[]),d=x.useCallback(function(g){var N=g;if(!(!Uu.length||Uu[Uu.length-1]!==i)){var v="deltaY"in N?Q2(N):gv(N),y=e.current.filter(function(j){return j.name===N.type&&(j.target===N.target||N.target===j.shadowParent)&&fV(j.delta,v)})[0];if(y&&y.should){N.cancelable&&N.preventDefault();return}if(!y){var S=(o.current.shards||[]).map(J2).filter(Boolean).filter(function(j){return j.contains(N.target)}),w=S.length>0?l(N,S[0]):!o.current.noIsolation;w&&N.cancelable&&N.preventDefault()}}},[]),u=x.useCallback(function(g,N,v,y){var S={name:g,delta:N,target:v,should:y,shadowParent:xV(v)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(w){return w!==S})},1)},[]),h=x.useCallback(function(g){t.current=gv(g),s.current=void 0},[]),f=x.useCallback(function(g){u(g.type,Q2(g),g.target,l(g,n.lockRef.current))},[]),m=x.useCallback(function(g){u(g.type,gv(g),g.target,l(g,n.lockRef.current))},[]);x.useEffect(function(){return Uu.push(i),n.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",d,zu),document.addEventListener("touchmove",d,zu),document.addEventListener("touchstart",h,zu),function(){Uu=Uu.filter(function(g){return g!==i}),document.removeEventListener("wheel",d,zu),document.removeEventListener("touchmove",d,zu),document.removeEventListener("touchstart",h,zu)}},[]);var p=n.removeScrollBar,b=n.inert;return x.createElement(x.Fragment,null,b?x.createElement(i,{styles:mV(r)}):null,p?x.createElement(iV,{gapMode:n.gapMode}):null)}function xV(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const yV=G8(MD,gV);var Dw=x.forwardRef(function(n,e){return x.createElement(Rw,oa({},n,{ref:e,sideCar:yV}))});Dw.classNames=Rw.classNames;var vV=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Hu=new WeakMap,xv=new WeakMap,yv={},K1=0,FD=function(n){return n&&(n.host||FD(n.parentNode))},bV=function(n,e){return e.map(function(t){if(n.contains(t))return t;var s=FD(t);return s&&n.contains(s)?s:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},wV=function(n,e,t,s){var r=bV(e,Array.isArray(n)?n:[n]);yv[t]||(yv[t]=new WeakMap);var i=yv[t],o=[],l=new Set,d=new Set(r),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};r.forEach(u);var h=function(f){!f||d.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))h(m);else try{var p=m.getAttribute(s),b=p!==null&&p!=="false",g=(Hu.get(m)||0)+1,N=(i.get(m)||0)+1;Hu.set(m,g),i.set(m,N),o.push(m),g===1&&b&&xv.set(m,!0),N===1&&m.setAttribute(t,"true"),b||m.setAttribute(s,"true")}catch(v){console.error("aria-hidden: cannot operate on ",m,v)}})};return h(e),l.clear(),K1++,function(){o.forEach(function(f){var m=Hu.get(f)-1,p=i.get(f)-1;Hu.set(f,m),i.set(f,p),m||(xv.has(f)||f.removeAttribute(s),xv.delete(f)),p||f.removeAttribute(t)}),K1--,K1||(Hu=new WeakMap,Hu=new WeakMap,xv=new WeakMap,yv={})}},WA=function(n,e,t){t===void 0&&(t="data-aria-hidden");var s=Array.from(Array.isArray(n)?n:[n]),r=vV(n);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live]"))),wV(s,r,t,"aria-hidden")):function(){return null}},GA="Dialog",[OD,BD]=Nn(GA),[SV,Ci]=OD(GA),$D=n=>{const{__scopeDialog:e,children:t,open:s,defaultOpen:r,onOpenChange:i,modal:o=!0}=n,l=x.useRef(null),d=x.useRef(null),[u=!1,h]=Ds({prop:s,defaultProp:r,onChange:i});return a.jsx(SV,{scope:e,triggerRef:l,contentRef:d,contentId:$r(),titleId:$r(),descriptionId:$r(),open:u,onOpenChange:h,onOpenToggle:x.useCallback(()=>h(f=>!f),[h]),modal:o,children:t})};$D.displayName=GA;var zD="DialogTrigger",UD=x.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,r=Ci(zD,t),i=we(e,r.triggerRef);return a.jsx(pe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":YA(r.open),...s,ref:i,onClick:oe(n.onClick,r.onOpenToggle)})});UD.displayName=zD;var qA="DialogPortal",[NV,HD]=OD(qA,{forceMount:void 0}),VD=n=>{const{__scopeDialog:e,forceMount:t,children:s,container:r}=n,i=Ci(qA,e);return a.jsx(NV,{scope:e,forceMount:t,children:x.Children.map(s,o=>a.jsx(ps,{present:t||i.open,children:a.jsx(jy,{asChild:!0,container:r,children:o})}))})};VD.displayName=qA;var db="DialogOverlay",WD=x.forwardRef((n,e)=>{const t=HD(db,n.__scopeDialog),{forceMount:s=t.forceMount,...r}=n,i=Ci(db,n.__scopeDialog);return i.modal?a.jsx(ps,{present:s||i.open,children:a.jsx(CV,{...r,ref:e})}):null});WD.displayName=db;var jV=Nu("DialogOverlay.RemoveScroll"),CV=x.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,r=Ci(db,t);return a.jsx(Dw,{as:jV,allowPinchZoom:!0,shards:[r.contentRef],children:a.jsx(pe.div,{"data-state":YA(r.open),...s,ref:e,style:{pointerEvents:"auto",...s.style}})})}),ku="DialogContent",GD=x.forwardRef((n,e)=>{const t=HD(ku,n.__scopeDialog),{forceMount:s=t.forceMount,...r}=n,i=Ci(ku,n.__scopeDialog);return a.jsx(ps,{present:s||i.open,children:i.modal?a.jsx(AV,{...r,ref:e}):a.jsx(EV,{...r,ref:e})})});GD.displayName=ku;var AV=x.forwardRef((n,e)=>{const t=Ci(ku,n.__scopeDialog),s=x.useRef(null),r=we(e,t.contentRef,s);return x.useEffect(()=>{const i=s.current;if(i)return WA(i)},[]),a.jsx(qD,{...n,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:oe(n.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:oe(n.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:oe(n.onFocusOutside,i=>i.preventDefault())})}),EV=x.forwardRef((n,e)=>{const t=Ci(ku,n.__scopeDialog),s=x.useRef(!1),r=x.useRef(!1);return a.jsx(qD,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=n.onCloseAutoFocus)==null||o.call(n,i),i.defaultPrevented||(s.current||(l=t.triggerRef.current)==null||l.focus(),i.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:i=>{var d,u;(d=n.onInteractOutside)==null||d.call(n,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=i.target;((u=t.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),qD=x.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:i,...o}=n,l=Ci(ku,t),d=x.useRef(null),u=we(e,d);return VA(),a.jsxs(a.Fragment,{children:[a.jsx(Mw,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:i,children:a.jsx(Bm,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":YA(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(TV,{titleId:l.titleId}),a.jsx(_V,{contentRef:d,descriptionId:l.descriptionId})]})]})}),KA="DialogTitle",KD=x.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,r=Ci(KA,t);return a.jsx(pe.h2,{id:r.titleId,...s,ref:e})});KD.displayName=KA;var YD="DialogDescription",XD=x.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,r=Ci(YD,t);return a.jsx(pe.p,{id:r.descriptionId,...s,ref:e})});XD.displayName=YD;var QD="DialogClose",JD=x.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,r=Ci(QD,t);return a.jsx(pe.button,{type:"button",...s,ref:e,onClick:oe(n.onClick,()=>r.onOpenChange(!1))})});JD.displayName=QD;function YA(n){return n?"open":"closed"}var ZD="DialogTitleWarning",[kV,eI]=K$(ZD,{contentName:ku,titleName:KA,docsSlug:"dialog"}),TV=({titleId:n})=>{const e=eI(ZD),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return x.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},PV="DialogDescriptionWarning",_V=({contentRef:n,descriptionId:e})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${eI(PV).contentName}}.`;return x.useEffect(()=>{var i;const r=(i=n.current)==null?void 0:i.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(s))},[s,n,e]),null},XA=$D,tI=UD,QA=VD,Ey=WD,ky=GD,Ty=KD,Py=XD,Iw=JD;const MV=XA,RV=QA,nI=x.forwardRef(({className:n,...e},t)=>a.jsx(Ey,{className:ee("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e,ref:t}));nI.displayName=Ey.displayName;const DV=Iu("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),sI=x.forwardRef(({side:n="right",className:e,children:t,...s},r)=>a.jsxs(RV,{children:[a.jsx(nI,{}),a.jsxs(ky,{ref:r,className:ee(DV({side:n}),e),...s,children:[t,a.jsxs(Iw,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[a.jsx(bc,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));sI.displayName=ky.displayName;const rI=({className:n,...e})=>a.jsx("div",{className:ee("flex flex-col space-y-2 text-center sm:text-left",n),...e});rI.displayName="SheetHeader";const iI=x.forwardRef(({className:n,...e},t)=>a.jsx(Ty,{ref:t,className:ee("text-lg font-semibold text-foreground",n),...e}));iI.displayName=Ty.displayName;const aI=x.forwardRef(({className:n,...e},t)=>a.jsx(Py,{ref:t,className:ee("text-sm text-muted-foreground",n),...e}));aI.displayName=Py.displayName;const IV="sidebar_state",LV=60*60*24*7,FV="16rem",OV="18rem",BV="3rem",$V="b",oI=x.createContext(null);function Lw(){const n=x.useContext(oI);if(!n)throw new Error("useSidebar must be used within a SidebarProvider.");return n}function zV({defaultOpen:n=!0,open:e,onOpenChange:t,className:s,style:r,children:i,...o}){const l=A8(),[d,u]=x.useState(!1),[h,f]=x.useState(n),m=e??h,p=x.useCallback(v=>{const y=typeof v=="function"?v(m):v;t?t(y):f(y),document.cookie=`${IV}=${y}; path=/; max-age=${LV}`},[t,m]),b=x.useCallback(()=>l?u(v=>!v):p(v=>!v),[l,p,u]);x.useEffect(()=>{const v=y=>{y.key===$V&&(y.metaKey||y.ctrlKey)&&(y.preventDefault(),b())};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[b]);const g=m?"expanded":"collapsed",N=x.useMemo(()=>({state:g,open:m,setOpen:p,isMobile:l,openMobile:d,setOpenMobile:u,toggleSidebar:b}),[g,m,p,l,d,u,b]);return a.jsx(oI.Provider,{value:N,children:a.jsx(CD,{delayDuration:0,children:a.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":FV,"--sidebar-width-icon":BV,...r},className:ee("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",s),...o,children:i})})})}function lI({side:n="left",variant:e="sidebar",collapsible:t="offcanvas",className:s,children:r,...i}){const{isMobile:o,state:l,openMobile:d,setOpenMobile:u}=Lw();return t==="none"?a.jsx("div",{"data-slot":"sidebar",className:ee("bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col",s),...i,children:r}):o?a.jsx(MV,{open:d,onOpenChange:u,...i,children:a.jsxs(sI,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden",style:{"--sidebar-width":OV},side:n,children:[a.jsxs(rI,{className:"sr-only",children:[a.jsx(iI,{children:"Sidebar"}),a.jsx(aI,{children:"Displays the mobile sidebar."})]}),a.jsx("div",{className:"flex h-full w-full flex-col",children:r})]})}):a.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":l,"data-collapsible":l==="collapsed"?t:"","data-variant":e,"data-side":n,"data-slot":"sidebar",children:[a.jsx("div",{"data-slot":"sidebar-gap",className:ee("relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]")}),a.jsx("div",{"data-slot":"sidebar-container",className:ee("fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex",n==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l",s),...i,children:a.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:r})})]})}function cI({className:n,onClick:e,...t}){const{toggleSidebar:s}=Lw();return a.jsxs(O,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:ee("h-7 w-7",n),onClick:r=>{e==null||e(r),s()},...t,children:[a.jsx(nU,{}),a.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function UV({className:n,...e}){return a.jsx("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:ee("flex flex-col gap-2 p-2",n),...e})}function dI({className:n,...e}){return a.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:ee("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",n),...e})}function uI({className:n,...e}){return a.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:ee("relative flex w-full min-w-0 flex-col p-2",n),...e})}function hI({className:n,asChild:e=!1,...t}){const s=e?xA:"div";return a.jsx(s,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:ee("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",n),...t})}function fI({className:n,...e}){return a.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:ee("w-full text-sm",n),...e})}function Jv({className:n,...e}){return a.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:ee("flex w-full min-w-0 flex-col gap-1",n),...e})}function Xp({className:n,...e}){return a.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:ee("group/menu-item relative",n),...e})}const HV=Iu("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function Qp({asChild:n=!1,isActive:e=!1,variant:t="default",size:s="default",tooltip:r,className:i,...o}){const l=n?xA:"button",{isMobile:d,state:u}=Lw(),h=a.jsx(l,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":s,"data-active":e,className:ee(HV({variant:t,size:s}),i),...o});return r?(typeof r=="string"&&(r={children:r}),a.jsxs(j8,{children:[a.jsx(C8,{asChild:!0,children:h}),a.jsx(AD,{side:"right",align:"center",hidden:u!=="collapsed"||d,...r})]})):h}const VV=[{title:"Dashboard",url:"/",icon:IR},{title:"Daily Sadhna",url:"/guide",icon:at},{title:"Mahapuran PDFs",url:"/mahapuran",icon:ha},{title:"Scriptures",url:"/scriptures",icon:cU},{title:"Bhavishya Malika Website",url:"/bhavishya-malika",icon:qv},{title:"Media Library",url:"/media",icon:or},{title:"Progress",url:"/progress",icon:wA},{title:"Alarms",url:"/alarms",icon:To},{title:"Alarms (New)",url:"/alarms-new",icon:To},{title:"Settings",url:"/settings",icon:OR}],WV=[{title:"Divine Experiences",url:"/divine-experiences",icon:Cu},{title:"Question / Answers",url:"/questions",icon:DR},{title:"Articles",url:"/articles",icon:SN}],GV=[{title:"About",url:"/about",icon:NA},{title:"Contact",url:"/contact",icon:po},{title:"Terms & Privacy",url:"/legal",icon:Po}];function qV(){const[n]=ba(),e=n.split("?")[0].split("#")[0];return a.jsxs(lI,{children:[a.jsx(dI,{children:a.jsxs(uI,{children:[a.jsx(hI,{className:"text-lg font-serif text-primary px-2 py-3",children:"Trisandhya Companion"}),a.jsx(fI,{children:a.jsx(Jv,{children:VV.map(t=>a.jsx(Xp,{children:a.jsx(Qp,{asChild:!0,isActive:e===t.url||e.startsWith(t.url+"/"),className:"py-3",children:a.jsxs(fc,{href:t.url,"data-testid":`link-${t.title.toLowerCase().replace(/ /g,"-")}`,children:[a.jsx(t.icon,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:t.title})]})})},t.title))})})]})}),a.jsxs(UV,{children:[a.jsx(Kc,{className:"mb-2"}),a.jsx(Jv,{children:WV.map(t=>a.jsx(Xp,{children:a.jsx(Qp,{asChild:!0,isActive:e===t.url,size:"sm",children:a.jsxs(fc,{href:t.url,"data-testid":`link-${t.title.toLowerCase().replace(/ /g,"-").replace(/&/g,"and")}`,children:[a.jsx(t.icon,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:t.title})]})})},t.title))}),a.jsx(Kc,{className:"my-2"}),a.jsx(Jv,{children:GV.map(t=>a.jsx(Xp,{children:a.jsx(Qp,{asChild:!0,isActive:e===t.url,size:"sm",children:a.jsxs(fc,{href:t.url,"data-testid":`link-${t.title.toLowerCase().replace(/ /g,"-").replace(/&/g,"and")}`,children:[a.jsx(t.icon,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:t.title})]})})},t.title))}),a.jsx("div",{className:"px-2 py-2 text-xs text-muted-foreground text-center",children:a.jsx("p",{children:"© 2025 Trisandhya App"})})]})]})}const KV=[{title:"Dashboard",url:"/admin",icon:Yz},{title:"Users",url:"/admin/users",icon:Au},{title:"Media",url:"/admin/media",icon:or},{title:"Media Categories",url:"/admin/media-categories",icon:Gz},{title:"Scriptures",url:"/admin/scriptures",icon:at},{title:"Alarm Sounds",url:"/admin/alarm-sounds",icon:To},{title:"Japa Audios",url:"/admin/japa-audios",icon:Kz},{title:"Shreemad Bhagwat Mahapuran",url:"/admin/mahapuran-pdfs",icon:Po},{title:"Trisandhya PDFs",url:"/admin/trisandhya-pdfs",icon:Po},{title:"Notifications",url:"/admin/notifications",icon:MR}];function YV(){const[n]=ba(),e=n.split("?")[0].split("#")[0];return a.jsx(lI,{children:a.jsx(dI,{children:a.jsxs(uI,{children:[a.jsx(hI,{className:"text-lg font-serif text-primary",children:"Admin Panel"}),a.jsx(fI,{children:a.jsxs(Jv,{children:[KV.map(t=>a.jsx(Xp,{children:a.jsx(Qp,{asChild:!0,isActive:e===t.url,children:a.jsxs(fc,{href:t.url,"data-testid":`link-admin-${t.title.toLowerCase()}`,children:[a.jsx(t.icon,{}),a.jsx("span",{children:t.title})]})})},t.title)),a.jsx(Xp,{children:a.jsx(Qp,{asChild:!0,children:a.jsxs(fc,{href:"/","data-testid":"link-back-to-app",children:[a.jsx(_R,{}),a.jsx("span",{children:"Back to App"})]})})})]})})]})})})}const mI=x.createContext(void 0);function XV({children:n,defaultTheme:e="light"}){const[t,s]=x.useState(()=>localStorage.getItem("theme")||e);return x.useEffect(()=>{const r=document.documentElement;r.classList.remove("light","dark"),r.classList.add(t),localStorage.setItem("theme",t)},[t]),a.jsx(mI.Provider,{value:{theme:t,setTheme:s},children:n})}function pI(){const n=x.useContext(mI);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n}function QV(){const{theme:n,setTheme:e}=pI();return a.jsxs(O,{size:"icon",variant:"ghost",onClick:()=>e(n==="light"?"dark":"light"),"data-testid":"button-theme-toggle",children:[a.jsx(BR,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),a.jsx(FR,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),a.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}var JA="Popover",[gI,pQ]=Nn(JA,[Vm]),_y=Vm(),[JV,Mc]=gI(JA),xI=n=>{const{__scopePopover:e,children:t,open:s,defaultOpen:r,onOpenChange:i,modal:o=!1}=n,l=_y(e),d=x.useRef(null),[u,h]=x.useState(!1),[f=!1,m]=Ds({prop:s,defaultProp:r,onChange:i});return a.jsx(BA,{...l,children:a.jsx(JV,{scope:e,contentId:$r(),triggerRef:d,open:f,onOpenChange:m,onOpenToggle:x.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:u,onCustomAnchorAdd:x.useCallback(()=>h(!0),[]),onCustomAnchorRemove:x.useCallback(()=>h(!1),[]),modal:o,children:t})})};xI.displayName=JA;var yI="PopoverAnchor",ZV=x.forwardRef((n,e)=>{const{__scopePopover:t,...s}=n,r=Mc(yI,t),i=_y(t),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=r;return x.useEffect(()=>(o(),()=>l()),[o,l]),a.jsx(Ew,{...i,...s,ref:e})});ZV.displayName=yI;var vI="PopoverTrigger",bI=x.forwardRef((n,e)=>{const{__scopePopover:t,...s}=n,r=Mc(vI,t),i=_y(t),o=we(e,r.triggerRef),l=a.jsx(pe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":CI(r.open),...s,ref:o,onClick:oe(n.onClick,r.onOpenToggle)});return r.hasCustomAnchor?l:a.jsx(Ew,{asChild:!0,...i,children:l})});bI.displayName=vI;var ZA="PopoverPortal",[eW,tW]=gI(ZA,{forceMount:void 0}),wI=n=>{const{__scopePopover:e,forceMount:t,children:s,container:r}=n,i=Mc(ZA,e);return a.jsx(eW,{scope:e,forceMount:t,children:a.jsx(ps,{present:t||i.open,children:a.jsx(jy,{asChild:!0,container:r,children:s})})})};wI.displayName=ZA;var km="PopoverContent",SI=x.forwardRef((n,e)=>{const t=tW(km,n.__scopePopover),{forceMount:s=t.forceMount,...r}=n,i=Mc(km,n.__scopePopover);return a.jsx(ps,{present:s||i.open,children:i.modal?a.jsx(sW,{...r,ref:e}):a.jsx(rW,{...r,ref:e})})});SI.displayName=km;var nW=Nu("PopoverContent.RemoveScroll"),sW=x.forwardRef((n,e)=>{const t=Mc(km,n.__scopePopover),s=x.useRef(null),r=we(e,s),i=x.useRef(!1);return x.useEffect(()=>{const o=s.current;if(o)return WA(o)},[]),a.jsx(Dw,{as:nW,allowPinchZoom:!0,children:a.jsx(NI,{...n,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:oe(n.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=t.triggerRef.current)==null||l.focus()}),onPointerDownOutside:oe(n.onPointerDownOutside,o=>{const l=o.detail.originalEvent,d=l.button===0&&l.ctrlKey===!0,u=l.button===2||d;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:oe(n.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),rW=x.forwardRef((n,e)=>{const t=Mc(km,n.__scopePopover),s=x.useRef(!1),r=x.useRef(!1);return a.jsx(NI,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=n.onCloseAutoFocus)==null||o.call(n,i),i.defaultPrevented||(s.current||(l=t.triggerRef.current)==null||l.focus(),i.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:i=>{var d,u;(d=n.onInteractOutside)==null||d.call(n,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=i.target;((u=t.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),NI=x.forwardRef((n,e)=>{const{__scopePopover:t,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:h,...f}=n,m=Mc(km,t),p=_y(t);return VA(),a.jsx(Mw,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:i,children:a.jsx(Bm,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:a.jsx($A,{"data-state":CI(m.open),role:"dialog",id:m.contentId,...p,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),jI="PopoverClose",iW=x.forwardRef((n,e)=>{const{__scopePopover:t,...s}=n,r=Mc(jI,t);return a.jsx(pe.button,{type:"button",...s,ref:e,onClick:oe(n.onClick,()=>r.onOpenChange(!1))})});iW.displayName=jI;var aW="PopoverArrow",oW=x.forwardRef((n,e)=>{const{__scopePopover:t,...s}=n,r=_y(t);return a.jsx(zA,{...r,...s,ref:e})});oW.displayName=aW;function CI(n){return n?"open":"closed"}var lW=xI,cW=bI,dW=wI,AI=SI;const uW=lW,hW=cW,EI=x.forwardRef(({className:n,align:e="center",sideOffset:t=4,...s},r)=>a.jsx(dW,{children:a.jsx(AI,{ref:r,align:e,sideOffset:t,className:ee("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",n),...s})}));EI.displayName=AI.displayName;const Nt=XA,jc=tI,fW=QA,kI=x.forwardRef(({className:n,...e},t)=>a.jsx(Ey,{ref:t,className:ee("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));kI.displayName=Ey.displayName;const xt=x.forwardRef(({className:n,children:e,...t},s)=>a.jsxs(fW,{children:[a.jsx(kI,{}),a.jsxs(ky,{ref:s,className:ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,a.jsxs(Iw,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(bc,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));xt.displayName=ky.displayName;const jt=({className:n,...e})=>a.jsx("div",{className:ee("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});jt.displayName="DialogHeader";const ma=({className:n,...e})=>a.jsx("div",{className:ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});ma.displayName="DialogFooter";const Ct=x.forwardRef(({className:n,...e},t)=>a.jsx(Ty,{ref:t,className:ee("text-lg font-semibold leading-none tracking-tight",n),...e}));Ct.displayName=Ty.displayName;const bo=x.forwardRef(({className:n,...e},t)=>a.jsx(Py,{ref:t,className:ee("text-sm text-muted-foreground",n),...e}));bo.displayName=Py.displayName;var mW=x.createContext(void 0);function Wm(n){const e=x.useContext(mW);return n||e||"ltr"}function bg(n,[e,t]){return Math.min(t,Math.max(e,n))}function pW(n,e){return x.useReducer((t,s)=>e[t][s]??t,n)}var eE="ScrollArea",[TI,gQ]=Nn(eE),[gW,Wr]=TI(eE),PI=x.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:s="hover",dir:r,scrollHideDelay:i=600,...o}=n,[l,d]=x.useState(null),[u,h]=x.useState(null),[f,m]=x.useState(null),[p,b]=x.useState(null),[g,N]=x.useState(null),[v,y]=x.useState(0),[S,w]=x.useState(0),[j,E]=x.useState(!1),[T,P]=x.useState(!1),_=we(e,I=>d(I)),R=Wm(r);return a.jsx(gW,{scope:t,type:s,dir:R,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:h,content:f,onContentChange:m,scrollbarX:p,onScrollbarXChange:b,scrollbarXEnabled:j,onScrollbarXEnabledChange:E,scrollbarY:g,onScrollbarYChange:N,scrollbarYEnabled:T,onScrollbarYEnabledChange:P,onCornerWidthChange:y,onCornerHeightChange:w,children:a.jsx(pe.div,{dir:R,...o,ref:_,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":S+"px",...n.style}})})});PI.displayName=eE;var _I="ScrollAreaViewport",MI=x.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:s,nonce:r,...i}=n,o=Wr(_I,t),l=x.useRef(null),d=we(e,l,o.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(pe.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...n.style},children:a.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});MI.displayName=_I;var Na="ScrollAreaScrollbar",tE=x.forwardRef((n,e)=>{const{forceMount:t,...s}=n,r=Wr(Na,n.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=r,l=n.orientation==="horizontal";return x.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),r.type==="hover"?a.jsx(xW,{...s,ref:e,forceMount:t}):r.type==="scroll"?a.jsx(yW,{...s,ref:e,forceMount:t}):r.type==="auto"?a.jsx(RI,{...s,ref:e,forceMount:t}):r.type==="always"?a.jsx(nE,{...s,ref:e}):null});tE.displayName=Na;var xW=x.forwardRef((n,e)=>{const{forceMount:t,...s}=n,r=Wr(Na,n.__scopeScrollArea),[i,o]=x.useState(!1);return x.useEffect(()=>{const l=r.scrollArea;let d=0;if(l){const u=()=>{window.clearTimeout(d),o(!0)},h=()=>{d=window.setTimeout(()=>o(!1),r.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",h)}}},[r.scrollArea,r.scrollHideDelay]),a.jsx(ps,{present:t||i,children:a.jsx(RI,{"data-state":i?"visible":"hidden",...s,ref:e})})}),yW=x.forwardRef((n,e)=>{const{forceMount:t,...s}=n,r=Wr(Na,n.__scopeScrollArea),i=n.orientation==="horizontal",o=Ow(()=>d("SCROLL_END"),100),[l,d]=pW("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>d("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,r.scrollHideDelay,d]),x.useEffect(()=>{const u=r.viewport,h=i?"scrollLeft":"scrollTop";if(u){let f=u[h];const m=()=>{const p=u[h];f!==p&&(d("SCROLL"),o()),f=p};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[r.viewport,i,d,o]),a.jsx(ps,{present:t||l!=="hidden",children:a.jsx(nE,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:e,onPointerEnter:oe(n.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:oe(n.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),RI=x.forwardRef((n,e)=>{const t=Wr(Na,n.__scopeScrollArea),{forceMount:s,...r}=n,[i,o]=x.useState(!1),l=n.orientation==="horizontal",d=Ow(()=>{if(t.viewport){const u=t.viewport.offsetWidth<t.viewport.scrollWidth,h=t.viewport.offsetHeight<t.viewport.scrollHeight;o(l?u:h)}},10);return Tm(t.viewport,d),Tm(t.content,d),a.jsx(ps,{present:s||i,children:a.jsx(nE,{"data-state":i?"visible":"hidden",...r,ref:e})})}),nE=x.forwardRef((n,e)=>{const{orientation:t="vertical",...s}=n,r=Wr(Na,n.__scopeScrollArea),i=x.useRef(null),o=x.useRef(0),[l,d]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=OI(l.viewport,l.content),h={...s,sizes:l,onSizesChange:d,hasThumb:u>0&&u<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function f(m,p){return jW(m,o.current,l,p)}return t==="horizontal"?a.jsx(vW,{...h,ref:e,onThumbPositionChange:()=>{if(r.viewport&&i.current){const m=r.viewport.scrollLeft,p=Z2(m,l,r.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollLeft=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollLeft=f(m,r.dir))}}):t==="vertical"?a.jsx(bW,{...h,ref:e,onThumbPositionChange:()=>{if(r.viewport&&i.current){const m=r.viewport.scrollTop,p=Z2(m,l);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollTop=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollTop=f(m))}}):null}),vW=x.forwardRef((n,e)=>{const{sizes:t,onSizesChange:s,...r}=n,i=Wr(Na,n.__scopeScrollArea),[o,l]=x.useState(),d=x.useRef(null),u=we(e,d,i.onScrollbarXChange);return x.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),a.jsx(II,{"data-orientation":"horizontal",...r,ref:u,sizes:t,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Fw(t)+"px",...n.style},onThumbPointerDown:h=>n.onThumbPointerDown(h.x),onDragScroll:h=>n.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(i.viewport){const m=i.viewport.scrollLeft+h.deltaX;n.onWheelScroll(m),$I(m,f)&&h.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:hb(o.paddingLeft),paddingEnd:hb(o.paddingRight)}})}})}),bW=x.forwardRef((n,e)=>{const{sizes:t,onSizesChange:s,...r}=n,i=Wr(Na,n.__scopeScrollArea),[o,l]=x.useState(),d=x.useRef(null),u=we(e,d,i.onScrollbarYChange);return x.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),a.jsx(II,{"data-orientation":"vertical",...r,ref:u,sizes:t,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Fw(t)+"px",...n.style},onThumbPointerDown:h=>n.onThumbPointerDown(h.y),onDragScroll:h=>n.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(i.viewport){const m=i.viewport.scrollTop+h.deltaY;n.onWheelScroll(m),$I(m,f)&&h.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:hb(o.paddingTop),paddingEnd:hb(o.paddingBottom)}})}})}),[wW,DI]=TI(Na),II=x.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:s,hasThumb:r,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:h,onResize:f,...m}=n,p=Wr(Na,t),[b,g]=x.useState(null),N=we(e,_=>g(_)),v=x.useRef(null),y=x.useRef(""),S=p.viewport,w=s.content-s.viewport,j=Gt(h),E=Gt(d),T=Ow(f,10);function P(_){if(v.current){const R=_.clientX-v.current.left,I=_.clientY-v.current.top;u({x:R,y:I})}}return x.useEffect(()=>{const _=R=>{const I=R.target;(b==null?void 0:b.contains(I))&&j(R,w)};return document.addEventListener("wheel",_,{passive:!1}),()=>document.removeEventListener("wheel",_,{passive:!1})},[S,b,w,j]),x.useEffect(E,[s,E]),Tm(b,T),Tm(p.content,T),a.jsx(wW,{scope:t,scrollbar:b,hasThumb:r,onThumbChange:Gt(i),onThumbPointerUp:Gt(o),onThumbPositionChange:E,onThumbPointerDown:Gt(l),children:a.jsx(pe.div,{...m,ref:N,style:{position:"absolute",...m.style},onPointerDown:oe(n.onPointerDown,_=>{_.button===0&&(_.target.setPointerCapture(_.pointerId),v.current=b.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),P(_))}),onPointerMove:oe(n.onPointerMove,P),onPointerUp:oe(n.onPointerUp,_=>{const R=_.target;R.hasPointerCapture(_.pointerId)&&R.releasePointerCapture(_.pointerId),document.body.style.webkitUserSelect=y.current,p.viewport&&(p.viewport.style.scrollBehavior=""),v.current=null})})})}),ub="ScrollAreaThumb",LI=x.forwardRef((n,e)=>{const{forceMount:t,...s}=n,r=DI(ub,n.__scopeScrollArea);return a.jsx(ps,{present:t||r.hasThumb,children:a.jsx(SW,{ref:e,...s})})}),SW=x.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:s,...r}=n,i=Wr(ub,t),o=DI(ub,t),{onThumbPositionChange:l}=o,d=we(e,f=>o.onThumbChange(f)),u=x.useRef(void 0),h=Ow(()=>{u.current&&(u.current(),u.current=void 0)},100);return x.useEffect(()=>{const f=i.viewport;if(f){const m=()=>{if(h(),!u.current){const p=CW(f,l);u.current=p,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[i.viewport,h,l]),a.jsx(pe.div,{"data-state":o.hasThumb?"visible":"hidden",...r,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:oe(n.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),b=f.clientX-p.left,g=f.clientY-p.top;o.onThumbPointerDown({x:b,y:g})}),onPointerUp:oe(n.onPointerUp,o.onThumbPointerUp)})});LI.displayName=ub;var sE="ScrollAreaCorner",FI=x.forwardRef((n,e)=>{const t=Wr(sE,n.__scopeScrollArea),s=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&s?a.jsx(NW,{...n,ref:e}):null});FI.displayName=sE;var NW=x.forwardRef((n,e)=>{const{__scopeScrollArea:t,...s}=n,r=Wr(sE,t),[i,o]=x.useState(0),[l,d]=x.useState(0),u=!!(i&&l);return Tm(r.scrollbarX,()=>{var f;const h=((f=r.scrollbarX)==null?void 0:f.offsetHeight)||0;r.onCornerHeightChange(h),d(h)}),Tm(r.scrollbarY,()=>{var f;const h=((f=r.scrollbarY)==null?void 0:f.offsetWidth)||0;r.onCornerWidthChange(h),o(h)}),u?a.jsx(pe.div,{...s,ref:e,style:{width:i,height:l,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function hb(n){return n?parseInt(n,10):0}function OI(n,e){const t=n/e;return isNaN(t)?0:t}function Fw(n){const e=OI(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,s=(n.scrollbar.size-t)*e;return Math.max(s,18)}function jW(n,e,t,s="ltr"){const r=Fw(t),i=r/2,o=e||i,l=r-o,d=t.scrollbar.paddingStart+o,u=t.scrollbar.size-t.scrollbar.paddingEnd-l,h=t.content-t.viewport,f=s==="ltr"?[0,h]:[h*-1,0];return BI([d,u],f)(n)}function Z2(n,e,t="ltr"){const s=Fw(e),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-r,o=e.content-e.viewport,l=i-s,d=t==="ltr"?[0,o]:[o*-1,0],u=bg(n,d);return BI([0,o],[0,l])(u)}function BI(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(n[1]-n[0]);return e[0]+s*(t-n[0])}}function $I(n,e){return n>0&&n<e}var CW=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},s=0;return function r(){const i={left:n.scrollLeft,top:n.scrollTop},o=t.left!==i.left,l=t.top!==i.top;(o||l)&&e(),t=i,s=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(s)};function Ow(n,e){const t=Gt(n),s=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(s.current),[]),x.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(t,e)},[t,e])}function Tm(n,e){const t=Gt(e);Jt(()=>{let s=0;if(n){const r=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(t)});return r.observe(n),()=>{window.cancelAnimationFrame(s),r.unobserve(n)}}},[n,t])}var zI=PI,AW=MI,EW=FI;const UI=x.forwardRef(({className:n,children:e,...t},s)=>a.jsxs(zI,{ref:s,className:ee("relative overflow-hidden",n),...t,children:[a.jsx(AW,{className:"h-full w-full rounded-[inherit]",children:e}),a.jsx(HI,{}),a.jsx(EW,{})]}));UI.displayName=zI.displayName;const HI=x.forwardRef(({className:n,orientation:e="vertical",...t},s)=>a.jsx(tE,{ref:s,orientation:e,className:ee("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...t,children:a.jsx(LI,{className:"relative flex-1 rounded-full bg-border"})}));HI.displayName=tE.displayName;const kW=Iu("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function sn({className:n,variant:e,...t}){return a.jsx("div",{className:ee(kW({variant:e}),n),...t})}function it(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function Ro(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function TW(n,e){const t=it(n);return isNaN(e)?Ro(n,NaN):(e&&t.setDate(t.getDate()+e),t)}const VI=6048e5,PW=864e5,vv=43200,eT=1440;let _W={};function My(){return _W}function wg(n,e){var l,d,u,h;const t=My(),s=(e==null?void 0:e.weekStartsOn)??((d=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:d.weekStartsOn)??t.weekStartsOn??((h=(u=t.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,r=it(n),i=r.getDay(),o=(i<s?7:0)+i-s;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function fb(n){return wg(n,{weekStartsOn:1})}function WI(n){const e=it(n),t=e.getFullYear(),s=Ro(n,0);s.setFullYear(t+1,0,4),s.setHours(0,0,0,0);const r=fb(s),i=Ro(n,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const o=fb(i);return e.getTime()>=r.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function tT(n){const e=it(n);return e.setHours(0,0,0,0),e}function mb(n){const e=it(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function MW(n,e){const t=tT(n),s=tT(e),r=+t-mb(t),i=+s-mb(s);return Math.round((r-i)/PW)}function RW(n){const e=WI(n),t=Ro(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),fb(t)}function Zv(n,e){const t=it(n),s=it(e),r=t.getTime()-s.getTime();return r<0?-1:r>0?1:r}function DW(n){return Ro(n,Date.now())}function IW(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function LW(n){if(!IW(n)&&typeof n!="number")return!1;const e=it(n);return!isNaN(Number(e))}function FW(n,e){const t=it(n),s=it(e),r=t.getFullYear()-s.getFullYear(),i=t.getMonth()-s.getMonth();return r*12+i}function OW(n){return e=>{const s=(n?Math[n]:Math.trunc)(e);return s===0?0:s}}function BW(n,e){return+it(n)-+it(e)}function $W(n){const e=it(n);return e.setHours(23,59,59,999),e}function zW(n){const e=it(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function UW(n){const e=it(n);return+$W(e)==+zW(e)}function HW(n,e){const t=it(n),s=it(e),r=Zv(t,s),i=Math.abs(FW(t,s));let o;if(i<1)o=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-r*i);let l=Zv(t,s)===-r;UW(it(n))&&i===1&&Zv(n,s)===1&&(l=!1),o=r*(i-Number(l))}return o===0?0:o}function VW(n,e,t){const s=BW(n,e)/1e3;return OW(t==null?void 0:t.roundingMethod)(s)}function WW(n){const e=it(n),t=Ro(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const GW={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},qW=(n,e,t)=>{let s;const r=GW[n];return typeof r=="string"?s=r:e===1?s=r.one:s=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function Y1(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const KW={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},YW={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},XW={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},QW={date:Y1({formats:KW,defaultWidth:"full"}),time:Y1({formats:YW,defaultWidth:"full"}),dateTime:Y1({formats:XW,defaultWidth:"full"})},JW={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ZW=(n,e,t,s)=>JW[n];function ap(n){return(e,t)=>{const s=t!=null&&t.context?String(t.context):"standalone";let r;if(s==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,l=t!=null&&t.width?String(t.width):o;r=n.formattingValues[l]||n.formattingValues[o]}else{const o=n.defaultWidth,l=t!=null&&t.width?String(t.width):n.defaultWidth;r=n.values[l]||n.values[o]}const i=n.argumentCallback?n.argumentCallback(e):e;return r[i]}}const e7={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},t7={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},n7={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},s7={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},r7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},i7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},a7=(n,e)=>{const t=Number(n),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},o7={ordinalNumber:a7,era:ap({values:e7,defaultWidth:"wide"}),quarter:ap({values:t7,defaultWidth:"wide",argumentCallback:n=>n-1}),month:ap({values:n7,defaultWidth:"wide"}),day:ap({values:s7,defaultWidth:"wide"}),dayPeriod:ap({values:r7,defaultWidth:"wide",formattingValues:i7,defaultFormattingWidth:"wide"})};function op(n){return(e,t={})=>{const s=t.width,r=s&&n.matchPatterns[s]||n.matchPatterns[n.defaultMatchWidth],i=e.match(r);if(!i)return null;const o=i[0],l=s&&n.parsePatterns[s]||n.parsePatterns[n.defaultParseWidth],d=Array.isArray(l)?c7(l,f=>f.test(o)):l7(l,f=>f.test(o));let u;u=n.valueCallback?n.valueCallback(d):d,u=t.valueCallback?t.valueCallback(u):u;const h=e.slice(o.length);return{value:u,rest:h}}}function l7(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function c7(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function d7(n){return(e,t={})=>{const s=e.match(n.matchPattern);if(!s)return null;const r=s[0],i=e.match(n.parsePattern);if(!i)return null;let o=n.valueCallback?n.valueCallback(i[0]):i[0];o=t.valueCallback?t.valueCallback(o):o;const l=e.slice(r.length);return{value:o,rest:l}}}const u7=/^(\d+)(th|st|nd|rd)?/i,h7=/\d+/i,f7={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},m7={any:[/^b/i,/^(a|c)/i]},p7={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},g7={any:[/1/i,/2/i,/3/i,/4/i]},x7={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},y7={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},v7={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},b7={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},w7={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},S7={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},N7={ordinalNumber:d7({matchPattern:u7,parsePattern:h7,valueCallback:n=>parseInt(n,10)}),era:op({matchPatterns:f7,defaultMatchWidth:"wide",parsePatterns:m7,defaultParseWidth:"any"}),quarter:op({matchPatterns:p7,defaultMatchWidth:"wide",parsePatterns:g7,defaultParseWidth:"any",valueCallback:n=>n+1}),month:op({matchPatterns:x7,defaultMatchWidth:"wide",parsePatterns:y7,defaultParseWidth:"any"}),day:op({matchPatterns:v7,defaultMatchWidth:"wide",parsePatterns:b7,defaultParseWidth:"any"}),dayPeriod:op({matchPatterns:w7,defaultMatchWidth:"any",parsePatterns:S7,defaultParseWidth:"any"})},GI={code:"en-US",formatDistance:qW,formatLong:QW,formatRelative:ZW,localize:o7,match:N7,options:{weekStartsOn:0,firstWeekContainsDate:1}};function j7(n){const e=it(n);return MW(e,WW(e))+1}function C7(n){const e=it(n),t=+fb(e)-+RW(e);return Math.round(t/VI)+1}function qI(n,e){var h,f,m,p;const t=it(n),s=t.getFullYear(),r=My(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(m=r.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=Ro(n,0);o.setFullYear(s+1,0,i),o.setHours(0,0,0,0);const l=wg(o,e),d=Ro(n,0);d.setFullYear(s,0,i),d.setHours(0,0,0,0);const u=wg(d,e);return t.getTime()>=l.getTime()?s+1:t.getTime()>=u.getTime()?s:s-1}function A7(n,e){var l,d,u,h;const t=My(),s=(e==null?void 0:e.firstWeekContainsDate)??((d=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:d.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(u=t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,r=qI(n,e),i=Ro(n,0);return i.setFullYear(r,0,s),i.setHours(0,0,0,0),wg(i,e)}function E7(n,e){const t=it(n),s=+wg(t,e)-+A7(t,e);return Math.round(s/VI)+1}function Qe(n,e){const t=n<0?"-":"",s=Math.abs(n).toString().padStart(e,"0");return t+s}const Wo={y(n,e){const t=n.getFullYear(),s=t>0?t:1-t;return Qe(e==="yy"?s%100:s,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Qe(t+1,2)},d(n,e){return Qe(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Qe(n.getHours()%12||12,e.length)},H(n,e){return Qe(n.getHours(),e.length)},m(n,e){return Qe(n.getMinutes(),e.length)},s(n,e){return Qe(n.getSeconds(),e.length)},S(n,e){const t=e.length,s=n.getMilliseconds(),r=Math.trunc(s*Math.pow(10,t-3));return Qe(r,e.length)}},Vu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},nT={G:function(n,e,t){const s=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"});case"GGGGG":return t.era(s,{width:"narrow"});case"GGGG":default:return t.era(s,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const s=n.getFullYear(),r=s>0?s:1-s;return t.ordinalNumber(r,{unit:"year"})}return Wo.y(n,e)},Y:function(n,e,t,s){const r=qI(n,s),i=r>0?r:1-r;if(e==="YY"){const o=i%100;return Qe(o,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):Qe(i,e.length)},R:function(n,e){const t=WI(n);return Qe(t,e.length)},u:function(n,e){const t=n.getFullYear();return Qe(t,e.length)},Q:function(n,e,t){const s=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return Qe(s,2);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(s,{width:"wide",context:"formatting"})}},q:function(n,e,t){const s=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return Qe(s,2);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(s,{width:"wide",context:"standalone"})}},M:function(n,e,t){const s=n.getMonth();switch(e){case"M":case"MM":return Wo.M(n,e);case"Mo":return t.ordinalNumber(s+1,{unit:"month"});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(s,{width:"wide",context:"formatting"})}},L:function(n,e,t){const s=n.getMonth();switch(e){case"L":return String(s+1);case"LL":return Qe(s+1,2);case"Lo":return t.ordinalNumber(s+1,{unit:"month"});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(s,{width:"wide",context:"standalone"})}},w:function(n,e,t,s){const r=E7(n,s);return e==="wo"?t.ordinalNumber(r,{unit:"week"}):Qe(r,e.length)},I:function(n,e,t){const s=C7(n);return e==="Io"?t.ordinalNumber(s,{unit:"week"}):Qe(s,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Wo.d(n,e)},D:function(n,e,t){const s=j7(n);return e==="Do"?t.ordinalNumber(s,{unit:"dayOfYear"}):Qe(s,e.length)},E:function(n,e,t){const s=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"});case"EEEE":default:return t.day(s,{width:"wide",context:"formatting"})}},e:function(n,e,t,s){const r=n.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Qe(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(r,{width:"short",context:"formatting"});case"eeee":default:return t.day(r,{width:"wide",context:"formatting"})}},c:function(n,e,t,s){const r=n.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Qe(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(r,{width:"narrow",context:"standalone"});case"cccccc":return t.day(r,{width:"short",context:"standalone"});case"cccc":default:return t.day(r,{width:"wide",context:"standalone"})}},i:function(n,e,t){const s=n.getDay(),r=s===0?7:s;switch(e){case"i":return String(r);case"ii":return Qe(r,e.length);case"io":return t.ordinalNumber(r,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(s,{width:"short",context:"formatting"});case"iiii":default:return t.day(s,{width:"wide",context:"formatting"})}},a:function(n,e,t){const r=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(n,e,t){const s=n.getHours();let r;switch(s===12?r=Vu.noon:s===0?r=Vu.midnight:r=s/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(n,e,t){const s=n.getHours();let r;switch(s>=17?r=Vu.evening:s>=12?r=Vu.afternoon:s>=4?r=Vu.morning:r=Vu.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let s=n.getHours()%12;return s===0&&(s=12),t.ordinalNumber(s,{unit:"hour"})}return Wo.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Wo.H(n,e)},K:function(n,e,t){const s=n.getHours()%12;return e==="Ko"?t.ordinalNumber(s,{unit:"hour"}):Qe(s,e.length)},k:function(n,e,t){let s=n.getHours();return s===0&&(s=24),e==="ko"?t.ordinalNumber(s,{unit:"hour"}):Qe(s,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Wo.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Wo.s(n,e)},S:function(n,e){return Wo.S(n,e)},X:function(n,e,t){const s=n.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return rT(s);case"XXXX":case"XX":return Oc(s);case"XXXXX":case"XXX":default:return Oc(s,":")}},x:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"x":return rT(s);case"xxxx":case"xx":return Oc(s);case"xxxxx":case"xxx":default:return Oc(s,":")}},O:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+sT(s,":");case"OOOO":default:return"GMT"+Oc(s,":")}},z:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+sT(s,":");case"zzzz":default:return"GMT"+Oc(s,":")}},t:function(n,e,t){const s=Math.trunc(n.getTime()/1e3);return Qe(s,e.length)},T:function(n,e,t){const s=n.getTime();return Qe(s,e.length)}};function sT(n,e=""){const t=n>0?"-":"+",s=Math.abs(n),r=Math.trunc(s/60),i=s%60;return i===0?t+String(r):t+String(r)+e+Qe(i,2)}function rT(n,e){return n%60===0?(n>0?"-":"+")+Qe(Math.abs(n)/60,2):Oc(n,e)}function Oc(n,e=""){const t=n>0?"-":"+",s=Math.abs(n),r=Qe(Math.trunc(s/60),2),i=Qe(s%60,2);return t+r+e+i}const iT=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},KI=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},k7=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],s=t[1],r=t[2];if(!r)return iT(n,e);let i;switch(s){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",iT(s,e)).replace("{{time}}",KI(r,e))},T7={p:KI,P:k7},P7=/^D+$/,_7=/^Y+$/,M7=["D","DD","YY","YYYY"];function R7(n){return P7.test(n)}function D7(n){return _7.test(n)}function I7(n,e,t){const s=L7(n,e,t);if(console.warn(s),M7.includes(n))throw new RangeError(s)}function L7(n,e,t){const s=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${s} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const F7=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,O7=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,B7=/^'([^]*?)'?$/,$7=/''/g,z7=/[a-zA-Z]/;function pa(n,e,t){var h,f,m,p;const s=My(),r=s.locale??GI,i=s.firstWeekContainsDate??((f=(h=s.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,o=s.weekStartsOn??((p=(m=s.locale)==null?void 0:m.options)==null?void 0:p.weekStartsOn)??0,l=it(n);if(!LW(l))throw new RangeError("Invalid time value");let d=e.match(O7).map(b=>{const g=b[0];if(g==="p"||g==="P"){const N=T7[g];return N(b,r.formatLong)}return b}).join("").match(F7).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const g=b[0];if(g==="'")return{isToken:!1,value:U7(b)};if(nT[g])return{isToken:!0,value:b};if(g.match(z7))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:b}});r.localize.preprocessor&&(d=r.localize.preprocessor(l,d));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:r};return d.map(b=>{if(!b.isToken)return b.value;const g=b.value;(D7(g)||R7(g))&&I7(g,e,String(n));const N=nT[g[0]];return N(l,g,r.localize,u)}).join("")}function U7(n){const e=n.match(B7);return e?e[1].replace($7,"'"):n}function H7(n,e,t){const s=My(),r=(t==null?void 0:t.locale)??s.locale??GI,i=2520,o=Zv(n,e);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:o});let d,u;o>0?(d=it(e),u=it(n)):(d=it(n),u=it(e));const h=VW(u,d),f=(mb(u)-mb(d))/1e3,m=Math.round((h-f)/60);let p;if(m<2)return t!=null&&t.includeSeconds?h<5?r.formatDistance("lessThanXSeconds",5,l):h<10?r.formatDistance("lessThanXSeconds",10,l):h<20?r.formatDistance("lessThanXSeconds",20,l):h<40?r.formatDistance("halfAMinute",0,l):h<60?r.formatDistance("lessThanXMinutes",1,l):r.formatDistance("xMinutes",1,l):m===0?r.formatDistance("lessThanXMinutes",1,l):r.formatDistance("xMinutes",m,l);if(m<45)return r.formatDistance("xMinutes",m,l);if(m<90)return r.formatDistance("aboutXHours",1,l);if(m<eT){const b=Math.round(m/60);return r.formatDistance("aboutXHours",b,l)}else{if(m<i)return r.formatDistance("xDays",1,l);if(m<vv){const b=Math.round(m/eT);return r.formatDistance("xDays",b,l)}else if(m<vv*2)return p=Math.round(m/vv),r.formatDistance("aboutXMonths",p,l)}if(p=HW(u,d),p<12){const b=Math.round(m/vv);return r.formatDistance("xMonths",b,l)}else{const b=p%12,g=Math.trunc(p/12);return b<3?r.formatDistance("aboutXYears",g,l):b<9?r.formatDistance("overXYears",g,l):r.formatDistance("almostXYears",g+1,l)}}function aT(n,e){return H7(n,DW(n),e)}function oT(n,e){return TW(n,-e)}async function V7(){return"Notification"in window?Notification.permission==="granted"?"granted":Notification.permission!=="denied"?await Notification.requestPermission():Notification.permission:"denied"}function W7(n,e){if(!("Notification"in window)||Notification.permission!=="granted")return null;const{onClick:t,...s}=e||{},r=new Notification(n,{icon:"/icon-192.png",badge:"/badge-72.png",...s});return t&&(r.onclick=t),r}async function lT(n){if(!("serviceWorker"in navigator)||!("PushManager"in window))return null;try{const e=await navigator.serviceWorker.ready;let t=await e.pushManager.getSubscription();if(!t){const s="";if(!s)throw new Error("VAPID public key not configured");t=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:G7(s)})}return await fetch("/api/push-subscriptions",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({endpoint:t.endpoint,keys:{p256dh:cT(t.getKey("p256dh")),auth:cT(t.getKey("auth"))}})}),t}catch{return null}}function G7(n){const e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/-/g,"+").replace(/_/g,"/"),s=window.atob(t),r=new Uint8Array(s.length);for(let i=0;i<s.length;++i)r[i]=s.charCodeAt(i);return r}function cT(n){if(!n)return"";const e=new Uint8Array(n);let t="";for(let s=0;s<e.byteLength;s++)t+=String.fromCharCode(e[s]);return window.btoa(t)}class q7{constructor(){this.ws=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.listeners=new Set,this.userId=null}connect(e){var r;if(((r=this.ws)==null?void 0:r.readyState)===WebSocket.OPEN)return;this.userId=e;const s=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws/notifications`;try{this.ws=new WebSocket(s),this.ws.onopen=()=>{var i;this.reconnectAttempts=0,(i=this.ws)==null||i.send(JSON.stringify({type:"authenticate",userId:this.userId}))},this.ws.onmessage=i=>{try{const o=JSON.parse(i.data);o.type==="new_notification"&&(this.listeners.forEach(l=>l(o.notification)),Notification.permission==="granted"&&W7(o.notification.notification.title,{body:o.notification.notification.message,icon:o.notification.notification.imageUrl||"/icon-192.png",tag:o.notification.notification.id,onClick:()=>{o.notification.notification.targetUrl&&(window.location.href=o.notification.notification.targetUrl)}}))}catch{}},this.ws.onclose=()=>{this.ws=null,this.attemptReconnect()},this.ws.onerror=i=>{}}catch{this.attemptReconnect()}}attemptReconnect(){if(this.reconnectAttempts<this.maxReconnectAttempts&&this.userId){this.reconnectAttempts++;const e=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);setTimeout(()=>{this.userId&&this.connect(this.userId)},e)}}disconnect(){this.ws&&(this.ws.close(),this.ws=null),this.userId=null,this.reconnectAttempts=0}onNotification(e){return this.listeners.add(e),()=>this.listeners.delete(e)}}const X1=new q7;function K7(n){const e=gA(),[t,s]=x.useState(typeof Notification<"u"?Notification.permission:"default");x.useEffect(()=>{if(!n)return;X1.connect(n);const o=X1.onNotification(l=>{e.invalidateQueries({queryKey:["/api/notifications"]}),e.invalidateQueries({queryKey:["/api/notifications/unread-count"]})});return()=>{o(),X1.disconnect()}},[n,e]);const r=x.useCallback(async()=>{const o=await V7();return s(o),o==="granted"&&n&&await lT(),o},[n]),i=x.useCallback(async()=>t!=="granted"&&await r()!=="granted"?!1:n?await lT()!==null:!1,[n,t,r]);return{permission:t,requestPermission:r,enablePushNotifications:i}}function Y7(){const[n,e]=x.useState(null);return{playNotificationSound:x.useCallback(s=>{try{const r=s||"/notification.mp3";n&&(n.pause(),n.currentTime=0);const i=new Audio(r);i.volume=.5,i.play().catch(o=>{console.warn("Failed to play notification sound:",o)}),e(i)}catch(r){console.error("Error playing notification sound:",r)}},[n])}}function YI({userId:n}){const[e,t]=x.useState(!1),[s,r]=x.useState(null),{permission:i,requestPermission:o}=K7(n);Y7();const{data:l,isLoading:d}=Te({queryKey:["/api/notifications/unread-count"]}),{data:u,isLoading:h}=Te({queryKey:["/api/notifications"],enabled:e}),f=Oe({mutationFn:async g=>Ve("POST",`/api/notifications/${g}/read`),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/notifications"]}),Re.invalidateQueries({queryKey:["/api/notifications/unread-count"]})}}),m=Oe({mutationFn:async()=>Ve("POST","/api/notifications/read-all"),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/notifications"]}),Re.invalidateQueries({queryKey:["/api/notifications/unread-count"]})}}),p=(l==null?void 0:l.count)||0,b=p>0;return a.jsxs(a.Fragment,{children:[a.jsxs(uW,{open:e,onOpenChange:t,children:[a.jsx(hW,{asChild:!0,children:a.jsxs(O,{variant:"ghost",size:"icon",className:"relative","data-testid":"button-notifications",children:[a.jsx(To,{className:"h-5 w-5"}),b&&a.jsx(sn,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs","data-testid":"badge-unread-count",children:p>9?"9+":p})]})}),a.jsxs(EI,{className:"w-80 p-0",align:"end","data-testid":"popover-notifications",children:[i==="default"&&a.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950 border-b border-border",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(MR,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:"Enable notifications to receive updates even when the app is closed"}),a.jsx(O,{size:"sm",variant:"ghost",className:"h-auto p-0 text-blue-600 dark:text-blue-400",onClick:o,"data-testid":"button-enable-notifications",children:"Enable now"})]})]})}),a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border dark:border-border",children:[a.jsx("h3",{className:"font-semibold text-foreground dark:text-foreground",children:"Notifications"}),b&&a.jsx(O,{variant:"ghost",size:"sm",onClick:()=>m.mutate(),disabled:m.isPending,"data-testid":"button-mark-all-read",children:m.isPending?a.jsx(We,{className:"h-4 w-4 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx($z,{className:"h-4 w-4 mr-1"}),"Mark all"]})})]}),a.jsx(UI,{className:"h-[400px]",children:h?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx(We,{className:"h-6 w-6 animate-spin text-primary"})}):u&&u.length>0?a.jsx("div",{className:"divide-y divide-border dark:divide-border",children:u.map(({notification:g,receipt:N})=>a.jsx("div",{className:`p-4 hover:bg-muted/50 dark:hover:bg-muted/30 transition-colors cursor-pointer ${N.isRead?"":"bg-primary/5 dark:bg-primary/10"}`,onClick:()=>{N.isRead||f.mutate(g.id),r({notification:g,receipt:N})},"data-testid":`notification-${g.id}`,children:a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"font-medium text-sm text-foreground dark:text-foreground",children:g.title}),!N.isRead&&a.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"})]}),a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:g.message}),a.jsx("p",{className:"text-xs text-muted-foreground",children:aT(new Date(g.createdAt),{addSuffix:!0})})]}),!N.isRead&&a.jsx(O,{variant:"ghost",size:"sm",onClick:v=>{v.stopPropagation(),f.mutate(g.id)},disabled:f.isPending,"data-testid":`button-mark-read-${g.id}`,children:a.jsx(SA,{className:"h-4 w-4"})})]})},N.id))}):a.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[a.jsx(To,{className:"h-12 w-12 text-muted-foreground mb-2"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"No notifications yet"})]})})]})]}),a.jsx(Nt,{open:!!s,onOpenChange:g=>!g&&r(null),children:a.jsx(xt,{className:"max-w-2xl","data-testid":"dialog-notification-preview",children:s&&a.jsxs(a.Fragment,{children:[a.jsxs(jt,{children:[a.jsxs(Ct,{className:"flex items-center gap-2",children:[s.notification.title,!s.receipt.isRead&&a.jsx(sn,{variant:"default",className:"ml-auto",children:"New"})]}),a.jsx(bo,{children:pa(new Date(s.notification.createdAt),"PPpp")})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:a.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:s.notification.message})}),s.notification.targetUrl&&a.jsx("div",{className:"pt-4 border-t",children:a.jsxs(O,{onClick:()=>{window.location.href=s.notification.targetUrl},className:"w-full","data-testid":"button-notification-link",children:[a.jsx(Yp,{className:"h-4 w-4 mr-2"}),"Go to Related Page"]})}),a.jsxs("div",{className:"flex items-center justify-between pt-2 text-xs text-muted-foreground border-t",children:[a.jsxs("span",{children:["Type: ",s.notification.type]}),s.receipt.readAt&&a.jsxs("span",{children:["Read: ",aT(new Date(s.receipt.readAt),{addSuffix:!0})]})]})]})]})})})]})}const XI=x.createContext(void 0);function X7({children:n}){const e=x.useRef(null),[t,s]=x.useState(null),[r,i]=x.useState(!1),[o,l]=x.useState(0),[d,u]=x.useState(0),[h,f]=x.useState(80),[m,p]=x.useState([]),[b,g]=x.useState(-1),[N,v]=x.useState(!1),[y,S]=x.useState("off"),[w,j]=x.useState([]);x.useEffect(()=>{const z=e.current;if(!z)return;const G=()=>l(z.currentTime),W=()=>u(z.duration),X=()=>{y==="one"?(z.currentTime=0,z.play()):I()};return z.addEventListener("timeupdate",G),z.addEventListener("loadedmetadata",W),z.addEventListener("ended",X),()=>{z.removeEventListener("timeupdate",G),z.removeEventListener("loadedmetadata",W),z.removeEventListener("ended",X)}},[y]),x.useEffect(()=>{e.current&&(e.current.volume=h/100)},[h]),x.useEffect(()=>{"mediaSession"in navigator&&t&&(navigator.mediaSession.metadata=new MediaMetadata({title:t.title,artist:t.artist||"Unknown Artist",artwork:t.thumbnailUrl?[{src:t.thumbnailUrl,sizes:"512x512",type:"image/jpeg"}]:void 0}),navigator.mediaSession.setActionHandler("play",()=>_()),navigator.mediaSession.setActionHandler("pause",()=>P()),navigator.mediaSession.setActionHandler("previoustrack",()=>L()),navigator.mediaSession.setActionHandler("nexttrack",()=>I()))},[t]);const E=z=>{const G=[...z];for(let W=G.length-1;W>0;W--){const X=Math.floor(Math.random()*(W+1));[G[W],G[X]]=[G[X],G[W]]}return G},T=async z=>{if(z.type!=="audio"){console.log("Track type is not audio:",z.type);return}if(s(z),i(!1),e.current)try{e.current.pause(),e.current.src=z.url,e.current.load();const G=e.current.play();G!==void 0&&(await G,i(!0))}catch(G){console.error("Failed to play track:",G),console.error("Track URL:",z.url),console.error("Error name:",G==null?void 0:G.name),(G==null?void 0:G.name)==="NotAllowedError"?console.log("Playback blocked by browser - user interaction required"):(G==null?void 0:G.name)==="NotSupportedError"&&console.log("Audio format not supported"),i(!1)}},P=()=>{e.current&&(e.current.pause(),i(!1))},_=async()=>{if(e.current&&t){(!e.current.src||e.current.src==="")&&(e.current.src=t.url,e.current.load());try{const z=e.current.play();z!==void 0&&(await z,i(!0))}catch(z){console.error("Failed to resume track:",z),console.error("Current track URL:",t.url),console.error("Error name:",z==null?void 0:z.name),i(!1)}}},R=()=>{r?P():_()},I=()=>{const z=N?w:m;if(b<z.length-1){const G=b+1;g(G),T(z[G])}else y==="all"&&z.length>0?(g(0),T(z[0])):P()},L=()=>{const z=N?w:m;if(o>3)U(0);else if(b>0){const G=b-1;g(G),T(z[G])}else y==="all"&&z.length>0&&(g(z.length-1),T(z[z.length-1]))},U=z=>{e.current&&(e.current.currentTime=z,l(z))},q={currentTrack:t,isPlaying:r,currentTime:o,duration:d,volume:h,queue:N?w:m,queueIndex:b,shuffleEnabled:N,repeatMode:y,playTrack:T,pauseTrack:P,resumeTrack:_,togglePlayPause:R,playNext:I,playPrevious:L,seekTo:U,setVolumeLevel:z=>{f(z)},addToQueue:z=>{const G=Array.isArray(z)?z:[z];p(W=>[...W,...G])},removeFromQueue:z=>{p(G=>G.filter((W,X)=>X!==z)),z<b?g(G=>G-1):z===b&&I()},clearQueue:()=>{p([]),g(-1),j([]),P(),s(null)},playQueue:(z,G=0)=>{const W=z.filter(X=>X.type==="audio");if(p(W),g(G),N){const X=E(W);j(X),T(X[0])}else T(W[G])},toggleShuffle:()=>{if(!N){const z=E(m);j(z);const G=z.findIndex(W=>W.id===(t==null?void 0:t.id));G!==-1&&g(G)}v(z=>!z)},toggleRepeat:()=>{S(z=>z==="off"?"all":z==="all"?"one":"off")},setQueue:p,stopPlayer:()=>{e.current&&(e.current.pause(),e.current.src="",e.current.load()),s(null),i(!1),l(0),u(0),p([]),g(-1)}};return a.jsxs(XI.Provider,{value:q,children:[a.jsx("audio",{ref:e,preload:"auto",playsInline:!0}),n]})}function rE(){const n=x.useContext(XI);if(!n)throw new Error("useAudioPlayer must be used within AudioPlayerProvider");return n}function Bw(n){const e=x.useRef({value:n,previous:n});return x.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var QI=["PageUp","PageDown"],JI=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ZI={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Gm="Slider",[PN,Q7,J7]=Ny(Gm),[eL,xQ]=Nn(Gm,[J7]),[Z7,$w]=eL(Gm),tL=x.forwardRef((n,e)=>{const{name:t,min:s=0,max:r=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:d=0,defaultValue:u=[s],value:h,onValueChange:f=()=>{},onValueCommit:m=()=>{},inverted:p=!1,form:b,...g}=n,N=x.useRef(new Set),v=x.useRef(0),S=o==="horizontal"?eG:tG,[w=[],j]=Ds({prop:h,defaultProp:u,onChange:I=>{var U;(U=[...N.current][v.current])==null||U.focus(),f(I)}}),E=x.useRef(w);function T(I){const L=aG(w,I);R(I,L)}function P(I){R(I,v.current)}function _(){const I=E.current[v.current];w[v.current]!==I&&m(w)}function R(I,L,{commit:U}={commit:!1}){const B=dG(i),Q=uG(Math.round((I-s)/i)*i+s,B),F=bg(Q,[s,r]);j((H=[])=>{const $=rG(H,F,L);if(cG($,d*i)){v.current=$.indexOf(F);const K=String($)!==String(H);return K&&U&&m($),K?$:H}else return H})}return a.jsx(Z7,{scope:n.__scopeSlider,name:t,disabled:l,min:s,max:r,valueIndexToChangeRef:v,thumbs:N.current,values:w,orientation:o,form:b,children:a.jsx(PN.Provider,{scope:n.__scopeSlider,children:a.jsx(PN.Slot,{scope:n.__scopeSlider,children:a.jsx(S,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:e,onPointerDown:oe(g.onPointerDown,()=>{l||(E.current=w)}),min:s,max:r,inverted:p,onSlideStart:l?void 0:T,onSlideMove:l?void 0:P,onSlideEnd:l?void 0:_,onHomeKeyDown:()=>!l&&R(s,0,{commit:!0}),onEndKeyDown:()=>!l&&R(r,w.length-1,{commit:!0}),onStepKeyDown:({event:I,direction:L})=>{if(!l){const Q=QI.includes(I.key)||I.shiftKey&&JI.includes(I.key)?10:1,F=v.current,H=w[F],$=i*Q*L;R(H+$,F,{commit:!0})}}})})})})});tL.displayName=Gm;var[nL,sL]=eL(Gm,{startEdge:"left",endEdge:"right",size:"width",direction:1}),eG=x.forwardRef((n,e)=>{const{min:t,max:s,dir:r,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:d,onStepKeyDown:u,...h}=n,[f,m]=x.useState(null),p=we(e,S=>m(S)),b=x.useRef(void 0),g=Wm(r),N=g==="ltr",v=N&&!i||!N&&i;function y(S){const w=b.current||f.getBoundingClientRect(),j=[0,w.width],T=iE(j,v?[t,s]:[s,t]);return b.current=w,T(S-w.left)}return a.jsx(nL,{scope:n.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:a.jsx(rL,{dir:g,"data-orientation":"horizontal",...h,ref:p,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const w=y(S.clientX);o==null||o(w)},onSlideMove:S=>{const w=y(S.clientX);l==null||l(w)},onSlideEnd:()=>{b.current=void 0,d==null||d()},onStepKeyDown:S=>{const j=ZI[v?"from-left":"from-right"].includes(S.key);u==null||u({event:S,direction:j?-1:1})}})})}),tG=x.forwardRef((n,e)=>{const{min:t,max:s,inverted:r,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:d,...u}=n,h=x.useRef(null),f=we(e,h),m=x.useRef(void 0),p=!r;function b(g){const N=m.current||h.current.getBoundingClientRect(),v=[0,N.height],S=iE(v,p?[s,t]:[t,s]);return m.current=N,S(g-N.top)}return a.jsx(nL,{scope:n.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:a.jsx(rL,{"data-orientation":"vertical",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const N=b(g.clientY);i==null||i(N)},onSlideMove:g=>{const N=b(g.clientY);o==null||o(N)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:g=>{const v=ZI[p?"from-bottom":"from-top"].includes(g.key);d==null||d({event:g,direction:v?-1:1})}})})}),rL=x.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:s,onSlideMove:r,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:d,...u}=n,h=$w(Gm,t);return a.jsx(pe.span,{...u,ref:e,onKeyDown:oe(n.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):QI.concat(JI).includes(f.key)&&(d(f),f.preventDefault())}),onPointerDown:oe(n.onPointerDown,f=>{const m=f.target;m.setPointerCapture(f.pointerId),f.preventDefault(),h.thumbs.has(m)?m.focus():s(f)}),onPointerMove:oe(n.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&r(f)}),onPointerUp:oe(n.onPointerUp,f=>{const m=f.target;m.hasPointerCapture(f.pointerId)&&(m.releasePointerCapture(f.pointerId),i(f))})})}),iL="SliderTrack",aL=x.forwardRef((n,e)=>{const{__scopeSlider:t,...s}=n,r=$w(iL,t);return a.jsx(pe.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...s,ref:e})});aL.displayName=iL;var _N="SliderRange",oL=x.forwardRef((n,e)=>{const{__scopeSlider:t,...s}=n,r=$w(_N,t),i=sL(_N,t),o=x.useRef(null),l=we(e,o),d=r.values.length,u=r.values.map(m=>cL(m,r.min,r.max)),h=d>1?Math.min(...u):0,f=100-Math.max(...u);return a.jsx(pe.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...s,ref:l,style:{...n.style,[i.startEdge]:h+"%",[i.endEdge]:f+"%"}})});oL.displayName=_N;var MN="SliderThumb",lL=x.forwardRef((n,e)=>{const t=Q7(n.__scopeSlider),[s,r]=x.useState(null),i=we(e,l=>r(l)),o=x.useMemo(()=>s?t().findIndex(l=>l.ref.current===s):-1,[t,s]);return a.jsx(nG,{...n,ref:i,index:o})}),nG=x.forwardRef((n,e)=>{const{__scopeSlider:t,index:s,name:r,...i}=n,o=$w(MN,t),l=sL(MN,t),[d,u]=x.useState(null),h=we(e,y=>u(y)),f=d?o.form||!!d.closest("form"):!0,m=Aw(d),p=o.values[s],b=p===void 0?0:cL(p,o.min,o.max),g=iG(s,o.values.length),N=m==null?void 0:m[l.size],v=N?oG(N,b,l.direction):0;return x.useEffect(()=>{if(d)return o.thumbs.add(d),()=>{o.thumbs.delete(d)}},[d,o.thumbs]),a.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${b}% + ${v}px)`},children:[a.jsx(PN.ItemSlot,{scope:n.__scopeSlider,children:a.jsx(pe.span,{role:"slider","aria-label":n["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:h,style:p===void 0?{display:"none"}:n.style,onFocus:oe(n.onFocus,()=>{o.valueIndexToChangeRef.current=s})})}),f&&a.jsx(sG,{name:r??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},s)]})});lL.displayName=MN;var sG=n=>{const{value:e,...t}=n,s=x.useRef(null),r=Bw(e);return x.useEffect(()=>{const i=s.current,o=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(o,"value").set;if(r!==e&&d){const u=new Event("input",{bubbles:!0});d.call(i,e),i.dispatchEvent(u)}},[r,e]),a.jsx("input",{style:{display:"none"},...t,ref:s,defaultValue:e})};function rG(n=[],e,t){const s=[...n];return s[t]=e,s.sort((r,i)=>r-i)}function cL(n,e,t){const i=100/(t-e)*(n-e);return bg(i,[0,100])}function iG(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function aG(n,e){if(n.length===1)return 0;const t=n.map(r=>Math.abs(r-e)),s=Math.min(...t);return t.indexOf(s)}function oG(n,e,t){const s=n/2,i=iE([0,50],[0,s]);return(s-i(e)*t)*t}function lG(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function cG(n,e){if(e>0){const t=lG(n);return Math.min(...t)>=e}return!0}function iE(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(n[1]-n[0]);return e[0]+s*(t-n[0])}}function dG(n){return(String(n).split(".")[1]||"").length}function uG(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var dL=tL,hG=aL,fG=oL,mG=lL;const Sg=x.forwardRef(({className:n,...e},t)=>a.jsxs(dL,{ref:t,className:ee("relative flex w-full touch-none select-none items-center",n),...e,children:[a.jsx(hG,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:a.jsx(fG,{className:"absolute h-full bg-primary"})}),a.jsx(mG,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Sg.displayName=dL.displayName;function pG(){const{currentTrack:n,isPlaying:e,currentTime:t,duration:s,volume:r,shuffleEnabled:i,repeatMode:o,togglePlayPause:l,playNext:d,playPrevious:u,seekTo:h,setVolumeLevel:f,toggleShuffle:m,toggleRepeat:p,stopPlayer:b}=rE(),[g,N]=x.useState(!1),[v,y]=x.useState(!1);if(!n)return null;const S=E=>{if(!E||isNaN(E))return"0:00";const T=Math.floor(E/60),P=Math.floor(E%60);return`${T}:${P.toString().padStart(2,"0")}`},w=s>0?t/s*100:0,j=E=>{E.stopPropagation(),b()};return v?a.jsxs("div",{className:"fixed bottom-4 right-4 z-50 bg-card border rounded-lg shadow-lg p-3 max-w-sm",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[n.thumbnailUrl&&a.jsx("img",{src:n.thumbnailUrl,alt:n.title,className:"w-12 h-12 rounded object-cover flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-semibold text-sm truncate",children:n.title}),n.artist&&a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:n.artist})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(O,{variant:"ghost",size:"sm",onClick:l,"data-testid":"button-minimized-play-pause",children:e?a.jsx(Cm,{className:"h-4 w-4"}):a.jsx(yc,{className:"h-4 w-4"})}),a.jsx(O,{variant:"ghost",size:"sm",onClick:()=>y(!1),"data-testid":"button-expand",children:a.jsx(RR,{className:"h-4 w-4"})}),a.jsx(O,{variant:"ghost",size:"sm",onClick:j,"data-testid":"button-minimized-close",children:a.jsx(bc,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"mt-2",children:a.jsx("div",{className:"relative h-1 bg-muted rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-primary transition-all duration-100",style:{width:`${w}%`}})})})]}):a.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-card border-t shadow-2xl",children:[a.jsxs("div",{className:"absolute top-0 left-0 right-0 h-1 bg-muted cursor-pointer group",onClick:E=>{const T=E.currentTarget.getBoundingClientRect(),P=(E.clientX-T.left)/T.width;h(P*s)},"data-testid":"progress-bar",children:[a.jsx("div",{className:"h-full bg-primary transition-all duration-100",style:{width:`${w}%`}}),a.jsx("div",{className:"absolute top-0 w-3 h-3 bg-primary rounded-full -mt-1 opacity-0 group-hover:opacity-100 transition-opacity",style:{left:`${w}%`,transform:"translateX(-50%)"}})]}),a.jsx("div",{className:"container mx-auto px-4 py-3",children:a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.thumbnailUrl&&a.jsx("img",{src:n.thumbnailUrl,alt:n.title,className:"w-12 h-12 rounded object-cover flex-shrink-0"}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"font-semibold text-sm truncate","data-testid":"text-track-title",children:n.title}),n.artist&&a.jsx("p",{className:"text-xs text-muted-foreground truncate","data-testid":"text-track-artist",children:n.artist})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(O,{variant:"ghost",size:"sm",onClick:m,className:ee(i&&"text-primary"),"data-testid":"button-shuffle",children:a.jsx(dU,{className:"h-4 w-4"})}),a.jsx(O,{variant:"ghost",size:"sm",onClick:u,"data-testid":"button-previous",children:a.jsx(uU,{className:"h-5 w-5"})}),a.jsx(O,{size:"sm",onClick:l,className:"rounded-full","data-testid":"button-play-pause",children:e?a.jsx(Cm,{className:"h-5 w-5"}):a.jsx(yc,{className:"h-5 w-5"})}),a.jsx(O,{variant:"ghost",size:"sm",onClick:d,"data-testid":"button-next",children:a.jsx(hU,{className:"h-5 w-5"})}),a.jsx(O,{variant:"ghost",size:"sm",onClick:p,className:ee(o!=="off"&&"text-primary"),"data-testid":"button-repeat",children:o==="one"?a.jsx(iU,{className:"h-4 w-4"}):a.jsx(aU,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-xs text-muted-foreground whitespace-nowrap hidden sm:block","data-testid":"text-time",children:[S(t)," / ",S(s)]}),a.jsxs("div",{className:"relative hidden md:flex items-center gap-2",children:[a.jsx(O,{variant:"ghost",size:"sm",onClick:()=>N(!g),"data-testid":"button-volume",children:r===0?a.jsx($R,{className:"h-4 w-4"}):a.jsx(kA,{className:"h-4 w-4"})}),g&&a.jsx("div",{className:"absolute bottom-full right-0 mb-2 bg-popover border rounded-lg p-3 shadow-lg",children:a.jsx(Sg,{value:[r],onValueChange:E=>f(E[0]),max:100,step:1,className:"w-24","data-testid":"slider-volume"})})]}),a.jsx(O,{variant:"ghost",size:"sm",onClick:()=>y(!0),"data-testid":"button-minimize-player",children:a.jsx(bw,{className:"h-4 w-4"})}),a.jsx(O,{variant:"ghost",size:"sm",onClick:j,"data-testid":"button-close-player",children:a.jsx(bc,{className:"h-4 w-4"})})]})]})})]})}var uL="AlertDialog",[gG,yQ]=Nn(uL,[BD]),Bo=BD(),hL=n=>{const{__scopeAlertDialog:e,...t}=n,s=Bo(e);return a.jsx(XA,{...s,...t,modal:!0})};hL.displayName=uL;var xG="AlertDialogTrigger",yG=x.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...s}=n,r=Bo(t);return a.jsx(tI,{...r,...s,ref:e})});yG.displayName=xG;var vG="AlertDialogPortal",fL=n=>{const{__scopeAlertDialog:e,...t}=n,s=Bo(e);return a.jsx(QA,{...s,...t})};fL.displayName=vG;var bG="AlertDialogOverlay",mL=x.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...s}=n,r=Bo(t);return a.jsx(Ey,{...r,...s,ref:e})});mL.displayName=bG;var Eh="AlertDialogContent",[wG,SG]=gG(Eh),NG=iR("AlertDialogContent"),pL=x.forwardRef((n,e)=>{const{__scopeAlertDialog:t,children:s,...r}=n,i=Bo(t),o=x.useRef(null),l=we(e,o),d=x.useRef(null);return a.jsx(kV,{contentName:Eh,titleName:gL,docsSlug:"alert-dialog",children:a.jsx(wG,{scope:t,cancelRef:d,children:a.jsxs(ky,{role:"alertdialog",...i,...r,ref:l,onOpenAutoFocus:oe(r.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=d.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(NG,{children:s}),a.jsx(CG,{contentRef:o})]})})})});pL.displayName=Eh;var gL="AlertDialogTitle",xL=x.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...s}=n,r=Bo(t);return a.jsx(Ty,{...r,...s,ref:e})});xL.displayName=gL;var yL="AlertDialogDescription",vL=x.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...s}=n,r=Bo(t);return a.jsx(Py,{...r,...s,ref:e})});vL.displayName=yL;var jG="AlertDialogAction",bL=x.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...s}=n,r=Bo(t);return a.jsx(Iw,{...r,...s,ref:e})});bL.displayName=jG;var wL="AlertDialogCancel",SL=x.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...s}=n,{cancelRef:r}=SG(wL,t),i=Bo(t),o=we(e,r);return a.jsx(Iw,{...i,...s,ref:o})});SL.displayName=wL;var CG=({contentRef:n})=>{const e=`\`${Eh}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Eh}\` by passing a \`${yL}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Eh}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{var s;document.getElementById((s=n.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(e)},[e,n]),null},AG=hL,EG=fL,NL=mL,jL=pL,CL=bL,AL=SL,EL=xL,kL=vL;const kG=AG,TG=EG,TL=x.forwardRef(({className:n,...e},t)=>a.jsx(NL,{className:ee("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e,ref:t}));TL.displayName=NL.displayName;const PL=x.forwardRef(({className:n,...e},t)=>a.jsxs(TG,{children:[a.jsx(TL,{}),a.jsx(jL,{ref:t,className:ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...e})]}));PL.displayName=jL.displayName;const _L=({className:n,...e})=>a.jsx("div",{className:ee("flex flex-col space-y-2 text-center sm:text-left",n),...e});_L.displayName="AlertDialogHeader";const ML=({className:n,...e})=>a.jsx("div",{className:ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});ML.displayName="AlertDialogFooter";const RL=x.forwardRef(({className:n,...e},t)=>a.jsx(EL,{ref:t,className:ee("text-lg font-semibold",n),...e}));RL.displayName=EL.displayName;const DL=x.forwardRef(({className:n,...e},t)=>a.jsx(kL,{ref:t,className:ee("text-sm text-muted-foreground",n),...e}));DL.displayName=kL.displayName;const PG=x.forwardRef(({className:n,...e},t)=>a.jsx(CL,{ref:t,className:ee(HA(),n),...e}));PG.displayName=CL.displayName;const _G=x.forwardRef(({className:n,...e},t)=>a.jsx(AL,{ref:t,className:ee(HA({variant:"outline"}),"mt-2 sm:mt-0",n),...e}));_G.displayName=AL.displayName;const dT={pratah:"Pratah Sandhya",madhyahna:"Madhyahna Sandhya",sayam:"Sayam Sandhya"};function MG({isOpen:n,alarmType:e,alarmTime:t,alarmSound:s,volume:r,onDismiss:i,onSnooze:o}){const[l]=x.useState(()=>new Audio);x.useEffect(()=>{if(n&&s){const h="dataUrl"in s?s.dataUrl:s.url;if(!h||h===""){const f=new(window.AudioContext||window.webkitAudioContext),m=f.createOscillator(),p=f.createGain();m.connect(p),p.connect(f.destination),m.frequency.value=440,m.type="sine",p.gain.value=r/100,m.start();const b=setInterval(()=>{if(f.state==="running"){const g=f.createOscillator(),N=f.createGain();g.connect(N),N.connect(f.destination),g.frequency.value=440,g.type="sine",N.gain.value=r/100,g.start(),g.stop(f.currentTime+.5)}},2e3);return()=>{clearInterval(b),m.stop(),f.close()}}l.src=h,l.loop=!0,l.volume=r/100,l.play().catch(f=>{console.error("Failed to play alarm sound:",f)})}return()=>{l.pause(),l.currentTime=0}},[n,s,r,l]);const d=()=>{l.pause(),l.currentTime=0,i()},u=()=>{l.pause(),l.currentTime=0,o()};return a.jsx(kG,{open:n,children:a.jsxs(PL,{className:"sm:max-w-md","data-testid":"alarm-dialog",children:[a.jsxs(_L,{children:[a.jsx("div",{className:"flex items-center justify-center mb-4",children:a.jsx("div",{className:"rounded-full bg-primary/10 p-6 animate-pulse",children:a.jsx(To,{className:"h-12 w-12 text-primary"})})}),a.jsx(RL,{className:"text-center text-2xl",children:dT[e]}),a.jsxs(DL,{className:"text-center space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 text-lg font-semibold text-foreground",children:[a.jsx(ww,{className:"h-5 w-5"}),a.jsx("span",{children:t})]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["It's time for your ",dT[e].toLowerCase()," practice"]})]})]}),a.jsxs(ML,{className:"flex flex-col sm:flex-col gap-2",children:[a.jsxs(O,{onClick:u,variant:"outline",className:"w-full","data-testid":"button-snooze-alarm",children:[a.jsx(Oz,{className:"h-4 w-4 mr-2"}),"Snooze (5 min)"]}),a.jsxs(O,{onClick:d,className:"w-full","data-testid":"button-dismiss-alarm",children:[a.jsx(bc,{className:"h-4 w-4 mr-2"}),"Dismiss"]})]})]})})}class RG extends x.Component{constructor(){super(...arguments),this.state={hasError:!1},this.handleRetry=()=>{this.setState({hasError:!1,error:void 0})}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:a.jsxs("div",{className:"max-w-md w-full text-center space-y-6",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx(fU,{className:"h-16 w-16 text-destructive"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Something went wrong"}),a.jsx("p",{className:"text-muted-foreground",children:"We encountered an unexpected error. Please try refreshing the page."})]}),!1,a.jsxs("div",{className:"flex gap-3 justify-center",children:[a.jsxs(O,{onClick:this.handleRetry,variant:"outline",children:[a.jsx(rU,{className:"h-4 w-4 mr-2"}),"Try Again"]}),a.jsx(O,{onClick:()=>window.location.reload(),children:"Refresh Page"})]})]})}):this.props.children}}const DG="local_alarm_settings",IG="custom_alarm_sounds",LG=[{id:"default-bell",name:"Temple Bell",url:"",duration:5,description:"Traditional temple bell sound",isDefault:!0,fileSize:0,mimeType:"audio/mpeg",createdAt:new Date,updatedAt:new Date},{id:"default-conch",name:"Conch Shell (Shankh)",url:"",duration:8,description:"Sacred conch shell sound",isDefault:!1,fileSize:0,mimeType:"audio/mpeg",createdAt:new Date,updatedAt:new Date},{id:"default-om",name:"Om Chant",url:"",duration:10,description:"Peaceful Om chant",isDefault:!1,fileSize:0,mimeType:"audio/mpeg",createdAt:new Date,updatedAt:new Date}];function uT(){const n=localStorage.getItem(DG);if(n)try{return JSON.parse(n)}catch(e){console.error("Failed to parse alarm settings:",e)}return{pratahEnabled:!0,pratahTime:"05:30",madhyahnaEnabled:!0,madhyahnaTime:"12:00",sayamEnabled:!0,sayamTime:"18:00",alarmSoundId:"default-bell",volume:80}}function FG(){const n=localStorage.getItem(IG);if(n)try{return JSON.parse(n)}catch(e){return console.error("Failed to parse custom sounds:",e),[]}return[]}function IL(){return[...LG,...FG()]}function hT(n){return IL().find(t=>t.id===n)}function OG(){const[n,e]=x.useState(null),t=x.useRef(new Set),s=x.useRef(null);return x.useEffect(()=>{s.current=n},[n]),x.useEffect(()=>{const o=()=>{const d=uT(),u=IL(),h=new Date,f=`${h.getHours().toString().padStart(2,"0")}:${h.getMinutes().toString().padStart(2,"0")}`,m=h.toDateString();localStorage.getItem("lastAlarmCheck")!==m&&(t.current=new Set,localStorage.setItem("lastAlarmCheck",m));const b=[{type:"pratah",enabled:d.pratahEnabled,time:d.pratahTime},{type:"madhyahna",enabled:d.madhyahnaEnabled,time:d.madhyahnaTime},{type:"sayam",enabled:d.sayamEnabled,time:d.sayamTime}];for(const g of b){const N=`${m}-${g.type}`;if(g.enabled&&g.time===f&&!t.current.has(N)&&!s.current){const v=hT(d.alarmSoundId||"")||u.find(S=>"isDefault"in S&&S.isDefault),y={type:g.type,time:g.time,sound:v,volume:d.volume};e(y),t.current.add(N);break}}};o();const l=setInterval(o,3e4);return()=>clearInterval(l)},[]),{activeAlarm:n,dismissAlarm:()=>{e(null)},snoozeAlarm:()=>{n&&(e(null),setTimeout(()=>{const o=uT(),l=hT(o.alarmSoundId||"");l&&e({...n,sound:l,volume:o.volume})},5*60*1e3))},volume:(n==null?void 0:n.volume)||80}}function Ry(){const{data:n,isLoading:e}=Te({queryKey:["/api/auth/user"],retry:!1,queryFn:async()=>{const t=await fetch("/api/auth/user",{credentials:"include"});if(t.status===401)return null;if(!t.ok)throw new Error("Failed to fetch user");return t.json()}});return{user:n??void 0,isLoading:e,isAuthenticated:!!n,isAdmin:(n==null?void 0:n.isAdmin)||!1}}const Z=x.forwardRef(({className:n,...e},t)=>a.jsx("div",{ref:t,className:ee("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",n),...e}));Z.displayName="Card";const xi=x.forwardRef(({className:n,...e},t)=>a.jsx("div",{ref:t,className:ee("flex flex-col space-y-1.5 p-6",n),...e}));xi.displayName="CardHeader";const yi=x.forwardRef(({className:n,...e},t)=>a.jsx("div",{ref:t,className:ee("text-2xl font-semibold leading-none tracking-tight",n),...e}));yi.displayName="CardTitle";const wo=x.forwardRef(({className:n,...e},t)=>a.jsx("div",{ref:t,className:ee("text-sm text-muted-foreground",n),...e}));wo.displayName="CardDescription";const Dn=x.forwardRef(({className:n,...e},t)=>a.jsx("div",{ref:t,className:ee("p-6 pt-0",n),...e}));Dn.displayName="CardContent";const BG=x.forwardRef(({className:n,...e},t)=>a.jsx("div",{ref:t,className:ee("flex items-center p-6 pt-0",n),...e}));BG.displayName="CardFooter";const aE="/assets/sunrise_golden_hour__a22c9f34-DwEKbl5y.jpg";function $G(){const[,n]=ba();return a.jsxs("div",{className:"min-h-screen",children:[a.jsxs("div",{className:"relative min-h-screen bg-cover bg-center flex items-center",style:{backgroundImage:`url(${aE})`},children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/70 via-black/60 to-black/80"}),a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,transparent_0%,rgba(0,0,0,0.4)_100%)]"}),a.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 p-4 sm:p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl sm:text-2xl font-bold font-serif text-white"}),a.jsxs(O,{variant:"outline",className:"bg-white/10 backdrop-blur-sm border-white/20 text-white hover:bg-white/20 gap-2",onClick:()=>n("/login"),"data-testid":"button-login-nav",children:[a.jsx(Xz,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Sign In"})]})]})}),a.jsxs("div",{className:"relative w-full flex flex-col items-center justify-center text-center px-4 sm:px-6 py-16 space-y-6 sm:space-y-8 animate-in fade-in duration-700",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-primary/30 backdrop-blur-md rounded-full border border-primary/40 shadow-lg hover:bg-primary/40 transition-all duration-300",children:[a.jsx(lr,{className:"h-4 w-4 text-primary animate-pulse"}),a.jsx("span",{className:"text-sm font-medium text-white",children:"Sacred Path to Satya Yuga"})]}),a.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold font-serif text-white drop-shadow-2xl max-w-5xl leading-tight animate-in slide-in-from-bottom duration-1000",children:"Trisandhya Sadhana App"}),a.jsx("p",{className:"text-lg sm:text-xl md:text-2xl text-white/95 max-w-3xl px-4 leading-relaxed animate-in slide-in-from-bottom duration-1000 delay-150",children:"Your complete digital guide for the sacred Trikal Sandhya practice. Experience intelligent prayer reminders, track your spiritual progress, and access authentic content from Bhavishya Malika."}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 animate-in slide-in-from-bottom duration-1000 delay-300",children:a.jsxs(O,{size:"lg",className:"px-10 sm:px-12 py-5 sm:py-6 text-base sm:text-lg rounded-full shadow-2xl hover:shadow-primary/50 hover:scale-105 active:scale-95 transition-all duration-300 gap-2 group",onClick:()=>n("/login"),"data-testid":"button-login",children:["Begin Your Journey",a.jsx(ju,{className:"h-5 w-5 group-hover:translate-x-1 transition-transform"})]})}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 sm:gap-8 pt-8 max-w-2xl animate-in slide-in-from-bottom duration-1000 delay-500",children:[a.jsxs("div",{className:"text-center p-3 rounded-lg bg-white/10 backdrop-blur-sm border border-white/20 hover:bg-white/15 transition-all duration-300 hover:scale-105",children:[a.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-white flex items-center justify-center gap-2",children:"3x"}),a.jsx("div",{className:"text-xs sm:text-sm text-white/80 mt-1",children:"Daily Prayers"})]}),a.jsxs("div",{className:"text-center p-3 rounded-lg bg-white/10 backdrop-blur-sm border border-white/20 hover:bg-white/15 transition-all duration-300 hover:scale-105",children:[a.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-white flex items-center justify-center gap-2",children:"10min"}),a.jsx("div",{className:"text-xs sm:text-sm text-white/80 mt-1",children:"Each Session"})]}),a.jsxs("div",{className:"text-center p-3 rounded-lg bg-white/10 backdrop-blur-sm border border-white/20 hover:bg-white/15 transition-all duration-300 hover:scale-105",children:[a.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-white",children:"∞"}),a.jsx("div",{className:"text-xs sm:text-sm text-white/80 mt-1",children:"Spiritual Growth"})]})]})]})]}),a.jsx("div",{className:"py-12 sm:py-20 px-4 sm:px-6 bg-background",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-12 sm:mb-16",children:[a.jsx("h2",{className:"text-3xl sm:text-4xl font-bold font-serif mb-4",children:"What is Trisandhya?"}),a.jsx("p",{className:"text-base sm:text-lg text-muted-foreground max-w-3xl mx-auto leading-relaxed",children:"Trisandhya, the sacred practice of offering prayers to Lord Mahavishnu three times daily—at dawn, noon, and sunset—is mentioned in the 600-year-old Bhavishya Malika scripture as the path to salvation during Kaliyuga's end times."})]}),a.jsxs("div",{className:"grid gap-6 sm:gap-8 md:grid-cols-2 lg:grid-cols-4",children:[a.jsxs(Z,{className:"p-6 text-center space-y-4 hover:shadow-xl hover:scale-105 hover:-translate-y-1 transition-all duration-300 border-primary/20 hover:border-primary/40 group",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-primary/20 to-primary/10 rounded-2xl mx-auto group-hover:scale-110 group-hover:rotate-3 transition-transform duration-300",children:a.jsx(To,{className:"h-8 w-8 text-primary"})}),a.jsx("h3",{className:"font-semibold text-lg group-hover:text-primary transition-colors",children:"Smart Alarms"}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Precise timing reminders for Pratah (3:45-6:30 AM), Madhyahna (11:30 AM-1 PM), and Sayam Sandhya (5-6:30 PM)"})]}),a.jsxs(Z,{className:"p-6 text-center space-y-4 hover:shadow-xl hover:scale-105 hover:-translate-y-1 transition-all duration-300 border-primary/20 hover:border-primary/40 group",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-primary/20 to-primary/10 rounded-2xl mx-auto group-hover:scale-110 group-hover:rotate-3 transition-transform duration-300",children:a.jsx(at,{className:"h-8 w-8 text-primary"})}),a.jsx("h3",{className:"font-semibold text-lg group-hover:text-primary transition-colors",children:"Complete Mantras"}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Authentic Vishnu Shodasha Naam, Dashavatara Stotram, Durga Madhav Stuti, and Kalki Mahamantra with meanings"})]}),a.jsxs(Z,{className:"p-6 text-center space-y-4 hover:shadow-xl hover:scale-105 hover:-translate-y-1 transition-all duration-300 border-primary/20 hover:border-primary/40 group",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-primary/20 to-primary/10 rounded-2xl mx-auto group-hover:scale-110 group-hover:rotate-3 transition-transform duration-300",children:a.jsx(wA,{className:"h-8 w-8 text-primary"})}),a.jsx("h3",{className:"font-semibold text-lg group-hover:text-primary transition-colors",children:"Progress Tracking"}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Visual calendar, streak counter, and daily Japa tracking to maintain consistency in your spiritual practice"})]}),a.jsxs(Z,{className:"p-6 text-center space-y-4 hover:shadow-xl hover:scale-105 hover:-translate-y-1 transition-all duration-300 border-primary/20 hover:border-primary/40 group",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-primary/20 to-primary/10 rounded-2xl mx-auto group-hover:scale-110 group-hover:rotate-3 transition-transform duration-300",children:a.jsx(or,{className:"h-8 w-8 text-primary"})}),a.jsx("h3",{className:"font-semibold text-lg group-hover:text-primary transition-colors",children:"Media Library"}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Access bhajans, pravachans, and sacred audio content to deepen your spiritual understanding"})]})]})]})}),a.jsx("div",{className:"py-12 sm:py-20 px-4 sm:px-6 bg-primary/5",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsx("h2",{className:"text-3xl sm:text-4xl font-bold font-serif text-center mb-12 sm:mb-16",children:"Spiritual Benefits"}),a.jsxs("div",{className:"grid gap-6 sm:gap-8 md:grid-cols-2 lg:grid-cols-3",children:[a.jsxs("div",{className:"flex gap-4 items-start",children:[a.jsx(vc,{className:"h-6 w-6 text-primary mt-1 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Protection & Safety"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Shield from upcoming calamities and the 64 types of viruses predicted for the future"})]})]}),a.jsxs("div",{className:"flex gap-4 items-start",children:[a.jsx(lr,{className:"h-6 w-6 text-primary mt-1 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Mental Peace"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Reduces stress, eliminates depression, improves concentration and boosts self-confidence"})]})]}),a.jsxs("div",{className:"flex gap-4 items-start",children:[a.jsx(Au,{className:"h-6 w-6 text-primary mt-1 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Seven Generations"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Liberates seven generations of your lineage and ensures opportunity to witness Lord Kalki"})]})]}),a.jsxs("div",{className:"flex gap-4 items-start",children:[a.jsx(ww,{className:"h-6 w-6 text-primary mt-1 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Health Benefits"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Lower blood pressure, better sleep quality, and improved overall physical well-being"})]})]}),a.jsxs("div",{className:"flex gap-4 items-start",children:[a.jsx(at,{className:"h-6 w-6 text-primary mt-1 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Spiritual Growth"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Daily practice fosters self-realization and understanding of life's true purpose"})]})]}),a.jsxs("div",{className:"flex gap-4 items-start",children:[a.jsx(lr,{className:"h-6 w-6 text-primary mt-1 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Family Harmony"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Enhances family bonding and encourages positive social participation"})]})]})]})]})}),a.jsx("div",{className:"py-16 sm:py-20 px-4 sm:px-6 bg-background",children:a.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-6",children:[a.jsx("h2",{className:"text-3xl sm:text-4xl font-bold font-serif",children:"Start Your Sacred Journey Today"}),a.jsx("p",{className:"text-base sm:text-lg text-muted-foreground leading-relaxed max-w-2xl mx-auto",children:"Join thousands of devotees practicing the sacred Trisandhya path. Begin with just 10 minutes, three times a day, and experience profound transformation."}),a.jsx(O,{size:"lg",onClick:()=>n("/login"),className:"px-10 sm:px-12 py-5 sm:py-6 text-base sm:text-lg shadow-xl hover:scale-105 transition-transform","data-testid":"button-login-bottom",children:"Sign In to Continue"}),a.jsx("p",{className:"text-sm text-muted-foreground pt-4",children:"Free to use • No credit card required • Original Trisandhya content from Bhavishya Malika"})]})})]})}var zG="Label",LL=x.forwardRef((n,e)=>a.jsx(pe.label,{...n,ref:e,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||((r=n.onMouseDown)==null||r.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));LL.displayName=zG;var FL=LL;const UG=Iu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Y=x.forwardRef(({className:n,...e},t)=>a.jsx(FL,{ref:t,className:ee(UG(),n),...e}));Y.displayName=FL.displayName;var Q1="rovingFocusGroup.onEntryFocus",HG={bubbles:!1,cancelable:!0},zw="RovingFocusGroup",[RN,OL,VG]=Ny(zw),[WG,BL]=Nn(zw,[VG]),[GG,qG]=WG(zw),$L=x.forwardRef((n,e)=>a.jsx(RN.Provider,{scope:n.__scopeRovingFocusGroup,children:a.jsx(RN.Slot,{scope:n.__scopeRovingFocusGroup,children:a.jsx(KG,{...n,ref:e})})}));$L.displayName=zw;var KG=x.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:s,loop:r=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=n,m=x.useRef(null),p=we(e,m),b=Wm(i),[g=null,N]=Ds({prop:o,defaultProp:l,onChange:d}),[v,y]=x.useState(!1),S=Gt(u),w=OL(t),j=x.useRef(!1),[E,T]=x.useState(0);return x.useEffect(()=>{const P=m.current;if(P)return P.addEventListener(Q1,S),()=>P.removeEventListener(Q1,S)},[S]),a.jsx(GG,{scope:t,orientation:s,dir:b,loop:r,currentTabStopId:g,onItemFocus:x.useCallback(P=>N(P),[N]),onItemShiftTab:x.useCallback(()=>y(!0),[]),onFocusableItemAdd:x.useCallback(()=>T(P=>P+1),[]),onFocusableItemRemove:x.useCallback(()=>T(P=>P-1),[]),children:a.jsx(pe.div,{tabIndex:v||E===0?-1:0,"data-orientation":s,...f,ref:p,style:{outline:"none",...n.style},onMouseDown:oe(n.onMouseDown,()=>{j.current=!0}),onFocus:oe(n.onFocus,P=>{const _=!j.current;if(P.target===P.currentTarget&&_&&!v){const R=new CustomEvent(Q1,HG);if(P.currentTarget.dispatchEvent(R),!R.defaultPrevented){const I=w().filter(F=>F.focusable),L=I.find(F=>F.active),U=I.find(F=>F.id===g),Q=[L,U,...I].filter(Boolean).map(F=>F.ref.current);HL(Q,h)}}j.current=!1}),onBlur:oe(n.onBlur,()=>y(!1))})})}),zL="RovingFocusGroupItem",UL=x.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:s=!0,active:r=!1,tabStopId:i,...o}=n,l=$r(),d=i||l,u=qG(zL,t),h=u.currentTabStopId===d,f=OL(t),{onFocusableItemAdd:m,onFocusableItemRemove:p}=u;return x.useEffect(()=>{if(s)return m(),()=>p()},[s,m,p]),a.jsx(RN.ItemSlot,{scope:t,id:d,focusable:s,active:r,children:a.jsx(pe.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:oe(n.onMouseDown,b=>{s?u.onItemFocus(d):b.preventDefault()}),onFocus:oe(n.onFocus,()=>u.onItemFocus(d)),onKeyDown:oe(n.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const g=QG(b,u.orientation,u.dir);if(g!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let v=f().filter(y=>y.focusable).map(y=>y.ref.current);if(g==="last")v.reverse();else if(g==="prev"||g==="next"){g==="prev"&&v.reverse();const y=v.indexOf(b.currentTarget);v=u.loop?JG(v,y+1):v.slice(y+1)}setTimeout(()=>HL(v))}})})})});UL.displayName=zL;var YG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function XG(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function QG(n,e,t){const s=XG(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return YG[s]}function HL(n,e=!1){const t=document.activeElement;for(const s of n)if(s===t||(s.focus({preventScroll:e}),document.activeElement!==t))return}function JG(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var ZG=$L,eq=UL,oE="Tabs",[tq,vQ]=Nn(oE,[BL]),VL=BL(),[nq,lE]=tq(oE),WL=x.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,onValueChange:r,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:d="automatic",...u}=n,h=Wm(l),[f,m]=Ds({prop:s,onChange:r,defaultProp:i});return a.jsx(nq,{scope:t,baseId:$r(),value:f,onValueChange:m,orientation:o,dir:h,activationMode:d,children:a.jsx(pe.div,{dir:h,"data-orientation":o,...u,ref:e})})});WL.displayName=oE;var GL="TabsList",qL=x.forwardRef((n,e)=>{const{__scopeTabs:t,loop:s=!0,...r}=n,i=lE(GL,t),o=VL(t);return a.jsx(ZG,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:s,children:a.jsx(pe.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:e})})});qL.displayName=GL;var KL="TabsTrigger",YL=x.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,disabled:r=!1,...i}=n,o=lE(KL,t),l=VL(t),d=JL(o.baseId,s),u=ZL(o.baseId,s),h=s===o.value;return a.jsx(eq,{asChild:!0,...l,focusable:!r,active:h,children:a.jsx(pe.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:d,...i,ref:e,onMouseDown:oe(n.onMouseDown,f=>{!r&&f.button===0&&f.ctrlKey===!1?o.onValueChange(s):f.preventDefault()}),onKeyDown:oe(n.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(s)}),onFocus:oe(n.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!r&&f&&o.onValueChange(s)})})})});YL.displayName=KL;var XL="TabsContent",QL=x.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,forceMount:r,children:i,...o}=n,l=lE(XL,t),d=JL(l.baseId,s),u=ZL(l.baseId,s),h=s===l.value,f=x.useRef(h);return x.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),a.jsx(ps,{present:r||h,children:({present:m})=>a.jsx(pe.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!m,id:u,tabIndex:0,...o,ref:e,style:{...n.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});QL.displayName=XL;function JL(n,e){return`${n}-trigger-${e}`}function ZL(n,e){return`${n}-content-${e}`}var sq=WL,eF=qL,tF=YL,nF=QL;const xa=sq,ya=x.forwardRef(({className:n,...e},t)=>a.jsx(eF,{ref:t,className:ee("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));ya.displayName=eF.displayName;const qt=x.forwardRef(({className:n,...e},t)=>a.jsx(tF,{ref:t,className:ee("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));qt.displayName=tF.displayName;const gt=x.forwardRef(({className:n,...e},t)=>a.jsx(nF,{ref:t,className:ee("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));gt.displayName=nF.displayName;var sF={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},fT=ut.createContext&&ut.createContext(sF),rq=["attr","size","title"];function iq(n,e){if(n==null)return{};var t=aq(n,e),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(t[s]=n[s])}return t}function aq(n,e){if(n==null)return{};var t={};for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}function pb(){return pb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},pb.apply(this,arguments)}function mT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,s)}return t}function gb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?mT(Object(t),!0).forEach(function(s){oq(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):mT(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function oq(n,e,t){return e=lq(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lq(n){var e=cq(n,"string");return typeof e=="symbol"?e:e+""}function cq(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function rF(n){return n&&n.map((e,t)=>ut.createElement(e.tag,gb({key:t},e.attr),rF(e.child)))}function dq(n){return e=>ut.createElement(uq,pb({attr:gb({},n.attr)},e),rF(n.child))}function uq(n){var e=t=>{var{attr:s,size:r,title:i}=n,o=iq(n,rq),l=r||t.size||"1em",d;return t.className&&(d=t.className),n.className&&(d=(d?d+" ":"")+n.className),ut.createElement("svg",pb({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,o,{className:d,style:gb(gb({color:n.color||t.color},t.style),n.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&ut.createElement("title",null,i),n.children)};return fT!==void 0?ut.createElement(fT.Consumer,null,t=>e(t)):e(sF)}function hq(n){return dq({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(n)}function fq(){const{toast:n}=On(),[,e]=ba(),[t,s]=x.useState(!1),[r,i]=x.useState("login"),[o,l]=x.useState(!1),[d,u]=x.useState(!1),[h,f]=x.useState(!1);x.useEffect(()=>{new URLSearchParams(window.location.search).get("error")==="google_signin_failed"&&(n({title:"Google Sign-in Failed",description:"Please verify your email through the registration process first, or use email/password login.",variant:"destructive",duration:8e3}),window.history.replaceState({},"","/login"))},[n]);const[m,p]=x.useState({email:"",password:""}),[b,g]=x.useState({email:"",password:"",firstName:"",lastName:""}),[N,v]=x.useState({email:"",code:""}),[y,S]=x.useState({email:""}),[w,j]=x.useState({email:"",code:"",password:""}),E=async L=>{L.preventDefault(),s(!0);try{const U=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m),credentials:"include"}),B=await U.json();U.ok?(Re.setQueryData(["/api/auth/user"],B.user),n({title:"Success!",description:"Logged in successfully"}),e("/")):n({title:"Login Failed",description:B.message||"Invalid credentials",variant:"destructive"})}catch{n({title:"Error",description:"An error occurred during login",variant:"destructive"})}finally{s(!1)}},T=async L=>{L.preventDefault(),s(!0);try{const U=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b),credentials:"include"}),B=await U.json();U.ok?(v({email:b.email,code:""}),l(!0),n({title:"Registration Successful!",description:"Please check your email for the verification code.",duration:1e4})):n({title:"Registration Failed",description:B.message||"Failed to register",variant:"destructive"})}catch{n({title:"Error",description:"An error occurred during registration",variant:"destructive"})}finally{s(!1)}},P=async L=>{L.preventDefault(),s(!0);try{const U=await fetch("/api/auth/verify-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:N.email,code:N.code}),credentials:"include"}),B=await U.json();U.ok?(n({title:"Email Verified!",description:"You can now log in with your credentials."}),l(!1),g({email:"",password:"",firstName:"",lastName:""}),v({email:"",code:""}),i("login")):n({title:"Verification Failed",description:B.message||"Invalid verification code",variant:"destructive"})}catch{n({title:"Error",description:"An error occurred during verification",variant:"destructive"})}finally{s(!1)}},_=async L=>{L.preventDefault(),s(!0);try{const U=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y),credentials:"include"}),B=await U.json();U.ok?(j({email:y.email,code:"",password:""}),u(!1),f(!0),n({title:"Reset Code Sent",description:"Please check your email for the password reset code.",duration:1e4})):n({title:"Request Failed",description:B.message||"Email not found",variant:"destructive"})}catch{n({title:"Error",description:"An error occurred",variant:"destructive"})}finally{s(!1)}},R=async L=>{L.preventDefault(),s(!0);try{const U=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w.email,code:w.code,password:w.password}),credentials:"include"}),B=await U.json();U.ok?(n({title:"Password Reset Successful!",description:"You can now log in with your new password."}),f(!1),S({email:""}),j({email:"",code:"",password:""}),i("login")):n({title:"Reset Failed",description:B.message||"Invalid reset code",variant:"destructive"})}catch{n({title:"Error",description:"An error occurred during password reset",variant:"destructive"})}finally{s(!1)}},I=async()=>{s(!0);try{const L=await fetch("/api/auth/resend-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:N.email}),credentials:"include"}),U=await L.json();L.ok?n({title:"Email Sent!",description:"A new verification code has been sent to your email."}):n({title:"Failed to Resend",description:U.message||"Could not resend verification email",variant:"destructive"})}catch{n({title:"Error",description:"An error occurred while resending the email",variant:"destructive"})}finally{s(!1)}};return a.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative",children:[a.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${aE})`}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-900/80 via-amber-900/70 to-yellow-800/80 dark:from-black/80 dark:via-orange-950/80 dark:to-black/80"}),a.jsxs(Z,{className:"w-full max-w-md relative z-10 shadow-2xl border-orange-200/20 dark:border-orange-800/30 bg-white/95 dark:bg-gray-950/95 backdrop-blur-sm",children:[a.jsxs(xi,{className:"space-y-4 text-center pb-4",children:[a.jsx("div",{className:"mx-auto w-20 h-20 rounded-full bg-gradient-to-br from-orange-500 to-amber-600 dark:from-orange-600 dark:to-amber-700 flex items-center justify-center shadow-lg",children:a.jsx(lr,{className:"h-10 w-10 text-white"})}),a.jsx(yi,{className:"text-3xl font-bold font-serif bg-gradient-to-r from-orange-600 to-amber-600 dark:from-orange-400 dark:to-amber-400 bg-clip-text text-transparent",children:"Trisandhya Sadhana"}),a.jsx(wo,{className:"text-base text-gray-600 dark:text-gray-400",children:"Your digital companion for daily spiritual practice"})]}),a.jsx(Dn,{className:"space-y-6",children:a.jsxs(xa,{value:r,onValueChange:i,className:"w-full",children:[a.jsxs(ya,{className:"grid w-full grid-cols-2 mb-4",children:[a.jsx(qt,{value:"login","data-testid":"tab-login",children:"Login"}),a.jsx(qt,{value:"register","data-testid":"tab-register",children:"Register"})]}),a.jsxs(gt,{value:"login",className:"space-y-4",children:[a.jsxs("form",{onSubmit:E,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"login-email",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(po,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(re,{id:"login-email",type:"email",placeholder:"your@email.com",className:"pl-10",value:m.email,onChange:L=>p({...m,email:L.target.value}),required:!0,"data-testid":"input-login-email"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"login-password",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(Gv,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(re,{id:"login-password",type:"password",placeholder:"••••••••",className:"pl-10",value:m.password,onChange:L=>p({...m,password:L.target.value}),required:!0,"data-testid":"input-login-password"})]})]}),a.jsx("div",{className:"text-right",children:a.jsx(O,{type:"button",variant:"ghost",className:"text-orange-600 dark:text-orange-400 px-0 h-auto",onClick:()=>u(!0),"data-testid":"button-forgot-password",children:"Forgot Password?"})}),a.jsx(O,{type:"submit",className:"w-full bg-gradient-to-r from-orange-500 to-amber-600 hover:from-orange-600 hover:to-amber-700 text-white",disabled:t,"data-testid":"button-login",children:t?a.jsxs(a.Fragment,{children:[a.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Logging in..."]}):"Login"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("span",{className:"w-full border-t border-gray-200 dark:border-gray-800"})}),a.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:a.jsx("span",{className:"bg-white dark:bg-gray-950 px-2 text-gray-500",children:"Or continue with"})})]}),a.jsxs(O,{type:"button",variant:"outline",className:"w-full border-2",onClick:()=>window.location.href="/api/auth/google","data-testid":"button-google-login",children:[a.jsx(hq,{className:"mr-2 h-4 w-4"}),"Google"]})]}),a.jsx(gt,{value:"register",className:"space-y-4",children:a.jsxs("form",{onSubmit:T,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"register-firstname",children:"First Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(_2,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(re,{id:"register-firstname",type:"text",placeholder:"First",className:"pl-10",value:b.firstName,onChange:L=>g({...b,firstName:L.target.value}),required:!0,"data-testid":"input-register-firstname"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"register-lastname",children:"Last Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(_2,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(re,{id:"register-lastname",type:"text",placeholder:"Last",className:"pl-10",value:b.lastName,onChange:L=>g({...b,lastName:L.target.value}),required:!0,"data-testid":"input-register-lastname"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"register-email",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(po,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(re,{id:"register-email",type:"email",placeholder:"your@email.com",className:"pl-10",value:b.email,onChange:L=>g({...b,email:L.target.value}),required:!0,"data-testid":"input-register-email"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"register-password",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(Gv,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(re,{id:"register-password",type:"password",placeholder:"••••••••",className:"pl-10",value:b.password,onChange:L=>g({...b,password:L.target.value}),required:!0,minLength:6,"data-testid":"input-register-password"})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Must be at least 6 characters"})]}),a.jsx(O,{type:"submit",className:"w-full bg-gradient-to-r from-orange-500 to-amber-600 hover:from-orange-600 hover:to-amber-700 text-white",disabled:t,"data-testid":"button-register",children:t?a.jsxs(a.Fragment,{children:[a.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):"Create Account"})]})})]})})]}),a.jsx(Nt,{open:o,onOpenChange:l,children:a.jsxs(xt,{className:"sm:max-w-md","data-testid":"dialog-verification",onInteractOutside:L=>L.preventDefault(),children:[a.jsxs(jt,{children:[a.jsx(Ct,{className:"text-center text-xl",children:"Verify Your Email"}),a.jsx(bo,{className:"text-center",children:"We've sent a 6-digit verification code to your email. Please enter it below."})]}),a.jsxs("form",{onSubmit:P,children:[a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-950/30 rounded-lg text-center",children:[a.jsx(po,{className:"h-12 w-12 text-blue-600 dark:text-blue-400 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Check your email inbox for the verification code."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"verification-code",children:"Verification Code"}),a.jsxs("div",{className:"relative",children:[a.jsx(E2,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(re,{id:"verification-code",type:"text",placeholder:"000000",className:"pl-10 text-center text-lg tracking-wider",maxLength:6,value:N.code,onChange:L=>v({...N,code:L.target.value.replace(/\D/g,"")}),required:!0,"data-testid":"input-verification-code"})]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Didn't receive the email?"}),a.jsx(O,{type:"button",variant:"outline",onClick:I,disabled:t,"data-testid":"button-resend-verification",children:"Resend Verification Email"})]})]}),a.jsx(ma,{children:a.jsx(O,{type:"submit",className:"w-full bg-gradient-to-r from-orange-500 to-amber-600 hover:from-orange-600 hover:to-amber-700",disabled:t||N.code.length!==6,"data-testid":"button-verify-code",children:t?a.jsxs(a.Fragment,{children:[a.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify Email"})})]})]})}),a.jsx(Nt,{open:d,onOpenChange:u,children:a.jsxs(xt,{className:"sm:max-w-md","data-testid":"dialog-forgot-password",children:[a.jsxs(jt,{children:[a.jsx(Ct,{className:"text-center text-xl",children:"Forgot Password"}),a.jsx(bo,{className:"text-center",children:"Enter your email to receive a password reset code"})]}),a.jsxs("form",{onSubmit:_,children:[a.jsx("div",{className:"space-y-4 py-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"forgot-email",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(po,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(re,{id:"forgot-email",type:"email",placeholder:"your@email.com",className:"pl-10",value:y.email,onChange:L=>S({email:L.target.value}),required:!0,"data-testid":"input-forgot-email"})]})]})}),a.jsx(ma,{children:a.jsx(O,{type:"submit",className:"w-full bg-gradient-to-r from-orange-500 to-amber-600 hover:from-orange-600 hover:to-amber-700",disabled:t,"data-testid":"button-request-reset",children:t?a.jsxs(a.Fragment,{children:[a.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Send Reset Code"})})]})]})}),a.jsx(Nt,{open:h,onOpenChange:f,children:a.jsxs(xt,{className:"sm:max-w-md","data-testid":"dialog-reset-password",children:[a.jsxs(jt,{children:[a.jsx(Ct,{className:"text-center text-xl",children:"Reset Password"}),a.jsx(bo,{className:"text-center",children:"Enter the reset code from your email and your new password"})]}),a.jsxs("form",{onSubmit:R,children:[a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-950/30 rounded-lg text-center",children:[a.jsx(po,{className:"h-12 w-12 text-blue-600 dark:text-blue-400 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Check your email for the password reset code."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"reset-code",children:"Reset Code"}),a.jsxs("div",{className:"relative",children:[a.jsx(E2,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(re,{id:"reset-code",type:"text",placeholder:"000000",className:"pl-10 text-center text-lg tracking-wider",maxLength:6,value:w.code,onChange:L=>j({...w,code:L.target.value.replace(/\D/g,"")}),required:!0,"data-testid":"input-reset-code"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"new-password",children:"New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(Gv,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(re,{id:"new-password",type:"password",placeholder:"••••••••",className:"pl-10",minLength:6,value:w.password,onChange:L=>j({...w,password:L.target.value}),required:!0,"data-testid":"input-new-password"})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Must be at least 6 characters"})]})]}),a.jsx(ma,{children:a.jsx(O,{type:"submit",className:"w-full bg-gradient-to-r from-orange-500 to-amber-600 hover:from-orange-600 hover:to-amber-700",disabled:t||w.code.length!==6,"data-testid":"button-reset-password",children:t?a.jsxs(a.Fragment,{children:[a.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Resetting..."]}):"Reset Password"})})]})]})})]})}function mq(){const[n,e]=x.useState(new Date);return x.useEffect(()=>{const t=setInterval(()=>e(new Date),1e3);return()=>clearInterval(t)},[]),a.jsxs("div",{className:"text-center space-y-1","data-testid":"live-clock",children:[a.jsx("div",{className:"text-4xl font-semibold tabular-nums tracking-tight",children:pa(n,"hh:mm:ss a")}),a.jsx("div",{className:"text-sm text-muted-foreground",children:pa(n,"EEEE, MMMM d, yyyy")})]})}const bv=[{name:"pratah",label:"Pratah Sandhya (Brahma Muhurta)",startHour:3,startMinute:35,endHour:6,endMinute:30},{name:"madhyahna",label:"Madhyahna Sandhya (Abhijit Muhurta)",startHour:11,startMinute:30,endHour:13,endMinute:0},{name:"sayam",label:"Sayam Sandhya (Godhuli Bela)",startHour:17,startMinute:30,endHour:18,endMinute:30}];function pq(){const n=new Date,e=n.getHours()*60+n.getMinutes();for(const s of bv){const r=s.startHour*60+s.startMinute;if(e<r){const i=new Date(n);return i.setHours(s.startHour,s.startMinute,0,0),{period:s,target:i}}}const t=new Date(n);return t.setDate(t.getDate()+1),t.setHours(bv[0].startHour,bv[0].startMinute,0,0),{period:bv[0],target:t}}function gq(){const[n,e]=x.useState({hours:0,minutes:0,seconds:0,label:""});return x.useEffect(()=>{const t=()=>{const{period:r,target:i}=pq(),o=new Date,l=i.getTime()-o.getTime(),d=Math.floor(l/(1e3*60*60)),u=Math.floor(l%(1e3*60*60)/(1e3*60)),h=Math.floor(l%(1e3*60)/1e3);e({hours:d,minutes:u,seconds:h,label:r.label})};t();const s=setInterval(t,1e3);return()=>clearInterval(s)},[]),a.jsxs(Z,{className:"p-6 text-center space-y-4","data-testid":"sandhya-countdown",children:[a.jsx("h3",{className:"text-lg font-medium text-muted-foreground",children:"Next Sandhya"}),a.jsx("div",{className:"relative",children:a.jsx("div",{className:"inline-flex items-center justify-center w-48 h-48 rounded-full border-8 border-primary/20 bg-primary/5",children:a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"text-4xl font-bold tabular-nums text-primary",children:[String(n.hours).padStart(2,"0"),":",String(n.minutes).padStart(2,"0"),":",String(n.seconds).padStart(2,"0")]})})})}),a.jsx("p",{className:"text-sm font-medium font-serif text-foreground",children:n.label})]})}var cE="Checkbox",[xq,bQ]=Nn(cE),[yq,vq]=xq(cE),iF=x.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:s,checked:r,defaultChecked:i,required:o,disabled:l,value:d="on",onCheckedChange:u,form:h,...f}=n,[m,p]=x.useState(null),b=we(e,w=>p(w)),g=x.useRef(!1),N=m?h||!!m.closest("form"):!0,[v=!1,y]=Ds({prop:r,defaultProp:i,onChange:u}),S=x.useRef(v);return x.useEffect(()=>{const w=m==null?void 0:m.form;if(w){const j=()=>y(S.current);return w.addEventListener("reset",j),()=>w.removeEventListener("reset",j)}},[m,y]),a.jsxs(yq,{scope:t,state:v,disabled:l,children:[a.jsx(pe.button,{type:"button",role:"checkbox","aria-checked":pc(v)?"mixed":v,"aria-required":o,"data-state":lF(v),"data-disabled":l?"":void 0,disabled:l,value:d,...f,ref:b,onKeyDown:oe(n.onKeyDown,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:oe(n.onClick,w=>{y(j=>pc(j)?!0:!j),N&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),N&&a.jsx(bq,{control:m,bubbles:!g.current,name:s,value:d,checked:v,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"},defaultChecked:pc(i)?!1:i})]})});iF.displayName=cE;var aF="CheckboxIndicator",oF=x.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:s,...r}=n,i=vq(aF,t);return a.jsx(ps,{present:s||pc(i.state)||i.state===!0,children:a.jsx(pe.span,{"data-state":lF(i.state),"data-disabled":i.disabled?"":void 0,...r,ref:e,style:{pointerEvents:"none",...n.style}})})});oF.displayName=aF;var bq=n=>{const{control:e,checked:t,bubbles:s=!0,defaultChecked:r,...i}=n,o=x.useRef(null),l=Bw(t),d=Aw(e);x.useEffect(()=>{const h=o.current,f=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==t&&p){const b=new Event("click",{bubbles:s});h.indeterminate=pc(t),p.call(h,pc(t)?!1:t),h.dispatchEvent(b)}},[l,t,s]);const u=x.useRef(pc(t)?!1:t);return a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r??u.current,...i,tabIndex:-1,ref:o,style:{...n.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function pc(n){return n==="indeterminate"}function lF(n){return pc(n)?"indeterminate":n?"checked":"unchecked"}var cF=iF,wq=oF;const dF=x.forwardRef(({className:n,...e},t)=>a.jsx(cF,{ref:t,className:ee("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...e,children:a.jsx(wq,{className:ee("flex items-center justify-center text-current"),children:a.jsx(SA,{className:"h-4 w-4"})})}));dF.displayName=cF.displayName;function Sq(){const{user:n}=Ry(),e=new Date().toISOString().split("T")[0],{data:t}=Te({queryKey:["/api/sadhana-progress/today"]}),s=Oe({mutationFn:async l=>await Ve("POST","/api/sadhana-progress",{...t,...l,date:e}),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/sadhana-progress/today"]}),Re.invalidateQueries({queryKey:["/api/sadhana-progress/stats"]})}}),r=l=>{s.mutate({[l]:!(t!=null&&t[l])})},i=[{id:"pratahCompleted",label:"Pratah Sandhya",completed:t==null?void 0:t.pratahCompleted},{id:"madhyahnaCompleted",label:"Madhyahna Sandhya",completed:t==null?void 0:t.madhyahnaCompleted},{id:"sayamCompleted",label:"Sayam Sandhya",completed:t==null?void 0:t.sayamCompleted},{id:"mahapuranCompleted",label:"Shrimad Bhagwat Mahapuran",completed:t==null?void 0:t.mahapuranCompleted},{id:"japCompleted",label:"Madhav Naam Jap",completed:t==null?void 0:t.japCompleted}],o=i.filter(l=>l.completed).length;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"relative h-64 rounded-lg overflow-hidden bg-cover bg-center",style:{backgroundImage:`url(${aE})`},children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/40 to-black/20"}),a.jsxs("div",{className:"relative h-full flex flex-col items-center justify-center text-center px-4 space-y-3",children:[a.jsxs("h1",{className:"text-4xl font-bold font-serif text-white drop-shadow-lg","data-testid":"text-greeting",children:["Jai Jagannath, ",(n==null?void 0:n.firstName)||"Devotee"]}),a.jsx("p",{className:"text-lg text-white/90",children:"Welcome to your spiritual journey"})]})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsx(Z,{className:"p-6 space-y-4",children:a.jsx(mq,{})}),a.jsx(gq,{})]}),a.jsxs(Z,{className:"p-6 space-y-4","data-testid":"sadhana-checklist",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Today's Sadhana"}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Uz,{className:"h-4 w-4 text-primary"}),a.jsxs("span",{children:[o,"/",i.length]})]})]}),a.jsx("div",{className:"space-y-3",children:i.map(l=>a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md hover-elevate active-elevate-2 cursor-pointer transition-colors",onClick:()=>r(l.id),"data-testid":`checklist-item-${l.id}`,children:[a.jsx(dF,{checked:l.completed,onCheckedChange:()=>r(l.id),className:"h-5 w-5"}),a.jsx("label",{className:`flex-1 cursor-pointer ${l.completed?"line-through text-muted-foreground":""}`,children:l.label})]},l.id))})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsx(fc,{href:"/guide",children:a.jsxs(Z,{className:"p-6 text-center space-y-3 cursor-pointer hover-elevate active-elevate-2","data-testid":"card-guide",children:[a.jsx(at,{className:"h-12 w-12 mx-auto text-primary"}),a.jsx("h3",{className:"font-semibold",children:"Daily Sadhna"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Learn about Trisandhya practices"})]})}),a.jsx(fc,{href:"/media",children:a.jsxs(Z,{className:"p-6 text-center space-y-3 cursor-pointer hover-elevate active-elevate-2","data-testid":"card-media",children:[a.jsx(or,{className:"h-12 w-12 mx-auto text-primary"}),a.jsx("h3",{className:"font-semibold",children:"Media Library"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Bhajans and Pravachan videos"})]})}),a.jsx(fc,{href:"/progress",children:a.jsxs(Z,{className:"p-6 text-center space-y-3 cursor-pointer hover-elevate active-elevate-2","data-testid":"card-progress",children:[a.jsx(wA,{className:"h-12 w-12 mx-auto text-primary"}),a.jsx("h3",{className:"font-semibold",children:"Track Progress"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"View your spiritual journey"})]})})]})]})}var dE="Progress",uE=100,[Nq,wQ]=Nn(dE),[jq,Cq]=Nq(dE),uF=x.forwardRef((n,e)=>{const{__scopeProgress:t,value:s=null,max:r,getValueLabel:i=Aq,...o}=n;(r||r===0)&&!pT(r)&&console.error(Eq(`${r}`,"Progress"));const l=pT(r)?r:uE;s!==null&&!gT(s,l)&&console.error(kq(`${s}`,"Progress"));const d=gT(s,l)?s:null,u=xb(d)?i(d,l):void 0;return a.jsx(jq,{scope:t,value:d,max:l,children:a.jsx(pe.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":xb(d)?d:void 0,"aria-valuetext":u,role:"progressbar","data-state":mF(d,l),"data-value":d??void 0,"data-max":l,...o,ref:e})})});uF.displayName=dE;var hF="ProgressIndicator",fF=x.forwardRef((n,e)=>{const{__scopeProgress:t,...s}=n,r=Cq(hF,t);return a.jsx(pe.div,{"data-state":mF(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...s,ref:e})});fF.displayName=hF;function Aq(n,e){return`${Math.round(n/e*100)}%`}function mF(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function xb(n){return typeof n=="number"}function pT(n){return xb(n)&&!isNaN(n)&&n>0}function gT(n,e){return xb(n)&&!isNaN(n)&&n<=e&&n>=0}function Eq(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${uE}\`.`}function kq(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${uE} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var pF=uF,Tq=fF;const gF=x.forwardRef(({className:n,value:e,...t},s)=>a.jsx(pF,{ref:s,className:ee("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:a.jsx(Tq,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));gF.displayName=pF.displayName;var hE={};(function n(e,t,s,r){var i=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",l=function(){if(!e.OffscreenCanvas)return!1;var D=new OffscreenCanvas(1,1),M=D.getContext("2d");M.fillRect(0,0,1,1);var q=D.transferToImageBitmap();try{M.createPattern(q,"no-repeat")}catch{return!1}return!0}();function d(){}function u(D){var M=t.exports.Promise,q=M!==void 0?M:e.Promise;return typeof q=="function"?new q(D):(D(d,d),null)}var h=function(D,M){return{transform:function(q){if(D)return q;if(M.has(q))return M.get(q);var z=new OffscreenCanvas(q.width,q.height),G=z.getContext("2d");return G.drawImage(q,0,0),M.set(q,z),z},clear:function(){M.clear()}}}(l,new Map),f=function(){var D=Math.floor(16.666666666666668),M,q,z={},G=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(M=function(W){var X=Math.random();return z[X]=requestAnimationFrame(function V(se){G===se||G+D-1<se?(G=se,delete z[X],W()):z[X]=requestAnimationFrame(V)}),X},q=function(W){z[W]&&cancelAnimationFrame(z[W])}):(M=function(W){return setTimeout(W,D)},q=function(W){return clearTimeout(W)}),{frame:M,cancel:q}}(),m=function(){var D,M,q={};function z(G){function W(X,V){G.postMessage({options:X||{},callback:V})}G.init=function(V){var se=V.transferControlToOffscreen();G.postMessage({canvas:se},[se])},G.fire=function(V,se,ve){if(M)return W(V,null),M;var ae=Math.random().toString(36).slice(2);return M=u(function(ce){function xe(ge){ge.data.callback===ae&&(delete q[ae],G.removeEventListener("message",xe),M=null,h.clear(),ve(),ce())}G.addEventListener("message",xe),W(V,ae),q[ae]=xe.bind(null,{data:{callback:ae}})}),M},G.reset=function(){G.postMessage({reset:!0});for(var V in q)q[V](),delete q[V]}}return function(){if(D)return D;if(!s&&i){var G=["var CONFETTI, SIZE = {}, module = {};","("+n.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{D=new Worker(URL.createObjectURL(new Blob([G])))}catch(W){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",W),null}z(D)}return D}}(),p={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function b(D,M){return M?M(D):D}function g(D){return D!=null}function N(D,M,q){return b(D&&g(D[M])?D[M]:p[M],q)}function v(D){return D<0?0:Math.floor(D)}function y(D,M){return Math.floor(Math.random()*(M-D))+D}function S(D){return parseInt(D,16)}function w(D){return D.map(j)}function j(D){var M=String(D).replace(/[^0-9a-f]/gi,"");return M.length<6&&(M=M[0]+M[0]+M[1]+M[1]+M[2]+M[2]),{r:S(M.substring(0,2)),g:S(M.substring(2,4)),b:S(M.substring(4,6))}}function E(D){var M=N(D,"origin",Object);return M.x=N(M,"x",Number),M.y=N(M,"y",Number),M}function T(D){D.width=document.documentElement.clientWidth,D.height=document.documentElement.clientHeight}function P(D){var M=D.getBoundingClientRect();D.width=M.width,D.height=M.height}function _(D){var M=document.createElement("canvas");return M.style.position="fixed",M.style.top="0px",M.style.left="0px",M.style.pointerEvents="none",M.style.zIndex=D,M}function R(D,M,q,z,G,W,X,V,se){D.save(),D.translate(M,q),D.rotate(W),D.scale(z,G),D.arc(0,0,1,X,V,se),D.restore()}function I(D){var M=D.angle*(Math.PI/180),q=D.spread*(Math.PI/180);return{x:D.x,y:D.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:D.startVelocity*.5+Math.random()*D.startVelocity,angle2D:-M+(.5*q-Math.random()*q),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:D.color,shape:D.shape,tick:0,totalTicks:D.ticks,decay:D.decay,drift:D.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:D.gravity*3,ovalScalar:.6,scalar:D.scalar,flat:D.flat}}function L(D,M){M.x+=Math.cos(M.angle2D)*M.velocity+M.drift,M.y+=Math.sin(M.angle2D)*M.velocity+M.gravity,M.velocity*=M.decay,M.flat?(M.wobble=0,M.wobbleX=M.x+10*M.scalar,M.wobbleY=M.y+10*M.scalar,M.tiltSin=0,M.tiltCos=0,M.random=1):(M.wobble+=M.wobbleSpeed,M.wobbleX=M.x+10*M.scalar*Math.cos(M.wobble),M.wobbleY=M.y+10*M.scalar*Math.sin(M.wobble),M.tiltAngle+=.1,M.tiltSin=Math.sin(M.tiltAngle),M.tiltCos=Math.cos(M.tiltAngle),M.random=Math.random()+2);var q=M.tick++/M.totalTicks,z=M.x+M.random*M.tiltCos,G=M.y+M.random*M.tiltSin,W=M.wobbleX+M.random*M.tiltCos,X=M.wobbleY+M.random*M.tiltSin;if(D.fillStyle="rgba("+M.color.r+", "+M.color.g+", "+M.color.b+", "+(1-q)+")",D.beginPath(),o&&M.shape.type==="path"&&typeof M.shape.path=="string"&&Array.isArray(M.shape.matrix))D.fill(H(M.shape.path,M.shape.matrix,M.x,M.y,Math.abs(W-z)*.1,Math.abs(X-G)*.1,Math.PI/10*M.wobble));else if(M.shape.type==="bitmap"){var V=Math.PI/10*M.wobble,se=Math.abs(W-z)*.1,ve=Math.abs(X-G)*.1,ae=M.shape.bitmap.width*M.scalar,ce=M.shape.bitmap.height*M.scalar,xe=new DOMMatrix([Math.cos(V)*se,Math.sin(V)*se,-Math.sin(V)*ve,Math.cos(V)*ve,M.x,M.y]);xe.multiplySelf(new DOMMatrix(M.shape.matrix));var ge=D.createPattern(h.transform(M.shape.bitmap),"no-repeat");ge.setTransform(xe),D.globalAlpha=1-q,D.fillStyle=ge,D.fillRect(M.x-ae/2,M.y-ce/2,ae,ce),D.globalAlpha=1}else if(M.shape==="circle")D.ellipse?D.ellipse(M.x,M.y,Math.abs(W-z)*M.ovalScalar,Math.abs(X-G)*M.ovalScalar,Math.PI/10*M.wobble,0,2*Math.PI):R(D,M.x,M.y,Math.abs(W-z)*M.ovalScalar,Math.abs(X-G)*M.ovalScalar,Math.PI/10*M.wobble,0,2*Math.PI);else if(M.shape==="star")for(var le=Math.PI/2*3,_e=4*M.scalar,Le=8*M.scalar,At=M.x,jn=M.y,Bn=5,gr=Math.PI/Bn;Bn--;)At=M.x+Math.cos(le)*Le,jn=M.y+Math.sin(le)*Le,D.lineTo(At,jn),le+=gr,At=M.x+Math.cos(le)*_e,jn=M.y+Math.sin(le)*_e,D.lineTo(At,jn),le+=gr;else D.moveTo(Math.floor(M.x),Math.floor(M.y)),D.lineTo(Math.floor(M.wobbleX),Math.floor(G)),D.lineTo(Math.floor(W),Math.floor(X)),D.lineTo(Math.floor(z),Math.floor(M.wobbleY));return D.closePath(),D.fill(),M.tick<M.totalTicks}function U(D,M,q,z,G){var W=M.slice(),X=D.getContext("2d"),V,se,ve=u(function(ae){function ce(){V=se=null,X.clearRect(0,0,z.width,z.height),h.clear(),G(),ae()}function xe(){s&&!(z.width===r.width&&z.height===r.height)&&(z.width=D.width=r.width,z.height=D.height=r.height),!z.width&&!z.height&&(q(D),z.width=D.width,z.height=D.height),X.clearRect(0,0,z.width,z.height),W=W.filter(function(ge){return L(X,ge)}),W.length?V=f.frame(xe):ce()}V=f.frame(xe),se=ce});return{addFettis:function(ae){return W=W.concat(ae),ve},canvas:D,promise:ve,reset:function(){V&&f.cancel(V),se&&se()}}}function B(D,M){var q=!D,z=!!N(M||{},"resize"),G=!1,W=N(M,"disableForReducedMotion",Boolean),X=i&&!!N(M||{},"useWorker"),V=X?m():null,se=q?T:P,ve=D&&V?!!D.__confetti_initialized:!1,ae=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ce;function xe(le,_e,Le){for(var At=N(le,"particleCount",v),jn=N(le,"angle",Number),Bn=N(le,"spread",Number),gr=N(le,"startVelocity",Number),Ou=N(le,"decay",Number),n1=N(le,"gravity",Number),s1=N(le,"drift",Number),Gy=N(le,"colors",w),r1=N(le,"ticks",Number),qy=N(le,"shapes"),Ai=N(le,"scalar"),zo=!!N(le,"flat"),Gr=E(le),Bu=At,i1=[],o5=D.width*Gr.x,l5=D.height*Gr.y;Bu--;)i1.push(I({x:o5,y:l5,angle:jn,spread:Bn,startVelocity:gr,color:Gy[Bu%Gy.length],shape:qy[y(0,qy.length)],ticks:r1,decay:Ou,gravity:n1,drift:s1,scalar:Ai,flat:zo}));return ce?ce.addFettis(i1):(ce=U(D,i1,se,_e,Le),ce.promise)}function ge(le){var _e=W||N(le,"disableForReducedMotion",Boolean),Le=N(le,"zIndex",Number);if(_e&&ae)return u(function(gr){gr()});q&&ce?D=ce.canvas:q&&!D&&(D=_(Le),document.body.appendChild(D)),z&&!ve&&se(D);var At={width:D.width,height:D.height};V&&!ve&&V.init(D),ve=!0,V&&(D.__confetti_initialized=!0);function jn(){if(V){var gr={getBoundingClientRect:function(){if(!q)return D.getBoundingClientRect()}};se(gr),V.postMessage({resize:{width:gr.width,height:gr.height}});return}At.width=At.height=null}function Bn(){ce=null,z&&(G=!1,e.removeEventListener("resize",jn)),q&&D&&(document.body.contains(D)&&document.body.removeChild(D),D=null,ve=!1)}return z&&!G&&(G=!0,e.addEventListener("resize",jn,!1)),V?V.fire(le,At,Bn):xe(le,At,Bn)}return ge.reset=function(){V&&V.reset(),ce&&ce.reset()},ge}var Q;function F(){return Q||(Q=B(null,{useWorker:!0,resize:!0})),Q}function H(D,M,q,z,G,W,X){var V=new Path2D(D),se=new Path2D;se.addPath(V,new DOMMatrix(M));var ve=new Path2D;return ve.addPath(se,new DOMMatrix([Math.cos(X)*G,Math.sin(X)*G,-Math.sin(X)*W,Math.cos(X)*W,q,z])),ve}function $(D){if(!o)throw new Error("path confetti are not supported in this browser");var M,q;typeof D=="string"?M=D:(M=D.path,q=D.matrix);var z=new Path2D(M),G=document.createElement("canvas"),W=G.getContext("2d");if(!q){for(var X=1e3,V=X,se=X,ve=0,ae=0,ce,xe,ge=0;ge<X;ge+=2)for(var le=0;le<X;le+=2)W.isPointInPath(z,ge,le,"nonzero")&&(V=Math.min(V,ge),se=Math.min(se,le),ve=Math.max(ve,ge),ae=Math.max(ae,le));ce=ve-V,xe=ae-se;var _e=10,Le=Math.min(_e/ce,_e/xe);q=[Le,0,0,Le,-Math.round(ce/2+V)*Le,-Math.round(xe/2+se)*Le]}return{type:"path",path:M,matrix:q}}function K(D){var M,q=1,z="#000000",G='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof D=="string"?M=D:(M=D.text,q="scalar"in D?D.scalar:q,G="fontFamily"in D?D.fontFamily:G,z="color"in D?D.color:z);var W=10*q,X=""+W+"px "+G,V=new OffscreenCanvas(W,W),se=V.getContext("2d");se.font=X;var ve=se.measureText(M),ae=Math.ceil(ve.actualBoundingBoxRight+ve.actualBoundingBoxLeft),ce=Math.ceil(ve.actualBoundingBoxAscent+ve.actualBoundingBoxDescent),xe=2,ge=ve.actualBoundingBoxLeft+xe,le=ve.actualBoundingBoxAscent+xe;ae+=xe+xe,ce+=xe+xe,V=new OffscreenCanvas(ae,ce),se=V.getContext("2d"),se.font=X,se.fillStyle=z,se.fillText(M,ge,le);var _e=1/q;return{type:"bitmap",bitmap:V.transferToImageBitmap(),matrix:[_e,0,0,_e,-ae*_e/2,-ce*_e/2]}}t.exports=function(){return F().apply(this,arguments)},t.exports.reset=function(){F().reset()},t.exports.create=B,t.exports.shapeFromPath=$,t.exports.shapeFromText=K})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),hE,!1);const Pq=hE.exports;hE.exports.create;function _q(){const[n,e]=x.useState(0),[t,s]=x.useState(!1),[r,i]=x.useState(!1),[o,l]=x.useState(!1),[d,u]=x.useState(!1),[h,f]=x.useState(""),m=x.useRef(null),{toast:p}=On(),{data:b=[]}=Te({queryKey:["/api/japa-audios"]}),{data:g}=Te({queryKey:["/api/japa-settings"]}),{data:N}=Te({queryKey:["/api/sadhana-progress",new Date().toISOString().split("T")[0]],queryFn:async()=>{const F=new Date().toISOString().split("T")[0],H=await fetch(`/api/sadhana-progress/${F}`);return H.ok?H.json():null}}),v=Oe({mutationFn:async()=>{const F=new Date().toISOString().split("T")[0];return await Ve("POST","/api/japa/increment",{count:n,date:F})},onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/sadhana-progress"]}),p({title:"Progress Saved!",description:`You've completed ${n} mantras today`})}}),y=Oe({mutationFn:async F=>await Ve("PATCH","/api/japa-settings",F),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/japa-settings"]}),p({title:"Settings updated"})}}),S=(g==null?void 0:g.dailyGoal)||108,w=(N==null?void 0:N.japCount)||0,j=w+n,E=Math.min(j/S*100,100),T=b.find(F=>F.id===(g==null?void 0:g.japaAudioId))||b[0];x.useEffect(()=>{j>=S&&!o&&n>0&&(l(!0),Pq({particleCount:100,spread:70,origin:{y:.6}}),u(!0))},[j,S,o,n]);const P=()=>{e(F=>F+1),g!=null&&g.hapticEnabled&&navigator.vibrate&&navigator.vibrate(50)},_=()=>{e(0),l(!1)},R=()=>{if(!T){p({title:"No audio available",description:"Please contact admin to upload japa audio files",variant:"destructive"});return}if(!T.url||T.url.trim()===""){p({title:"Invalid audio file",description:"The selected audio file is not available. Please contact admin.",variant:"destructive"});return}if(!m.current){p({title:"Audio player not ready",description:"Please try again in a moment",variant:"destructive"});return}t?(m.current.pause(),s(!1)):(m.current.load(),m.current.play().then(()=>{s(!0)}).catch(F=>{console.error("Error playing audio:",F),console.error("Audio URL:",T.url);let H="Could not play the audio. Please try again.";F.name==="NotAllowedError"?H="Browser blocked autoplay. Please click play again.":F.name==="NotSupportedError"?H="Audio format not supported. Please contact admin.":F.name==="AbortError"&&(H="Audio loading was interrupted. Please try again."),p({title:"Playback error",description:H,variant:"destructive"}),s(!1)}))},I=()=>{m.current&&(m.current.currentTime=0,m.current.play().catch(()=>s(!1)))},L=()=>{n>0?v.mutate():p({title:"No progress to save",description:"Start chanting to save your progress",variant:"destructive"})},U=()=>{const F=parseInt(h);if(isNaN(F)||F<1){p({title:"Invalid goal",description:"Please enter a valid number greater than 0",variant:"destructive"});return}y.mutate({dailyGoal:F}),f(""),i(!1)},B=F=>{y.mutate({dailyGoal:F}),u(!1),l(!1),p({title:"New goal set!",description:`Your next goal is ${F} mantras`})},Q=()=>{u(!1),l(!1)};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs(Z,{className:"p-6 sm:p-8 text-center space-y-6","data-testid":"jap-counter",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-xl font-semibold font-serif",children:"Madhav Naam Jap"}),a.jsxs(Nt,{open:r,onOpenChange:i,children:[a.jsx(jc,{asChild:!0,children:a.jsx(O,{variant:"ghost",size:"icon","data-testid":"button-jap-settings",children:a.jsx(OR,{className:"h-5 w-5"})})}),a.jsxs(xt,{children:[a.jsx(jt,{children:a.jsx(Ct,{children:"Jap Settings"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Daily Goal"}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:[108,216,324].map(F=>a.jsx(O,{variant:S===F?"default":"outline",size:"sm",onClick:()=>y.mutate({dailyGoal:F}),"data-testid":`button-goal-${F}`,children:F},F))}),a.jsxs("div",{className:"mt-4",children:[a.jsx(Y,{htmlFor:"custom-goal",children:"Custom Goal"}),a.jsxs("div",{className:"flex gap-2 mt-2",children:[a.jsx(re,{id:"custom-goal",type:"number",placeholder:"Enter custom goal",value:h,onChange:F=>f(F.target.value),"data-testid":"input-custom-goal"}),a.jsxs(O,{onClick:U,disabled:!h||y.isPending,"data-testid":"button-set-custom-goal",children:[a.jsx(ji,{className:"h-4 w-4 mr-2"}),"Set"]})]})]})]}),b.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Chant Audio"}),a.jsx("div",{className:"space-y-2 mt-2",children:b.map(F=>a.jsx(O,{variant:(T==null?void 0:T.id)===F.id?"default":"outline",className:"w-full justify-start",onClick:()=>y.mutate({japaAudioId:F.id}),"data-testid":`button-audio-${F.id}`,children:F.name},F.id))})]})]})]})]})]}),w>0&&a.jsx("div",{className:"bg-muted rounded-lg p-3 text-sm",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-muted-foreground",children:[a.jsx(xg,{className:"h-4 w-4"}),a.jsxs("span",{children:["Previous today: ",w," mantras"]})]})}),a.jsxs("div",{className:"flex flex-col items-center gap-6",children:[a.jsxs("div",{className:"space-y-3 w-full max-w-md",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(EA,{className:"h-4 w-4"}),a.jsx("span",{children:"Goal Progress"})]}),a.jsxs("span",{className:"font-semibold",children:[j," / ",S]})]}),a.jsx(gF,{value:E,className:"h-2"}),j>=S&&a.jsxs("div",{className:"flex items-center justify-center gap-2 text-primary animate-pulse",children:[a.jsx(P2,{className:"h-5 w-5"}),a.jsx("span",{className:"text-sm font-semibold",children:"Goal Achieved!"})]})]}),a.jsx("div",{className:"text-6xl font-bold tabular-nums text-primary","data-testid":"jap-count",children:n}),a.jsx("button",{onClick:P,className:ee("w-48 h-48 rounded-full font-semibold text-xl shadow-lg transition-all border-4","bg-primary text-primary-foreground border-primary-border","hover:scale-105 active:scale-95",j>=S&&"bg-gradient-to-br from-primary to-primary/80 animate-pulse"),"data-testid":"button-tap-jap",children:"TAP TO CHANT"})]}),a.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[a.jsxs(O,{variant:"outline",size:"default",onClick:_,"data-testid":"button-reset-counter",children:[a.jsx(oU,{className:"h-4 w-4 mr-2"}),"Reset"]}),a.jsxs(O,{variant:t?"default":"outline",size:"default",onClick:R,disabled:!T,"data-testid":"button-toggle-audio",children:[t?a.jsx(kA,{className:"h-4 w-4 mr-2"}):a.jsx($R,{className:"h-4 w-4 mr-2"}),t?"Playing":"Play Chant"]}),a.jsxs(O,{variant:"default",size:"default",onClick:L,disabled:n===0||v.isPending,"data-testid":"button-save-progress",children:[a.jsx(lU,{className:"h-4 w-4 mr-2"}),v.isPending?"Saving...":"Save Progress"]})]})]}),T&&a.jsx("audio",{ref:m,src:T.url,onEnded:I,loop:t,preload:"auto"}),a.jsx(Nt,{open:d,onOpenChange:u,children:a.jsxs(xt,{children:[a.jsxs(jt,{children:[a.jsxs(Ct,{className:"flex items-center gap-2 text-2xl",children:[a.jsx(P2,{className:"h-6 w-6 text-primary"}),"Goal Achieved!"]}),a.jsxs(bo,{children:["Congratulations! You've completed ",j," mantras and reached your goal of ",S,"!"]})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Would you like to set a new goal and continue your practice?"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:[S+108,S*2,S+216,1008].filter((F,H,$)=>F>S&&$.indexOf(F)===H).slice(0,4).map(F=>a.jsxs(O,{variant:"outline",onClick:()=>B(F),"data-testid":`button-next-goal-${F}`,children:[F," mantras"]},F))})]}),a.jsxs(ma,{className:"flex-col sm:flex-row gap-2",children:[a.jsx(O,{variant:"outline",onClick:Q,className:"w-full sm:w-auto","data-testid":"button-continue-same-goal",children:"Continue with same goal"}),a.jsx(O,{onClick:()=>{u(!1),i(!0)},className:"w-full sm:w-auto","data-testid":"button-set-different-goal",children:"Set different goal"})]})]})})]})}const ls=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),DN=[.001,0,0,.001,0,0],J1=1.35,er={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},la={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Ng="pdfjs_internal_editor_",Se={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Fe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},xF={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Cn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Jp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Kt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Gu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Dy={ERRORS:0,WARNINGS:1,INFOS:5},Pm={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},wv={moveTo:0,lineTo:1,curveTo:2,closePath:3},yF={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Uw=Dy.WARNINGS;function Mq(n){Number.isInteger(n)&&(Uw=n)}function Rq(){return Uw}function Hw(n){Uw>=Dy.INFOS&&console.info(`Info: ${n}`)}function Ne(n){Uw>=Dy.WARNINGS&&console.warn(`Warning: ${n}`)}function ht(n){throw new Error(n)}function $e(n,e){n||ht(e)}function Dq(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function fE(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const r=n.match(/\./g);(r==null?void 0:r.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=Bq(n)}catch{}}const s=e?URL.parse(n,e):URL.parse(n);return Dq(s)?s:null}function mE(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&fE(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Ee(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const Lu=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class xT extends Lu{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Z1 extends Lu{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class yb extends Lu{constructor(e){super(e,"InvalidPDFException")}}class jg extends Lu{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class Iq extends Lu{constructor(e){super(e,"FormatError")}}class Do extends Lu{constructor(e){super(e,"AbortException")}}function vF(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&ht("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let r=0;r<e;r+=t){const i=Math.min(r+t,e),o=n.subarray(r,i);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function Iy(n){typeof n!="string"&&ht("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function Lq(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function Fq(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function Oq(){try{return new Function(""),!0}catch{return!1}}class Sn{static get isLittleEndian(){return Ee(this,"isLittleEndian",Fq())}static get isEvalSupported(){return Ee(this,"isEvalSupported",Oq())}static get isOffscreenCanvasSupported(){return Ee(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ee(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Ee(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Ee(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const eS=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var No,e0,IN;class he{static makeHexColor(e,t,s){return`#${eS[e]}${eS[t]}${eS[s]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,s=0){const r=e[s],i=e[s+1];e[s]=r*t[0]+i*t[2]+t[4],e[s+1]=r*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const r=t[0],i=t[1],o=t[2],l=t[3],d=t[4],u=t[5];for(let h=0;h<6;h+=2){const f=e[s+h],m=e[s+h+1];e[s+h]=f*r+m*o+d,e[s+h+1]=f*i+m*l+u}}static applyInverseTransform(e,t){const s=e[0],r=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-s*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,s){const r=t[0],i=t[1],o=t[2],l=t[3],d=t[4],u=t[5],h=e[0],f=e[1],m=e[2],p=e[3];let b=r*h+d,g=b,N=r*m+d,v=N,y=l*f+u,S=y,w=l*p+u,j=w;if(i!==0||o!==0){const E=i*h,T=i*m,P=o*f,_=o*p;b+=P,v+=P,N+=_,g+=_,y+=E,j+=E,w+=T,S+=T}s[0]=Math.min(s[0],b,N,g,v),s[1]=Math.min(s[1],y,w,S,j),s[2]=Math.max(s[2],b,N,g,v),s[3]=Math.max(s[3],y,w,S,j)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],r=e[1],i=e[2],o=e[3],l=s**2+r**2,d=s*i+r*o,u=i**2+o**2,h=(l+u)/2,f=Math.sqrt(h**2-(l*u-d**2));t[0]=Math.sqrt(h+f||1),t[1]=Math.sqrt(h-f||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[s,i,r,o]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,r,i){i[0]=Math.min(i[0],e,s),i[1]=Math.min(i[1],t,r),i[2]=Math.max(i[2],e,s),i[3]=Math.max(i[3],t,r)}static bezierBoundingBox(e,t,s,r,i,o,l,d,u){u[0]=Math.min(u[0],e,l),u[1]=Math.min(u[1],t,d),u[2]=Math.max(u[2],e,l),u[3]=Math.max(u[3],t,d),k(this,No,IN).call(this,e,s,i,l,t,r,o,d,3*(-e+3*(s-i)+l),6*(e-2*s+i),3*(s-e),u),k(this,No,IN).call(this,e,s,i,l,t,r,o,d,3*(-t+3*(r-o)+d),6*(t-2*r+o),3*(r-t),u)}}No=new WeakSet,e0=function(e,t,s,r,i,o,l,d,u,h){if(u<=0||u>=1)return;const f=1-u,m=u*u,p=m*u,b=f*(f*(f*e+3*u*t)+3*m*s)+p*r,g=f*(f*(f*i+3*u*o)+3*m*l)+p*d;h[0]=Math.min(h[0],b),h[1]=Math.min(h[1],g),h[2]=Math.max(h[2],b),h[3]=Math.max(h[3],g)},IN=function(e,t,s,r,i,o,l,d,u,h,f,m){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&k(this,No,e0).call(this,e,t,s,r,i,o,l,d,-f/h,m);return}const p=h**2-4*f*u;if(p<0)return;const b=Math.sqrt(p),g=2*u;k(this,No,e0).call(this,e,t,s,r,i,o,l,d,(-h+b)/g,m),k(this,No,e0).call(this,e,t,s,r,i,o,l,d,(-h-b)/g,m)},A(he,No);function Bq(n){return decodeURIComponent(escape(n))}let tS=null,yT=null;function bF(n){return tS||(tS=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,yT=new Map([["ﬅ","ſt"]])),n.replaceAll(tS,(e,t,s)=>t?t.normalize("NFKC"):yT.get(s))}function pE(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),vF(n)}const gE="pdfjs_internal_id_";function $q(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,r,...i]=t;if(!n(s)&&!Number.isInteger(s)||!e(r))return!1;const o=i.length;let l=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const d of i)if(!(typeof d=="number"||l&&d===null))return!1;return!0}function Qn(n,e,t){return Math.min(Math.max(n,e),t)}function wF(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(vF(n))}function zq(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Iy(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class Cg{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function r(i){var d;if(!i)return;let o=null;const l=i.name;if(l==="#text")o=i.value;else if(Cg.shouldBuildText(l))(d=i==null?void 0:i.attributes)!=null&&d.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const u of i.children)r(u)}return r(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class xE{static setupStorage(e,t,s,r,i){const o=r.getValue(t,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",l=>{r.setValue(t,{value:l.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?e.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",l=>{r.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",l=>{r.setValue(t,{value:l.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const l of s.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const d=l.target.options,u=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:r,linkService:i}){const{attributes:o}=t,l=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[d,u]of Object.entries(o))if(u!=null)switch(d){case"class":u.length&&e.setAttribute(d,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!l||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,u)}l&&i.addLinkAttributes(e,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(e,o.dataId,t,s)}static render(e){var f,m;const t=e.annotationStorage,s=e.linkService,r=e.xfaHtml,i=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:i,linkService:s});const l=i!=="richText",d=e.div;if(d.append(o),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=p}l&&d.setAttribute("class","xfaLayer xfaFont");const u=[];if(r.children.length===0){if(r.value){const p=document.createTextNode(r.value);o.append(p),l&&Cg.shouldBuildText(r.name)&&u.push(p)}return{textDivs:u}}const h=[[r,-1,o]];for(;h.length>0;){const[p,b,g]=h.at(-1);if(b+1===p.children.length){h.pop();continue}const N=p.children[++h.at(-1)[1]];if(N===null)continue;const{name:v}=N;if(v==="#text"){const S=document.createTextNode(N.value);u.push(S),g.append(S);continue}const y=(f=N==null?void 0:N.attributes)!=null&&f.xmlns?document.createElementNS(N.attributes.xmlns,v):document.createElement(v);if(g.append(y),N.attributes&&this.setAttributes({html:y,element:N,storage:t,intent:i,linkService:s}),((m=N.children)==null?void 0:m.length)>0)h.push([N,-1,y]);else if(N.value){const S=document.createTextNode(N.value);l&&Cg.shouldBuildText(v)&&u.push(S),y.append(S)}}for(const p of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Aa="http://www.w3.org/2000/svg",Uc=class Uc{};J(Uc,"CSS",96),J(Uc,"PDF",72),J(Uc,"PDF_TO_CSS_UNITS",Uc.CSS/Uc.PDF);let Io=Uc;async function qm(n,e="text"){if(xp(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class Ly{constructor({viewBox:e,userUnit:t,scale:s,rotation:r,offsetX:i=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=r,this.offsetX=i,this.offsetY=o,s*=t;const d=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let h,f,m,p;switch(r%=360,r<0&&(r+=360),r){case 180:h=-1,f=0,m=0,p=1;break;case 90:h=0,f=1,m=1,p=0;break;case 270:h=0,f=-1,m=-1,p=0;break;case 0:h=1,f=0,m=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(m=-m,p=-p);let b,g,N,v;h===0?(b=Math.abs(u-e[1])*s+i,g=Math.abs(d-e[0])*s+o,N=(e[3]-e[1])*s,v=(e[2]-e[0])*s):(b=Math.abs(d-e[0])*s+i,g=Math.abs(u-e[1])*s+o,N=(e[2]-e[0])*s,v=(e[3]-e[1])*s),this.transform=[h*s,f*s,m*s,p*s,b-h*s*d-m*s*u,g-f*s*d-p*s*u],this.width=N,this.height=v}get rawDims(){const e=this.viewBox;return Ee(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new Ly({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){const s=[e,t];return he.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];he.applyTransform(t,this.transform);const s=[e[2],e[3]];return he.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return he.applyInverseTransform(s,this.transform),s}}class Vw extends Lu{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Fy(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function Ww(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function SF(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function NF(n,e="document.pdf"){if(typeof n!="string")return e;if(Fy(n))return Ne('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const r=l=>{try{let d=decodeURIComponent(l);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:l):d}catch{return l}},i=/\.pdf$/i,o=s.pathname.split("/").at(-1);if(i.test(o))return r(o);if(s.searchParams.size>0){const l=Array.from(s.searchParams.values()).reverse();for(const u of l)if(i.test(u))return r(u);const d=Array.from(s.searchParams.keys()).reverse();for(const u of d)if(i.test(u))return r(u)}if(s.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(d)return r(d[0])}return e}class vT{constructor(){J(this,"started",Object.create(null));J(this,"times",[])}time(e){e in this.started&&Ne(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ne(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:r,end:i}of this.times)e.push(`${s.padEnd(t)} ${i-r}ms
`);return e.join("")}}function xp(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function fr(n){n.preventDefault()}function Dt(n){n.preventDefault(),n.stopPropagation()}function Uq(n){console.log("Deprecated API usage: "+n)}var Fg;class Ag{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;c(this,Fg)||C(this,Fg,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=c(this,Fg).exec(e);if(!t)return null;const s=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,u==="-"?(o+=h,l+=f):u==="+"&&(o-=h,l-=f),new Date(Date.UTC(s,r,i,o,l,d))}}Fg=new WeakMap,A(Ag,Fg);function jF(n,{scale:e=1,rotation:t=0}){const{width:s,height:r}=n.attributes.style,i=[0,0,parseInt(s),parseInt(r)];return new Ly({viewBox:i,userUnit:1,scale:e,rotation:t})}function Km(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ne(`Not a valid color format: "${n}"`),[0,0,0])}function Hq(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,Km(s))}e.remove()}function Mt(n){const{a:e,b:t,c:s,d:r,e:i,f:o}=n.getTransform();return[e,t,s,r,i,o]}function ki(n){const{a:e,b:t,c:s,d:r,e:i,f:o}=n.getTransform().invertSelf();return[e,t,s,r,i,o]}function Cc(n,e,t=!1,s=!0){if(e instanceof Ly){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:o}=n,l=Sn.isCSSRoundSupported,d=`var(--total-scale-factor) * ${r}px`,u=`var(--total-scale-factor) * ${i}px`,h=l?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,f=l?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(o.width=h,o.height=f):(o.width=f,o.height=h)}s&&n.setAttribute("data-main-rotation",e.rotation)}class Si{constructor(){const{pixelRatio:e}=Si;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,r,i=-1){let o=1/0,l=1/0,d=1/0;s=Si.capPixels(s,i),s>0&&(o=Math.sqrt(s/(e*t))),r!==-1&&(l=r/e,d=r/t);const u=Math.min(o,l,d);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const vb=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Vq{static get isDarkMode(){var e;return Ee(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class CF{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:s}=window.getComputedStyle(e);return e.remove(),Ee(this,"commentForegroundColor",Km(s))}}function AF(n,e,t,s){s=Math.min(Math.max(s??1,0),1);const r=255*(1-s);return n=Math.round(n*s+r),e=Math.round(e*s+r),t=Math.round(t*s+r),[n,e,t]}function bT(n,e){const t=n[0]/255,s=n[1]/255,r=n[2]/255,i=Math.max(t,s,r),o=Math.min(t,s,r),l=(i+o)/2;if(i===o)e[0]=e[1]=0;else{const d=i-o;switch(e[1]=l<.5?d/(i+o):d/(2-i-o),i){case t:e[0]=((s-r)/d+(s<r?6:0))*60;break;case s:e[0]=((r-t)/d+2)*60;break;case r:e[0]=((t-s)/d+4)*60;break}}e[2]=l}function LN(n,e){const t=n[0],s=n[1],r=n[2],i=(1-Math.abs(2*r-1))*s,o=i*(1-Math.abs(t/60%2-1)),l=r-i/2;switch(Math.floor(t/60)){case 0:e[0]=i+l,e[1]=o+l,e[2]=l;break;case 1:e[0]=o+l,e[1]=i+l,e[2]=l;break;case 2:e[0]=l,e[1]=i+l,e[2]=o+l;break;case 3:e[0]=l,e[1]=o+l,e[2]=i+l;break;case 4:e[0]=o+l,e[1]=l,e[2]=i+l;break;case 5:case 6:e[0]=i+l,e[1]=l,e[2]=o+l;break}}function wT(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function ST(n,e,t){LN(n,t),t.map(wT);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];LN(e,t),t.map(wT);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];return s>r?(s+.05)/(r+.05):(r+.05)/(s+.05)}const NT=new Map;function EF(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let s=NT.get(t);if(s)return s;const r=new Float32Array(9),i=r.subarray(0,3),o=r.subarray(3,6);bT(n,o);const l=r.subarray(6,9);bT(e,l);const d=l[2]<.5,u=d?12:4.5;if(o[2]=d?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),ST(o,l,i)<u){let h,f;d?(h=o[2],f=1):(h=0,f=o[2]);const m=.005;for(;f-h>m;){const p=o[2]=(h+f)/2;d===ST(o,l,i)<u?h=p:f=p}o[2]=d?f:h}return LN(o,i),s=he.makeHexColor(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)),NT.set(t,s),s}function yE({html:n,dir:e,className:t},s){const r=document.createDocumentFragment();if(typeof n=="string"){const i=document.createElement("p");i.dir=e||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let l=0,d=o.length;l<d;++l){const u=o[l];i.append(document.createTextNode(u)),l<d-1&&i.append(document.createElement("br"))}r.append(i)}else xE.render({xfaHtml:n,div:r,intent:"richText"});r.firstChild.classList.add("richText",t),s.append(r)}var cl,dl,wr,Sr,Og,ul,Vh,Wh,Bg,Ib,kF,In,TF,PF,qu,yp;const Pa=class Pa{constructor(e){A(this,In);A(this,cl,null);A(this,dl,null);A(this,wr);A(this,Sr,null);A(this,Og,null);A(this,ul,null);A(this,Vh,null);A(this,Wh,null);C(this,wr,e),c(Pa,Bg)||C(Pa,Bg,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=C(this,cl,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=c(this,wr)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",fr,{signal:t}),e.addEventListener("pointerdown",k(Pa,Ib,kF),{signal:t}));const s=C(this,Sr,document.createElement("div"));s.className="buttons",e.append(s);const r=c(this,wr).toolbarPosition;if(r){const{style:i}=e,o=c(this,wr)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return c(this,cl)}hide(){var e;c(this,cl).classList.add("hidden"),(e=c(this,dl))==null||e.hideDropdown()}show(){var e,t;c(this,cl).classList.remove("hidden"),(e=c(this,Og))==null||e.shown(),(t=c(this,ul))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=c(this,wr),s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",c(Pa,Bg)[e]),k(this,In,qu).call(this,s)&&s.addEventListener("click",r=>{t.delete()},{signal:t._signal}),c(this,Sr).append(s)}async addAltText(e){const t=await e.render();k(this,In,qu).call(this,t),c(this,Sr).append(t,c(this,In,yp)),C(this,Og,e)}addComment(e,t=null){if(c(this,ul))return;const s=e.renderForToolbar();if(!s)return;k(this,In,qu).call(this,s);const r=C(this,Vh,c(this,In,yp));t?(c(this,Sr).insertBefore(s,t),c(this,Sr).insertBefore(r,t)):c(this,Sr).append(s,r),C(this,ul,e),e.toolbar=this}addColorPicker(e){if(c(this,dl))return;C(this,dl,e);const t=e.renderButton();k(this,In,qu).call(this,t),c(this,Sr).append(t,c(this,In,yp))}async addEditSignatureButton(e){const t=C(this,Wh,await e.renderEditButton(c(this,wr)));k(this,In,qu).call(this,t),c(this,Sr).append(t,c(this,In,yp))}removeButton(e){var t,s;switch(e){case"comment":(t=c(this,ul))==null||t.removeToolbarCommentButton(),C(this,ul,null),(s=c(this,Vh))==null||s.remove(),C(this,Vh,null);break}}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,s){const r=c(this,Sr).querySelector(s);r&&e==="comment"&&this.addComment(t,r)}updateEditSignatureButton(e){c(this,Wh)&&(c(this,Wh).title=e)}remove(){var e;c(this,cl).remove(),(e=c(this,dl))==null||e.destroy(),C(this,dl,null)}};cl=new WeakMap,dl=new WeakMap,wr=new WeakMap,Sr=new WeakMap,Og=new WeakMap,ul=new WeakMap,Vh=new WeakMap,Wh=new WeakMap,Bg=new WeakMap,Ib=new WeakSet,kF=function(e){e.stopPropagation()},In=new WeakSet,TF=function(e){c(this,wr)._focusEventsAllowed=!1,Dt(e)},PF=function(e){c(this,wr)._focusEventsAllowed=!0,Dt(e)},qu=function(e){const t=c(this,wr)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",k(this,In,TF).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",k(this,In,PF).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",fr,{signal:t}),!0)},yp=function(){const e=document.createElement("div");return e.className="divider",e},A(Pa,Ib),A(Pa,Bg,null);let FN=Pa;var $g,nd,Da,Lo,_F,MF,ON;class Wq{constructor(e){A(this,Lo);A(this,$g,null);A(this,nd,null);A(this,Da);C(this,Da,e)}show(e,t,s){const[r,i]=k(this,Lo,MF).call(this,t,s),{style:o}=c(this,nd)||C(this,nd,k(this,Lo,_F).call(this));e.append(c(this,nd)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,nd).remove()}}$g=new WeakMap,nd=new WeakMap,Da=new WeakMap,Lo=new WeakSet,_F=function(){const e=C(this,nd,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=c(this,Da)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",fr,{signal:t});const s=C(this,$g,document.createElement("div"));return s.className="buttons",e.append(s),c(this,Da).hasCommentManager()&&k(this,Lo,ON).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{c(this,Da).commentSelection("floating_button")}),k(this,Lo,ON).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{c(this,Da).highlightSelection("floating_button")}),e},MF=function(e,t){let s=0,r=0;for(const i of e){const o=i.y+i.height;if(o<s)continue;const l=i.x+(t?i.width:0);if(o>s){r=l,s=o;continue}t?l>r&&(r=l):l<r&&(r=l)}return[t?1-r:r,s]},ON=function(e,t,s,r){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",t);const o=document.createElement("span");i.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",s);const l=c(this,Da)._signal;l instanceof AbortSignal&&!l.aborted&&(i.addEventListener("contextmenu",fr,{signal:l}),i.addEventListener("click",r,{signal:l})),c(this,$g).append(i)};function RF(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}var Lb;class Gq{constructor(){A(this,Lb,0)}get id(){return`${Ng}${Ot(this,Lb)._++}`}}Lb=new WeakMap;var Gh,zg,Wn,qh,t0;const VE=class VE{constructor(){A(this,qh);A(this,Gh,pE());A(this,zg,0);A(this,Wn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Ee(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:s,size:r,type:i}=e;return k(this,qh,t0).call(this,`${t}_${s}_${r}_${i}`,e)}async getFromUrl(e){return k(this,qh,t0).call(this,e,e)}async getFromBlob(e,t){const s=await t;return k(this,qh,t0).call(this,e,s)}async getFromId(e){c(this,Wn)||C(this,Wn,new Map);const t=c(this,Wn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){c(this,Wn)||C(this,Wn,new Map);let s=c(this,Wn).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${c(this,Gh)}_${Ot(this,zg)._++}`,refCounter:1,isSvg:!1},c(this,Wn).set(e,s),c(this,Wn).set(s.id,s),s}getSvgUrl(e){const t=c(this,Wn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;c(this,Wn)||C(this,Wn,new Map);const t=c(this,Wn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=i.convertToBlob()}(r=s.close)==null||r.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${c(this,Gh)}_`)}};Gh=new WeakMap,zg=new WeakMap,Wn=new WeakMap,qh=new WeakSet,t0=async function(e,t){c(this,Wn)||C(this,Wn,new Map);let s=c(this,Wn).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${c(this,Gh)}_${Ot(this,zg)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(s.url=t,r=await qm(t,"blob")):t instanceof File?r=s.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const i=VE._isSVGFittingCanvas,o=new FileReader,l=new Image,d=new Promise((u,h)=>{l.onload=()=>{s.bitmap=l,s.isSvg=!0,u()},o.onload=async()=>{const f=s.svgUrl=o.result;l.src=await i?`${f}#svgView(preserveAspectRatio(none))`:f},l.onerror=o.onerror=h});o.readAsDataURL(r),await d}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){Ne(r),s=null}return c(this,Wn).set(e,s),s&&c(this,Wn).set(s.id,s),s};let BN=VE;var Yt,hl,Ug,_t;class qq{constructor(e=128){A(this,Yt,[]);A(this,hl,!1);A(this,Ug);A(this,_t,-1);C(this,Ug,e)}add({cmd:e,undo:t,post:s,mustExec:r,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(r&&e(),c(this,hl))return;const d={cmd:e,undo:t,post:s,type:i};if(c(this,_t)===-1){c(this,Yt).length>0&&(c(this,Yt).length=0),C(this,_t,0),c(this,Yt).push(d);return}if(o&&c(this,Yt)[c(this,_t)].type===i){l&&(d.undo=c(this,Yt)[c(this,_t)].undo),c(this,Yt)[c(this,_t)]=d;return}const u=c(this,_t)+1;u===c(this,Ug)?c(this,Yt).splice(0,1):(C(this,_t,u),u<c(this,Yt).length&&c(this,Yt).splice(u)),c(this,Yt).push(d)}undo(){if(c(this,_t)===-1)return;C(this,hl,!0);const{undo:e,post:t}=c(this,Yt)[c(this,_t)];e(),t==null||t(),C(this,hl,!1),C(this,_t,c(this,_t)-1)}redo(){if(c(this,_t)<c(this,Yt).length-1){C(this,_t,c(this,_t)+1),C(this,hl,!0);const{cmd:e,post:t}=c(this,Yt)[c(this,_t)];e(),t==null||t(),C(this,hl,!1)}}hasSomethingToUndo(){return c(this,_t)!==-1}hasSomethingToRedo(){return c(this,_t)<c(this,Yt).length-1}cleanType(e){if(c(this,_t)!==-1){for(let t=c(this,_t);t>=0;t--)if(c(this,Yt)[t].type!==e){c(this,Yt).splice(t+1,c(this,_t)-t),C(this,_t,t);return}c(this,Yt).length=0,C(this,_t,-1)}}destroy(){C(this,Yt,null)}}Yt=new WeakMap,hl=new WeakMap,Ug=new WeakMap,_t=new WeakMap;var Fb,DF;class Oy{constructor(e){A(this,Fb);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Sn.platform;for(const[s,r,i={}]of e)for(const o of s){const l=o.startsWith("mac+");t&&l?(this.callbacks.set(o.slice(4),{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!l&&(this.callbacks.set(o,{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(k(this,Fb,DF).call(this,t));if(!s)return;const{callback:r,options:{bubbles:i=!1,args:o=[],checker:l=null}}=s;l&&!l(e,t)||(r.bind(e,...o,t)(),i||Dt(t))}}Fb=new WeakSet,DF=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Ob=class Ob{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Hq(e),Ee(this,"_colors",e)}convert(e){const t=Km(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,r]of this._colors)if(r.every((i,o)=>i===t[o]))return Ob._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?he.makeHexColor(...t):e}};J(Ob,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let $N=Ob;var Kh,Fs,Yh,$t,on,Xh,Nr,Qh,jr,Gn,fl,ml,Jh,pl,Fi,Cr,sd,Hg,Vg,Zh,Wg,Oi,gl,ef,xl,Bi,Bb,yl,tf,Gg,vl,rd,nf,bl,qg,en,Ye,Ia,wl,Sl,Kg,sf,Yg,Nl,$i,La,Xg,Qg,Ar,ie,n0,zN,IF,LF,vp,FF,OF,BF,UN,$F,HN,VN,zF,ts,Ea,UF,HF,WN,VF,bp,GN;const fh=class fh{constructor(e,t,s,r,i,o,l,d,u,h,f,m,p,b,g,N){A(this,ie);A(this,Kh,new AbortController);A(this,Fs,null);A(this,Yh,null);A(this,$t,new Map);A(this,on,new Map);A(this,Xh,null);A(this,Nr,null);A(this,Qh,null);A(this,jr,new qq);A(this,Gn,null);A(this,fl,null);A(this,ml,null);A(this,Jh,0);A(this,pl,new Set);A(this,Fi,null);A(this,Cr,null);A(this,sd,new Set);J(this,"_editorUndoBar",null);A(this,Hg,!1);A(this,Vg,!1);A(this,Zh,!1);A(this,Wg,null);A(this,Oi,null);A(this,gl,null);A(this,ef,null);A(this,xl,!1);A(this,Bi,null);A(this,Bb,new Gq);A(this,yl,!1);A(this,tf,!1);A(this,Gg,!1);A(this,vl,null);A(this,rd,null);A(this,nf,null);A(this,bl,null);A(this,qg,null);A(this,en,Se.NONE);A(this,Ye,new Set);A(this,Ia,null);A(this,wl,null);A(this,Sl,null);A(this,Kg,null);A(this,sf,null);A(this,Yg,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,Nl,[0,0]);A(this,$i,null);A(this,La,null);A(this,Xg,null);A(this,Qg,null);A(this,Ar,null);const v=this._signal=c(this,Kh).signal;C(this,La,e),C(this,Xg,t),C(this,Qg,s),C(this,Xh,r),C(this,Gn,i),C(this,wl,o),C(this,sf,d),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:v}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),l._on("setpreference",this.onSetPreference.bind(this),{signal:v}),l._on("switchannotationeditorparams",y=>this.updateParams(y.type,y.value),{signal:v}),window.addEventListener("pointerdown",()=>{C(this,tf,!0)},{capture:!0,signal:v}),window.addEventListener("pointerup",()=>{C(this,tf,!1)},{capture:!0,signal:v}),k(this,ie,FF).call(this),k(this,ie,zF).call(this),k(this,ie,UN).call(this),C(this,Nr,d.annotationStorage),C(this,Wg,d.filterFactory),C(this,Sl,u),C(this,ef,h||null),C(this,Hg,f),C(this,Vg,m),C(this,Zh,p),C(this,qg,b||null),this.viewParameters={realScale:Io.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=N!==!1,i==null||i.setSidebarUiManager(this)}static get _keyboardManager(){const e=fh.prototype,t=o=>c(o,La).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:d}=l;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return Ee(this,"_keyboardManager",new Oy([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&c(o,La).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&c(o,La).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,s,r,i,o,l,d,u;(e=c(this,Ar))==null||e.resolve(),C(this,Ar,null),(t=c(this,Kh))==null||t.abort(),C(this,Kh,null),this._signal=null;for(const h of c(this,on).values())h.destroy();c(this,on).clear(),c(this,$t).clear(),c(this,sd).clear(),(s=c(this,bl))==null||s.clear(),C(this,Fs,null),c(this,Ye).clear(),c(this,jr).destroy(),(r=c(this,Xh))==null||r.destroy(),(i=c(this,Gn))==null||i.destroy(),(o=c(this,wl))==null||o.destroy(),(l=c(this,Bi))==null||l.hide(),C(this,Bi,null),(d=c(this,nf))==null||d.destroy(),C(this,nf,null),C(this,Yh,null),c(this,Oi)&&(clearTimeout(c(this,Oi)),C(this,Oi,null)),c(this,$i)&&(clearTimeout(c(this,$i)),C(this,$i,null)),(u=this._editorUndoBar)==null||u.destroy(),C(this,sf,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return c(this,qg)}get useNewAltTextFlow(){return c(this,Vg)}get useNewAltTextWhenAddingImage(){return c(this,Zh)}get hcmFilter(){return Ee(this,"hcmFilter",c(this,Sl)?c(this,Wg).addHCMFilter(c(this,Sl).foreground,c(this,Sl).background):"none")}get direction(){return Ee(this,"direction",getComputedStyle(c(this,La)).direction)}get _highlightColors(){return Ee(this,"_highlightColors",c(this,ef)?new Map(c(this,ef).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Ee(this,"highlightColors",null);const t=new Map,s=!!c(this,Sl);for(const[r,i]of e){const o=r.endsWith("_HCM");if(s&&o){t.set(r.replace("_HCM",""),i);continue}!s&&!o&&t.set(r,i)}return Ee(this,"highlightColors",t)}get highlightColorNames(){return Ee(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),C(this,ml,e)}setMainHighlightColorPicker(e){C(this,nf,e)}editAltText(e,t=!1){var s;(s=c(this,Xh))==null||s.editAltText(this,e,t)}hasCommentManager(){return!!c(this,Gn)}editComment(e,t,s,r){var i;(i=c(this,Gn))==null||i.showDialog(this,e,t,s,r)}selectComment(e,t){const s=c(this,on).get(e),r=s==null?void 0:s.getEditorByUID(t);r==null||r.toggleComment(!0,!0)}updateComment(e){var t;(t=c(this,Gn))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=c(this,Gn))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=c(this,Gn))==null||t.removeComments([e.uid])}toggleComment(e,t,s=void 0){var r;(r=c(this,Gn))==null||r.toggleCommentPopup(e,t,s)}makeCommentColor(e,t){var s;return e&&((s=c(this,Gn))==null?void 0:s.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=c(this,Gn))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(c(this,on).has(e-1))return;const{resolve:t,promise:s}=Promise.withResolvers(),r=i=>{i.pageNumber===e&&(this._eventBus._off("editorsrendered",r),t())};this._eventBus.on("editorsrendered",r),await s}getSignature(e){var t;(t=c(this,wl))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return c(this,wl)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":C(this,Zh,t);break}}onPageChanging({pageNumber:e}){C(this,Jh,e-1)}focusMainContainer(){c(this,La).focus()}findParent(e,t){for(const s of c(this,on).values()){const{x:r,y:i,width:o,height:l}=s.div.getBoundingClientRect();if(e>=r&&e<=r+o&&t>=i&&t<=i+l)return s}return null}disableUserSelect(e=!1){c(this,Xg).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(this,sd).add(e)}removeShouldRescale(e){c(this,sd).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Io.PDF_TO_CSS_UNITS;for(const s of c(this,sd))s.onScaleChanging();(t=c(this,ml))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:l}=s,d=s.toString(),h=k(this,ie,n0).call(this,s).closest(".textLayer"),f=this.getSelectionBoxes(h);if(!f)return;s.empty();const m=k(this,ie,zN).call(this,h),p=c(this,en)===Se.NONE,b=()=>{const g=m==null?void 0:m.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:f,anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:l,text:d});p&&this.showAllEditors("highlight",!0,!0),t&&(g==null||g.editComment())};if(p){this.switchToMode(Se.HIGHLIGHT,b);return}b()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!c(this,Nr))return null;const t=`${Ng}${e}`,s=c(this,Nr).getRawValue(t);return s&&c(this,Nr).remove(t),s}addToAnnotationStorage(e){!e.isEmpty()&&c(this,Nr)&&!c(this,Nr).has(e.id)&&c(this,Nr).setValue(e.id,e)}a11yAlert(e,t=null){const s=c(this,Qg);s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,c(this,xl)&&(C(this,xl,!1),k(this,ie,vp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of c(this,Ye))if(t.div.contains(e)){C(this,rd,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!c(this,rd))return;const[e,t]=c(this,rd);C(this,rd,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){k(this,ie,UN).call(this),k(this,ie,HN).call(this)}removeEditListeners(){k(this,ie,$F).call(this),k(this,ie,VN).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of c(this,Cr))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of c(this,Cr))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=c(this,Fs))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of c(this,Ye)){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of c(this,Cr))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(i){Ne(`paste: "${i.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const d of s){const u=await r.deserialize(d);if(!u)return;i.push(u)}const o=()=>{for(const d of i)k(this,ie,WN).call(this,d);k(this,ie,GN).call(this,i)},l=()=>{for(const d of i)d.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(i){Ne(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,en)!==Se.NONE&&!this.isEditorHandlingKeyboard&&fh._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,xl)&&(C(this,xl,!1),k(this,ie,vp).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(k(this,ie,OF).call(this),k(this,ie,HN).call(this),k(this,ie,ts).call(this,{isEditing:c(this,en)!==Se.NONE,isEmpty:k(this,ie,bp).call(this),hasSomethingToUndo:c(this,jr).hasSomethingToUndo(),hasSomethingToRedo:c(this,jr).hasSomethingToRedo(),hasSelectedEditor:!1})):(k(this,ie,BF).call(this),k(this,ie,VN).call(this),k(this,ie,ts).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(this,Cr)){C(this,Cr,e);for(const t of c(this,Cr))k(this,ie,Ea).call(this,t.defaultPropertiesToUpdate)}}getId(){return c(this,Bb).id}get currentLayer(){return c(this,on).get(c(this,Jh))}getLayer(e){return c(this,on).get(e)}get currentPageIndex(){return c(this,Jh)}addLayer(e){c(this,on).set(e.pageIndex,e),c(this,yl)?e.enable():e.disable()}removeLayer(e){c(this,on).delete(e.pageIndex)}async updateMode(e,t=null,s=!1,r=!1,i=!1){var o,l,d,u,h,f;if(c(this,en)!==e&&!(c(this,Ar)&&(await c(this,Ar).promise,!c(this,Ar)))){if(C(this,Ar,Promise.withResolvers()),(o=c(this,ml))==null||o.commitOrRemove(),c(this,en)===Se.POPUP&&((l=c(this,Gn))==null||l.hideSidebar()),(d=c(this,Gn))==null||d.destroyPopup(),C(this,en,e),e===Se.NONE){this.setEditingState(!1),k(this,ie,HF).call(this);for(const m of c(this,$t).values())m.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),c(this,Ar).resolve();return}for(const m of c(this,$t).values())m.addStandaloneCommentButton();e===Se.SIGNATURE&&await((h=c(this,wl))==null?void 0:h.loadSignatures()),this.setEditingState(!0),await k(this,ie,UF).call(this),this.unselectAll();for(const m of c(this,on).values())m.updateMode(e);if(e===Se.POPUP){c(this,Yh)||C(this,Yh,await c(this,sf).getAnnotationsByType(new Set(c(this,Cr).map(b=>b._editorType))));const m=new Set,p=[];for(const b of c(this,$t).values()){const{annotationElementId:g,hasComment:N,deleted:v}=b;g&&m.add(g),N&&!v&&p.push(b.getData())}for(const b of c(this,Yh)){const{id:g,popupRef:N,contentsObj:v}=b;N&&(v!=null&&v.str)&&!m.has(g)&&!c(this,pl).has(g)&&p.push(b)}(f=c(this,Gn))==null||f.showSidebar(p)}if(!t){s&&this.addNewEditorFromKeyboard(),c(this,Ar).resolve();return}for(const m of c(this,$t).values())m.uid===t?(this.setSelected(m),i?m.editComment():r?m.enterInEditMode():m.focus()):m.unselect();c(this,Ar).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==c(this,en)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(c(this,Cr)){switch(e){case Fe.CREATE:this.currentLayer.addNewEditor(t);return;case Fe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,Kg)||C(this,Kg,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const s of c(this,Ye))s.updateParams(e,t);else for(const s of c(this,Cr))s.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var i;for(const o of c(this,$t).values())o.editorType===e&&o.show(t);(((i=c(this,Kg))==null?void 0:i.get(Fe.HIGHLIGHT_SHOW_ALL))??!0)!==t&&k(this,ie,Ea).call(this,[[Fe.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(c(this,Gg)!==e){C(this,Gg,e);for(const t of c(this,on).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of c(this,$t).values())t.pageIndex===e&&(yield t)}getEditor(e){return c(this,$t).get(e)}addEditor(e){c(this,$t).set(e.id,e)}removeEditor(e){var t,s;e.div.contains(document.activeElement)&&(c(this,Oi)&&clearTimeout(c(this,Oi)),C(this,Oi,setTimeout(()=>{this.focusMainContainer(),C(this,Oi,null)},0))),c(this,$t).delete(e.id),e.annotationElementId&&((t=c(this,bl))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!c(this,pl).has(e.annotationElementId))&&((s=c(this,Nr))==null||s.remove(e.id))}addDeletedAnnotationElement(e){c(this,pl).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(this,pl).has(e)}removeDeletedAnnotationElement(e){c(this,pl).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(this,Fs)!==e&&(C(this,Fs,e),e&&k(this,ie,Ea).call(this,e.propertiesToUpdate))}updateUI(e){c(this,ie,VF)===e&&k(this,ie,Ea).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){k(this,ie,Ea).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(c(this,Ye).has(e)){c(this,Ye).delete(e),e.unselect(),k(this,ie,ts).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,Ye).add(e),e.select(),k(this,ie,Ea).call(this,e.propertiesToUpdate),k(this,ie,ts).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=c(this,ml))==null||t.commitOrRemove();for(const s of c(this,Ye))s!==e&&s.unselect();c(this,Ye).clear(),c(this,Ye).add(e),e.select(),k(this,ie,Ea).call(this,e.propertiesToUpdate),k(this,ie,ts).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(this,Ye).has(e)}get firstSelectedEditor(){return c(this,Ye).values().next().value}unselect(e){e.unselect(),c(this,Ye).delete(e),k(this,ie,ts).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,Ye).size!==0}get isEnterHandled(){return c(this,Ye).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;c(this,jr).undo(),k(this,ie,ts).call(this,{hasSomethingToUndo:c(this,jr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:k(this,ie,bp).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){c(this,jr).redo(),k(this,ie,ts).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,jr).hasSomethingToRedo(),isEmpty:k(this,ie,bp).call(this)})}addCommands(e){c(this,jr).add(e),k(this,ie,ts).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:k(this,ie,bp).call(this)})}cleanUndoStack(e){c(this,jr).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...c(this,Ye)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(r,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},r=()=>{for(const o of t)k(this,ie,WN).call(this,o)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=c(this,Fs))==null||e.commitOrRemove()}hasSomethingToControl(){return c(this,Fs)||this.hasSelection}selectAll(){for(const e of c(this,Ye))e.commit();k(this,ie,GN).call(this,c(this,$t).values())}unselectAll(){var e;if(!(c(this,Fs)&&(c(this,Fs).commitOrRemove(),c(this,en)!==Se.NONE))&&!((e=c(this,ml))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of c(this,Ye))t.unselect();c(this,Ye).clear(),k(this,ie,ts).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;c(this,Nl)[0]+=e,c(this,Nl)[1]+=t;const[r,i]=c(this,Nl),o=[...c(this,Ye)],l=1e3;c(this,$i)&&clearTimeout(c(this,$i)),C(this,$i,setTimeout(()=>{C(this,$i,null),c(this,Nl)[0]=c(this,Nl)[1]=0,this.addCommands({cmd:()=>{for(const d of o)c(this,$t).has(d.id)&&(d.translateInPage(r,i),d.translationDone())},undo:()=>{for(const d of o)c(this,$t).has(d.id)&&(d.translateInPage(-r,-i),d.translationDone())},mustExec:!1})},l));for(const d of o)d.translateInPage(e,t),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),C(this,Fi,new Map);for(const e of c(this,Ye))c(this,Fi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,Fi))return!1;this.disableUserSelect(!1);const e=c(this,Fi);C(this,Fi,null);let t=!1;for(const[{x:r,y:i,pageIndex:o},l]of e)l.newX=r,l.newY=i,l.newPageIndex=o,t||(t=r!==l.savedX||i!==l.savedY||o!==l.savedPageIndex);if(!t)return!1;const s=(r,i,o,l)=>{if(c(this,$t).has(r.id)){const d=c(this,on).get(l);d?r._setParentAndPosition(d,i,o):(r.pageIndex=l,r.x=i,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:o,newPageIndex:l}]of e)s(r,i,o,l)},undo:()=>{for(const[r,{savedX:i,savedY:o,savedPageIndex:l}]of e)s(r,i,o,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(c(this,Fi))for(const s of c(this,Fi).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||c(this,Ye).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(this,Fs)===e}getActive(){return c(this,Fs)}getMode(){return c(this,en)}isEditingMode(){return c(this,en)!==Se.NONE}get imageManager(){return Ee(this,"imageManager",new BN)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:s,y:r,width:i,height:o}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(u,h,f,m)=>({x:(h-r)/o,y:1-(u+f-s)/i,width:m/o,height:f/i});break;case"180":l=(u,h,f,m)=>({x:1-(u+f-s)/i,y:1-(h+m-r)/o,width:f/i,height:m/o});break;case"270":l=(u,h,f,m)=>({x:1-(h+m-r)/o,y:(u-s)/i,width:m/o,height:f/i});break;default:l=(u,h,f,m)=>({x:(u-s)/i,y:(h-r)/o,width:f/i,height:m/o});break}const d=[];for(let u=0,h=t.rangeCount;u<h;u++){const f=t.getRangeAt(u);if(!f.collapsed)for(const{x:m,y:p,width:b,height:g}of f.getClientRects())b===0||g===0||d.push(l(m,p,b,g))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(c(this,Qh)||C(this,Qh,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=c(this,Qh))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=c(this,Qh))==null?void 0:r.get(e.data.id);if(!t)return;const s=c(this,Nr).getRawValue(t);s&&(c(this,en)===Se.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){var i;const r=(i=c(this,bl))==null?void 0:i.get(e);r&&(r.setCanvas(t,s),c(this,bl).delete(e))}addMissingCanvas(e,t){(c(this,bl)||C(this,bl,new Map)).set(e,t)}};Kh=new WeakMap,Fs=new WeakMap,Yh=new WeakMap,$t=new WeakMap,on=new WeakMap,Xh=new WeakMap,Nr=new WeakMap,Qh=new WeakMap,jr=new WeakMap,Gn=new WeakMap,fl=new WeakMap,ml=new WeakMap,Jh=new WeakMap,pl=new WeakMap,Fi=new WeakMap,Cr=new WeakMap,sd=new WeakMap,Hg=new WeakMap,Vg=new WeakMap,Zh=new WeakMap,Wg=new WeakMap,Oi=new WeakMap,gl=new WeakMap,ef=new WeakMap,xl=new WeakMap,Bi=new WeakMap,Bb=new WeakMap,yl=new WeakMap,tf=new WeakMap,Gg=new WeakMap,vl=new WeakMap,rd=new WeakMap,nf=new WeakMap,bl=new WeakMap,qg=new WeakMap,en=new WeakMap,Ye=new WeakMap,Ia=new WeakMap,wl=new WeakMap,Sl=new WeakMap,Kg=new WeakMap,sf=new WeakMap,Yg=new WeakMap,Nl=new WeakMap,$i=new WeakMap,La=new WeakMap,Xg=new WeakMap,Qg=new WeakMap,Ar=new WeakMap,ie=new WeakSet,n0=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},zN=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of c(this,on).values())if(s.hasTextLayer(e))return s;return null},IF=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=k(this,ie,n0).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(c(this,Bi)||C(this,Bi,new Wq(this)),c(this,Bi).show(s,r,this.direction==="ltr"))},LF=function(){var i,o,l;const e=document.getSelection();if(!e||e.isCollapsed){c(this,Ia)&&((i=c(this,Bi))==null||i.hide(),C(this,Ia,null),k(this,ie,ts).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===c(this,Ia))return;const r=k(this,ie,n0).call(this,e).closest(".textLayer");if(!r){c(this,Ia)&&((o=c(this,Bi))==null||o.hide(),C(this,Ia,null),k(this,ie,ts).call(this,{hasSelectedText:!1}));return}if((l=c(this,Bi))==null||l.hide(),C(this,Ia,t),k(this,ie,ts).call(this,{hasSelectedText:!0}),!(c(this,en)!==Se.HIGHLIGHT&&c(this,en)!==Se.NONE)&&(c(this,en)===Se.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),C(this,xl,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=c(this,en)===Se.HIGHLIGHT?k(this,ie,zN).call(this,r):null;if(d==null||d.toggleDrawing(),c(this,tf)){const u=new AbortController,h=this.combinedSignal(u),f=m=>{m.type==="pointerup"&&m.button!==0||(u.abort(),d==null||d.toggleDrawing(!0),m.type==="pointerup"&&k(this,ie,vp).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:h}),window.addEventListener("blur",f,{signal:h})}else d==null||d.toggleDrawing(!0),k(this,ie,vp).call(this,"main_toolbar")}},vp=function(e=""){c(this,en)===Se.HIGHLIGHT?this.highlightSelection(e):c(this,Hg)&&k(this,ie,IF).call(this)},FF=function(){document.addEventListener("selectionchange",k(this,ie,LF).bind(this),{signal:this._signal})},OF=function(){if(c(this,gl))return;C(this,gl,new AbortController);const e=this.combinedSignal(c(this,gl));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},BF=function(){var e;(e=c(this,gl))==null||e.abort(),C(this,gl,null)},UN=function(){if(c(this,vl))return;C(this,vl,new AbortController);const e=this.combinedSignal(c(this,vl));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},$F=function(){var e;(e=c(this,vl))==null||e.abort(),C(this,vl,null)},HN=function(){if(c(this,fl))return;C(this,fl,new AbortController);const e=this.combinedSignal(c(this,fl));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},VN=function(){var e;(e=c(this,fl))==null||e.abort(),C(this,fl,null)},zF=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},ts=function(e){Object.entries(e).some(([s,r])=>c(this,Yg)[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,Yg),e)}),c(this,en)===Se.HIGHLIGHT&&e.hasSelectedEditor===!1&&k(this,ie,Ea).call(this,[[Fe.HIGHLIGHT_FREE,!0]]))},Ea=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},UF=async function(){if(!c(this,yl)){C(this,yl,!0);const e=[];for(const t of c(this,on).values())e.push(t.enable());await Promise.all(e);for(const t of c(this,$t).values())t.enable()}},HF=function(){if(this.unselectAll(),c(this,yl)){C(this,yl,!1);for(const e of c(this,on).values())e.disable();for(const e of c(this,$t).values())e.disable()}},WN=function(e){const t=c(this,on).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},VF=function(){let e=null;for(e of c(this,Ye));return e},bp=function(){if(c(this,$t).size===0)return!0;if(c(this,$t).size===1)for(const e of c(this,$t).values())return e.isEmpty();return!1},GN=function(e){for(const t of c(this,Ye))t.unselect();c(this,Ye).clear();for(const t of e)t.isEmpty()||(c(this,Ye).add(t),t.select());k(this,ie,ts).call(this,{hasSelectedEditor:this.hasSelection})},J(fh,"TRANSLATE_SMALL",1),J(fh,"TRANSLATE_BIG",10);let Ac=fh;var fn,zi,Zr,rf,Ui,Os,af,Hi,bs,Fa,id,Vi,jl,mi,wp,s0;const ns=class ns{constructor(e){A(this,mi);A(this,fn,null);A(this,zi,!1);A(this,Zr,null);A(this,rf,null);A(this,Ui,null);A(this,Os,null);A(this,af,!1);A(this,Hi,null);A(this,bs,null);A(this,Fa,null);A(this,id,null);A(this,Vi,!1);C(this,bs,e),C(this,Vi,e._uiManager.useNewAltTextFlow),c(ns,jl)||C(ns,jl,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){ns._l10n??(ns._l10n=e)}async render(){const e=C(this,Zr,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=C(this,rf,document.createElement("span"));e.append(t),c(this,Vi)?(e.classList.add("new"),e.setAttribute("data-l10n-id",c(ns,jl).missing),t.setAttribute("data-l10n-id",c(ns,jl)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=c(this,bs)._uiManager._signal;e.addEventListener("contextmenu",fr,{signal:s}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const r=i=>{i.preventDefault(),c(this,bs)._uiManager.editAltText(c(this,bs)),c(this,Vi)&&c(this,bs)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,mi,wp)}})};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(C(this,af,!0),r(i))},{signal:s}),await k(this,mi,s0).call(this),e}finish(){c(this,Zr)&&(c(this,Zr).focus({focusVisible:c(this,af)}),C(this,af,!1))}isEmpty(){return c(this,Vi)?c(this,fn)===null:!c(this,fn)&&!c(this,zi)}hasData(){return c(this,Vi)?c(this,fn)!==null||!!c(this,Fa):this.isEmpty()}get guessedText(){return c(this,Fa)}async setGuessedText(e){c(this,fn)===null&&(C(this,Fa,e),C(this,id,await ns._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),k(this,mi,s0).call(this))}toggleAltTextBadge(e=!1){var t;if(!c(this,Vi)||c(this,fn)){(t=c(this,Hi))==null||t.remove(),C(this,Hi,null);return}if(!c(this,Hi)){const s=C(this,Hi,document.createElement("div"));s.className="noAltTextBadge",c(this,bs).div.append(s)}c(this,Hi).classList.toggle("hidden",!e)}serialize(e){let t=c(this,fn);return!e&&c(this,Fa)===t&&(t=c(this,id)),{altText:t,decorative:c(this,zi),guessedText:c(this,Fa),textWithDisclaimer:c(this,id)}}get data(){return{altText:c(this,fn),decorative:c(this,zi)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:r,cancel:i=!1}){s&&(C(this,Fa,s),C(this,id,r)),!(c(this,fn)===e&&c(this,zi)===t)&&(i||(C(this,fn,e),C(this,zi,t)),k(this,mi,s0).call(this))}toggle(e=!1){c(this,Zr)&&(!e&&c(this,Os)&&(clearTimeout(c(this,Os)),C(this,Os,null)),c(this,Zr).disabled=!e)}shown(){c(this,bs)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,mi,wp)}})}destroy(){var e,t;(e=c(this,Zr))==null||e.remove(),C(this,Zr,null),C(this,rf,null),C(this,Ui,null),(t=c(this,Hi))==null||t.remove(),C(this,Hi,null)}};fn=new WeakMap,zi=new WeakMap,Zr=new WeakMap,rf=new WeakMap,Ui=new WeakMap,Os=new WeakMap,af=new WeakMap,Hi=new WeakMap,bs=new WeakMap,Fa=new WeakMap,id=new WeakMap,Vi=new WeakMap,jl=new WeakMap,mi=new WeakSet,wp=function(){return c(this,fn)&&"added"||c(this,fn)===null&&this.guessedText&&"review"||"missing"},s0=async function(){var r,i,o;const e=c(this,Zr);if(!e)return;if(c(this,Vi)){if(e.classList.toggle("done",!!c(this,fn)),e.setAttribute("data-l10n-id",c(ns,jl)[c(this,mi,wp)]),(r=c(this,rf))==null||r.setAttribute("data-l10n-id",c(ns,jl)[`${c(this,mi,wp)}-label`]),!c(this,fn)){(i=c(this,Ui))==null||i.remove();return}}else{if(!c(this,fn)&&!c(this,zi)){e.classList.remove("done"),(o=c(this,Ui))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=c(this,Ui);if(!t){C(this,Ui,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${c(this,bs).id}`;const l=100,d=c(this,bs)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(c(this,Os)),C(this,Os,null)},{once:!0}),e.addEventListener("mouseenter",()=>{C(this,Os,setTimeout(()=>{C(this,Os,null),c(this,Ui).classList.add("show"),c(this,bs)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:d}),e.addEventListener("mouseleave",()=>{var u;c(this,Os)&&(clearTimeout(c(this,Os)),C(this,Os,null)),(u=c(this,Ui))==null||u.classList.remove("show")},{signal:d})}c(this,zi)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=c(this,fn)),t.parentNode||e.append(t);const s=c(this,bs).getElementForAltText();s==null||s.setAttribute("aria-describedby",t.id)},A(ns,jl,null),J(ns,"_l10n",null);let bb=ns;var An,Er,ad,ft,Jg,od,ei,ld,cd,dd,Zg,qN;class Sv{constructor(e){A(this,Zg);A(this,An,null);A(this,Er,null);A(this,ad,!1);A(this,ft,null);A(this,Jg,null);A(this,od,null);A(this,ei,null);A(this,ld,null);A(this,cd,!1);A(this,dd,null);C(this,ft,e)}renderForToolbar(){const e=C(this,Er,document.createElement("button"));return e.className="comment",k(this,Zg,qN).call(this,e,!1)}renderForStandalone(){const e=C(this,An,document.createElement("button"));e.className="annotationCommentButton";const t=c(this,ft).commentButtonPosition;if(t){const{style:s}=e;s.insetInlineEnd=`calc(${100*(c(this,ft)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const r=c(this,ft).commentButtonColor;r&&(s.backgroundColor=r)}return k(this,Zg,qN).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=c(this,An)??c(this,Er))==null||e.focus()},0)}onUpdatedColor(){if(!c(this,An))return;const e=c(this,ft).commentButtonColor;e&&(c(this,An).style.backgroundColor=e),c(this,ft)._uiManager.updatePopupColor(c(this,ft))}get commentButtonWidth(){var e;return(((e=c(this,An))==null?void 0:e.getBoundingClientRect().width)??0)/c(this,ft).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(c(this,dd))return c(this,dd);if(!c(this,An))return null;const{x:e,y:t,height:s}=c(this,An).getBoundingClientRect(),{x:r,y:i,width:o,height:l}=c(this,ft).parent.boundingClientRect;return[(e-r)/o,(t+s-i)/l]}set commentPopupPositionInLayer(e){C(this,dd,e)}hasDefaultPopupPosition(){return c(this,dd)===null}removeStandaloneCommentButton(){var e;(e=c(this,An))==null||e.remove(),C(this,An,null)}removeToolbarCommentButton(){var e;(e=c(this,Er))==null||e.remove(),C(this,Er,null)}setCommentButtonStates({selected:e,hasPopup:t}){c(this,An)&&(c(this,An).classList.toggle("selected",e),c(this,An).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let s,r;if(t)[s,r]=t;else{[s,r]=c(this,ft).commentButtonPosition;const{width:h,height:f,x:m,y:p}=c(this,ft);s=m+s*h,r=p+r*f}const i=c(this,ft).parent.boundingClientRect,{x:o,y:l,width:d,height:u}=i;c(this,ft)._uiManager.editComment(c(this,ft),o+s*d,l+r*u,{...e,parentDimensions:i})}finish(){c(this,Er)&&(c(this,Er).focus({focusVisible:c(this,ad)}),C(this,ad,!1))}isDeleted(){return c(this,cd)||c(this,ei)===""}isEmpty(){return c(this,ei)===null}hasBeenEdited(){return this.isDeleted()||c(this,ei)!==c(this,Jg)}serialize(){return this.data}get data(){return{text:c(this,ei),richText:c(this,od),date:c(this,ld),deleted:this.isDeleted()}}set data(e){if(e!==c(this,ei)&&C(this,od,null),e===null){C(this,ei,""),C(this,cd,!0);return}C(this,ei,e),C(this,ld,new Date),C(this,cd,!1)}setInitialText(e,t=null){C(this,Jg,e),this.data=e,C(this,ld,null),C(this,od,t)}shown(){}destroy(){var e,t;(e=c(this,Er))==null||e.remove(),C(this,Er,null),(t=c(this,An))==null||t.remove(),C(this,An,null),C(this,ei,""),C(this,od,null),C(this,ld,null),C(this,ft,null),C(this,ad,!1),C(this,cd,!1)}}An=new WeakMap,Er=new WeakMap,ad=new WeakMap,ft=new WeakMap,Jg=new WeakMap,od=new WeakMap,ei=new WeakMap,ld=new WeakMap,cd=new WeakMap,dd=new WeakMap,Zg=new WeakSet,qN=function(e,t){if(!c(this,ft)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[c(this,ft)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=c(this,ft)._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return e;e.addEventListener("contextmenu",fr,{signal:s}),t&&(e.addEventListener("focusin",i=>{c(this,ft)._focusEventsAllowed=!1,Dt(i)},{capture:!0,signal:s}),e.addEventListener("focusout",i=>{c(this,ft)._focusEventsAllowed=!0,Dt(i)},{capture:!0,signal:s})),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const r=i=>{i.preventDefault(),e===c(this,Er)?this.edit():c(this,ft).toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(C(this,ad,!0),r(i))},{signal:s}),e.addEventListener("pointerenter",()=>{c(this,ft).toggleComment(!1,!0)},{signal:s}),e.addEventListener("pointerleave",()=>{c(this,ft).toggleComment(!1,!1)},{signal:s}),e};var of,ud,ex,tx,nx,sx,rx,Oa,hd,Ba,fd,$a,Ec,WF,GF,qF;const WE=class WE{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:o=null,signal:l}){A(this,Ec);A(this,of);A(this,ud,!1);A(this,ex,null);A(this,tx);A(this,nx);A(this,sx);A(this,rx);A(this,Oa,null);A(this,hd);A(this,Ba,null);A(this,fd);A(this,$a,null);C(this,of,e),C(this,ex,s),C(this,tx,t),C(this,nx,r),C(this,sx,i),C(this,rx,o),C(this,fd,new AbortController),C(this,hd,AbortSignal.any([l,c(this,fd).signal])),e.addEventListener("touchstart",k(this,Ec,WF).bind(this),{passive:!1,signal:c(this,hd)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Si.pixelRatio}destroy(){var e,t;(e=c(this,fd))==null||e.abort(),C(this,fd,null),(t=c(this,Oa))==null||t.abort(),C(this,Oa,null)}};of=new WeakMap,ud=new WeakMap,ex=new WeakMap,tx=new WeakMap,nx=new WeakMap,sx=new WeakMap,rx=new WeakMap,Oa=new WeakMap,hd=new WeakMap,Ba=new WeakMap,fd=new WeakMap,$a=new WeakMap,Ec=new WeakSet,WF=function(e){var r,i,o;if((r=c(this,tx))!=null&&r.call(this))return;if(e.touches.length===1){if(c(this,Oa))return;const l=C(this,Oa,new AbortController),d=AbortSignal.any([c(this,hd),l.signal]),u=c(this,of),h={capture:!0,signal:d,passive:!1},f=m=>{var p;m.pointerType==="touch"&&((p=c(this,Oa))==null||p.abort(),C(this,Oa,null))};u.addEventListener("pointerdown",m=>{m.pointerType==="touch"&&(Dt(m),f(m))},h),u.addEventListener("pointerup",f,h),u.addEventListener("pointercancel",f,h);return}if(!c(this,$a)){C(this,$a,new AbortController);const l=AbortSignal.any([c(this,hd),c(this,$a).signal]),d=c(this,of),u={signal:l,capture:!1,passive:!1};d.addEventListener("touchmove",k(this,Ec,GF).bind(this),u);const h=k(this,Ec,qF).bind(this);d.addEventListener("touchend",h,u),d.addEventListener("touchcancel",h,u),u.capture=!0,d.addEventListener("pointerdown",Dt,u),d.addEventListener("pointermove",Dt,u),d.addEventListener("pointercancel",Dt,u),d.addEventListener("pointerup",Dt,u),(i=c(this,nx))==null||i.call(this)}if(Dt(e),e.touches.length!==2||(o=c(this,ex))!=null&&o.call(this)){C(this,Ba,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),C(this,Ba,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},GF=function(e){var w;if(!c(this,Ba)||e.touches.length!==2)return;Dt(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:r,screenY:i}=t,{screenX:o,screenY:l}=s,d=c(this,Ba),{touch0X:u,touch0Y:h,touch1X:f,touch1Y:m}=d,p=f-u,b=m-h,g=o-r,N=l-i,v=Math.hypot(g,N)||1,y=Math.hypot(p,b)||1;if(!c(this,ud)&&Math.abs(y-v)<=WE.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=r,d.touch0Y=i,d.touch1X=o,d.touch1Y=l,!c(this,ud)){C(this,ud,!0);return}const S=[(r+o)/2,(i+l)/2];(w=c(this,sx))==null||w.call(this,S,y,v)},qF=function(e){var t;e.touches.length>=2||(c(this,$a)&&(c(this,$a).abort(),C(this,$a,null),(t=c(this,rx))==null||t.call(this)),c(this,Ba)&&(Dt(e),C(this,Ba,null),C(this,ud,!1)))};let Eg=WE;var md,ti,kt,ot,za,lf,Cl,ix,En,pd,Ua,Wi,Al,ax,gd,Bs,ox,xd,Ha,Gi,cf,df,kr,yd,lx,$b,be,KN,cx,YN,r0,KF,YF,XN,i0,QN,XF,QF,JF,JN,ZF,ZN,eO,tO,nO,ej,Sp;const je=class je{constructor(e){A(this,be);A(this,md,null);A(this,ti,null);A(this,kt,null);A(this,ot,null);A(this,za,null);A(this,lf,!1);A(this,Cl,null);A(this,ix,"");A(this,En,null);A(this,pd,null);A(this,Ua,null);A(this,Wi,null);A(this,Al,null);A(this,ax,"");A(this,gd,!1);A(this,Bs,null);A(this,ox,!1);A(this,xd,!1);A(this,Ha,!1);A(this,Gi,null);A(this,cf,0);A(this,df,0);A(this,kr,null);A(this,yd,null);J(this,"isSelected",!1);J(this,"_isCopy",!1);J(this,"_editToolbar",null);J(this,"_initialOptions",Object.create(null));J(this,"_initialData",null);J(this,"_isVisible",!0);J(this,"_uiManager",null);J(this,"_focusEventsAllowed",!0);A(this,lx,!1);A(this,$b,je._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[i,o];const[l,d]=this.parentDimensions;this.x=e.x/l,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=je.prototype._resizeWithKeyboard,t=Ac.TRANSLATE_SMALL,s=Ac.TRANSLATE_BIG;return Ee(this,"_resizerKeyboardManager",new Oy([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],je.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Ee(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Kq({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(je._l10n??(je._l10n=e),je._l10nResizer||(je._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),je._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);je._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){ht("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,lx)}set _isDraggable(e){var t;C(this,lx,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,$b)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(k(this,be,Sp).call(this),(t=c(this,Wi))==null||t.remove(),C(this,Wi,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(this,gd)?C(this,gd,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,r){const[i,o]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(e+s)/i,this.y=(t+r)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,r]=this.parentDimensions;this.setAt(e*s,t*r,this.width*s,this.height*r),this._onTranslated()}translate(e,t){k(this,be,KN).call(this,this.parentDimensions,e,t)}translateInPage(e,t){c(this,Bs)||C(this,Bs,[this.x,this.y,this.width,this.height]),k(this,be,KN).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){c(this,Bs)||C(this,Bs,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[d,u]=this.getBaseTranslation();o+=d,l+=u;const{style:h}=s;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!c(this,Bs)&&(c(this,Bs)[0]!==this.x||c(this,Bs)[1]!==this.y)}get _hasBeenResized(){return!!c(this,Bs)&&(c(this,Bs)[2]!==this.width||c(this,Bs)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=je,r=s/e,i=s/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,r]}=this;let{x:i,y:o,width:l,height:d}=this;if(l*=s,d*=r,i*=s,o*=r,this._mustFixPosition)switch(e){case 0:i=Qn(i,0,s-l),o=Qn(o,0,r-d);break;case 90:i=Qn(i,0,s-d),o=Qn(o,l,r);break;case 180:i=Qn(i,l,s),o=Qn(o,d,r);break;case 270:i=Qn(i,d,s),o=Qn(o,0,r-l);break}this.x=i/=s,this.y=o/=r;const[u,h]=this.getBaseTranslation();i+=u,o+=h,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return k(s=je,cx,YN).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return k(s=je,cx,YN).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(){const{div:{style:e},width:t,height:s}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=c(this,kt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||c(this,xd))return this._editToolbar;this._editToolbar=new FN(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=c(this,kt))==null||t.destroy()}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return c(this,kt)||(bb.initialize(je._l10n),C(this,kt,new bb(this)),c(this,md)&&(c(this,kt).data=c(this,md),C(this,md,null))),c(this,kt)}get altTextData(){var e;return(e=c(this,kt))==null?void 0:e.data}set altTextData(e){c(this,kt)&&(c(this,kt).data=e)}get guessedAltText(){var e;return(e=c(this,kt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=c(this,kt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=c(this,kt))==null?void 0:t.serialize(e)}hasAltText(){return!!c(this,kt)&&!c(this,kt).isEmpty()}hasAltTextData(){var e;return((e=c(this,kt))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=c(this,ot))==null||e.focusButton()}addCommentButton(){return c(this,ot)||C(this,ot,new Sv(this))}addStandaloneCommentButton(){if(c(this,za)){this._uiManager.isEditingMode()&&c(this,za).classList.remove("hidden");return}this.hasComment&&(C(this,za,c(this,ot).renderForStandalone()),this.div.append(c(this,za)))}removeStandaloneCommentButton(){c(this,ot).removeStandaloneCommentButton(),C(this,za,null)}hideStandaloneCommentButton(){var e;(e=c(this,za))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:s,deleted:r}}=c(this,ot);return{text:t,richText:e,date:s,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){c(this,ot)||C(this,ot,new Sv(this)),c(this,ot).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:s}){if(!t||(c(this,ot)||C(this,ot,new Sv(this)),c(this,ot).setInitialText(e,s),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var e;return(e=c(this,ot))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=c(this,ot))==null?void 0:e.isDeleted()}get hasComment(){return!!c(this,ot)&&!c(this,ot).isEmpty()&&!c(this,ot).isDeleted()}async editComment(e){c(this,ot)||C(this,ot,new Sv(this)),c(this,ot).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){c(this,ot).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[i]=this.pageDimensions,[o]=this.pageTranslation,l=o+i+1,d=r-100,u=l+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,d,u,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){c(this,ot).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=c(this,lf)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),k(this,be,ZN).call(this);const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),RF(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,yd)||C(this,yd,new Eg({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:k(this,be,XF).bind(this),onPinching:k(this,be,QF).bind(this),onPinchEnd:k(this,be,JF).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=Sn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(C(this,gd,!0),this._isDraggable){k(this,be,ZF).call(this,e);return}k(this,be,JN).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,Gi)&&clearTimeout(c(this,Gi)),C(this,Gi,setTimeout(()=>{var e;C(this,Gi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const r=this.parentScale,[i,o]=this.pageDimensions,[l,d]=this.pageTranslation,u=e/r,h=t/r,f=this.x*i,m=this.y*o,p=this.width*i,b=this.height*o;switch(s){case 0:return[f+u+l,o-m-h-b+d,f+u+p+l,o-m-h+d];case 90:return[f+h+l,o-m+u+d,f+h+b+l,o-m+u+p+d];case 180:return[f-u-p+l,o-m+h+d,f-u+l,o-m+h+b+d];case 270:return[f-h-b+l,o-m-u-p+d,f-h+l,o-m-u+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,r,i,o]=e,l=i-s,d=o-r;switch(this.rotation){case 0:return[s,t-o,l,d];case 90:return[s,t-r,d,l];case 180:return[i,t-r,l,d];case 270:return[i,t-o,d,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&je._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=c(this,ot))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:s,opacity:r,deleted:i,richText:o},uid:l,pageIndex:d,creationDate:u,modificationDate:h}=this;return{id:l,pageIndex:d,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:u,modificationDate:s||h,popupRef:!i,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),C(this,xd,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),C(this,xd,!1),!0):!1}isInEditMode(){return c(this,xd)}shouldGetKeyboardEvents(){return c(this,Ha)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return t<o&&r>0&&e<i&&s>0}rebuild(){k(this,be,ZN).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var s;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((s=this._initialData)==null?void 0:s.popupRef)||""}}static async deserialize(e,t,s){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,C(r,md,e.accessibilityData),r._isCopy=e.isCopy||!1;const[i,o]=r.pageDimensions,[l,d,u,h]=r.getRectInCurrentCoords(e.rect,o);return r.x=l/i,r.y=d/o,r.width=u/i,r.height=h/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=c(this,Al))==null||e.abort(),C(this,Al,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,Gi)&&(clearTimeout(c(this,Gi)),C(this,Gi,null)),k(this,be,Sp).call(this),this.removeEditToolbar(),c(this,kr)){for(const s of c(this,kr).values())clearTimeout(s);C(this,kr,null)}this.parent=null,(t=c(this,yd))==null||t.destroy(),C(this,yd,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(k(this,be,KF).call(this),c(this,En).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[s,r,i,o]=this.getPDFRect();return[je._round(s+(i-s)*e),je._round(r+(o-r)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return c(this,ot).commentPopupPositionInLayer}set commentPopupPosition(e){c(this,ot).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return c(this,ot).hasDefaultPopupPosition()}get commentButtonWidth(){return c(this,ot).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){c(this,ot).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),C(this,Ua,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=c(this,En).children;if(!c(this,ti)){C(this,ti,Array.from(t));const o=k(this,be,eO).bind(this),l=k(this,be,tO).bind(this),d=this._uiManager._signal;for(const u of c(this,ti)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:d}),u.addEventListener("blur",l,{signal:d}),u.addEventListener("focus",k(this,be,nO).bind(this,h),{signal:d}),u.setAttribute("data-l10n-id",je._l10nResizer[h])}}const s=c(this,ti)[0];let r=0;for(const o of t){if(o===s)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(c(this,ti).length/4);if(i!==r){if(i<r)for(let l=0;l<r-i;l++)c(this,En).append(c(this,En).firstChild);else if(i>r)for(let l=0;l<i-r;l++)c(this,En).firstChild.before(c(this,En).lastChild);let o=0;for(const l of t){const u=c(this,ti)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",je._l10nResizer[u])}}k(this,be,ej).call(this,0),C(this,Ha,!0),c(this,En).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){c(this,Ha)&&k(this,be,QN).call(this,c(this,ax),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){k(this,be,Sp).call(this),this.div.focus()}select(){var e,t,s;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(s=c(this,kt))==null||s.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,s,r,i;this.isSelected&&(this.isSelected=!1,(e=c(this,En))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=c(this,kt))==null||i.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return c(this,ox)}set isEditing(e){C(this,ox,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){c(this,kr)||C(this,kr,new Map);const{action:s}=e;let r=c(this,kr).get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),c(this,kr).delete(s),c(this,kr).size===0&&C(this,kr,null)},je._telemetryTimeout),c(this,kr).set(s,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),C(this,lf,!1)}disable(){this.div&&(this.div.tabIndex=-1),C(this,lf,!0)}updateFakeAnnotationElement(e){if(!c(this,Wi)&&!this.deleted){C(this,Wi,e.addFakeAnnotation(this));return}if(this.deleted){c(this,Wi).remove(),C(this,Wi,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&c(this,Wi).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};md=new WeakMap,ti=new WeakMap,kt=new WeakMap,ot=new WeakMap,za=new WeakMap,lf=new WeakMap,Cl=new WeakMap,ix=new WeakMap,En=new WeakMap,pd=new WeakMap,Ua=new WeakMap,Wi=new WeakMap,Al=new WeakMap,ax=new WeakMap,gd=new WeakMap,Bs=new WeakMap,ox=new WeakMap,xd=new WeakMap,Ha=new WeakMap,Gi=new WeakMap,cf=new WeakMap,df=new WeakMap,kr=new WeakMap,yd=new WeakMap,lx=new WeakMap,$b=new WeakMap,be=new WeakSet,KN=function([e,t],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},cx=new WeakSet,YN=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},r0=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},KF=function(){if(c(this,En))return;C(this,En,document.createElement("div")),c(this,En).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const r=document.createElement("div");c(this,En).append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",k(this,be,YF).bind(this,s),{signal:t}),r.addEventListener("contextmenu",fr,{signal:t}),r.tabIndex=-1}this.div.prepend(c(this,En))},YF=function(e,t){var h;t.preventDefault();const{isMac:s}=Sn.platform;if(t.button!==0||t.ctrlKey&&s)return;(h=c(this,kt))==null||h.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,C(this,pd,[t.screenX,t.screenY]);const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",k(this,be,QN).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Dt,{passive:!1,signal:o}),window.addEventListener("contextmenu",fr,{signal:o}),C(this,Ua,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var f;i.abort(),this.parent.togglePointerEvents(!0),(f=c(this,kt))==null||f.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=l,this.div.style.cursor=d,k(this,be,i0).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},XN=function(e,t,s,r){this.width=s,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},i0=function(){if(!c(this,Ua))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:r}=c(this,Ua);C(this,Ua,null);const i=this.x,o=this.y,l=this.width,d=this.height;i===e&&o===t&&l===s&&d===r||this.addCommands({cmd:k(this,be,XN).bind(this,i,o,l,d),undo:k(this,be,XN).bind(this,e,t,s,r),mustExec:!0})},QN=function(e,t){const[s,r]=this.parentDimensions,i=this.x,o=this.y,l=this.width,d=this.height,u=je.MIN_SIZE/s,h=je.MIN_SIZE/r,f=k(this,be,r0).call(this,this.rotation),m=(F,H)=>[f[0]*F+f[2]*H,f[1]*F+f[3]*H],p=k(this,be,r0).call(this,360-this.rotation),b=(F,H)=>[p[0]*F+p[2]*H,p[1]*F+p[3]*H];let g,N,v=!1,y=!1;switch(e){case"topLeft":v=!0,g=(F,H)=>[0,0],N=(F,H)=>[F,H];break;case"topMiddle":g=(F,H)=>[F/2,0],N=(F,H)=>[F/2,H];break;case"topRight":v=!0,g=(F,H)=>[F,0],N=(F,H)=>[0,H];break;case"middleRight":y=!0,g=(F,H)=>[F,H/2],N=(F,H)=>[0,H/2];break;case"bottomRight":v=!0,g=(F,H)=>[F,H],N=(F,H)=>[0,0];break;case"bottomMiddle":g=(F,H)=>[F/2,H],N=(F,H)=>[F/2,0];break;case"bottomLeft":v=!0,g=(F,H)=>[0,H],N=(F,H)=>[F,0];break;case"middleLeft":y=!0,g=(F,H)=>[0,H/2],N=(F,H)=>[F,H/2];break}const S=g(l,d),w=N(l,d);let j=m(...w);const E=je._round(i+j[0]),T=je._round(o+j[1]);let P=1,_=1,R,I;if(t.fromKeyboard)({deltaX:R,deltaY:I}=t);else{const{screenX:F,screenY:H}=t,[$,K]=c(this,pd);[R,I]=this.screenToPageTranslation(F-$,H-K),c(this,pd)[0]=F,c(this,pd)[1]=H}if([R,I]=b(R/s,I/r),v){const F=Math.hypot(l,d);P=_=Math.max(Math.min(Math.hypot(w[0]-S[0]-R,w[1]-S[1]-I)/F,1/l,1/d),u/l,h/d)}else y?P=Qn(Math.abs(w[0]-S[0]-R),u,1)/l:_=Qn(Math.abs(w[1]-S[1]-I),h,1)/d;const L=je._round(l*P),U=je._round(d*_);j=m(...N(L,U));const B=E-j[0],Q=T-j[1];c(this,Bs)||C(this,Bs,[this.x,this.y,this.width,this.height]),this.width=L,this.height=U,this.x=B,this.y=Q,this.setDims(),this.fixAndSetPosition(),this._onResizing()},XF=function(){var e;C(this,Ua,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=c(this,kt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},QF=function(e,t,s){let i=.7*(s/t)+1-.7;if(i===1)return;const o=k(this,be,r0).call(this,this.rotation),l=(E,T)=>[o[0]*E+o[2]*T,o[1]*E+o[3]*T],[d,u]=this.parentDimensions,h=this.x,f=this.y,m=this.width,p=this.height,b=je.MIN_SIZE/d,g=je.MIN_SIZE/u;i=Math.max(Math.min(i,1/m,1/p),b/m,g/p);const N=je._round(m*i),v=je._round(p*i);if(N===m&&v===p)return;c(this,Bs)||C(this,Bs,[h,f,m,p]);const y=l(m/2,p/2),S=je._round(h+y[0]),w=je._round(f+y[1]),j=l(N/2,v/2);this.x=S-j[0],this.y=w-j[1],this.width=N,this.height=v,this.setDims(),this.fixAndSetPosition(),this._onResizing()},JF=function(){var e;(e=c(this,kt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),k(this,be,i0).call(this)},JN=function(e){const{isMac:t}=Sn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},ZF=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:i},l=u=>{r.abort(),C(this,Cl,null),C(this,gd,!1),this._uiManager.endDragSession()||k(this,be,JN).call(this,u),s&&this._onStopDragging()};t&&(C(this,cf,e.clientX),C(this,df,e.clientY),C(this,Cl,e.pointerId),C(this,ix,e.pointerType),window.addEventListener("pointermove",u=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:h,clientY:f,pointerId:m}=u;if(m!==c(this,Cl)){Dt(u);return}const[p,b]=this.screenToPageTranslation(h-c(this,cf),f-c(this,df));C(this,cf,h),C(this,df,f),this._uiManager.dragSelectedEditors(p,b)},o),window.addEventListener("touchmove",Dt,o),window.addEventListener("pointerdown",u=>{u.pointerType===c(this,ix)&&(c(this,yd)||u.isPrimary)&&l(u),Dt(u)},o));const d=u=>{if(!c(this,Cl)||c(this,Cl)===u.pointerId){l(u);return}Dt(u)};window.addEventListener("pointerup",d,{signal:i}),window.addEventListener("blur",d,{signal:i})},ZN=function(){if(c(this,Al)||!this.div)return;C(this,Al,new AbortController);const e=this._uiManager.combinedSignal(c(this,Al));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},eO=function(e){je._resizerKeyboardManager.exec(this,e)},tO=function(e){var t;c(this,Ha)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==c(this,En)&&k(this,be,Sp).call(this)},nO=function(e){C(this,ax,c(this,Ha)?e:"")},ej=function(e){if(c(this,ti))for(const t of c(this,ti))t.tabIndex=e},Sp=function(){C(this,Ha,!1),k(this,be,ej).call(this,-1),k(this,be,i0).call(this)},A(je,cx),J(je,"_l10n",null),J(je,"_l10nResizer",null),J(je,"_borderLineWidth",-1),J(je,"_colorManager",new $N),J(je,"_zIndex",1),J(je,"_telemetryTimeout",1e3);let pt=je;class Kq extends pt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const jT=3285377520,xr=4294901760,Ti=65535;class sO{constructor(e){this.h1=e?e&4294967295:jT,this.h2=e?e&4294967295:jT}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let g=0,N=e.length;g<N;g++){const v=e.charCodeAt(g);v<=255?t[s++]=v:(t[s++]=v>>>8,t[s++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,i=s-r*4,o=new Uint32Array(t.buffer,0,r);let l=0,d=0,u=this.h1,h=this.h2;const f=3432918353,m=461845907,p=f&Ti,b=m&Ti;for(let g=0;g<r;g++)g&1?(l=o[g],l=l*f&xr|l*p&Ti,l=l<<15|l>>>17,l=l*m&xr|l*b&Ti,u^=l,u=u<<13|u>>>19,u=u*5+3864292196):(d=o[g],d=d*f&xr|d*p&Ti,d=d<<15|d>>>17,d=d*m&xr|d*b&Ti,h^=d,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,i){case 3:l^=t[r*4+2]<<16;case 2:l^=t[r*4+1]<<8;case 1:l^=t[r*4],l=l*f&xr|l*p&Ti,l=l<<15|l>>>17,l=l*m&xr|l*b&Ti,r&1?u^=l:h^=l}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&xr|e*36045&Ti,t=t*4283543511&xr|((t<<16|e>>>16)*2950163797&xr)>>>16,e^=t>>>1,e=e*444984403&xr|e*60499&Ti,t=t*3301882366&xr|((t<<16|e>>>16)*3120437893&xr)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const tj=Object.freeze({map:null,hash:"",transfer:void 0});var vd,bd,Va,kn,zb,rO;class vE{constructor(){A(this,zb);A(this,vd,!1);A(this,bd,null);A(this,Va,null);A(this,kn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=c(this,kn).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return c(this,kn).get(e)}remove(e){const t=c(this,kn).get(e);if(t!==void 0&&(t instanceof pt&&c(this,Va).delete(t.annotationElementId),c(this,kn).delete(e),c(this,kn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of c(this,kn).values())if(s instanceof pt)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=c(this,kn).get(e);let r=!1;if(s!==void 0)for(const[i,o]of Object.entries(t))s[i]!==o&&(r=!0,s[i]=o);else r=!0,c(this,kn).set(e,t);r&&k(this,zb,rO).call(this),t instanceof pt&&((c(this,Va)||C(this,Va,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return c(this,kn).has(e)}get size(){return c(this,kn).size}resetModified(){c(this,vd)&&(C(this,vd,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new iO(this)}get serializable(){if(c(this,kn).size===0)return tj;const e=new Map,t=new sO,s=[],r=Object.create(null);let i=!1;for(const[o,l]of c(this,kn)){const d=l instanceof pt?l.serialize(!1,r):l;d&&(e.set(o,d),t.update(`${o}:${JSON.stringify(d)}`),i||(i=!!d.bitmap))}if(i)for(const o of e.values())o.bitmap&&s.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:tj}get editorStats(){let e=null;const t=new Map;let s=0,r=0;for(const i of c(this,kn).values()){if(!(i instanceof pt)){i.popup&&(i.popup.deleted?r+=1:s+=1);continue}i.isCommentDeleted?r+=1:i.hasEditedComment&&(s+=1);const o=i.telemetryFinalData;if(!o)continue;const{type:l}=o;t.has(l)||t.set(l,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const d=e[l]||(e[l]=new Map);for(const[u,h]of Object.entries(o)){if(u==="type")continue;let f=d.get(u);f||(f=new Map,d.set(u,f));const m=f.get(h)??0;f.set(h,m+1)}}if((r>0||s>0)&&(e||(e=Object.create(null)),e.comments={deleted:r,edited:s}),!e)return null;for(const[i,o]of t)e[i]=o.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){C(this,bd,null)}updateEditor(e,t){var r;const s=(r=c(this,Va))==null?void 0:r.get(e);return s?(s.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=c(this,Va))==null?void 0:t.get(e))||null}get modifiedIds(){if(c(this,bd))return c(this,bd);const e=[];if(c(this,Va))for(const t of c(this,Va).values())t.serialize()&&e.push(t.annotationElementId);return C(this,bd,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return c(this,kn).entries()}}vd=new WeakMap,bd=new WeakMap,Va=new WeakMap,kn=new WeakMap,zb=new WeakSet,rO=function(){c(this,vd)||(C(this,vd,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var dx;class iO extends vE{constructor(t){super();A(this,dx);const{map:s,hash:r,transfer:i}=t.serializable,o=structuredClone(s,i?{transfer:i}:null);C(this,dx,{map:o,hash:r,transfer:i})}get print(){ht("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,dx)}get modifiedIds(){return Ee(this,"modifiedIds",{ids:new Set,hash:""})}}dx=new WeakMap;var uf;class Yq{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){A(this,uf,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(this,uf).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||c(this,uf).has(e.loadedName))){if($e(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:o}=e,l=new FontFace(r,i,o);this.addNativeFontFace(l);try{await l.load(),c(this,uf).add(r),s==null||s(e)}catch{Ne(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}ht("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw Ne(`Failed to load font '${s.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Ee(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Ee(this,"isSyncFontLoadingSupported",ls||Sn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for($e(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const i=s.shift();setTimeout(i.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:t,callback:e};return s.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ee(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(w,j){return w.charCodeAt(j)<<24|w.charCodeAt(j+1)<<16|w.charCodeAt(j+2)<<8|w.charCodeAt(j+3)&255}function r(w,j,E,T){const P=w.substring(0,j),_=w.substring(j+E);return P+T+_}let i,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const d=l.getContext("2d");let u=0;function h(w,j){if(++u>30){Ne("Load test font never loaded."),j();return}if(d.font="30px "+w,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){j();return}setTimeout(h.bind(null,w,j))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=r(m,976,f.length,f);const b=16,g=1482184792;let N=s(m,b);for(i=0,o=f.length-3;i<o;i+=4)N=N-g+s(f,i)|0;i<f.length&&(N=N-g+s(f+"XXX",i)|0),m=r(m,b,4,Lq(N));const v=`url(data:font/opentype;base64,${btoa(m)});`,y=`@font-face {font-family:"${f}";src:${v}}`;this.insertRule(y);const S=this._document.createElement("div");S.style.visibility="hidden",S.style.width=S.style.height="10px",S.style.position="absolute",S.style.top=S.style.left="0px";for(const w of[e.loadedName,f]){const j=this._document.createElement("span");j.textContent="Hi",j.style.fontFamily=w,S.append(j)}this._document.body.append(S),h(f,()=>{S.remove(),t.complete()})}}uf=new WeakMap;var et;class Xq{constructor(e,t=null,s,r){A(this,et);this.compiledGlyphs=Object.create(null),C(this,et,e),this._inspectFont=t,s&&Object.assign(this,s),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${wF(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let r;try{r=e.get(s)}catch(o){Ne(`getPathGenerator - ignoring character: "${o}".`)}const i=new Path2D(r||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=i}get black(){return c(this,et).black}get bold(){return c(this,et).bold}get disableFontFace(){return c(this,et).disableFontFace??!1}get fontExtraProperties(){return c(this,et).fontExtraProperties??!1}get isInvalidPDFjsFont(){return c(this,et).isInvalidPDFjsFont}get isType3Font(){return c(this,et).isType3Font}get italic(){return c(this,et).italic}get missingFile(){return c(this,et).missingFile}get remeasure(){return c(this,et).remeasure}get vertical(){return c(this,et).vertical}get ascent(){return c(this,et).ascent}get defaultWidth(){return c(this,et).defaultWidth}get descent(){return c(this,et).descent}get bbox(){return c(this,et).bbox}get fontMatrix(){return c(this,et).fontMatrix}get fallbackName(){return c(this,et).fallbackName}get loadedName(){return c(this,et).loadedName}get mimetype(){return c(this,et).mimetype}get name(){return c(this,et).name}get data(){return c(this,et).data}clearData(){c(this,et).clearData()}get cssFontInfo(){return c(this,et).cssFontInfo}get systemFontInfo(){return c(this,et).systemFontInfo}get defaultVMetrics(){return c(this,et).defaultVMetrics}}et=new WeakMap;function Qq(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(ls)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Jq(n){if(ls&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Iy(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Nv(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const nj=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,Zq=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",aO=$q.bind(null,nj,Zq);var Wa,Ub;class e9{constructor(){A(this,Wa,new Map);A(this,Ub,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};c(this,Ub).then(()=>{for(const[r]of c(this,Wa))r.call(this,s)})}addEventListener(e,t,s=null){let r=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:i}=s;if(i.aborted){Ne("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}c(this,Wa).set(t,r)}removeEventListener(e,t){const s=c(this,Wa).get(t);s==null||s(),c(this,Wa).delete(t)}terminate(){for(const[,e]of c(this,Wa))e==null||e();c(this,Wa).clear()}}Wa=new WeakMap,Ub=new WeakMap;const jv={DATA:1,ERROR:2},Zt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function CT(){}function gs(n){if(n instanceof Do||n instanceof yb||n instanceof xT||n instanceof jg||n instanceof Z1)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||ht('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Do(n.message);case"InvalidPDFException":return new yb(n.message);case"PasswordException":return new xT(n.message,n.code);case"ResponseException":return new jg(n.message,n.status,n.missing);case"UnknownErrorException":return new Z1(n.message,n.details)}return new Z1(n.message,n.toString())}var hf,zr,oO,lO,cO,a0;class Np{constructor(e,t,s){A(this,zr);A(this,hf,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",k(this,zr,oO).bind(this),{signal:c(this,hf).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},s)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,s,r){const i=this.streamId++,o=this.sourceName,l=this.targetName,d=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[i]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:o,targetName:l,action:e,streamId:i,data:t,desiredSize:u.desiredSize},r),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[i].pullCall=h,d.postMessage({sourceName:o,targetName:l,stream:Zt.PULL,streamId:i,desiredSize:u.desiredSize}),h.promise},cancel:u=>{$e(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[i].cancelCall=h,this.streamControllers[i].isClosed=!0,d.postMessage({sourceName:o,targetName:l,stream:Zt.CANCEL,streamId:i,reason:gs(u)}),h.promise}},s)}destroy(){var e;(e=c(this,hf))==null||e.abort(),C(this,hf,null)}}hf=new WeakMap,zr=new WeakSet,oO=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){k(this,zr,cO).call(this,e);return}if(e.callback){const s=e.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===jv.DATA)r.resolve(e.data);else if(e.callback===jv.ERROR)r.reject(gs(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(o){i.postMessage({sourceName:s,targetName:r,callback:jv.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:s,targetName:r,callback:jv.ERROR,callbackId:e.callbackId,reason:gs(o)})});return}if(e.streamId){k(this,zr,lO).call(this,e);return}t(e.data)},lO=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,o=this,l=this.actionHandler[e.action],d={enqueue(u,h=1,f){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=h,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:s,targetName:r,stream:Zt.ENQUEUE,streamId:t,chunk:u},f)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:Zt.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){$e(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:Zt.ERROR,streamId:t,reason:gs(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,Promise.try(l,e.data,d).then(function(){i.postMessage({sourceName:s,targetName:r,stream:Zt.START_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:s,targetName:r,stream:Zt.START_COMPLETE,streamId:t,reason:gs(u)})})},cO=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,o=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case Zt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(gs(e.reason));break;case Zt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(gs(e.reason));break;case Zt.PULL:if(!l){i.postMessage({sourceName:s,targetName:r,stream:Zt.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||CT).then(function(){i.postMessage({sourceName:s,targetName:r,stream:Zt.PULL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:s,targetName:r,stream:Zt.PULL_COMPLETE,streamId:t,reason:gs(u)})});break;case Zt.ENQUEUE:if($e(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Zt.CLOSE:if($e(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),k(this,zr,a0).call(this,o,t);break;case Zt.ERROR:$e(o,"error should have stream controller"),o.controller.error(gs(e.reason)),k(this,zr,a0).call(this,o,t);break;case Zt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(gs(e.reason)),k(this,zr,a0).call(this,o,t);break;case Zt.CANCEL:if(!l)break;const d=gs(e.reason);Promise.try(l.onCancel||CT,d).then(function(){i.postMessage({sourceName:s,targetName:r,stream:Zt.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:s,targetName:r,stream:Zt.CANCEL_COMPLETE,streamId:t,reason:gs(u)})}),l.sinkCapability.reject(d),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},a0=async function(e,t){var s,r,i;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var ux;class dO{constructor({enableHWA:e=!1}){A(this,ux,!1);C(this,ux,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!c(this,ux)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){ht("Abstract method `_createCanvas` called.")}}ux=new WeakMap;class t9 extends dO{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class uO{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){ht("Abstract method `_fetch` called.")}}class AT extends uO{async _fetch(e){const t=await qm(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Iy(t)}}class hO{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,r,i){return"none"}destroy(e=!1){}}var wd,ff,Ga,qa,qn,Sd,Nd,de,Hn,jp,Ku,o0,Yu,fO,sj,Xu,Cp,Ap,rj,Ep;class n9 extends hO{constructor({docId:t,ownerDocument:s=globalThis.document}){super();A(this,de);A(this,wd);A(this,ff);A(this,Ga);A(this,qa);A(this,qn);A(this,Sd);A(this,Nd,0);C(this,qa,t),C(this,qn,s)}addFilter(t){if(!t)return"none";let s=c(this,de,Hn).get(t);if(s)return s;const[r,i,o]=k(this,de,o0).call(this,t),l=t.length===1?r:`${r}${i}${o}`;if(s=c(this,de,Hn).get(l),s)return c(this,de,Hn).set(t,s),s;const d=`g_${c(this,qa)}_transfer_map_${Ot(this,Nd)._++}`,u=k(this,de,Yu).call(this,d);c(this,de,Hn).set(t,u),c(this,de,Hn).set(l,u);const h=k(this,de,Xu).call(this,d);return k(this,de,Ap).call(this,r,i,o,h),u}addHCMFilter(t,s){var b;const r=`${t}-${s}`,i="base";let o=c(this,de,jp).get(i);if((o==null?void 0:o.key)===r||(o?((b=o.filter)==null||b.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},c(this,de,jp).set(i,o)),!t||!s))return o.url;const l=k(this,de,Ep).call(this,t);t=he.makeHexColor(...l);const d=k(this,de,Ep).call(this,s);if(s=he.makeHexColor(...d),c(this,de,Ku).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return o.url;const u=new Array(256);for(let g=0;g<=255;g++){const N=g/255;u[g]=N<=.03928?N/12.92:((N+.055)/1.055)**2.4}const h=u.join(","),f=`g_${c(this,qa)}_hcm_filter`,m=o.filter=k(this,de,Xu).call(this,f);k(this,de,Ap).call(this,h,h,h,m),k(this,de,sj).call(this,m);const p=(g,N)=>{const v=l[g]/255,y=d[g]/255,S=new Array(N+1);for(let w=0;w<=N;w++)S[w]=v+w/N*(y-v);return S.join(",")};return k(this,de,Ap).call(this,p(0,5),p(1,5),p(2,5),m),o.url=k(this,de,Yu).call(this,f),o.url}addAlphaFilter(t){let s=c(this,de,Hn).get(t);if(s)return s;const[r]=k(this,de,o0).call(this,[t]),i=`alpha_${r}`;if(s=c(this,de,Hn).get(i),s)return c(this,de,Hn).set(t,s),s;const o=`g_${c(this,qa)}_alpha_map_${Ot(this,Nd)._++}`,l=k(this,de,Yu).call(this,o);c(this,de,Hn).set(t,l),c(this,de,Hn).set(i,l);const d=k(this,de,Xu).call(this,o);return k(this,de,rj).call(this,r,d),l}addLuminosityFilter(t){let s=c(this,de,Hn).get(t||"luminosity");if(s)return s;let r,i;if(t?([r]=k(this,de,o0).call(this,[t]),i=`luminosity_${r}`):i="luminosity",s=c(this,de,Hn).get(i),s)return c(this,de,Hn).set(t,s),s;const o=`g_${c(this,qa)}_luminosity_map_${Ot(this,Nd)._++}`,l=k(this,de,Yu).call(this,o);c(this,de,Hn).set(t,l),c(this,de,Hn).set(i,l);const d=k(this,de,Xu).call(this,o);return k(this,de,fO).call(this,d),t&&k(this,de,rj).call(this,r,d),l}addHighlightHCMFilter(t,s,r,i,o){var y;const l=`${s}-${r}-${i}-${o}`;let d=c(this,de,jp).get(t);if((d==null?void 0:d.key)===l||(d?((y=d.filter)==null||y.remove(),d.key=l,d.url="none",d.filter=null):(d={key:l,url:"none",filter:null},c(this,de,jp).set(t,d)),!s||!r))return d.url;const[u,h]=[s,r].map(k(this,de,Ep).bind(this));let f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),m=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,b]=[i,o].map(k(this,de,Ep).bind(this));m<f&&([f,m,p,b]=[m,f,b,p]),c(this,de,Ku).style.color="";const g=(S,w,j)=>{const E=new Array(256),T=(m-f)/j,P=S/255,_=(w-S)/(255*j);let R=0;for(let I=0;I<=j;I++){const L=Math.round(f+I*T),U=P+I*_;for(let B=R;B<=L;B++)E[B]=U;R=L+1}for(let I=R;I<256;I++)E[I]=E[R-1];return E.join(",")},N=`g_${c(this,qa)}_hcm_${t}_filter`,v=d.filter=k(this,de,Xu).call(this,N);return k(this,de,sj).call(this,v),k(this,de,Ap).call(this,g(p[0],b[0],5),g(p[1],b[1],5),g(p[2],b[2],5),v),d.url=k(this,de,Yu).call(this,N),d.url}destroy(t=!1){var s,r,i,o;t&&((s=c(this,Sd))!=null&&s.size)||((r=c(this,Ga))==null||r.parentNode.parentNode.remove(),C(this,Ga,null),(i=c(this,ff))==null||i.clear(),C(this,ff,null),(o=c(this,Sd))==null||o.clear(),C(this,Sd,null),C(this,Nd,0))}}wd=new WeakMap,ff=new WeakMap,Ga=new WeakMap,qa=new WeakMap,qn=new WeakMap,Sd=new WeakMap,Nd=new WeakMap,de=new WeakSet,Hn=function(){return c(this,ff)||C(this,ff,new Map)},jp=function(){return c(this,Sd)||C(this,Sd,new Map)},Ku=function(){if(!c(this,Ga)){const t=c(this,qn).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const r=c(this,qn).createElementNS(Aa,"svg");r.setAttribute("width",0),r.setAttribute("height",0),C(this,Ga,c(this,qn).createElementNS(Aa,"defs")),t.append(r),r.append(c(this,Ga)),c(this,qn).body.append(t)}return c(this,Ga)},o0=function(t){if(t.length===1){const u=t[0],h=new Array(256);for(let m=0;m<256;m++)h[m]=u[m]/255;const f=h.join(",");return[f,f,f]}const[s,r,i]=t,o=new Array(256),l=new Array(256),d=new Array(256);for(let u=0;u<256;u++)o[u]=s[u]/255,l[u]=r[u]/255,d[u]=i[u]/255;return[o.join(","),l.join(","),d.join(",")]},Yu=function(t){if(c(this,wd)===void 0){C(this,wd,"");const s=c(this,qn).URL;s!==c(this,qn).baseURI&&(Fy(s)?Ne('#createUrl: ignore "data:"-URL for performance reasons.'):C(this,wd,mE(s,"")))}return`url(${c(this,wd)}#${t})`},fO=function(t){const s=c(this,qn).createElementNS(Aa,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},sj=function(t){const s=c(this,qn).createElementNS(Aa,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},Xu=function(t){const s=c(this,qn).createElementNS(Aa,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),c(this,de,Ku).append(s),s},Cp=function(t,s,r){const i=c(this,qn).createElementNS(Aa,s);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)},Ap=function(t,s,r,i){const o=c(this,qn).createElementNS(Aa,"feComponentTransfer");i.append(o),k(this,de,Cp).call(this,o,"feFuncR",t),k(this,de,Cp).call(this,o,"feFuncG",s),k(this,de,Cp).call(this,o,"feFuncB",r)},rj=function(t,s){const r=c(this,qn).createElementNS(Aa,"feComponentTransfer");s.append(r),k(this,de,Cp).call(this,r,"feFuncA",t)},Ep=function(t){return c(this,de,Ku).style.color=t,Km(getComputedStyle(c(this,de,Ku)).getPropertyValue("color"))};class mO{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){ht("Abstract method `_fetch` called.")}}class ET extends mO{async _fetch(e){const t=await qm(e,"arraybuffer");return new Uint8Array(t)}}class pO{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){ht("Abstract method `_fetch` called.")}}class kT extends pO{async _fetch(e){const t=await qm(e,"arraybuffer");return new Uint8Array(t)}}ls&&Ne("Please use the `legacy` build in Node.js environments.");async function bE(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class s9 extends hO{}class r9 extends dO{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class i9 extends uO{async _fetch(e){return bE(e)}}class a9 extends mO{async _fetch(e){return bE(e)}}class o9 extends pO{async _fetch(e){return bE(e)}}const Wu="__forcedDependency",{floor:TT,ceil:PT}=Math;function Cv(n,e,t,s,r,i){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],s),n[e*4+2]=Math.max(n[e*4+2],r),n[e*4+3]=Math.max(n[e*4+3],i)}const ij=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var mf,El;class l9{constructor(e,t){A(this,mf);A(this,El);C(this,mf,e),C(this,El,t)}get length(){return c(this,mf).length}isEmpty(e){return c(this,mf)[e]===ij}minX(e){return c(this,El)[e*4+0]/256}minY(e){return c(this,El)[e*4+1]/256}maxX(e){return(c(this,El)[e*4+2]+1)/256}maxY(e){return(c(this,El)[e*4+3]+1)/256}}mf=new WeakMap,El=new WeakMap;const Av=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};var ws,Ss,jd,ni,Cd,Ka,Xe,tt,Ya,Ns,hx,pf,Ad,Ed,Xa,Kn,qi,fx,aj;class c9{constructor(e,t,s=!1){A(this,fx);A(this,ws,{__proto__:null});A(this,Ss,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Wu]:[]});A(this,jd,new Map);A(this,ni,[]);A(this,Cd,[]);A(this,Ka,[[1,0,0,1,0,0]]);A(this,Xe,[-1/0,-1/0,1/0,1/0]);A(this,tt,new Float64Array([1/0,1/0,-1/0,-1/0]));A(this,Ya,-1);A(this,Ns,new Set);A(this,hx,new Map);A(this,pf,new Map);A(this,Ad);A(this,Ed);A(this,Xa);A(this,Kn);A(this,qi);C(this,Ad,e.width),C(this,Ed,e.height),k(this,fx,aj).call(this,t),s&&C(this,qi,new Map)}growOperationsCount(e){e>=c(this,Kn).length&&k(this,fx,aj).call(this,e,c(this,Kn))}save(e){return C(this,ws,{__proto__:c(this,ws)}),C(this,Ss,{__proto__:c(this,Ss),transform:{__proto__:c(this,Ss).transform},moveText:{__proto__:c(this,Ss).moveText},sameLineText:{__proto__:c(this,Ss).sameLineText},[Wu]:{__proto__:c(this,Ss)[Wu]}}),C(this,Xe,{__proto__:c(this,Xe)}),c(this,ni).push(e),this}restore(e){var r;const t=Object.getPrototypeOf(c(this,ws));if(t===null)return this;C(this,ws,t),C(this,Ss,Object.getPrototypeOf(c(this,Ss))),C(this,Xe,Object.getPrototypeOf(c(this,Xe)));const s=c(this,ni).pop();return s!==void 0&&((r=Av(c(this,qi),e))==null||r.dependencies.add(s),c(this,Kn)[e]=c(this,Kn)[s]),this}recordOpenMarker(e){return c(this,ni).push(e),this}getOpenMarker(){return c(this,ni).length===0?null:c(this,ni).at(-1)}recordCloseMarker(e){var s;const t=c(this,ni).pop();return t!==void 0&&((s=Av(c(this,qi),e))==null||s.dependencies.add(t),c(this,Kn)[e]=c(this,Kn)[t]),this}beginMarkedContent(e){return c(this,Cd).push(e),this}endMarkedContent(e){var s;const t=c(this,Cd).pop();return t!==void 0&&((s=Av(c(this,qi),e))==null||s.dependencies.add(t),c(this,Kn)[e]=c(this,Kn)[t]),this}pushBaseTransform(e){return c(this,Ka).push(he.multiplyByDOMMatrix(c(this,Ka).at(-1),e.getTransform())),this}popBaseTransform(){return c(this,Ka).length>1&&c(this,Ka).pop(),this}recordSimpleData(e,t){return c(this,ws)[e]=t,this}recordIncrementalData(e,t){return c(this,Ss)[e].push(t),this}resetIncrementalData(e,t){return c(this,Ss)[e].length=0,this}recordNamedData(e,t){return c(this,jd).set(e,t),this}recordSimpleDataFromNamed(e,t,s){c(this,ws)[e]=c(this,jd).get(t)??s}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Wu,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in c(this,ws)&&this.recordFutureForcedDependency(t,c(this,ws)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of c(this,Ns))this.recordFutureForcedDependency(Wu,e);return this}resetBBox(e){return c(this,Ya)!==e&&(C(this,Ya,e),c(this,tt)[0]=1/0,c(this,tt)[1]=1/0,c(this,tt)[2]=-1/0,c(this,tt)[3]=-1/0),this}recordClipBox(e,t,s,r,i,o){const l=he.multiplyByDOMMatrix(c(this,Ka).at(-1),t.getTransform()),d=[1/0,1/0,-1/0,-1/0];he.axialAlignedBoundingBox([s,i,r,o],l,d);const u=he.intersect(c(this,Xe),d);return u?(c(this,Xe)[0]=u[0],c(this,Xe)[1]=u[1],c(this,Xe)[2]=u[2],c(this,Xe)[3]=u[3]):(c(this,Xe)[0]=c(this,Xe)[1]=1/0,c(this,Xe)[2]=c(this,Xe)[3]=-1/0),this}recordBBox(e,t,s,r,i,o){const l=c(this,Xe);if(l[0]===1/0)return this;const d=he.multiplyByDOMMatrix(c(this,Ka).at(-1),t.getTransform());if(l[0]===-1/0)return he.axialAlignedBoundingBox([s,i,r,o],d,c(this,tt)),this;const u=[1/0,1/0,-1/0,-1/0];return he.axialAlignedBoundingBox([s,i,r,o],d,u),c(this,tt)[0]=Math.min(c(this,tt)[0],Math.max(u[0],l[0])),c(this,tt)[1]=Math.min(c(this,tt)[1],Math.max(u[1],l[1])),c(this,tt)[2]=Math.max(c(this,tt)[2],Math.min(u[2],l[2])),c(this,tt)[3]=Math.max(c(this,tt)[3],Math.min(u[3],l[3])),this}recordCharacterBBox(e,t,s,r=1,i=0,o=0,l){const d=s.bbox;let u,h;if(d&&(u=d[2]!==d[0]&&d[3]!==d[1]&&c(this,pf).get(s),u!==!1&&(h=[0,0,0,0],he.axialAlignedBoundingBox(d,s.fontMatrix,h),(r!==1||i!==0||o!==0)&&he.scaleMinMax([r,0,0,-r,i,o],h),u)))return this.recordBBox(e,t,h[0],h[2],h[1],h[3]);if(!l)return this.recordFullPageBBox(e);const f=l();return d&&h&&u===void 0&&(u=h[0]<=i-f.actualBoundingBoxLeft&&h[2]>=i+f.actualBoundingBoxRight&&h[1]<=o-f.actualBoundingBoxAscent&&h[3]>=o+f.actualBoundingBoxDescent,c(this,pf).set(s,u),u)?this.recordBBox(e,t,h[0],h[2],h[1],h[3]):this.recordBBox(e,t,i-f.actualBoundingBoxLeft,i+f.actualBoundingBoxRight,o-f.actualBoundingBoxAscent,o+f.actualBoundingBoxDescent)}recordFullPageBBox(e){return c(this,tt)[0]=Math.max(0,c(this,Xe)[0]),c(this,tt)[1]=Math.max(0,c(this,Xe)[1]),c(this,tt)[2]=Math.min(c(this,Ad),c(this,Xe)[2]),c(this,tt)[3]=Math.min(c(this,Ed),c(this,Xe)[3]),this}getSimpleIndex(e){return c(this,ws)[e]}recordDependencies(e,t){const s=c(this,Ns),r=c(this,ws),i=c(this,Ss);for(const o of t)o in c(this,ws)?s.add(r[o]):o in i&&i[o].forEach(s.add,s);return this}recordNamedDependency(e,t){return c(this,jd).has(t)&&c(this,Ns).add(c(this,jd).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Wu]),c(this,qi)){const s=Av(c(this,qi),e),{dependencies:r}=s;c(this,Ns).forEach(r.add,r),c(this,ni).forEach(r.add,r),c(this,Cd).forEach(r.add,r),r.delete(e),s.isRenderingOperation=!0}if(c(this,Ya)===e){const s=TT(c(this,tt)[0]*256/c(this,Ad)),r=TT(c(this,tt)[1]*256/c(this,Ed)),i=PT(c(this,tt)[2]*256/c(this,Ad)),o=PT(c(this,tt)[3]*256/c(this,Ed));Cv(c(this,Xa),e,s,r,i,o);for(const l of c(this,Ns))l!==e&&Cv(c(this,Xa),l,s,r,i,o);for(const l of c(this,ni))l!==e&&Cv(c(this,Xa),l,s,r,i,o);for(const l of c(this,Cd))l!==e&&Cv(c(this,Xa),l,s,r,i,o);t||(c(this,Ns).clear(),C(this,Ya,-1))}return this}recordShowTextOperation(e,t=!1){const s=Array.from(c(this,Ns));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const r of s)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,t=!1){return c(this,Ya)===e&&(C(this,Ya,-1),c(this,Xe)[0]=Math.max(c(this,Xe)[0],c(this,tt)[0]),c(this,Xe)[1]=Math.max(c(this,Xe)[1],c(this,tt)[1]),c(this,Xe)[2]=Math.min(c(this,Xe)[2],c(this,tt)[2]),c(this,Xe)[3]=Math.min(c(this,Xe)[3],c(this,tt)[3]),t||c(this,Ns).clear()),this}_takePendingDependencies(){const e=c(this,Ns);return C(this,Ns,new Set),e}_extractOperation(e){const t=c(this,hx).get(e);return c(this,hx).delete(e),t}_pushPendingDependencies(e){for(const t of e)c(this,Ns).add(t)}take(){return c(this,pf).clear(),new l9(c(this,Kn),c(this,Xa))}takeDebugMetadata(){return c(this,qi)}}ws=new WeakMap,Ss=new WeakMap,jd=new WeakMap,ni=new WeakMap,Cd=new WeakMap,Ka=new WeakMap,Xe=new WeakMap,tt=new WeakMap,Ya=new WeakMap,Ns=new WeakMap,hx=new WeakMap,pf=new WeakMap,Ad=new WeakMap,Ed=new WeakMap,Xa=new WeakMap,Kn=new WeakMap,qi=new WeakMap,fx=new WeakSet,aj=function(e,t){const s=new ArrayBuffer(e*4);C(this,Xa,new Uint8ClampedArray(s)),C(this,Kn,new Uint32Array(s)),t&&t.length>0?(c(this,Kn).set(t),c(this,Kn).fill(ij,t.length)):c(this,Kn).fill(ij)};var lt,zt,si,gf,xf;const GE=class GE{constructor(e,t,s){A(this,lt);A(this,zt);A(this,si);A(this,gf,0);A(this,xf,0);if(e instanceof GE&&c(e,si)===!!s)return e;C(this,lt,e),C(this,zt,t),C(this,si,!!s)}growOperationsCount(){throw new Error("Unreachable")}save(e){return Ot(this,xf)._++,c(this,lt).save(c(this,zt)),this}restore(e){return c(this,xf)>0&&(c(this,lt).restore(c(this,zt)),Ot(this,xf)._--),this}recordOpenMarker(e){return Ot(this,gf)._++,this}getOpenMarker(){return c(this,gf)>0?c(this,zt):c(this,lt).getOpenMarker()}recordCloseMarker(e){return Ot(this,gf)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return c(this,lt).pushBaseTransform(e),this}popBaseTransform(){return c(this,lt).popBaseTransform(),this}recordSimpleData(e,t){return c(this,lt).recordSimpleData(e,c(this,zt)),this}recordIncrementalData(e,t){return c(this,lt).recordIncrementalData(e,c(this,zt)),this}resetIncrementalData(e,t){return c(this,lt).resetIncrementalData(e,c(this,zt)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,s){return c(this,lt).recordSimpleDataFromNamed(e,t,c(this,zt)),this}recordFutureForcedDependency(e,t){return c(this,lt).recordFutureForcedDependency(e,c(this,zt)),this}inheritSimpleDataAsFutureForcedDependencies(e){return c(this,lt).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return c(this,lt).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return c(this,si)||c(this,lt).resetBBox(c(this,zt)),this}recordClipBox(e,t,s,r,i,o){return c(this,si)||c(this,lt).recordClipBox(c(this,zt),t,s,r,i,o),this}recordBBox(e,t,s,r,i,o){return c(this,si)||c(this,lt).recordBBox(c(this,zt),t,s,r,i,o),this}recordCharacterBBox(e,t,s,r,i,o,l){return c(this,si)||c(this,lt).recordCharacterBBox(c(this,zt),t,s,r,i,o,l),this}recordFullPageBBox(e){return c(this,si)||c(this,lt).recordFullPageBBox(c(this,zt)),this}getSimpleIndex(e){return c(this,lt).getSimpleIndex(e)}recordDependencies(e,t){return c(this,lt).recordDependencies(c(this,zt),t),this}recordNamedDependency(e,t){return c(this,lt).recordNamedDependency(c(this,zt),t),this}recordOperation(e){return c(this,lt).recordOperation(c(this,zt),!0),this}recordShowTextOperation(e){return c(this,lt).recordShowTextOperation(c(this,zt),!0),this}bboxToClipBoxDropOperation(e){return c(this,si)||c(this,lt).bboxToClipBoxDropOperation(c(this,zt),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};lt=new WeakMap,zt=new WeakMap,si=new WeakMap,gf=new WeakMap,xf=new WeakMap;let wb=GE;const yr={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Mn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function oj(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,s),n.clip(r)}class wE{isModifyingCurrentTransform(){return!1}getPattern(){ht("Abstract method `getPattern` called.")}}class d9 extends wE{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,r){let i;if(r===Mn.STROKE||r===Mn.FILL){const o=t.current.getClippedPathBoundingBox(r,Mt(e))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,d=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",l,d),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),s=he.transform(s,[1,0,0,1,o[0],o[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),oj(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),i=e.createPattern(u.canvas,"no-repeat");const f=new DOMMatrix(s);i.setTransform(f)}else oj(e,this._bbox),i=this._createGradient(e);return i}}function nS(n,e,t,s,r,i,o,l){const d=e.coords,u=e.colors,h=n.data,f=n.width*4;let m;d[t+1]>d[s+1]&&(m=t,t=s,s=m,m=i,i=o,o=m),d[s+1]>d[r+1]&&(m=s,s=r,r=m,m=o,o=l,l=m),d[t+1]>d[s+1]&&(m=t,t=s,s=m,m=i,i=o,o=m);const p=(d[t]+e.offsetX)*e.scaleX,b=(d[t+1]+e.offsetY)*e.scaleY,g=(d[s]+e.offsetX)*e.scaleX,N=(d[s+1]+e.offsetY)*e.scaleY,v=(d[r]+e.offsetX)*e.scaleX,y=(d[r+1]+e.offsetY)*e.scaleY;if(b>=y)return;const S=u[i],w=u[i+1],j=u[i+2],E=u[o],T=u[o+1],P=u[o+2],_=u[l],R=u[l+1],I=u[l+2],L=Math.round(b),U=Math.round(y);let B,Q,F,H,$,K,D,M;for(let q=L;q<=U;q++){if(q<N){const V=q<b?0:(b-q)/(b-N);B=p-(p-g)*V,Q=S-(S-E)*V,F=w-(w-T)*V,H=j-(j-P)*V}else{let V;q>y?V=1:N===y?V=0:V=(N-q)/(N-y),B=g-(g-v)*V,Q=E-(E-_)*V,F=T-(T-R)*V,H=P-(P-I)*V}let z;q<b?z=0:q>y?z=1:z=(b-q)/(b-y),$=p-(p-v)*z,K=S-(S-_)*z,D=w-(w-R)*z,M=j-(j-I)*z;const G=Math.round(Math.min(B,$)),W=Math.round(Math.max(B,$));let X=f*q+G*4;for(let V=G;V<=W;V++)z=(B-V)/(B-$),z<0?z=0:z>1&&(z=1),h[X++]=Q-(Q-K)*z|0,h[X++]=F-(F-D)*z|0,h[X++]=H-(H-M)*z|0,h[X++]=255}}function u9(n,e,t){const s=e.coords,r=e.colors;let i,o;switch(e.type){case"lattice":const l=e.verticesPerRow,d=Math.floor(s.length/l)-1,u=l-1;for(i=0;i<d;i++){let h=i*l;for(let f=0;f<u;f++,h++)nS(n,t,s[h],s[h+1],s[h+l],r[h],r[h+1],r[h+l]),nS(n,t,s[h+l+1],s[h+1],s[h+l],r[h+l+1],r[h+1],r[h+l])}break;case"triangles":for(i=0,o=s.length;i<o;i+=3)nS(n,t,s[i],s[i+1],s[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class h9 extends wE{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const l=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-d,f=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),p=u/f,b=h/m,g={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-d,scaleX:1/p,scaleY:1/b},N=f+2*2,v=m+2*2,y=s.getCanvas("mesh",N,v),S=y.context,w=S.createImageData(f,m);if(t){const E=w.data;for(let T=0,P=E.length;T<P;T+=4)E[T]=t[0],E[T+1]=t[1],E[T+2]=t[2],E[T+3]=255}for(const E of this._figures)u9(w,E,g);return S.putImageData(w,2,2),{canvas:y.canvas,offsetX:l-2*p,offsetY:d-2*b,scaleX:p,scaleY:b}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,r){oj(e,this._bbox);const i=new Float32Array(2);if(r===Mn.SHADING)he.singularValueDecompose2dScale(Mt(e),i);else if(this.matrix){he.singularValueDecompose2dScale(this.matrix,i);const[l,d]=i;he.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=l,i[1]*=d}else he.singularValueDecompose2dScale(t.baseTransform,i);const o=this._createMeshCanvas(i,r===Mn.SHADING?null:this._background,t.cachedCanvases);return r!==Mn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class f9 extends wE{getPattern(){return"hotpink"}}function m9(n){switch(n[0]){case"RadialAxial":return new d9(n);case"Mesh":return new h9(n);case"Dummy":return new f9}throw new Error(`Unknown IR type: ${n[0]}`)}const _T={COLORED:1,UNCOLORED:2},Hb=class Hb{constructor(e,t,s,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e,t){var K,D;const{bbox:s,operatorList:r,paintType:i,tilingType:o,color:l,canvasGraphicsFactory:d}=this;let{xstep:u,ystep:h}=this;u=Math.abs(u),h=Math.abs(h),Hw("TilingType: "+o);const f=s[0],m=s[1],p=s[2],b=s[3],g=p-f,N=b-m,v=new Float32Array(2);he.singularValueDecompose2dScale(this.matrix,v);const[y,S]=v;he.singularValueDecompose2dScale(this.baseTransform,v);const w=y*v[0],j=S*v[1];let E=g,T=N,P=!1,_=!1;const R=Math.ceil(u*w),I=Math.ceil(h*j),L=Math.ceil(g*w),U=Math.ceil(N*j);R>=L?E=u:P=!0,I>=U?T=h:_=!0;const B=this.getSizeAndScale(E,this.ctx.canvas.width,w),Q=this.getSizeAndScale(T,this.ctx.canvas.height,j),F=e.cachedCanvases.getCanvas("pattern",B.size,Q.size),H=F.context,$=d.createCanvasGraphics(H,t);if($.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext($,i,l),H.translate(-B.scale*f,-Q.scale*m),$.transform(0,B.scale,0,0,Q.scale,0,0),H.save(),(K=$.dependencyTracker)==null||K.save(),this.clipBbox($,f,m,p,b),$.baseTransform=Mt($.ctx),$.executeOperatorList(r),$.endDrawing(),(D=$.dependencyTracker)==null||D.restore(),H.restore(),P||_){const M=F.canvas;P&&(E=u),_&&(T=h);const q=this.getSizeAndScale(E,this.ctx.canvas.width,w),z=this.getSizeAndScale(T,this.ctx.canvas.height,j),G=q.size,W=z.size,X=e.cachedCanvases.getCanvas("pattern-workaround",G,W),V=X.context,se=P?Math.floor(g/u):0,ve=_?Math.floor(N/h):0;for(let ae=0;ae<=se;ae++)for(let ce=0;ce<=ve;ce++)V.drawImage(M,G*ae,W*ce,G,W,0,0,G,W);return{canvas:X.canvas,scaleX:q.scale,scaleY:z.scale,offsetX:f,offsetY:m}}return{canvas:F.canvas,scaleX:B.scale,scaleY:Q.scale,offsetX:f,offsetY:m}}getSizeAndScale(e,t,s){const r=Math.max(Hb.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*s);return i>=r?i=r:s=i/e,{scale:s,size:i}}clipBbox(e,t,s,r,i){const o=r-t,l=i-s;e.ctx.rect(t,s,o,l),he.axialAlignedBoundingBox([t,s,r,i],Mt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const r=e.ctx,i=e.current;switch(t){case _T.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;r.fillStyle=i.fillColor=o,r.strokeStyle=i.strokeColor=l;break;case _T.UNCOLORED:r.fillStyle=r.strokeStyle=s,i.fillColor=i.strokeColor=s;break;default:throw new Iq(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,r,i){let o=s;r!==Mn.SHADING&&(o=he.transform(o,t.baseTransform),this.matrix&&(o=he.transform(o,this.matrix)));const l=this.createPatternCanvas(t,i);let d=new DOMMatrix(o);d=d.translate(l.offsetX,l.offsetY),d=d.scale(1/l.scaleX,1/l.scaleY);const u=e.createPattern(l.canvas,"repeat");return u.setTransform(d),u}};J(Hb,"MAX_PATTERN_SIZE",3e3);let lj=Hb;function p9({src:n,srcPos:e=0,dest:t,width:s,height:r,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const l=Sn.isLittleEndian?4278190080:255,[d,u]=o?[i,l]:[l,i],h=s>>3,f=s&7,m=n.length;t=new Uint32Array(t.buffer);let p=0;for(let b=0;b<r;b++){for(const N=e+h;e<N;e++){const v=e<m?n[e]:255;t[p++]=v&128?u:d,t[p++]=v&64?u:d,t[p++]=v&32?u:d,t[p++]=v&16?u:d,t[p++]=v&8?u:d,t[p++]=v&4?u:d,t[p++]=v&2?u:d,t[p++]=v&1?u:d}if(f===0)continue;const g=e<m?n[e++]:255;for(let N=0;N<f;N++)t[p++]=g&1<<7-N?u:d}return{srcPos:e,destPos:p}}const MT=16,RT=100,g9=15,DT=10,Es=16,sS=new DOMMatrix,nr=new Float32Array(2),hh=new Float32Array([1/0,1/0,-1/0,-1/0]);function x9(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,r,i,o,l){e.transform(t,s,r,i,o,l),this.__originalTransform(t,s,r,i,o,l)},n.setTransform=function(t,s,r,i,o,l){e.setTransform(t,s,r,i,o,l),this.__originalSetTransform(t,s,r,i,o,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,r,i,o,l){e.bezierCurveTo(t,s,r,i,o,l),this.__originalBezierCurveTo(t,s,r,i,o,l)},n.rect=function(t,s,r,i){e.rect(t,s,r,i),this.__originalRect(t,s,r,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class y9{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,s)):(r=this.canvasFactory.create(t,s),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Ev(n,e,t,s,r,i,o,l,d,u){const[h,f,m,p,b,g]=Mt(n);if(f===0&&m===0){const y=o*h+b,S=Math.round(y),w=l*p+g,j=Math.round(w),E=(o+d)*h+b,T=Math.abs(Math.round(E)-S)||1,P=(l+u)*p+g,_=Math.abs(Math.round(P)-j)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(p),S,j),n.drawImage(e,t,s,r,i,0,0,T,_),n.setTransform(h,f,m,p,b,g),[T,_]}if(h===0&&p===0){const y=l*m+b,S=Math.round(y),w=o*f+g,j=Math.round(w),E=(l+u)*m+b,T=Math.abs(Math.round(E)-S)||1,P=(o+d)*f+g,_=Math.abs(Math.round(P)-j)||1;return n.setTransform(0,Math.sign(f),Math.sign(m),0,S,j),n.drawImage(e,t,s,r,i,0,0,_,T),n.setTransform(h,f,m,p,b,g),[_,T]}n.drawImage(e,t,s,r,i,o,l,d,u);const N=Math.hypot(h,f),v=Math.hypot(m,p);return[N*d,v*u]}class IT{constructor(e,t,s){J(this,"alphaIsShape",!1);J(this,"fontSize",0);J(this,"fontSizeScale",1);J(this,"textMatrix",null);J(this,"textMatrixScale",1);J(this,"fontMatrix",DN);J(this,"leading",0);J(this,"x",0);J(this,"y",0);J(this,"lineX",0);J(this,"lineY",0);J(this,"charSpacing",0);J(this,"wordSpacing",0);J(this,"textHScale",1);J(this,"textRenderingMode",Cn.FILL);J(this,"textRise",0);J(this,"fillColor","#000000");J(this,"strokeColor","#000000");J(this,"patternFill",!1);J(this,"patternStroke",!1);J(this,"fillAlpha",1);J(this,"strokeAlpha",1);J(this,"lineWidth",1);J(this,"activeSMask",null);J(this,"transferMaps","none");s==null||s(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=hh.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Mn.FILL,t=null){const s=this.minMax.slice();if(e===Mn.STROKE){t||ht("Stroke bounding box must include transform."),he.singularValueDecompose2dScale(t,nr);const r=nr[0]*this.lineWidth/2,i=nr[1]*this.lineWidth/2;s[0]-=r,s[1]-=i,s[2]+=r,s[3]+=i}return s}updateClipFromPath(){const e=he.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(hh,0)}getClippedPathBoundingBox(e=Mn.FILL,t=null){return he.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function LT(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,r=t%Es,i=(t-r)/Es,o=r===0?i:i+1,l=n.createImageData(s,Es);let d=0,u;const h=e.data,f=l.data;let m,p,b,g;if(e.kind===Jp.GRAYSCALE_1BPP){const N=h.byteLength,v=new Uint32Array(f.buffer,0,f.byteLength>>2),y=v.length,S=s+7>>3,w=4294967295,j=Sn.isLittleEndian?4278190080:255;for(m=0;m<o;m++){for(b=m<i?Es:r,u=0,p=0;p<b;p++){const E=N-d;let T=0;const P=E>S?s:E*8-7,_=P&-8;let R=0,I=0;for(;T<_;T+=8)I=h[d++],v[u++]=I&128?w:j,v[u++]=I&64?w:j,v[u++]=I&32?w:j,v[u++]=I&16?w:j,v[u++]=I&8?w:j,v[u++]=I&4?w:j,v[u++]=I&2?w:j,v[u++]=I&1?w:j;for(;T<P;T++)R===0&&(I=h[d++],R=128),v[u++]=I&R?w:j,R>>=1}for(;u<y;)v[u++]=0;n.putImageData(l,0,m*Es)}}else if(e.kind===Jp.RGBA_32BPP){for(p=0,g=s*Es*4,m=0;m<i;m++)f.set(h.subarray(d,d+g)),d+=g,n.putImageData(l,0,p),p+=Es;m<o&&(g=s*r*4,f.set(h.subarray(d,d+g)),n.putImageData(l,0,p))}else if(e.kind===Jp.RGB_24BPP)for(b=Es,g=s*b,m=0;m<o;m++){for(m>=i&&(b=r,g=s*b),u=0,p=g;p--;)f[u++]=h[d++],f[u++]=h[d++],f[u++]=h[d++],f[u++]=255;n.putImageData(l,0,m*Es)}else throw new Error(`bad image kind: ${e.kind}`)}function FT(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,r=t%Es,i=(t-r)/Es,o=r===0?i:i+1,l=n.createImageData(s,Es);let d=0;const u=e.data,h=l.data;for(let f=0;f<o;f++){const m=f<i?Es:r;({srcPos:d}=p9({src:u,srcPos:d,dest:h,width:s,height:m,nonBlackColor:0})),n.putImageData(l,0,f*Es)}}function lp(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function kv(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function OT(n,e){if(e)return!0;he.singularValueDecompose2dScale(n,nr);const t=Math.fround(Si.pixelRatio*Io.PDF_TO_CSS_UNITS);return nr[0]<=t&&nr[1]<=t}const v9=["butt","round","square"],b9=["miter","round","bevel"],w9={},BT={};var Ni,cj,dj,uj;const qE=class qE{constructor(e,t,s,r,i,{optionalContentConfig:o,markedContentStack:l=null},d,u,h){A(this,Ni);this.ctx=e,this.current=new IT(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new y9(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(e,t,s=null){var r;return typeof t=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):s}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:r=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=l,s){const d=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Mt(this.compositeCtx))}this.ctx.save(),kv(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Mt(this.ctx)}executeOperatorList(e,t,s,r,i){var v;const o=e.argsArray,l=e.fnArray;let d=t||0;const u=o.length;if(u===d)return d;const h=u-d>DT&&typeof s=="function",f=h?Date.now()+g9:0;let m=0;const p=this.commonObjs,b=this.objs;let g,N;for(;;){if(r!==void 0&&d===r.nextBreakPoint)return r.breakIt(d,s),d;if(!i||i(d))if(g=l[d],N=o[d]??null,g!==Pm.dependency)N===null?this[g](d):this[g](d,...N);else for(const y of N){(v=this.dependencyTracker)==null||v.recordNamedData(y,d);const S=y.startsWith("g_")?p:b;if(!S.has(y))return S.get(y,s),d}if(d++,d===u)return d;if(h&&++m>DT){if(Date.now()>f)return s(),d;m=0}}}endDrawing(){k(this,Ni,cj).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),k(this,Ni,dj).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),l=s,d=r,u="prescale1",h,f;for(;i>2&&l>1||o>2&&d>1;){let m=l,p=d;i>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),i/=l/m),o>2&&d>1&&(p=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,o/=d/p),h=this.cachedCanvases.getCanvas(u,m,p),f=h.context,f.clearRect(0,0,m,p),f.drawImage(e,0,0,l,d,0,0,m,p),e=h.canvas,l=m,d=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:d}}_createMaskCanvas(e,t){var R,I;const s=this.ctx,{width:r,height:i}=t,o=this.current.fillColor,l=this.current.patternFill,d=Mt(s);let u,h,f,m;if((t.bitmap||t.data)&&t.count>1){const L=t.bitmap||t.data.buffer;h=JSON.stringify(l?d:[d.slice(0,4),o]),u=this._cachedBitmapsMap.get(L),u||(u=new Map,this._cachedBitmapsMap.set(L,u));const U=u.get(h);if(U&&!l){const B=Math.round(Math.min(d[0],d[2])+d[4]),Q=Math.round(Math.min(d[1],d[3])+d[5]);return(R=this.dependencyTracker)==null||R.recordDependencies(e,yr.transformAndFill),{canvas:U,offsetX:B,offsetY:Q}}f=U}f||(m=this.cachedCanvases.getCanvas("maskCanvas",r,i),FT(m.context,t));let p=he.transform(d,[1/r,0,0,-1/i,0,0]);p=he.transform(p,[1,0,0,1,0,-i]);const b=hh.slice();he.axialAlignedBoundingBox([0,0,r,i],p,b);const[g,N,v,y]=b,S=Math.round(v-g)||1,w=Math.round(y-N)||1,j=this.cachedCanvases.getCanvas("fillCanvas",S,w),E=j.context,T=g,P=N;E.translate(-T,-P),E.transform(...p),f||(f=this._scaleImage(m.canvas,ki(E)),f=f.img,u&&l&&u.set(h,f)),E.imageSmoothingEnabled=OT(Mt(E),t.interpolate),Ev(E,f,0,0,f.width,f.height,0,0,r,i),E.globalCompositeOperation="source-in";const _=he.transform(ki(E),[1,0,0,1,-T,-P]);return E.fillStyle=l?o.getPattern(s,this,_,Mn.FILL,e):o,E.fillRect(0,0,r,i),u&&!l&&(this.cachedCanvases.delete("fillCanvas"),u.set(h,j.canvas)),(I=this.dependencyTracker)==null||I.recordDependencies(e,yr.transformAndFill),{canvas:j.canvas,offsetX:Math.round(T),offsetY:Math.round(P)}}setLineWidth(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineCap",e),this.ctx.lineCap=v9[t]}setLineJoin(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineJoin",e),this.ctx.lineJoin=b9[t]}setMiterLimit(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,s){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=s)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var s,r,i,o,l;for(const[d,u]of t)switch(d){case"LW":this.setLineWidth(e,u);break;case"LC":this.setLineCap(e,u);break;case"LJ":this.setLineJoin(e,u);break;case"ML":this.setMiterLimit(e,u);break;case"D":this.setDash(e,u[0],u[1]);break;case"RI":this.setRenderingIntent(e,u);break;case"FL":this.setFlatness(e,u);break;case"Font":this.setFont(e,u[0],u[1]);break;case"CA":(s=this.dependencyTracker)==null||s.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=u;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(i=this.dependencyTracker)==null||i.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=u;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(l=this.dependencyTracker)==null||l.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,s=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,t,s);this.suspendedCtx=this.ctx;const o=this.ctx=i.context;o.setTransform(this.suspendedCtx.getTransform()),lp(this.suspendedCtx,o),x9(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),lp(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,r){const i=r[0],o=r[1],l=r[2]-i,d=r[3]-o;l===0||d===0||(this.genericComposeSMask(t.context,s,l,d,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,r,i,o,l,d,u,h,f){let m=e.canvas,p=d-h,b=u-f;if(o)if(p<0||b<0||p+s>m.width||b+r>m.height){const N=this.cachedCanvases.getCanvas("maskExtension",s,r),v=N.context;v.drawImage(m,-p,-b),v.globalCompositeOperation="destination-atop",v.fillStyle=o,v.fillRect(0,0,s,r),v.globalCompositeOperation="source-over",m=N.canvas,p=b=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const N=new Path2D;N.rect(p,b,s,r),e.clip(N),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(p,b,s,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const g=new Path2D;g.rect(d,u,s,r),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(m,p,b,s,r,d,u,s,r),t.restore()}save(e){var s;this.inSMaskMode&&lp(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(s=this.dependencyTracker)==null||s.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&lp(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,r,i,o,l){var d;(d=this.dependencyTracker)==null||d.recordIncrementalData("transform",e),this.ctx.transform(t,s,r,i,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s,r){let[i]=s;if(!r){i||(i=s[0]=new Path2D),this[t](e,i);return}if(this.dependencyTracker!==null){const o=t===Pm.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-o,r[2]+o,r[1]-o,r[3]+o).recordDependencies(e,["transform"])}if(!(i instanceof Path2D)){const o=s[0]=new Path2D;for(let l=0,d=i.length;l<d;)switch(i[l++]){case wv.moveTo:o.moveTo(i[l++],i[l++]);break;case wv.lineTo:o.lineTo(i[l++],i[l++]);break;case wv.curveTo:o.bezierCurveTo(i[l++],i[l++],i[l++],i[l++],i[l++],i[l++]);break;case wv.closePath:o.closePath();break;default:Ne(`Unrecognized drawing path operator: ${i[l-1]}`);break}i=o}he.axialAlignedBoundingBox(r,Mt(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,s=!0){var o;const r=this.ctx,i=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const l=i.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=i.getPattern(r,this,ki(r),Mn.STROKE,e),l){const d=new Path2D;d.addPath(t,r.getTransform().invertSelf().multiplySelf(l)),t=d}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,yr.stroke),s&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Mn.STROKE,Mt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,s=!0){var u,h,f;const r=this.ctx,i=this.current.fillColor,o=this.current.patternFill;let l=!1;if(o){const m=i.isModifyingCurrentTransform()?r.getTransform():null;if((u=this.dependencyTracker)==null||u.save(e),r.save(),r.fillStyle=i.getPattern(r,this,ki(r),Mn.FILL,e),m){const p=new Path2D;p.addPath(t,r.getTransform().invertSelf().multiplySelf(m)),t=p}l=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),(h=this.dependencyTracker)==null||h.recordDependencies(e,yr.fill),l&&(r.restore(),(f=this.dependencyTracker)==null||f.restore(e)),s&&this.consumePath(e,t,d)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var s;this.ctx.fill(t),(s=this.dependencyTracker)==null||s.recordDependencies(e,yr.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=w9}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=BT}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;t!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(t!==void 0){const r=new Path2D,i=s.getTransform().invertSelf();for(const{transform:o,x:l,y:d,fontSize:u,path:h}of t)h&&r.addPath(h,new DOMMatrix(o).preMultiplySelf(i).translate(l,d).scale(u,-u));s.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,s){var f,m;(f=this.dependencyTracker)==null||f.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const r=this.commonObjs.get(t),i=this.current;if(!r)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=r.fontMatrix||DN,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Ne("Invalid font matrix for font "+t),s<0?(s=-s,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=s,r.isType3Font)return;const o=r.loadedName||"sans-serif",l=((m=r.systemFontInfo)==null?void 0:m.css)||`"${o}", ${r.fallbackName}`;let d="normal";r.black?d="900":r.bold&&(d="bold");const u=r.italic?"italic":"normal";let h=s;s<MT?h=MT:s>RT&&(h=RT),this.current.fontSizeScale=s/h,this.ctx.font=`${u} ${d} ${h}px ${l}`}setTextRenderingMode(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,s){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=s}setLeadingMoveText(e,t,s){this.setLeading(e,-s),this.moveText(e,t,s)}setTextMatrix(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textMatrix",e);const{current:s}=this;s.textMatrix=t,s.textMatrixScale=Math.hypot(t[0],t[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,s,r,i,o){var v,y,S,w;const l=this.ctx,d=this.current,u=d.font,h=d.textRenderingMode,f=d.fontSize/d.fontSizeScale,m=h&Cn.FILL_STROKE_MASK,p=!!(h&Cn.ADD_TO_PATH_FLAG),b=d.patternFill&&!u.missingFile,g=d.patternStroke&&!u.missingFile;let N;if((u.disableFontFace||p||b||g)&&!u.missingFile&&(N=u.getPathGenerator(this.commonObjs,t)),N&&(u.disableFontFace||b||g)){l.save(),l.translate(s,r),l.scale(f,-f),(v=this.dependencyTracker)==null||v.recordCharacterBBox(e,l,u);let j;if(m===Cn.FILL||m===Cn.FILL_STROKE)if(i){j=l.getTransform(),l.setTransform(...i);const E=k(this,Ni,uj).call(this,N,j,i);l.fill(E)}else l.fill(N);if(m===Cn.STROKE||m===Cn.FILL_STROKE)if(o){j||(j=l.getTransform()),l.setTransform(...o);const{a:E,b:T,c:P,d:_}=j,R=he.inverseTransform(o),I=he.transform([E,T,P,_,0,0],R);he.singularValueDecompose2dScale(I,nr),l.lineWidth*=Math.max(nr[0],nr[1])/f,l.stroke(k(this,Ni,uj).call(this,N,j,o))}else l.lineWidth/=f,l.stroke(N);l.restore()}else(m===Cn.FILL||m===Cn.FILL_STROKE)&&(l.fillText(t,s,r),(y=this.dependencyTracker)==null||y.recordCharacterBBox(e,l,u,f,s,r,()=>l.measureText(t))),(m===Cn.STROKE||m===Cn.FILL_STROKE)&&(this.dependencyTracker&&((S=this.dependencyTracker)==null||S.recordCharacterBBox(e,l,u,f,s,r,()=>l.measureText(t)).recordDependencies(e,yr.stroke)),l.strokeText(t,s,r));p&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Mt(l),x:s,y:r,fontSize:f,path:N}),(w=this.dependencyTracker)==null||w.recordCharacterBBox(e,l,u,f,s,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){s=!0;break}return Ee(this,"isFontSubpixelAAEnabled",s)}showText(e,t){var P,_,R,I;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,yr.showText).resetBBox(e),this.current.textRenderingMode&Cn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,r=s.font;if(r.isType3Font){this.showType3Text(e,t),(P=this.dependencyTracker)==null||P.recordShowTextOperation(e);return}const i=s.fontSize;if(i===0){(_=this.dependencyTracker)==null||_.recordOperation(e);return}const o=this.ctx,l=s.fontSizeScale,d=s.charSpacing,u=s.wordSpacing,h=s.fontDirection,f=s.textHScale*h,m=t.length,p=r.vertical,b=p?1:-1,g=r.defaultVMetrics,N=i*s.fontMatrix[0],v=s.textRenderingMode===Cn.FILL&&!r.disableFontFace&&!s.patternFill;o.save(),s.textMatrix&&o.transform(...s.textMatrix),o.translate(s.x,s.y+s.textRise),h>0?o.scale(f,-1):o.scale(f,1);let y,S;if(s.patternFill){o.save();const L=s.fillColor.getPattern(o,this,ki(o),Mn.FILL,e);y=Mt(o),o.restore(),o.fillStyle=L}if(s.patternStroke){o.save();const L=s.strokeColor.getPattern(o,this,ki(o),Mn.STROKE,e);S=Mt(o),o.restore(),o.strokeStyle=L}let w=s.lineWidth;const j=s.textMatrixScale;if(j===0||w===0){const L=s.textRenderingMode&Cn.FILL_STROKE_MASK;(L===Cn.STROKE||L===Cn.FILL_STROKE)&&(w=this.getSinglePixelWidth())}else w/=j;if(l!==1&&(o.scale(l,l),w/=l),o.lineWidth=w,r.isInvalidPDFjsFont){const L=[];let U=0;for(const Q of t)L.push(Q.unicode),U+=Q.width;const B=L.join("");if(o.fillText(B,0,0),this.dependencyTracker!==null){const Q=o.measureText(B);this.dependencyTracker.recordBBox(e,this.ctx,-Q.actualBoundingBoxLeft,Q.actualBoundingBoxRight,-Q.actualBoundingBoxAscent,Q.actualBoundingBoxDescent).recordShowTextOperation(e)}s.x+=U*N*f,o.restore(),this.compose();return}let E=0,T;for(T=0;T<m;++T){const L=t[T];if(typeof L=="number"){E+=b*L*i/1e3;continue}let U=!1;const B=(L.isSpace?u:0)+d,Q=L.fontChar,F=L.accent;let H,$,K=L.width;if(p){const q=L.vmetric||g,z=-(L.vmetric?q[1]:K*.5)*N,G=q[2]*N;K=q?-q[0]:K,H=z/l,$=(E+G)/l}else H=E/l,$=0;let D;if(r.remeasure&&K>0){D=o.measureText(Q);const q=D.width*1e3/i*l;if(K<q&&this.isFontSubpixelAAEnabled){const z=K/q;U=!0,o.save(),o.scale(z,1),H/=z}else K!==q&&(H+=(K-q)/2e3*i/l)}if(this.contentVisible&&(L.isInFont||r.missingFile)){if(v&&!F)o.fillText(Q,H,$),(R=this.dependencyTracker)==null||R.recordCharacterBBox(e,o,D?{bbox:null}:r,i/l,H,$,()=>D??o.measureText(Q));else if(this.paintChar(e,Q,H,$,y,S),F){const q=H+i*F.offset.x/l,z=$-i*F.offset.y/l;this.paintChar(e,F.fontChar,q,z,y,S)}}const M=p?K*N-B*h:K*N+B*h;E+=M,U&&o.restore()}p?s.y-=E:s.x+=E*f,o.restore(),this.compose(),(I=this.dependencyTracker)==null||I.recordShowTextOperation(e)}showType3Text(e,t){const s=this.ctx,r=this.current,i=r.font,o=r.fontSize,l=r.fontDirection,d=i.vertical?1:-1,u=r.charSpacing,h=r.wordSpacing,f=r.textHScale*l,m=r.fontMatrix||DN,p=t.length,b=r.textRenderingMode===Cn.INVISIBLE;let g,N,v,y;if(b||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),s.scale(f,l);const S=this.dependencyTracker;for(this.dependencyTracker=S?new wb(S,e):null,g=0;g<p;++g){if(N=t[g],typeof N=="number"){y=d*N*o/1e3,this.ctx.translate(y,0),r.x+=y*f;continue}const w=(N.isSpace?h:0)+u,j=i.charProcOperatorList[N.operatorListId];j?this.contentVisible&&(this.save(),s.scale(o,o),s.transform(...m),this.executeOperatorList(j),this.restore()):Ne(`Type3 character "${N.operatorListId}" is not available.`);const E=[N.width,0];he.applyTransform(E,m),v=E[0]*o+w,s.translate(v,0),r.x+=v*f}s.restore(),S&&(this.dependencyTracker=S)}setCharWidth(e,t,s){}setCharWidthAndBounds(e,t,s,r,i,o,l){var u;const d=new Path2D;d.rect(r,i,o-r,l-i),this.ctx.clip(d),(u=this.dependencyTracker)==null||u.recordBBox(e,this.ctx,r,o,i,l).recordClipBox(e,this.ctx,r,o,i,l),this.endPath(e)}getColorN_Pattern(e,t){let s;if(t[0]==="TilingPattern"){const r=this.baseTransform||Mt(this.ctx),i={createCanvasGraphics:(o,l)=>new qE(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new wb(this.dependencyTracker,l,!0):null)};s=new lj(t,this.ctx,i,r)}else s=this._getPattern(e,t[1],t[2]);return s}setStrokeColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,s=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=m9(this.getObject(e,t)),this.cachedPatterns.set(t,r)),s&&(r.matrix=s),r}shadingFill(e,t){var o;if(!this.contentVisible)return;const s=this.ctx;this.save(e);const r=this._getPattern(e,t);s.fillStyle=r.getPattern(s,this,ki(s),Mn.SHADING,e);const i=ki(s);if(i){const{width:l,height:d}=s.canvas,u=hh.slice();he.axialAlignedBoundingBox([0,0,l,d],i,u);const[h,f,m,p]=u;this.ctx.fillRect(h,f,m-h,p-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,yr.transform).recordDependencies(e,yr.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){ht("Should not call beginInlineImage")}beginImageData(){ht("Should not call beginImageData")}paintFormXObjectBegin(e,t,s){var r;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Mt(this.ctx),s)){he.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[i,o,l,d]=s,u=new Path2D;u.rect(i,o,l-i,d-o),this.ctx.clip(u),(r=this.dependencyTracker)==null||r.recordClipBox(e,this.ctx,i,l,o,d),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var S;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;t.isolated||Hw("TODO: Support non-isolated groups."),t.knockout&&Ne("Knockout groups not supported.");const r=Mt(s);if(t.matrix&&s.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=hh.slice();he.axialAlignedBoundingBox(t.bbox,Mt(s),i);const o=[0,0,s.canvas.width,s.canvas.height];i=he.intersect(i,o)||[0,0,0,0];const l=Math.floor(i[0]),d=Math.floor(i[1]),u=Math.max(Math.ceil(i[2])-l,1),h=Math.max(Math.ceil(i[3])-d,1);this.current.startNewPathAndClipBox([0,0,u,h]);let f="groupAt"+this.groupLevel;t.smask&&(f+="_smask_"+this.smaskCounter++%2);const m=this.cachedCanvases.getCanvas(f,u,h),p=m.context;p.translate(-l,-d),p.transform(...r);let b=new Path2D;const[g,N,v,y]=t.bbox;if(b.rect(g,N,v-g,y-N),t.matrix){const w=new Path2D;w.addPath(b,new DOMMatrix(t.matrix)),b=w}p.clip(b),t.smask&&this.smaskStack.push({canvas:m.canvas,context:p,offsetX:l,offsetY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(l,d),s.save()),lp(s,p),this.ctx=p,(S=this.dependencyTracker)==null||S.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(e,t){var i;if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(i=this.dependencyTracker)==null||i.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Mt(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const l=hh.slice();he.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,l),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,s,r,i,o){if(k(this,Ni,cj).call(this),kv(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const l=s[2]-s[0],d=s[3]-s[1];if(o&&this.annotationCanvasMap){r=r.slice(),r[4]-=s[0],r[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=l,s[3]=d,he.singularValueDecompose2dScale(Mt(this.ctx),nr);const{viewportScale:u}=this,h=Math.ceil(l*this.outputScaleX*u),f=Math.ceil(d*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(h,f);const{canvas:m,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(t,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(nr[0],0,0,-nr[1],0,d*nr[1]),kv(this.ctx)}else{kv(this.ctx),this.endPath(e);const u=new Path2D;u.rect(s[0],s[1],l,d),this.ctx.clip(u)}}this.current=new IT(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),k(this,Ni,dj).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var l;if(!this.contentVisible)return;const s=t.count;t=this.getObject(e,t.data,t),t.count=s;const r=this.ctx,i=this._createMaskCanvas(e,t),o=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,i.offsetX,i.offsetY),(l=this.dependencyTracker)==null||l.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+o.width,i.offsetY,i.offsetY+o.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s,r=0,i=0,o,l){var f,m,p;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const d=this.ctx;d.save();const u=Mt(d);d.transform(s,r,i,o,0,0);const h=this._createMaskCanvas(e,t);d.setTransform(1,0,0,1,h.offsetX-u[4],h.offsetY-u[5]),(f=this.dependencyTracker)==null||f.resetBBox(e);for(let b=0,g=l.length;b<g;b+=2){const N=he.transform(u,[s,r,i,o,l[b],l[b+1]]);d.drawImage(h.canvas,N[4],N[5]),(m=this.dependencyTracker)==null||m.recordBBox(e,this.ctx,N[4],N[4]+h.canvas.width,N[5],N[5]+h.canvas.height)}d.restore(),this.compose(),(p=this.dependencyTracker)==null||p.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var o,l,d;if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,i=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,yr.transformAndFill);for(const u of t){const{data:h,width:f,height:m,transform:p}=u,b=this.cachedCanvases.getCanvas("maskCanvas",f,m),g=b.context;g.save();const N=this.getObject(e,h,u);FT(g,N),g.globalCompositeOperation="source-in",g.fillStyle=i?r.getPattern(g,this,ki(s),Mn.FILL,e):r,g.fillRect(0,0,f,m),g.restore(),s.save(),s.transform(...p),s.scale(1,-1),Ev(s,b.canvas,0,0,f,m,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,s,0,f,0,m),s.restore()}this.compose(),(d=this.dependencyTracker)==null||d.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){Ne("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,s)}paintImageXObjectRepeat(e,t,s,r,i){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){Ne("Dependent image isn't ready yet");return}const l=o.width,d=o.height,u=[];for(let h=0,f=i.length;h<f;h+=2)u.push({transform:[s,0,0,r,i[h],i[h+1]],x:0,y:0,w:l,h:d});this.paintInlineImageXObjectGroup(e,o,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",s,r),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e,t){var u;if(!this.contentVisible)return;const s=t.width,r=t.height,i=this.ctx;this.save(e);const{filter:o}=i;o!=="none"&&o!==""&&(i.filter="none"),i.scale(1/s,-1/r);let l;if(t.bitmap)l=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)l=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",s,r).context;LT(f,t),l=this.applyTransferMapsToCanvas(f)}const d=this._scaleImage(l,ki(i));i.imageSmoothingEnabled=OT(Mt(i),t.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,i,0,s,-r,0).recordDependencies(e,yr.imageXObject).recordOperation(e),Ev(i,d.img,0,0,d.paintWidth,d.paintHeight,0,-r,s,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,s){var o,l,d;if(!this.contentVisible)return;const r=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const u=t.width,h=t.height,m=this.cachedCanvases.getCanvas("inlineImage",u,h).context;LT(m,t),i=this.applyTransferMapsToCanvas(m)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const u of s)r.save(),r.transform(...u.transform),r.scale(1,-1),Ev(r,i,u.x,u.y,u.w,u.h,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,r,0,1,-1,0),r.restore();(d=this.dependencyTracker)==null||d.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,yr.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,s){}beginMarkedContent(e,t){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,s){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,s){var o,l;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const i=this.ctx;this.pendingClip?(r||(this.pendingClip===BT?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(l=this.dependencyTracker)==null||l.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Mt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:r,d:i}=this.ctx.getTransform();let o,l;if(s===0&&r===0){const d=Math.abs(t),u=Math.abs(i);if(d===u)if(e===0)o=l=1/d;else{const h=d*e;o=l=h<1?1/h:1}else if(e===0)o=1/d,l=1/u;else{const h=d*e,f=u*e;o=h<1?1/h:1,l=f<1?1/f:1}}else{const d=Math.abs(t*i-s*r),u=Math.hypot(t,s),h=Math.hypot(r,i);if(e===0)o=h/d,l=u/d;else{const f=e*d;o=h>f?h/f:1,l=u>f?u/f:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:r}}=this,[i,o]=this.getScaleForStroking();if(i===o){s.lineWidth=(r||1)*i,s.stroke(e);return}const l=s.getLineDash();t&&s.save(),s.scale(i,o),sS.a=1/i,sS.d=1/o;const d=new Path2D;if(d.addPath(e,sS),l.length>0){const u=Math.max(i,o);s.setLineDash(l.map(h=>h/u)),s.lineDashOffset/=u}s.lineWidth=r||1,s.stroke(d),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Ni=new WeakSet,cj=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},dj=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},uj=function(e,t,s){const r=new Path2D;return r.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),r};let kh=qE;for(const n in Pm)kh.prototype[n]!==void 0&&(kh.prototype[Pm[n]]=kh.prototype[n]);var yf,vf,mx,bf,l0;const mh=class mh{constructor(e){A(this,bf);A(this,yf);A(this,vf);A(this,mx);C(this,yf,e),C(this,vf,new DataView(c(this,yf))),C(this,mx,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let r=0;for(const u of mh.strings){const h=t.encode(e[u]);s[u]=h,r+=4+h.length}const i=new ArrayBuffer(r),o=new Uint8Array(i),l=new DataView(i);let d=0;for(const u of mh.strings){const h=s[u],f=h.length;l.setUint32(d,f),o.set(h,d+4),d+=4+f}return $e(d===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}get fontFamily(){return k(this,bf,l0).call(this,0)}get fontWeight(){return k(this,bf,l0).call(this,1)}get italicAngle(){return k(this,bf,l0).call(this,2)}};yf=new WeakMap,vf=new WeakMap,mx=new WeakMap,bf=new WeakSet,l0=function(e){$e(e<mh.strings.length,"Invalid string index");let t=0;for(let r=0;r<e;r++)t+=c(this,vf).getUint32(t)+4;const s=c(this,vf).getUint32(t);return c(this,mx).decode(new Uint8Array(c(this,yf),t+4,s))},J(mh,"strings",["fontFamily","fontWeight","italicAngle"]);let Sb=mh;var kl,Ki,kd,Td,kp;const ph=class ph{constructor(e){A(this,Td);A(this,kl);A(this,Ki);A(this,kd);C(this,kl,e),C(this,Ki,new DataView(c(this,kl))),C(this,kd,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let r=0;for(const m of ph.strings){const p=t.encode(e[m]);s[m]=p,r+=4+p.length}r+=4;let i,o,l=1+r;e.style&&(i=t.encode(e.style.style),o=t.encode(e.style.weight),l+=4+i.length+4+o.length);const d=new ArrayBuffer(l),u=new Uint8Array(d),h=new DataView(d);let f=0;h.setUint8(f++,e.guessFallback?1:0),h.setUint32(f,0),f+=4,r=0;for(const m of ph.strings){const p=s[m],b=p.length;r+=4+b,h.setUint32(f,b),u.set(p,f+4),f+=4+b}return h.setUint32(f-r-4,r),e.style&&(h.setUint32(f,i.length),u.set(i,f+4),f+=4+i.length,h.setUint32(f,o.length),u.set(o,f+4),f+=4+o.length),$e(f<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(f)}get guessFallback(){return c(this,Ki).getUint8(0)!==0}get css(){return k(this,Td,kp).call(this,0)}get loadedName(){return k(this,Td,kp).call(this,1)}get baseFontName(){return k(this,Td,kp).call(this,2)}get src(){return k(this,Td,kp).call(this,3)}get style(){let e=1;e+=4+c(this,Ki).getUint32(e);const t=c(this,Ki).getUint32(e),s=c(this,kd).decode(new Uint8Array(c(this,kl),e+4,t));e+=4+t;const r=c(this,Ki).getUint32(e),i=c(this,kd).decode(new Uint8Array(c(this,kl),e+4,r));return{style:s,weight:i}}};kl=new WeakMap,Ki=new WeakMap,kd=new WeakMap,Td=new WeakSet,kp=function(e){$e(e<ph.strings.length,"Invalid string index");let t=5;for(let r=0;r<e;r++)t+=c(this,Ki).getUint32(t)+4;const s=c(this,Ki).getUint32(t);return c(this,kd).decode(new Uint8Array(c(this,kl),t+4,s))},J(ph,"strings",["css","loadedName","baseFontName","src"]);let Nb=ph;var wf,Sf,Nf,jf,$s,Yi,px,nt,Vt,Kr,c0,Tp;const Ce=class Ce{constructor({data:e,extra:t}){A(this,Vt);A(this,Yi);A(this,px);A(this,nt);C(this,Yi,e),C(this,px,new TextDecoder),C(this,nt,new DataView(c(this,Yi))),t&&Object.assign(this,t)}get black(){return k(this,Vt,Kr).call(this,0)}get bold(){return k(this,Vt,Kr).call(this,1)}get disableFontFace(){return k(this,Vt,Kr).call(this,2)}get fontExtraProperties(){return k(this,Vt,Kr).call(this,3)}get isInvalidPDFjsFont(){return k(this,Vt,Kr).call(this,4)}get isType3Font(){return k(this,Vt,Kr).call(this,5)}get italic(){return k(this,Vt,Kr).call(this,6)}get missingFile(){return k(this,Vt,Kr).call(this,7)}get remeasure(){return k(this,Vt,Kr).call(this,8)}get vertical(){return k(this,Vt,Kr).call(this,9)}get ascent(){return k(this,Vt,c0).call(this,0)}get defaultWidth(){return k(this,Vt,c0).call(this,1)}get descent(){return k(this,Vt,c0).call(this,2)}get bbox(){let e=c(Ce,Sf);if(c(this,nt).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<4;r++)s.push(c(this,nt).getInt16(e,!0)),e+=2;return s}get fontMatrix(){let e=c(Ce,Nf);if(c(this,nt).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<6;r++)s.push(c(this,nt).getFloat64(e,!0)),e+=8;return s}get defaultVMetrics(){let e=c(Ce,jf);if(c(this,nt).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<3;r++)s.push(c(this,nt).getInt16(e,!0)),e+=2;return s}get fallbackName(){return k(this,Vt,Tp).call(this,0)}get loadedName(){return k(this,Vt,Tp).call(this,1)}get mimetype(){return k(this,Vt,Tp).call(this,2)}get name(){return k(this,Vt,Tp).call(this,3)}get data(){let e=c(Ce,$s);const t=c(this,nt).getUint32(e);e+=4+t;const s=c(this,nt).getUint32(e);e+=4+s;const r=c(this,nt).getUint32(e);e+=4+r;const i=c(this,nt).getUint32(e);if(i!==0)return new Uint8Array(c(this,Yi),e+4,i)}clearData(){let e=c(Ce,$s);const t=c(this,nt).getUint32(e);e+=4+t;const s=c(this,nt).getUint32(e);e+=4+s;const r=c(this,nt).getUint32(e);e+=4+r;const i=c(this,nt).getUint32(e);new Uint8Array(c(this,Yi),e+4,i).fill(0),c(this,nt).setUint32(e,0)}get cssFontInfo(){let e=c(Ce,$s);const t=c(this,nt).getUint32(e);e+=4+t;const s=c(this,nt).getUint32(e);e+=4+s;const r=c(this,nt).getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(c(this,Yi),e+4,r)),new Sb(i.buffer)}get systemFontInfo(){let e=c(Ce,$s);const t=c(this,nt).getUint32(e);e+=4+t;const s=c(this,nt).getUint32(e);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(c(this,Yi),e+4,s)),new Nb(r.buffer)}static write(e){const t=e.systemFontInfo?Nb.write(e.systemFontInfo):null,s=e.cssFontInfo?Sb.write(e.cssFontInfo):null,r=new TextEncoder,i={};let o=0;for(const g of Ce.strings)i[g]=r.encode(e[g]),o+=4+i[g].length;const l=c(Ce,$s)+4+o+4+(t?t.byteLength:0)+4+(s?s.byteLength:0)+4+(e.data?e.data.length:0),d=new ArrayBuffer(l),u=new Uint8Array(d),h=new DataView(d);let f=0;const m=Ce.bools.length;let p=0,b=0;for(let g=0;g<m;g++){const N=e[Ce.bools[g]];p|=(N===void 0?0:N?2:1)<<b,b+=2,(b===8||g===m-1)&&(h.setUint8(f++,p),p=0,b=0)}$e(f===c(Ce,wf),"FontInfo.write: Boolean properties offset mismatch");for(const g of Ce.numbers)h.setFloat64(f,e[g]),f+=8;if($e(f===c(Ce,Sf),"FontInfo.write: Number properties offset mismatch"),e.bbox){h.setUint8(f++,4);for(const g of e.bbox)h.setInt16(f,g,!0),f+=2}else h.setUint8(f++,0),f+=2*4;if($e(f===c(Ce,Nf),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){h.setUint8(f++,6);for(const g of e.fontMatrix)h.setFloat64(f,g,!0),f+=8}else h.setUint8(f++,0),f+=8*6;if($e(f===c(Ce,jf),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){h.setUint8(f++,1);for(const g of e.defaultVMetrics)h.setInt16(f,g,!0),f+=2}else h.setUint8(f++,0),f+=3*2;$e(f===c(Ce,$s),"FontInfo.write: DefaultVMetrics properties offset mismatch"),h.setUint32(c(Ce,$s),0),f+=4;for(const g of Ce.strings){const N=i[g],v=N.length;h.setUint32(f,v),u.set(N,f+4),f+=4+v}if(h.setUint32(c(Ce,$s),f-c(Ce,$s)-4),!t)h.setUint32(f,0),f+=4;else{const g=t.byteLength;h.setUint32(f,g),$e(f+4+g<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(t),f+4),f+=4+g}if(!s)h.setUint32(f,0),f+=4;else{const g=s.byteLength;h.setUint32(f,g),$e(f+4+g<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(s),f+4),f+=4+g}return e.data===void 0?(h.setUint32(f,0),f+=4):(h.setUint32(f,e.data.length),u.set(e.data,f+4),f+=4+e.data.length),$e(f<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(f)}};wf=new WeakMap,Sf=new WeakMap,Nf=new WeakMap,jf=new WeakMap,$s=new WeakMap,Yi=new WeakMap,px=new WeakMap,nt=new WeakMap,Vt=new WeakSet,Kr=function(e){$e(e<Ce.bools.length,"Invalid boolean index");const t=Math.floor(e/4),s=e*2%8,r=c(this,nt).getUint8(t)>>s&3;return r===0?void 0:r===2},c0=function(e){return $e(e<Ce.numbers.length,"Invalid number index"),c(this,nt).getFloat64(c(Ce,wf)+e*8)},Tp=function(e){$e(e<Ce.strings.length,"Invalid string index");let t=c(Ce,$s)+4;for(let i=0;i<e;i++)t+=c(this,nt).getUint32(t)+4;const s=c(this,nt).getUint32(t),r=new Uint8Array(s);return r.set(new Uint8Array(c(this,Yi),t+4,s)),c(this,px).decode(r)},J(Ce,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),J(Ce,"numbers",["ascent","defaultWidth","descent"]),J(Ce,"strings",["fallbackName","loadedName","mimetype","name"]),A(Ce,wf,Math.ceil(Ce.bools.length*2/8)),A(Ce,Sf,c(Ce,wf)+Ce.numbers.length*8),A(Ce,Nf,c(Ce,Sf)+1+2*4),A(Ce,jf,c(Ce,Nf)+1+8*6),A(Ce,$s,c(Ce,jf)+1+2*3);let hj=Ce;var gx,xx;class Ir{static get workerPort(){return c(this,gx)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");C(this,gx,e)}static get workerSrc(){return c(this,xx)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");C(this,xx,e)}}gx=new WeakMap,xx=new WeakMap,A(Ir,gx,null),A(Ir,xx,"");var Cf,yx;class S9{constructor({parsedData:e,rawData:t}){A(this,Cf);A(this,yx);C(this,Cf,e),C(this,yx,t)}getRaw(){return c(this,yx)}get(e){return c(this,Cf).get(e)??null}[Symbol.iterator](){return c(this,Cf).entries()}}Cf=new WeakMap,yx=new WeakMap;const Qu=Symbol("INTERNAL");var vx,bx,wx,Af;class N9{constructor(e,{name:t,intent:s,usage:r,rbGroups:i}){A(this,vx,!1);A(this,bx,!1);A(this,wx,!1);A(this,Af,!0);C(this,vx,!!(e&er.DISPLAY)),C(this,bx,!!(e&er.PRINT)),this.name=t,this.intent=s,this.usage=r,this.rbGroups=i}get visible(){if(c(this,wx))return c(this,Af);if(!c(this,Af))return!1;const{print:e,view:t}=this.usage;return c(this,vx)?(t==null?void 0:t.viewState)!=="OFF":c(this,bx)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==Qu&&ht("Internal method `_setVisible` called."),C(this,wx,s),C(this,Af,t)}}vx=new WeakMap,bx=new WeakMap,wx=new WeakMap,Af=new WeakMap;var Tl,st,Ef,kf,Sx,fj;class j9{constructor(e,t=er.DISPLAY){A(this,Sx);A(this,Tl,null);A(this,st,new Map);A(this,Ef,null);A(this,kf,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,C(this,kf,e.order);for(const s of e.groups)c(this,st).set(s.id,new N9(t,s));if(e.baseState==="OFF")for(const s of c(this,st).values())s._setVisible(Qu,!1);for(const s of e.on)c(this,st).get(s)._setVisible(Qu,!0);for(const s of e.off)c(this,st).get(s)._setVisible(Qu,!1);C(this,Ef,this.getHash())}}isVisible(e){if(c(this,st).size===0)return!0;if(!e)return Hw("Optional content group not defined."),!0;if(e.type==="OCG")return c(this,st).has(e.id)?c(this,st).get(e.id).visible:(Ne(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return k(this,Sx,fj).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!c(this,st).has(t))return Ne(`Optional content group not found: ${t}`),!0;if(c(this,st).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!c(this,st).has(t))return Ne(`Optional content group not found: ${t}`),!0;if(!c(this,st).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!c(this,st).has(t))return Ne(`Optional content group not found: ${t}`),!0;if(!c(this,st).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!c(this,st).has(t))return Ne(`Optional content group not found: ${t}`),!0;if(c(this,st).get(t).visible)return!1}return!0}return Ne(`Unknown optional content policy ${e.policy}.`),!0}return Ne(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var i;const r=c(this,st).get(e);if(!r){Ne(`Optional content group not found: ${e}`);return}if(s&&t&&r.rbGroups.length)for(const o of r.rbGroups)for(const l of o)l!==e&&((i=c(this,st).get(l))==null||i._setVisible(Qu,!1,!0));r._setVisible(Qu,!!t,!0),C(this,Tl,null)}setOCGState({state:e,preserveRB:t}){let s;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const i=c(this,st).get(r);if(i)switch(s){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!i.visible,t);break}}C(this,Tl,null)}get hasInitialVisibility(){return c(this,Ef)===null||this.getHash()===c(this,Ef)}getOrder(){return c(this,st).size?c(this,kf)?c(this,kf).slice():[...c(this,st).keys()]:null}getGroup(e){return c(this,st).get(e)||null}getHash(){if(c(this,Tl)!==null)return c(this,Tl);const e=new sO;for(const[t,s]of c(this,st))e.update(`${t}:${s.visible}`);return C(this,Tl,e.hexdigest())}[Symbol.iterator](){return c(this,st).entries()}}Tl=new WeakMap,st=new WeakMap,Ef=new WeakMap,kf=new WeakMap,Sx=new WeakSet,fj=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let r=1;r<t;r++){const i=e[r];let o;if(Array.isArray(i))o=k(this,Sx,fj).call(this,i);else if(c(this,st).has(i))o=c(this,st).get(i).visible;else return Ne(`Optional content group not found: ${i}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class C9{constructor(e,{disableRange:t=!1,disableStream:s=!1}){$e(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:i,progressiveDone:o,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(i==null?void 0:i.length)>0){const d=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,u)=>{this._onReceiveData({begin:d,chunk:u})}),e.addProgressListener((d,u)=>{this._onProgress({loaded:d,total:u})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(s),!0)});$e(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,r,i;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(i=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){$e(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new A9(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new E9(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class A9{constructor(e,t,s=!1,r=null){this._stream=e,this._done=s||!1,this._filename=Ww(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class E9{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function k9(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let h=l(t);return h=unescape(h),h=d(h),h=u(h),i(h)}if(t=o(n),t){const h=u(t);return i(h)}if(t=s("filename","i").exec(n),t){t=t[1];let h=l(t);return h=u(h),i(h)}function s(h,f){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function r(h,f){if(h){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const m=new TextDecoder(h,{fatal:!0}),p=Iy(f);f=m.decode(p),e=!1}catch{}}return f}function i(h){return e&&/[\x80-\xff]/.test(h)&&(h=r("utf-8",h),e&&(h=r("iso-8859-1",h))),h}function o(h){const f=[];let m;const p=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=p.exec(h))!==null;){let[,g,N,v]=m;if(g=parseInt(g,10),g in f){if(g===0)break;continue}f[g]=[N,v]}const b=[];for(let g=0;g<f.length&&g in f;++g){let[N,v]=f[g];v=l(v),N&&(v=unescape(v),g===0&&(v=d(v))),b.push(v)}return b.join("")}function l(h){if(h.startsWith('"')){const f=h.slice(1).split('\\"');for(let m=0;m<f.length;++m){const p=f[m].indexOf('"');p!==-1&&(f[m]=f[m].slice(0,p),f.length=m+1),f[m]=f[m].replaceAll(/\\(.)/g,"$1")}h=f.join('"')}return h}function d(h){const f=h.indexOf("'");if(f===-1)return h;const m=h.slice(0,f),b=h.slice(f+1).replace(/^[^']*'/,"");return r(m,b)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,m,p,b){if(p==="q"||p==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,N){return String.fromCharCode(parseInt(N,16))}),r(m,b);try{b=atob(b)}catch{}return r(m,b)})}return""}function gO(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const r=e[s];r!==void 0&&t.append(s,r)}return t}function Gw(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function xO({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function yO(n){const e=n.get("Content-Disposition");if(e){let t=k9(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Ww(t))return t}return null}function By(n,e){return new jg(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function vO(n){return n===200||n===206}function bO(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function wO(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Ne(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class T9{constructor(e){J(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=gO(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return $e(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new P9(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new _9(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class P9{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),r=t.url;fetch(r,bO(s,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=Gw(i.url),!vO(i.status))throw By(i.status,r);this._reader=i.body.getReader(),this._headersCapability.resolve();const o=i.headers,{allowRangeRequests:l,suggestedLength:d}=xO({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=d||this._contentLength,this._filename=yO(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Do("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:wO(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class _9{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${s-1}`);const o=r.url;fetch(o,bO(i,this._withCredentials,this._abortController)).then(l=>{const d=Gw(l.url);if(d!==e._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${e._responseOrigin}".`);if(!vO(l.status))throw By(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:wO(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const rS=200,iS=206;function M9(n){const e=n.response;return typeof e!="string"?e:Iy(e).buffer}class R9{constructor({url:e,httpHeaders:t,withCredentials:s}){J(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=gO(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,o]of this.headers)t.setRequestHeader(i,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=iS):r.expectedStatus=rS,t.responseType="arraybuffer",$e(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var r;const s=this.pendingRequests[e];s&&((r=s.onProgress)==null||r.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){s.onError(r.status);return}const i=r.status||rS;if(!(i===rS&&s.expectedStatus===iS)&&i!==s.expectedStatus){s.onError(r.status);return}const l=M9(r);if(i===iS){const d=r.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);u?s.onDone({begin:parseInt(u[1],10),chunk:l}):(Ne('Missing or invalid "Content-Range" header.'),s.onError(0))}else l?s.onDone({begin:0,chunk:l}):s.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class D9{constructor(e){this._source=e,this._manager=new R9(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return $e(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new I9(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new L9(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class I9{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Gw(t.responseURL);const s=t.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[d,...u]=l.split(": ");return[d,u.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:o}=xO({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=yO(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=By(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class L9{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Gw((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=By(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const F9=/^[a-z][a-z0-9\-+.]+:/i;function O9(n){if(F9.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class B9{constructor(e){this.source=e,this.url=O9(e.url),$e(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return $e(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new $9(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new z9(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class $9{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=By(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Do("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class z9{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const cp=Symbol("INITIAL_DATA");var zs,Nx,mj;class SO{constructor(){A(this,Nx);A(this,zs,Object.create(null))}get(e,t=null){if(t){const r=k(this,Nx,mj).call(this,e);return r.promise.then(()=>t(r.data)),null}const s=c(this,zs)[e];if(!s||s.data===cp)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=c(this,zs)[e];return!!t&&t.data!==cp}delete(e){const t=c(this,zs)[e];return!t||t.data===cp?!1:(delete c(this,zs)[e],!0)}resolve(e,t=null){const s=k(this,Nx,mj).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in c(this,zs)){const{data:s}=c(this,zs)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}C(this,zs,Object.create(null))}*[Symbol.iterator](){for(const e in c(this,zs)){const{data:t}=c(this,zs)[e];t!==cp&&(yield[e,t])}}}zs=new WeakMap,Nx=new WeakSet,mj=function(e){var t;return(t=c(this,zs))[e]||(t[e]={...Promise.withResolvers(),data:cp})};const U9=1e5,$T=30;var pP,Pl,js,jx,Cx,Pd,Qa,Ax,Ex,_d,Tf,Pf,_l,_f,kx,Mf,Md,Tx,Px,Ht,Rf,Rd,_x,Ml,Df,Fo,NO,jO,pj,ur,d0,gj,CO,AO;let kg=(Ht=class{constructor({textContentSource:e,container:t,viewport:s}){A(this,Fo);A(this,Pl,Promise.withResolvers());A(this,js,null);A(this,jx,!1);A(this,Cx,!!((pP=globalThis.FontInspector)!=null&&pP.enabled));A(this,Pd,null);A(this,Qa,null);A(this,Ax,0);A(this,Ex,0);A(this,_d,null);A(this,Tf,null);A(this,Pf,0);A(this,_l,0);A(this,_f,Object.create(null));A(this,kx,[]);A(this,Mf,null);A(this,Md,[]);A(this,Tx,new WeakMap);A(this,Px,null);var d;if(e instanceof ReadableStream)C(this,Mf,e);else if(typeof e=="object")C(this,Mf,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');C(this,js,C(this,Tf,t)),C(this,_l,s.scale*Si.pixelRatio),C(this,Pf,s.rotation),C(this,Qa,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:o,pageY:l}=s.rawDims;C(this,Px,[1,0,0,-1,-o,l+i]),C(this,Ex,r),C(this,Ax,i),k(d=Ht,ur,CO).call(d),Cc(t,s),c(this,Pl).promise.finally(()=>{c(Ht,Df).delete(this),C(this,Qa,null),C(this,_f,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Sn.platform;return Ee(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{c(this,_d).read().then(({value:t,done:s})=>{if(s){c(this,Pl).resolve();return}c(this,Pd)??C(this,Pd,t.lang),Object.assign(c(this,_f),t.styles),k(this,Fo,NO).call(this,t.items),e()},c(this,Pl).reject)};return C(this,_d,c(this,Mf).getReader()),c(Ht,Df).add(this),e(),c(this,Pl).promise}update({viewport:e,onBefore:t=null}){var i;const s=e.scale*Si.pixelRatio,r=e.rotation;if(r!==c(this,Pf)&&(t==null||t(),C(this,Pf,r),Cc(c(this,Tf),{rotation:r})),s!==c(this,_l)){t==null||t(),C(this,_l,s);const o={div:null,properties:null,ctx:k(i=Ht,ur,d0).call(i,c(this,Pd))};for(const l of c(this,Md))o.properties=c(this,Tx).get(l),o.div=l,k(this,Fo,pj).call(this,o)}}cancel(){var t;const e=new Do("TextLayer task cancelled.");(t=c(this,_d))==null||t.cancel(e).catch(()=>{}),C(this,_d,null),c(this,Pl).reject(e)}get textDivs(){return c(this,Md)}get textContentItemsStr(){return c(this,kx)}static cleanup(){if(!(c(this,Df).size>0)){c(this,Rf).clear();for(const{canvas:e}of c(this,Rd).values())e.remove();c(this,Rd).clear()}}},Pl=new WeakMap,js=new WeakMap,jx=new WeakMap,Cx=new WeakMap,Pd=new WeakMap,Qa=new WeakMap,Ax=new WeakMap,Ex=new WeakMap,_d=new WeakMap,Tf=new WeakMap,Pf=new WeakMap,_l=new WeakMap,_f=new WeakMap,kx=new WeakMap,Mf=new WeakMap,Md=new WeakMap,Tx=new WeakMap,Px=new WeakMap,Rf=new WeakMap,Rd=new WeakMap,_x=new WeakMap,Ml=new WeakMap,Df=new WeakMap,Fo=new WeakSet,NO=function(e){var r,i;if(c(this,jx))return;(i=c(this,Qa)).ctx??(i.ctx=k(r=Ht,ur,d0).call(r,c(this,Pd)));const t=c(this,Md),s=c(this,kx);for(const o of e){if(t.length>U9){Ne("Ignoring additional textDivs for performance reasons."),C(this,jx,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=c(this,js);C(this,js,document.createElement("span")),c(this,js).classList.add("markedContent"),o.id&&c(this,js).setAttribute("id",`${o.id}`),l.append(c(this,js))}else o.type==="endMarkedContent"&&C(this,js,c(this,js).parentNode);continue}s.push(o.str),k(this,Fo,jO).call(this,o)}},jO=function(e){var g;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};c(this,Md).push(t);const r=he.transform(c(this,Px),e.transform);let i=Math.atan2(r[1],r[0]);const o=c(this,_f)[e.fontName];o.vertical&&(i+=Math.PI/2);let l=c(this,Cx)&&o.fontSubstitution||o.fontFamily;l=Ht.fontFamilyMap.get(l)||l;const d=Math.hypot(r[2],r[3]),u=d*k(g=Ht,ur,AO).call(g,l,o,c(this,Pd));let h,f;i===0?(h=r[4],f=r[5]-u):(h=r[4]+u*Math.sin(i),f=r[5]-u*Math.cos(i));const m="calc(var(--total-scale-factor) *",p=t.style;c(this,js)===c(this,Tf)?(p.left=`${(100*h/c(this,Ex)).toFixed(2)}%`,p.top=`${(100*f/c(this,Ax)).toFixed(2)}%`):(p.left=`${m}${h.toFixed(2)}px)`,p.top=`${m}${f.toFixed(2)}px)`),p.fontSize=`${m}${(c(Ht,Ml)*d).toFixed(2)}px)`,p.fontFamily=l,s.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,c(this,Cx)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(s.angle=i*(180/Math.PI));let b=!1;if(e.str.length>1)b=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const N=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);N!==v&&Math.max(N,v)/Math.min(N,v)>1.5&&(b=!0)}if(b&&(s.canvasWidth=o.vertical?e.height:e.width),c(this,Tx).set(t,s),c(this,Qa).div=t,c(this,Qa).properties=s,k(this,Fo,pj).call(this,c(this,Qa)),s.hasText&&c(this,js).append(t),s.hasEOL){const N=document.createElement("br");N.setAttribute("role","presentation"),c(this,js).append(N)}},pj=function(e){var l;const{div:t,properties:s,ctx:r}=e,{style:i}=t;let o="";if(c(Ht,Ml)>1&&(o=`scale(${1/c(Ht,Ml)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:d}=i,{canvasWidth:u,fontSize:h}=s;k(l=Ht,ur,gj).call(l,r,h*c(this,_l),d);const{width:f}=r.measureText(t.textContent);f>0&&(o=`scaleX(${u*c(this,_l)/f}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(i.transform=o)},ur=new WeakSet,d0=function(e=null){let t=c(this,Rd).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,Rd).set(e,t),c(this,_x).set(t,{size:0,family:""})}return t},gj=function(e,t,s){const r=c(this,_x).get(e);t===r.size&&s===r.family||(e.font=`${t}px ${s}`,r.size=t,r.family=s)},CO=function(){if(c(this,Ml)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),C(this,Ml,e.getBoundingClientRect().height),e.remove()},AO=function(e,t,s){const r=c(this,Rf).get(e);if(r)return r;const i=k(this,ur,d0).call(this,s);i.canvas.width=i.canvas.height=$T,k(this,ur,gj).call(this,i,$T,e);const o=i.measureText(""),l=o.fontBoundingBoxAscent,d=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let u=.8;return l?u=l/(l+d):(Sn.platform.isFirefox&&Ne("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),c(this,Rf).set(e,u),u},A(Ht,ur),A(Ht,Rf,new Map),A(Ht,Rd,new Map),A(Ht,_x,new WeakMap),A(Ht,Ml,null),A(Ht,Df,new Set),Ht);const H9=100;function SE(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new xj,{docId:t}=e,s=n.url?Qq(n.url):null,r=n.data?Jq(n.data):null,i=n.httpHeaders||null,o=n.withCredentials===!0,l=n.password??null,d=n.range instanceof NE?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let h=n.worker instanceof _m?n.worker:null;const f=n.verbosity,m=typeof n.docBaseUrl=="string"&&!Fy(n.docBaseUrl)?n.docBaseUrl:null,p=Nv(n.cMapUrl),b=n.cMapPacked!==!1,g=n.CMapReaderFactory||(ls?i9:AT),N=Nv(n.iccUrl),v=Nv(n.standardFontDataUrl),y=n.StandardFontDataFactory||(ls?a9:ET),S=Nv(n.wasmUrl),w=n.WasmFactory||(ls?o9:kT),j=n.stopAtErrors!==!0,E=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,T=n.isEvalSupported!==!1,P=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!ls,_=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!ls&&(Sn.platform.isFirefox||!globalThis.chrome),R=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,I=typeof n.disableFontFace=="boolean"?n.disableFontFace:ls,L=n.fontExtraProperties===!0,U=n.enableXfa===!0,B=n.ownerDocument||globalThis.document,Q=n.disableRange===!0,F=n.disableStream===!0,H=n.disableAutoFetch===!0,$=n.pdfBug===!0,K=n.CanvasFactory||(ls?r9:t9),D=n.FilterFactory||(ls?s9:n9),M=n.enableHWA===!0,q=n.useWasm!==!1,z=d?d.length:n.length??NaN,G=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!ls&&!I,W=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(g===AT&&y===ET&&w===kT&&p&&v&&S&&xp(p,document.baseURI)&&xp(v,document.baseURI)&&xp(S,document.baseURI)),X=null;Mq(f);const V={canvasFactory:new K({ownerDocument:B,enableHWA:M}),filterFactory:new D({docId:t,ownerDocument:B}),cMapReaderFactory:W?null:new g({baseUrl:p,isCompressed:b}),standardFontDataFactory:W?null:new y({baseUrl:v}),wasmFactory:W?null:new w({baseUrl:S})};h||(h=_m.create({verbosity:f,port:Ir.workerPort}),e._worker=h);const se={docId:t,apiVersion:"5.4.296",data:r,password:l,disableAutoFetch:H,rangeChunkSize:u,length:z,docBaseUrl:m,enableXfa:U,evaluatorOptions:{maxImageSize:E,disableFontFace:I,ignoreErrors:j,isEvalSupported:T,isOffscreenCanvasSupported:P,isImageDecoderSupported:_,canvasMaxAreaInBytes:R,fontExtraProperties:L,useSystemFonts:G,useWasm:q,useWorkerFetch:W,cMapUrl:p,iccUrl:N,standardFontDataUrl:v,wasmUrl:S}},ve={ownerDocument:B,pdfBug:$,styleElement:X,loadingParams:{disableAutoFetch:H,enableXfa:U}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const ae=h.messageHandler.sendWithPromise("GetDocRequest",se,r?[r.buffer]:null);let ce;if(d)ce=new C9(d,{disableRange:Q,disableStream:F});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const xe=xp(s)?T9:ls?B9:D9;ce=new xe({url:s,length:z,httpHeaders:i,withCredentials:o,rangeChunkSize:u,disableRange:Q,disableStream:F})}return ae.then(xe=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const ge=new Np(t,xe,h.port),le=new G9(ge,e,ce,ve,V,M);e._transport=le,ge.send("Ready",null)})}).catch(e._capability.reject),e}var Vb;const Wb=class Wb{constructor(){J(this,"_capability",Promise.withResolvers());J(this,"_transport",null);J(this,"_worker",null);J(this,"docId",`d${Ot(Wb,Vb)._++}`);J(this,"destroyed",!1);J(this,"onPassword",null);J(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,s,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,i}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Vb=new WeakMap,A(Wb,Vb,0);let xj=Wb;var Dd,Mx,Rx,Dx,Ix,gP;let NE=(gP=class{constructor(e,t,s=!1,r=null){A(this,Dd,Promise.withResolvers());A(this,Mx,[]);A(this,Rx,[]);A(this,Dx,[]);A(this,Ix,[]);this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(e){c(this,Ix).push(e)}addProgressListener(e){c(this,Dx).push(e)}addProgressiveReadListener(e){c(this,Rx).push(e)}addProgressiveDoneListener(e){c(this,Mx).push(e)}onDataRange(e,t){for(const s of c(this,Ix))s(e,t)}onDataProgress(e,t){c(this,Dd).promise.then(()=>{for(const s of c(this,Dx))s(e,t)})}onDataProgressiveRead(e){c(this,Dd).promise.then(()=>{for(const t of c(this,Rx))t(e)})}onDataProgressiveDone(){c(this,Dd).promise.then(()=>{for(const e of c(this,Mx))e()})}transportReady(){c(this,Dd).resolve()}requestDataRange(e,t){ht("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},Dd=new WeakMap,Mx=new WeakMap,Rx=new WeakMap,Dx=new WeakMap,Ix=new WeakMap,gP);class V9{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ee(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ja,Id,Pp;class W9{constructor(e,t,s,r=!1){A(this,Id);A(this,Ja,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=r?new vT:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new SO,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:i=!1}={}){return new Ly({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ee(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:s,intent:r="display",annotationMode:i=la.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:d=null,annotationCanvasMap:u=null,pageColors:h=null,printAnnotationStorage:f=null,isEditing:m=!1,recordOperations:p=!1,operationsFilter:b=null}){var _,R,I;(_=this._stats)==null||_.time("Overall");const g=this._transport.getRenderingIntent(r,i,f,m),{renderingIntent:N,cacheKey:v}=g;C(this,Ja,!1),d||(d=this._transport.getOptionalContentConfig(N));let y=this._intentStates.get(v);y||(y=Object.create(null),this._intentStates.set(v,y)),y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null);const S=!!(N&er.PRINT);y.displayReadyCapability||(y.displayReadyCapability=Promise.withResolvers(),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(R=this._stats)==null||R.time("Page Request"),this._pumpOperatorList(g));const w=!!(this._pdfBug&&((I=globalThis.StepperManager)!=null&&I.enabled)),j=!this.recordedBBoxes&&(p||w),E=L=>{var U,B;if(y.renderTasks.delete(T),j){const Q=(U=T.gfx)==null?void 0:U.dependencyTracker.take();Q&&(T.stepper&&T.stepper.setOperatorBBoxes(Q,T.gfx.dependencyTracker.takeDebugMetadata()),p&&(this.recordedBBoxes=Q))}S&&C(this,Ja,!0),k(this,Id,Pp).call(this),L?(T.capability.reject(L),this._abortOperatorList({intentState:y,reason:L instanceof Error?L:new Error(L)})):T.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(B=globalThis.Stats)!=null&&B.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},T=new yj({callback:E,params:{canvas:t,canvasContext:e,dependencyTracker:j?new c9(t,y.operatorList.length,w):null,viewport:s,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:y.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,operationsFilter:b});(y.renderTasks||(y.renderTasks=new Set)).add(T);const P=T.task;return Promise.all([y.displayReadyCapability.promise,d]).then(([L,U])=>{var B;if(this.destroyed){E();return}if((B=this._stats)==null||B.time("Rendering"),!(U.renderingIntent&N))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");T.initializeGraphics({transparency:L,optionalContentConfig:U}),T.operatorListChanged()}).catch(E),P}getOperatorList({intent:e="display",annotationMode:t=la.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){var u;function i(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(d))}const o=this._transport.getRenderingIntent(e,t,s,r,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let d;return l.opListReadCapability||(d=Object.create(null),d.operatorListChanged=i,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(d),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Cg.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,r){function i(){o.read().then(function({value:d,done:u}){if(u){s(l);return}l.lang??(l.lang=d.lang),Object.assign(l.styles,d.styles),l.items.push(...d.items),i()},r)}const o=t.getReader(),l={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),C(this,Ja,!1),Promise.all(e)}cleanup(e=!1){C(this,Ja,!0);const t=k(this,Id,Pp).call(this);return e&&t&&this._stats&&(this._stats=new vT),t}_startRenderPage(e,t){var r,i;const s=this._intentStates.get(t);s&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=s.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let s=0,r=e.length;s<r;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&k(this,Id,Pp).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:r}){const{map:i,transfer:o}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},o).getReader(),u=this._intentStates.get(t);u.streamReader=d;const h=()=>{d.read().then(({value:f,done:m})=>{if(m){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,u),h())},f=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const m of u.renderTasks)m.operatorListChanged();k(this,Id,Pp).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(f);else if(u.opListReadCapability)u.opListReadCapability.reject(f);else throw f}})};h()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof Vw){let r=H9;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Do(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Ja=new WeakMap,Id=new WeakSet,Pp=function(){if(!c(this,Ja)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),C(this,Ja,!1),!0};var Rl,ri,Za,Ld,Gb,Fd,Od,ds,u0,EO,kO,_p,If,h0;const Et=class Et{constructor({name:e=null,port:t=null,verbosity:s=Rq()}={}){A(this,ds);A(this,Rl,Promise.withResolvers());A(this,ri,null);A(this,Za,null);A(this,Ld,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(c(Et,Od).has(t))throw new Error("Cannot use more than one PDFWorker per port.");c(Et,Od).set(t,this),k(this,ds,EO).call(this,t)}else k(this,ds,kO).call(this)}get promise(){return c(this,Rl).promise}get port(){return c(this,Za)}get messageHandler(){return c(this,ri)}destroy(){var e,t;this.destroyed=!0,(e=c(this,Ld))==null||e.terminate(),C(this,Ld,null),c(Et,Od).delete(c(this,Za)),C(this,Za,null),(t=c(this,ri))==null||t.destroy(),C(this,ri,null)}static create(e){const t=c(this,Od).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Et(e)}static get workerSrc(){if(Ir.workerSrc)return Ir.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ee(this,"_setupFakeWorkerGlobal",(async()=>c(this,If,h0)?c(this,If,h0):(await import(this.workerSrc)).WorkerMessageHandler)())}};Rl=new WeakMap,ri=new WeakMap,Za=new WeakMap,Ld=new WeakMap,Gb=new WeakMap,Fd=new WeakMap,Od=new WeakMap,ds=new WeakSet,u0=function(){c(this,Rl).resolve(),c(this,ri).send("configure",{verbosity:this.verbosity})},EO=function(e){C(this,Za,e),C(this,ri,new Np("main","worker",e)),c(this,ri).on("ready",()=>{}),k(this,ds,u0).call(this)},kO=function(){if(c(Et,Fd)||c(Et,If,h0)){k(this,ds,_p).call(this);return}let{workerSrc:e}=Et;try{Et._isSameOrigin(window.location,e)||(e=Et._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new Np("main","worker",t),r=()=>{i.abort(),s.destroy(),t.terminate(),this.destroyed?c(this,Rl).reject(new Error("Worker was destroyed")):k(this,ds,_p).call(this)},i=new AbortController;t.addEventListener("error",()=>{c(this,Ld)||r()},{signal:i.signal}),s.on("test",l=>{if(i.abort(),this.destroyed||!l){r();return}C(this,ri,s),C(this,Za,t),C(this,Ld,t),k(this,ds,u0).call(this)}),s.on("ready",l=>{if(i.abort(),this.destroyed){r();return}try{o()}catch{k(this,ds,_p).call(this)}});const o=()=>{const l=new Uint8Array;s.send("test",l,[l.buffer])};o();return}catch{Hw("The worker has been disabled.")}k(this,ds,_p).call(this)},_p=function(){c(Et,Fd)||(Ne("Setting up fake worker."),C(Et,Fd,!0)),Et._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){c(this,Rl).reject(new Error("Worker was destroyed"));return}const t=new e9;C(this,Za,t);const s=`fake${Ot(Et,Gb)._++}`,r=new Np(s+"_worker",s,t);e.setup(r,t),C(this,ri,new Np(s,s+"_worker",t)),k(this,ds,u0).call(this)}).catch(e=>{c(this,Rl).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},If=new WeakSet,h0=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},A(Et,If),A(Et,Gb,0),A(Et,Fd,!1),A(Et,Od,new WeakMap),ls&&(C(Et,Fd,!0),Ir.workerSrc||(Ir.workerSrc="./pdf.worker.mjs")),Et._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const r=new URL(t,s);return s.origin===r.origin},Et._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Et.fromPort=e=>{if(Uq("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Et.create(e)};let _m=Et;var eo,Xi,Lf,Ff,to,Bd,Mp;class G9{constructor(e,t,s,r,i,o){A(this,Bd);A(this,eo,new Map);A(this,Xi,new Map);A(this,Lf,new Map);A(this,Ff,new Map);A(this,to,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new SO,this.fontLoader=new Yq({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return Ee(this,"annotationStorage",new vE)}getRenderingIntent(e,t=la.ENABLE,s=null,r=!1,i=!1){let o=er.DISPLAY,l=tj;switch(e){case"any":o=er.ANY;break;case"display":break;case"print":o=er.PRINT;break;default:Ne(`getRenderingIntent - invalid intent: ${e}`)}const d=o&er.PRINT&&s instanceof iO?s:this.annotationStorage;switch(t){case la.DISABLE:o+=er.ANNOTATIONS_DISABLE;break;case la.ENABLE:break;case la.ENABLE_FORMS:o+=er.ANNOTATIONS_FORMS;break;case la.ENABLE_STORAGE:o+=er.ANNOTATIONS_STORAGE,l=d.serializable;break;default:Ne(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(o+=er.IS_EDITING),i&&(o+=er.OPLIST);const{ids:u,hash:h}=d.modifiedIds,f=[o,l.hash,h];return{renderingIntent:o,cacheKey:f.join("_"),annotationStorageSerializable:l,modifiedIds:u}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=c(this,to))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of c(this,Xi).values())e.push(r._destroy());c(this,Xi).clear(),c(this,Lf).clear(),c(this,Ff).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,i;this.commonObjs.clear(),this.fontLoader.clear(),c(this,eo).clear(),this.filterFactory.destroy(),kg.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Do("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,r)=>{$e(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},r.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){r.close();return}$e(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{this._fullReader.cancel(i),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async s=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:o}=this._fullReader;return(!r||!i)&&(this._lastProgress&&((l=t.onProgress)==null||l.call(t,this._lastProgress)),this._fullReader.onProgress=d=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:r,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(s,r)=>{$e(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(s.begin,s.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:o,done:l}){if(l){r.close();return}$e(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{i.cancel(o),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new V9(s,this))}),e.on("DocException",s=>{t._capability.reject(gs(s))}),e.on("PasswordRequest",s=>{C(this,to,Promise.withResolvers());try{if(!t.onPassword)throw gs(s);const r=i=>{i instanceof Error?c(this,to).reject(i):c(this,to).resolve({password:i})};t.onPassword(r,s.code)}catch(r){c(this,to).reject(r)}return c(this,to).promise}),e.on("DataLoaded",s=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;c(this,Xi).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,r,i])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in i){const f=i.error;Ne(`Error during font loading: ${f}`),this.commonObjs.resolve(s,f);break}const l=new hj(i),d=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(f,m)=>globalThis.FontInspector.fontAdded(f,m):null,u=new Xq(l,d,i.extra,i.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(s,u)});break;case"CopyLocalImage":const{imageRef:h}=i;$e(h,"The imageRef must be defined.");for(const f of c(this,Xi).values())for(const[,m]of f.objs)if((m==null?void 0:m.ref)===h)return m.dataLen?(this.commonObjs.resolve(s,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,i);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([s,r,i,o])=>{var d;if(this.destroyed)return;const l=c(this,Xi).get(r);if(!l.objs.has(s)){if(l._intentStates.size===0){(d=o==null?void 0:o.bitmap)==null||d.close();return}switch(i){case"Image":case"Pattern":l.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",s=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&Ne("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=c(this,Lf).get(t);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&c(this,Ff).set(i.refStr,e);const o=new W9(t,i,this,this._params.pdfBug);return c(this,Xi).set(t,o),o});return c(this,Lf).set(t,r),r}getPageIndex(e){return nj(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return k(this,Bd,Mp).call(this,"GetFieldObjects")}hasJSActions(){return k(this,Bd,Mp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return k(this,Bd,Mp).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return k(this,Bd,Mp).call(this,"GetOptionalContentConfig").then(t=>new j9(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=c(this,eo).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,o;return{info:r[0],metadata:r[1]?new S9(r[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return c(this,eo).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of c(this,Xi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),c(this,eo).clear(),this.filterFactory.destroy(!0),kg.cleanup()}}cachedPageNumber(e){if(!nj(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return c(this,Ff).get(t)??null}}eo=new WeakMap,Xi=new WeakMap,Lf=new WeakMap,Ff=new WeakMap,to=new WeakMap,Bd=new WeakSet,Mp=function(e,t=null){const s=c(this,eo).get(e);if(s)return s;const r=this.messageHandler.sendWithPromise(e,t);return c(this,eo).set(e,r),r};var Dl;class q9{constructor(e){A(this,Dl,null);J(this,"onContinue",null);J(this,"onError",null);C(this,Dl,e)}get promise(){return c(this,Dl).capability.promise}cancel(e=0){c(this,Dl).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=c(this,Dl).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=c(this,Dl);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Dl=new WeakMap;var Il,$d;const Hc=class Hc{constructor({callback:e,params:t,objs:s,commonObjs:r,annotationCanvasMap:i,operatorList:o,pageIndex:l,canvasFactory:d,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:f=!1,pageColors:m=null,enableHWA:p=!1,operationsFilter:b=null}){A(this,Il,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=d,this.filterFactory=u,this._pdfBug=f,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new q9(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=p,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=b}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var d,u;if(this.cancelled)return;if(this._canvas){if(c(Hc,$d).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(Hc,$d).add(this._canvas)}this._pdfBug&&((d=globalThis.StepperManager)!=null&&d.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:i,dependencyTracker:o}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new kh(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,t=0){var s,r,i;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),c(this,Il)&&(window.cancelAnimationFrame(c(this,Il)),C(this,Il,null)),c(Hc,$d).delete(this._canvas),e||(e=new Vw(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(r=this.task).onError)==null||i.call(r,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?C(this,Il,window.requestAnimationFrame(()=>{C(this,Il,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(Hc,$d).delete(this._canvas),this.callback())))}};Il=new WeakMap,$d=new WeakMap,A(Hc,$d,new WeakSet);let yj=Hc;const jE="5.4.296",TO="f56dc8601";var Us,zd,Of,ln,Lx,Bf,no,Fx,Ll,ii,Ox,rt,vj,bj,wj,Bc,PO,Yo;const xs=class xs{constructor({editor:e=null,uiManager:t=null}){A(this,rt);A(this,Us,null);A(this,zd,null);A(this,Of);A(this,ln,null);A(this,Lx,!1);A(this,Bf,!1);A(this,no,null);A(this,Fx);A(this,Ll,null);A(this,ii,null);var s,r;e?(C(this,Bf,!1),C(this,no,e)):C(this,Bf,!0),C(this,ii,(e==null?void 0:e._uiManager)||t),C(this,Fx,c(this,ii)._eventBus),C(this,Of,((s=e==null?void 0:e.color)==null?void 0:s.toUpperCase())||((r=c(this,ii))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),c(xs,Ox)||C(xs,Ox,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ee(this,"_keyboardManager",new Oy([[["Escape","mac+Escape"],xs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],xs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],xs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],xs.prototype._moveToPrevious],[["Home","mac+Home"],xs.prototype._moveToBeginning],[["End","mac+End"],xs.prototype._moveToEnd]]))}renderButton(){const e=C(this,Us,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",c(this,no)&&(e.ariaControls=`${c(this,no).id}_colorpicker_dropdown`);const t=c(this,ii)._signal;e.addEventListener("click",k(this,rt,Bc).bind(this),{signal:t}),e.addEventListener("keydown",k(this,rt,wj).bind(this),{signal:t});const s=C(this,zd,document.createElement("span"));return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=c(this,Of),e.append(s),e}renderMainDropdown(){const e=C(this,ln,k(this,rt,vj).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===c(this,Us)){k(this,rt,Bc).call(this,e);return}const t=e.target.getAttribute("data-color");t&&k(this,rt,bj).call(this,t,e)}_moveToNext(e){var t,s;if(!c(this,rt,Yo)){k(this,rt,Bc).call(this,e);return}if(e.target===c(this,Us)){(t=c(this,ln).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=c(this,ln))==null?void 0:t.firstChild)||e.target===c(this,Us)){c(this,rt,Yo)&&this._hideDropdownFromKeyboard();return}c(this,rt,Yo)||k(this,rt,Bc).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!c(this,rt,Yo)){k(this,rt,Bc).call(this,e);return}(t=c(this,ln).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!c(this,rt,Yo)){k(this,rt,Bc).call(this,e);return}(t=c(this,ln).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=c(this,ln))==null||e.classList.add("hidden"),c(this,Us).ariaExpanded="false",(t=c(this,Ll))==null||t.abort(),C(this,Ll,null)}_hideDropdownFromKeyboard(){var e;if(!c(this,Bf)){if(!c(this,rt,Yo)){(e=c(this,no))==null||e.unselect();return}this.hideDropdown(),c(this,Us).focus({preventScroll:!0,focusVisible:c(this,Lx)})}}updateColor(e){if(c(this,zd)&&(c(this,zd).style.backgroundColor=e),!c(this,ln))return;const t=c(this,ii).highlightColors.values();for(const s of c(this,ln).children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=c(this,Us))==null||e.remove(),C(this,Us,null),C(this,zd,null),(t=c(this,ln))==null||t.remove(),C(this,ln,null)}};Us=new WeakMap,zd=new WeakMap,Of=new WeakMap,ln=new WeakMap,Lx=new WeakMap,Bf=new WeakMap,no=new WeakMap,Fx=new WeakMap,Ll=new WeakMap,ii=new WeakMap,Ox=new WeakMap,rt=new WeakSet,vj=function(){const e=document.createElement("div"),t=c(this,ii)._signal;e.addEventListener("contextmenu",fr,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),c(this,no)&&(e.id=`${c(this,no).id}_colorpicker_dropdown`);for(const[s,r]of c(this,ii).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=s,i.setAttribute("data-l10n-id",c(xs,Ox)[s]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=r,i.ariaSelected=r===c(this,Of),i.addEventListener("click",k(this,rt,bj).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",k(this,rt,wj).bind(this),{signal:t}),e},bj=function(e,t){t.stopPropagation(),c(this,Fx).dispatch("switchannotationeditorparams",{source:this,type:Fe.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},wj=function(e){xs._keyboardManager.exec(this,e)},Bc=function(e){if(c(this,rt,Yo)){this.hideDropdown();return}if(C(this,Lx,e.detail===0),c(this,Ll)||(C(this,Ll,new AbortController),window.addEventListener("pointerdown",k(this,rt,PO).bind(this),{signal:c(this,ii).combinedSignal(c(this,Ll))})),c(this,Us).ariaExpanded="true",c(this,ln)){c(this,ln).classList.remove("hidden");return}const t=C(this,ln,k(this,rt,vj).call(this));c(this,Us).append(t)},PO=function(e){var t;(t=c(this,ln))!=null&&t.contains(e.target)||this.hideDropdown()},Yo=function(){return c(this,ln)&&!c(this,ln).classList.contains("hidden")},A(xs,Ox,null);let Tg=xs;var Qi,Bx,$f,$x;const Vc=class Vc{constructor(e){A(this,Qi,null);A(this,Bx,null);A(this,$f,null);C(this,Bx,e),C(this,$f,e._uiManager),c(Vc,$x)||C(Vc,$x,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(c(this,Qi))return c(this,Qi);const{editorType:e,colorType:t,colorValue:s}=c(this,Bx),r=C(this,Qi,document.createElement("input"));return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",c(Vc,$x)[e]),r.addEventListener("input",()=>{c(this,$f).updateParams(t,r.value)},{signal:c(this,$f)._signal}),r}update(e){c(this,Qi)&&(c(this,Qi).value=e)}destroy(){var e;(e=c(this,Qi))==null||e.remove(),C(this,Qi,null)}hideDropdown(){}};Qi=new WeakMap,Bx=new WeakMap,$f=new WeakMap,$x=new WeakMap,A(Vc,$x,null);let jb=Vc;function zT(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function dp(n){return Math.max(0,Math.min(255,255*n))}class UT{static CMYK_G([e,t,s,r]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=dp(e),[e,e,e]}static G_HTML([e]){const t=zT(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(dp)}static RGB_HTML(e){return`#${e.map(zT).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,s+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,s,r]){return[dp(1-Math.min(1,e+r)),dp(1-Math.min(1,s+r)),dp(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const r=1-e,i=1-t,o=1-s,l=Math.min(r,i,o);return["CMYK",r,i,o,l]}}class K9{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ht("Abstract method `_createSVG` called.")}}class Pg extends K9{_createSVG(e){return document.createElementNS(Aa,e)}}const Y9=9,Tu=new WeakSet,X9=new Date().getTimezoneOffset()*60*1e3;class HT{static create(e){switch(e.data.annotationType){case Kt.LINK:return new CE(e);case Kt.TEXT:return new J9(e);case Kt.WIDGET:switch(e.data.fieldType){case"Tx":return new Z9(e);case"Btn":return e.data.radioButton?new RO(e):e.data.checkBox?new tK(e):new nK(e);case"Ch":return new sK(e);case"Sig":return new eK(e)}return new Fu(e);case Kt.POPUP:return new Nj(e);case Kt.FREETEXT:return new OO(e);case Kt.LINE:return new iK(e);case Kt.SQUARE:return new aK(e);case Kt.CIRCLE:return new oK(e);case Kt.POLYLINE:return new BO(e);case Kt.CARET:return new cK(e);case Kt.INK:return new AE(e);case Kt.POLYGON:return new lK(e);case Kt.HIGHLIGHT:return new $O(e);case Kt.UNDERLINE:return new dK(e);case Kt.SQUIGGLY:return new uK(e);case Kt.STRIKEOUT:return new hK(e);case Kt.STAMP:return new zO(e);case Kt.FILEATTACHMENT:return new fK(e);default:return new Lt(e)}}}var Ud,zf,Tr,zx,Sj;const KE=class KE{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){A(this,zx);A(this,Ud,null);A(this,zf,!1);A(this,Tr,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return KE._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var s;const{data:e}=this,t=(s=this.annotationStorage)==null?void 0:s.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var l;const e=(l=this.annotationStorage)==null?void 0:l.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:s,rect:r}=this.data;let i=-1/0,o=-1/0;if((t==null?void 0:t.length)>=8){for(let d=0;d<t.length;d+=8)t[d+1]>o?(o=t[d+1],i=t[d+2]):t[d+1]===o&&(i=Math.max(i,t[d+2]));return[i,o]}if((s==null?void 0:s.length)>=1){for(const d of s)for(let u=0,h=d.length;u<h;u+=2)d[u+1]>o?(o=d[u+1],i=d[u]):d[u+1]===o&&(i=Math.max(i,d[u]));if(i!==1/0)return[i,o]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/s,e[1]=100*(e[1]-o)/r,e}get commentText(){var t,s,r;const{data:e}=this;return((s=(t=this.annotationStorage.getRawValue(`${Ng}${e.id}`))==null?void 0:t.popup)==null?void 0:s.contents)||((r=e.contentsObj)==null?void 0:r.str)||""}set commentText(e){const{data:t}=this,s={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:s})||this.annotationStorage.setValue(`${Ng}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=c(this,Tr))==null?void 0:e.popup)||this.popup)==null||t.remove(),C(this,Tr,this.popup=null)}updateEdited(e){var i;if(!this.container)return;e.rect&&(c(this,Ud)||C(this,Ud,{rect:this.data.rect.slice(0)}));const{rect:t,popup:s}=e;t&&k(this,zx,Sj).call(this,t);let r=((i=c(this,Tr))==null?void 0:i.popup)||this.popup;!r&&(s!=null&&s.text)&&(this._createPopup(s),r=c(this,Tr).popup),r&&(r.updateEdited(e),s!=null&&s.deleted&&(r.remove(),C(this,Tr,null),this.popup=null))}resetEdited(){var e;c(this,Ud)&&(k(this,zx,Sj).call(this,c(this,Ud).rect),(e=c(this,Tr))==null||e.popup.resetEdited(),C(this,Ud,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof Fu)&&!(this instanceof CE)&&(i.tabIndex=0);const{style:o}=i;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof Nj){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,i),i}const{width:l,height:d}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,N=t.borderStyle.verticalCornerRadius;if(g>0||N>0){const y=`calc(${g}px * var(--total-scale-factor)) / calc(${N}px * var(--total-scale-factor))`;o.borderRadius=y}else if(this instanceof RO){const y=`calc(${l}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;o.borderRadius=y}switch(t.borderStyle.style){case Gu.SOLID:o.borderStyle="solid";break;case Gu.DASHED:o.borderStyle="dashed";break;case Gu.BEVELED:Ne("Unimplemented border style: beveled");break;case Gu.INSET:Ne("Unimplemented border style: inset");break;case Gu.UNDERLINE:o.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(C(this,zf,!0),o.borderColor=he.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):o.borderWidth=0}const u=he.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:h,pageHeight:f,pageX:m,pageY:p}=r.rawDims;o.left=`${100*(u[0]-m)/h}%`,o.top=`${100*(u[1]-p)/f}%`;const{rotation:b}=t;return t.hasOwnCanvas||b===0?(o.width=`${100*l/h}%`,o.height=`${100*d/f}%`):this.setRotation(b,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:i,height:o}=this;e%180!==0&&([i,o]=[o,i]),t.style.width=`${100*i/s}%`,t.style.height=`${100*o/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,r)=>{const i=r.detail[t],o=i[0],l=i.slice(1);r.target.style[s]=UT[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[s]:UT[`${o}_rgb`](l)})};return Ee(this,"_commonActions",{display:t=>{const{display:s}=t.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||s[r];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[r,i]of Object.entries(t)){const o=s[r];if(o){const l={detail:{[r]:i},target:e};o(l),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,r,i]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,N,v,y]=e.subarray(2,6);if(r===g&&i===N&&t===v&&s===y)return}const{style:o}=this.container;let l;if(c(this,zf)){const{borderColor:g,borderWidth:N}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${N}">`],this.container.classList.add("hasBorder")}const d=r-t,u=i-s,{svgFactory:h}=this,f=h.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0),f.role="none";const m=h.createElement("defs");f.append(m);const p=h.createElement("clipPath"),b=`clippath_${this.data.id}`;p.setAttribute("id",b),p.setAttribute("clipPathUnits","objectBoundingBox"),m.append(p);for(let g=2,N=e.length;g<N;g+=8){const v=e[g],y=e[g+1],S=e[g+2],w=e[g+3],j=h.createElement("rect"),E=(S-t)/d,T=(i-y)/u,P=(v-S)/d,_=(y-w)/u;j.setAttribute("x",E),j.setAttribute("y",T),j.setAttribute("width",P),j.setAttribute("height",_),p.append(j),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${E}" y="${T}" width="${P}" height="${_}"/>`)}c(this,zf)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(f),this.container.style.clipPath=`url(#${b})`}_createPopup(e=null){const{data:t}=this;let s,r;e?(s={str:e.text},r=e.date):(s=t.contentsObj,r=t.modificationDate);const i=C(this,Tr,new Nj({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:s,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(i.render())}get hasPopupElement(){return!!(c(this,Tr)||this.popup||this.data.popupRef)}get extraPopupElement(){return c(this,Tr)}render(){ht("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:o,exportValues:l}of r){if(i===-1||o===t)continue;const d=typeof l=="string"?l:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!Tu.has(u)){Ne(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:d,domElement:u})}return s}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,o=r.getAttribute("data-element-id");o!==t&&Tu.has(r)&&s.push({id:o,exportValue:i,domElement:r})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Ud=new WeakMap,zf=new WeakMap,Tr=new WeakMap,zx=new WeakSet,Sj=function(e){const{container:{style:t},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:l,pageY:d}}}}=this;s==null||s.splice(0,4,...e),t.left=`${100*(e[0]-l)/i}%`,t.top=`${100*(o-e[3]+d)/o}%`,r===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(r)};let Lt=KE;class Q9 extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var rr,$c,_O,MO;class CE extends Lt{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});A(this,rr);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(s.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),i=!0):t.attachment?(k(this,rr,_O).call(this,r,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(k(this,rr,MO).call(this,r,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}_bindLink(t,s,r=""){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&k(this,rr,$c).call(this),r&&(t.title=r)}_bindNamedAction(t,s,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),r&&(t.title=r),k(this,rr,$c).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(s.actions)){const o=r.get(i);o&&(t[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:i}}),!1})}s.overlaidText&&(t.title=s.overlaidText),t.onclick||(t.onclick=()=>!1),k(this,rr,$c).call(this)}_bindResetFormAction(t,s){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),k(this,rr,$c).call(this),!this._fieldObjects){Ne('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var f;r==null||r();const{fields:i,refs:o,include:l}=s,d=[];if(i.length!==0||o.length!==0){const m=new Set(o);for(const p of i){const b=this._fieldObjects[p]||[];for(const{id:g}of b)m.add(g)}for(const p of Object.values(this._fieldObjects))for(const b of p)m.has(b.id)===l&&d.push(b)}else for(const m of Object.values(this._fieldObjects))d.push(...m);const u=this.annotationStorage,h=[];for(const m of d){const{id:p}=m;switch(h.push(p),m.type){case"text":{const g=m.defaultValue||"";u.setValue(p,{value:g});break}case"checkbox":case"radiobutton":{const g=m.defaultValue===m.exportValues;u.setValue(p,{value:g});break}case"combobox":case"listbox":{const g=m.defaultValue||"";u.setValue(p,{value:g});break}default:continue}const b=document.querySelector(`[data-element-id="${p}"]`);if(b){if(!Tu.has(b)){Ne(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}rr=new WeakSet,$c=function(){this.container.setAttribute("data-internal-link","")},_O=function(t,s,r="",i=null){t.href=this.linkService.getAnchorUrl(""),s.description?t.title=s.description:r&&(t.title=r),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(s.content,s.filename,i),!1},k(this,rr,$c).call(this)},MO=function(t,s,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),r&&(t.title=r),k(this,rr,$c).call(this)};class J9 extends Lt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Fu extends Lt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Sn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,r,i){s.includes("mouse")?e.addEventListener(s,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(s,o=>{var l;if(s==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}i&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o)}}))})}_setEventListeners(e,t,s,r){var i,o,l;for(const[d,u]of s)(u==="Action"||(i=this.data.actions)!=null&&i[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,d,u,r),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":he.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||Y9,i=e.style;let o;const l=2,d=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(u/(J1*r))||1,f=u/h;o=Math.min(r,d(f/J1))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(r,d(u/J1))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=he.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Z9 extends Fu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,r){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=s),i.setValue(o.id,{[r]:s})}render(){var r,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let l=o.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&l.length>d&&(l=l.slice(0,d));let u=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Tu.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:f,datetimeType:m,timeStep:p}=this.data,b=!!m&&this.enableScripting;f&&(s.title=f),this._setRequired(s,this.data.required),d&&(s.maxLength=d),s.addEventListener("input",N=>{e.setValue(t,{value:N.target.value}),this.setPropertyOnSiblings(s,"value",N.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",N=>{const v=this.data.defaultFieldValue??"";s.value=h.userValue=v,h.formattedValue=null});let g=N=>{const{formattedValue:v}=h;v!=null&&(N.target.value=v),N.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",v=>{var S;if(h.focused)return;const{target:y}=v;if(b&&(y.type=m,p&&(y.step=p)),h.userValue){const w=h.userValue;if(b)if(m==="time"){const j=new Date(w),E=[j.getHours(),j.getMinutes(),j.getSeconds()];y.value=E.map(T=>T.toString().padStart(2,"0")).join(":")}else y.value=new Date(w-X9).toISOString().split(m==="date"?"T":".",1)[0];else y.value=w}h.lastCommittedValue=y.value,h.commitKey=1,(S=this.data.actions)!=null&&S.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const y={value(S){h.userValue=S.detail.value??"",b||e.setValue(t,{value:h.userValue.toString()}),S.target.value=h.userValue},formattedValue(S){const{formattedValue:w}=S.detail;h.formattedValue=w,w!=null&&S.target!==document.activeElement&&(S.target.value=w);const j={formattedValue:w};b&&(j.value=w),e.setValue(t,j)},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{var T;const{charLimit:w}=S.detail,{target:j}=S;if(w===0){j.removeAttribute("maxLength");return}j.setAttribute("maxLength",w);let E=h.userValue;!E||E.length<=w||(E=E.slice(0,w),j.value=h.userValue=E,e.setValue(t,{value:E}),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:1,selStart:j.selectionStart,selEnd:j.selectionEnd}}))}};this._dispatchEventFromSandbox(y,v)}),s.addEventListener("keydown",v=>{var w;h.commitKey=1;let y=-1;if(v.key==="Escape"?y=0:v.key==="Enter"&&!this.data.multiLine?y=2:v.key==="Tab"&&(h.commitKey=3),y===-1)return;const{value:S}=v.target;h.lastCommittedValue!==S&&(h.lastCommittedValue=S,h.userValue=S,(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:y,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const N=g;g=null,s.addEventListener("blur",v=>{var w,j;if(!h.focused||!v.relatedTarget)return;(w=this.data.actions)!=null&&w.Blur||(h.focused=!1);const{target:y}=v;let{value:S}=y;if(b){if(S&&m==="time"){const E=S.split(":").map(T=>parseInt(T,10));S=new Date(2e3,0,1,E[0],E[1],E[2]||0).valueOf(),y.step=""}else S.includes("T")||(S=`${S}T00:00`),S=new Date(S).valueOf();y.type="text"}h.userValue=S,h.lastCommittedValue!==S&&((j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:h.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),N(v)}),(i=this.data.actions)!=null&&i.Keystroke&&s.addEventListener("beforeinput",v=>{var _;h.lastCommittedValue=null;const{data:y,target:S}=v,{value:w,selectionStart:j,selectionEnd:E}=S;let T=j,P=E;switch(v.inputType){case"deleteWordBackward":{const R=w.substring(0,j).match(/\w*[^\w]*$/);R&&(T-=R[0].length);break}case"deleteWordForward":{const R=w.substring(j).match(/^[^\w]*\w*/);R&&(P+=R[0].length);break}case"deleteContentBackward":j===E&&(T-=1);break;case"deleteContentForward":j===E&&(P+=1);break}v.preventDefault(),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,change:y||"",willCommit:!1,selStart:T,selEnd:P}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(g&&s.addEventListener("blur",g),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/d;s.classList.add("comb"),s.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class eK extends Fu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class tK extends Fu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Tu.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",o=>{const{name:l,checked:d}=o.target;for(const u of this._getElementsByName(l,s)){const h=d&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(s,{value:d})}),i.addEventListener("resetform",o=>{const l=t.defaultFieldValue||"Off";o.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const l={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class RO extends Fu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(s,{value:r})),r)for(const o of this._getElementsByName(t.fieldName,s))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(Tu.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",o=>{const{name:l,checked:d}=o.target;for(const u of this._getElementsByName(l,s))e.setValue(u.id,{value:!1});e.setValue(s,{value:d})}),i.addEventListener("resetform",o=>{const l=t.defaultFieldValue;o.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",l=>{const d={value:u=>{const h=o===u.detail.value;for(const f of this._getElementsByName(u.target.name)){const m=h&&f.id===s;f.domElement&&(f.domElement.checked=m),e.setValue(f.id,{value:m})}}};this._dispatchEventFromSandbox(d,l)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class nK extends CE{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class sK extends Fu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Tu.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",h=>{const f=this.data.defaultFieldValue;for(const m of r.options)m.selected=m.value===f});for(const h of this.data.options){const f=document.createElement("option");f.textContent=h.displayValue,f.value=h.exportValue,s.value.includes(h.exportValue)&&(f.setAttribute("selected",!0),i=!1),r.append(f)}let o=null;if(i){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),r.prepend(h),o=()=>{h.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const l=h=>{const f=h?"value":"textContent",{options:m,multiple:p}=r;return p?Array.prototype.filter.call(m,b=>b.selected).map(b=>b[f]):m.selectedIndex===-1?null:m[m.selectedIndex][f]};let d=l(!1);const u=h=>{const f=h.target.options;return Array.prototype.map.call(f,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",h=>{const f={value(m){o==null||o();const p=m.detail.value,b=new Set(Array.isArray(p)?p:[p]);for(const g of r.options)g.selected=b.has(g.value);e.setValue(t,{value:l(!0)}),d=l(!1)},multipleSelection(m){r.multiple=!0},remove(m){const p=r.options,b=m.detail.remove;p[b].selected=!1,r.remove(b),p.length>0&&Array.prototype.findIndex.call(p,N=>N.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:l(!0),items:u(m)}),d=l(!1)},clear(m){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),d=l(!1)},insert(m){const{index:p,displayValue:b,exportValue:g}=m.detail.insert,N=r.children[p],v=document.createElement("option");v.textContent=b,v.value=g,N?N.before(v):r.append(v),e.setValue(t,{value:l(!0),items:u(m)}),d=l(!1)},items(m){const{items:p}=m.detail;for(;r.length!==0;)r.remove(0);for(const b of p){const{displayValue:g,exportValue:N}=b,v=document.createElement("option");v.textContent=g,v.value=N,r.append(v)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:l(!0),items:u(m)}),d=l(!1)},indices(m){const p=new Set(m.detail.indices);for(const b of m.target.options)b.selected=p.has(b.index);e.setValue(t,{value:l(!0)}),d=l(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(f,h)}),r.addEventListener("input",h=>{var p;const f=l(!0),m=l(!1);e.setValue(t,{value:f}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:m,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):r.addEventListener("input",function(h){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var Ux,jj;class Nj extends Lt{constructor(t){const{data:s,elements:r,parent:i}=t,o=!!i._commentManager;super(t,{isRenderable:!o&&Lt._hasPopupData(s)});A(this,Ux);if(this.elements=r,o&&Lt._hasPopupData(s)){const l=this.popup=k(this,Ux,jj).call(this);for(const d of r)d.popup=l}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const s=this.popup=k(this,Ux,jj).call(this),r=[];for(const i of this.elements)i.popup=s,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${gE}${i}`).join(",")),this.container}}Ux=new WeakSet,jj=function(){return new rK({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Hs,Fl,qb,Kb,Uf,Hf,Ut,Ji,Ol,Hd,Vf,Wf,Zi,Vs,so,ro,mn,io,Bl,Hx,ao,Gf,Vd,$l,Yn,zl,Pe,f0,Cj,Aj,Ej,m0,kj,DO,IO,LO,FO,p0,g0,Tj;class rK{constructor({container:e,color:t,elements:s,titleObj:r,modificationDate:i,contentsObj:o,richText:l,parent:d,rect:u,parentRect:h,open:f,commentManager:m=null}){A(this,Pe);A(this,Hs,null);A(this,Fl,k(this,Pe,LO).bind(this));A(this,qb,k(this,Pe,Tj).bind(this));A(this,Kb,k(this,Pe,g0).bind(this));A(this,Uf,k(this,Pe,p0).bind(this));A(this,Hf,null);A(this,Ut,null);A(this,Ji,null);A(this,Ol,null);A(this,Hd,null);A(this,Vf,null);A(this,Wf,null);A(this,Zi,!1);A(this,Vs,null);A(this,so,null);A(this,ro,null);A(this,mn,null);A(this,io,null);A(this,Bl,null);A(this,Hx,null);A(this,ao,null);A(this,Gf,null);A(this,Vd,null);A(this,$l,!1);A(this,Yn,null);A(this,zl,null);C(this,Ut,e),C(this,Gf,r),C(this,Ji,o),C(this,ao,l),C(this,Vf,d),C(this,Hf,t),C(this,Hx,u),C(this,Wf,h),C(this,Hd,s),C(this,Hs,m),C(this,Yn,s[0]),C(this,Ol,Ag.toDateObject(i)),this.trigger=s.flatMap(p=>p.getElementsToTriggerPopup()),m?this.renderCommentButton():(k(this,Pe,f0).call(this),c(this,Ut).hidden=!0,f&&k(this,Pe,p0).call(this))}renderCommentButton(){if(c(this,mn)||(c(this,io)||k(this,Pe,Cj).call(this),!c(this,io)))return;const{signal:e}=C(this,so,new AbortController),t=!!c(this,Yn).extraPopupElement,s=()=>{c(this,Hs).toggleCommentPopup(this,!0,void 0,!t)},r=()=>{c(this,Hs).toggleCommentPopup(this,!1,!0,!t)},i=()=>{c(this,Hs).toggleCommentPopup(this,!1,!1)};if(t){C(this,mn,c(this,Yn).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",c(this,Fl),{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",r,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=C(this,mn,document.createElement("button"));o.className="annotationCommentButton";const l=c(this,Yn).container;o.style.zIndex=l.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),k(this,Pe,Ej).call(this),k(this,Pe,Aj).call(this),o.addEventListener("keydown",c(this,Fl),{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",r,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),l.after(o)}}get commentButtonColor(){const{color:e,opacity:t}=c(this,Yn).commentData;return e?c(this,Vf)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=c(this,mn))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:s,creationDate:r,modificationDate:i}=c(this,Yn).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:s,creationDate:r,modificationDate:i}}get elementBeforePopup(){return c(this,mn)}get comment(){return c(this,zl)||C(this,zl,c(this,Yn).commentText),c(this,zl)}set comment(e){e!==this.comment&&(c(this,Yn).commentText=C(this,zl,e))}get parentBoundingClientRect(){return c(this,Yn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){c(this,mn)&&(c(this,mn).classList.toggle("selected",e),c(this,mn).ariaExpanded=t)}setSelectedCommentButton(e){c(this,mn).classList.toggle("selected",e)}get commentPopupPosition(){if(c(this,Bl))return c(this,Bl);const{x:e,y:t,height:s}=c(this,mn).getBoundingClientRect(),{x:r,y:i,width:o,height:l}=c(this,Yn).layer.getBoundingClientRect();return[(e-r)/o,(t+s-i)/l]}set commentPopupPosition(e){C(this,Bl,e)}hasDefaultPopupPosition(){return c(this,Bl)===null}get commentButtonPosition(){return c(this,io)}get commentButtonWidth(){return c(this,mn).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,s]=c(this,Bl)||this.commentButtonPosition.map(u=>u/100),r=this.parentBoundingClientRect,{x:i,y:o,width:l,height:d}=r;c(this,Hs).showDialog(null,this,i+t*l,o+s*d,{...e,parentDimensions:r})}render(){var s,r;if(c(this,Vs))return;const e=C(this,Vs,document.createElement("div"));if(e.className="popup",c(this,Hf)){const i=e.style.outlineColor=he.makeHexColor(...c(this,Hf));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(s=c(this,Gf))!=null&&s.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=c(this,Gf)}if(e.append(t),c(this,Ol)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,Ol).valueOf()})),i.dateTime=c(this,Ol).toISOString(),t.append(i)}yE({html:c(this,Pe,m0)||c(this,Ji).str,dir:(r=c(this,Ji))==null?void 0:r.dir,className:"popupContent"},e),c(this,Ut).append(e)}updateEdited({rect:e,popup:t,deleted:s}){var r;if(c(this,Hs)){s?(this.remove(),C(this,zl,null)):t&&(t.deleted?this.remove():(k(this,Pe,Ej).call(this),C(this,zl,t.text))),e&&(C(this,io,null),k(this,Pe,Cj).call(this),k(this,Pe,Aj).call(this));return}if(s||t!=null&&t.deleted){this.remove();return}k(this,Pe,f0).call(this),c(this,Vd)||C(this,Vd,{contentsObj:c(this,Ji),richText:c(this,ao)}),e&&C(this,ro,null),t&&t.text&&(C(this,ao,k(this,Pe,IO).call(this,t.text)),C(this,Ol,Ag.toDateObject(t.date)),C(this,Ji,null)),(r=c(this,Vs))==null||r.remove(),C(this,Vs,null)}resetEdited(){var e;c(this,Vd)&&({contentsObj:Ot(this,Ji)._,richText:Ot(this,ao)._}=c(this,Vd),C(this,Vd,null),(e=c(this,Vs))==null||e.remove(),C(this,Vs,null),C(this,ro,null))}remove(){var e,t,s;if((e=c(this,so))==null||e.abort(),C(this,so,null),(t=c(this,Vs))==null||t.remove(),C(this,Vs,null),C(this,$l,!1),C(this,Zi,!1),(s=c(this,mn))==null||s.remove(),C(this,mn,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){C(this,$l,this.isVisible),c(this,$l)&&(c(this,Ut).hidden=!0)}maybeShow(){c(this,Hs)||(k(this,Pe,f0).call(this),c(this,$l)&&(c(this,Vs)||k(this,Pe,g0).call(this),C(this,$l,!1),c(this,Ut).hidden=!1))}get isVisible(){return c(this,Hs)?!1:c(this,Ut).hidden===!1}}Hs=new WeakMap,Fl=new WeakMap,qb=new WeakMap,Kb=new WeakMap,Uf=new WeakMap,Hf=new WeakMap,Ut=new WeakMap,Ji=new WeakMap,Ol=new WeakMap,Hd=new WeakMap,Vf=new WeakMap,Wf=new WeakMap,Zi=new WeakMap,Vs=new WeakMap,so=new WeakMap,ro=new WeakMap,mn=new WeakMap,io=new WeakMap,Bl=new WeakMap,Hx=new WeakMap,ao=new WeakMap,Gf=new WeakMap,Vd=new WeakMap,$l=new WeakMap,Yn=new WeakMap,zl=new WeakMap,Pe=new WeakSet,f0=function(){var t;if(c(this,so))return;C(this,so,new AbortController);const{signal:e}=c(this,so);for(const s of this.trigger)s.addEventListener("click",c(this,Uf),{signal:e}),s.addEventListener("pointerenter",c(this,Kb),{signal:e}),s.addEventListener("pointerleave",c(this,qb),{signal:e}),s.classList.add("popupTriggerArea");for(const s of c(this,Hd))(t=s.container)==null||t.addEventListener("keydown",c(this,Fl),{signal:e})},Cj=function(){const e=c(this,Hd).find(t=>t.hasCommentButton);e&&C(this,io,e._normalizePoint(e.commentButtonPosition))},Aj=function(){if(c(this,Yn).extraPopupElement&&!c(this,Yn).editor)return;this.renderCommentButton();const[e,t]=c(this,io),{style:s}=c(this,mn);s.left=`calc(${e}%)`,s.top=`calc(${t}% - var(--comment-button-dim))`},Ej=function(){c(this,Yn).extraPopupElement||(this.renderCommentButton(),c(this,mn).style.backgroundColor=this.commentButtonColor||"")},m0=function(){const e=c(this,ao),t=c(this,Ji);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&c(this,ao).html||null},kj=function(){var e,t,s;return((s=(t=(e=c(this,Pe,m0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},DO=function(){var e,t,s;return((s=(t=(e=c(this,Pe,m0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},IO=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:c(this,Pe,DO),fontSize:c(this,Pe,kj)?`calc(${c(this,Pe,kj)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:r});return s},LO=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&c(this,Zi))&&k(this,Pe,p0).call(this)},FO=function(){if(c(this,ro)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:r,pageY:i}}}=c(this,Vf);let o=!!c(this,Wf),l=o?c(this,Wf):c(this,Hx);for(const b of c(this,Hd))if(!l||he.intersect(b.data.rect,l)!==null){l=b.data.rect,o=!0;break}const d=he.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),h=o?l[2]-l[0]+5:0,f=d[0]+h,m=d[1];C(this,ro,[100*(f-r)/t,100*(m-i)/s]);const{style:p}=c(this,Ut);p.left=`${c(this,ro)[0]}%`,p.top=`${c(this,ro)[1]}%`},p0=function(){if(c(this,Hs)){c(this,Hs).toggleCommentPopup(this,!1);return}C(this,Zi,!c(this,Zi)),c(this,Zi)?(k(this,Pe,g0).call(this),c(this,Ut).addEventListener("click",c(this,Uf)),c(this,Ut).addEventListener("keydown",c(this,Fl))):(k(this,Pe,Tj).call(this),c(this,Ut).removeEventListener("click",c(this,Uf)),c(this,Ut).removeEventListener("keydown",c(this,Fl)))},g0=function(){c(this,Vs)||this.render(),this.isVisible?c(this,Zi)&&c(this,Ut).classList.add("focused"):(k(this,Pe,FO).call(this),c(this,Ut).hidden=!1,c(this,Ut).style.zIndex=parseInt(c(this,Ut).style.zIndex)+1e3)},Tj=function(){c(this,Ut).classList.remove("focused"),!(c(this,Zi)||!this.isVisible)&&(c(this,Ut).hidden=!0,c(this,Ut).style.zIndex=parseInt(c(this,Ut).style.zIndex)-1e3)};class OO extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Se.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Vx;class iK extends Lt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Vx,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=C(this,Vx,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Vx)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vx=new WeakMap;var Wx;class aK extends Lt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Wx,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=t.borderStyle.width,l=C(this,Wx,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",s-o),l.setAttribute("height",r-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Wx)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wx=new WeakMap;var Gx;class oK extends Lt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Gx,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=t.borderStyle.width,l=C(this,Gx,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",s/2),l.setAttribute("cy",r/2),l.setAttribute("rx",s/2-o/2),l.setAttribute("ry",r/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Gx)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gx=new WeakMap;var qx;class BO extends Lt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,qx,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:r,popupRef:i},width:o,height:l}=this;if(!s)return this.container;const d=this.svgFactory.create(o,l,!0);let u=[];for(let f=0,m=s.length;f<m;f+=2){const p=s[f]-t[0],b=t[3]-s[f+1];u.push(`${p},${b}`)}u=u.join(" ");const h=C(this,qx,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),d.append(h),this.container.append(d),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,qx)}addHighlightArea(){this.container.classList.add("highlightArea")}}qx=new WeakMap;class lK extends BO{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class cK extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Kx,Wd,Yx,Pj;class AE extends Lt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Yx);A(this,Kx,null);A(this,Wd,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Se.HIGHLIGHT:Se.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:r,borderStyle:i,popupRef:o}}=this,{transform:l,width:d,height:u}=k(this,Yx,Pj).call(this,s,t),h=this.svgFactory.create(d,u,!0),f=C(this,Kx,this.svgFactory.createElement("svg:g"));h.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",l);for(let m=0,p=r.length;m<p;m++){const b=this.svgFactory.createElement(this.svgElementName);c(this,Wd).push(b),b.setAttribute("points",r[m].join(",")),f.append(b)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:r,rect:i}=t,o=c(this,Kx);if(s>=0&&o.setAttribute("stroke-width",s||1),r)for(let l=0,d=c(this,Wd).length;l<d;l++)c(this,Wd)[l].setAttribute("points",r[l].join(","));if(i){const{transform:l,width:d,height:u}=k(this,Yx,Pj).call(this,this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${d} ${u}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return c(this,Wd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kx=new WeakMap,Wd=new WeakMap,Yx=new WeakSet,Pj=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class $O extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Se.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class dK extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class uK extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class hK extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class zO extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Se.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Xx,Qx,_j;class fK extends Lt{constructor(t){var r;super(t,{isRenderable:!0});A(this,Qx);A(this,Xx,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let r;s.hasAppearance||s.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),r.addEventListener("dblclick",k(this,Qx,_j).bind(this)),C(this,Xx,r);const{isMac:i}=Sn.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&k(this,Qx,_j).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return c(this,Xx)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xx=new WeakMap,Qx=new WeakSet,_j=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var qf,Gd,Kf,Ul,Jx,qd,kc,Mj,Rj,Yf;let EE=(Yf=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:r,page:i,viewport:o,structTreeLayer:l,commentManager:d,linkService:u,annotationStorage:h}){A(this,kc);A(this,qf,null);A(this,Gd,null);A(this,Kf,null);A(this,Ul,new Map);A(this,Jx,null);A(this,qd,null);this.div=e,C(this,qf,t),C(this,Gd,s),C(this,Jx,l||null),C(this,qd,u||null),C(this,Kf,h||new vE),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=d||null}hasEditableAnnotations(){return c(this,Ul).size>0}async render(e){var o,l,d;const{annotations:t}=e,s=this.div;Cc(s,this.viewport);const r=new Map,i={data:null,layer:s,linkService:c(this,qd),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Pg,annotationStorage:c(this,Kf),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of t){if(u.noHTML)continue;const h=u.annotationType===Kt.POPUP;if(h){const p=r.get(u.id);if(!p)continue;i.elements=p}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;i.data=u;const f=HT.create(i);if(!f.isRenderable)continue;if(!h&&u.popupRef){const p=r.get(u.popupRef);p?p.push(f):r.set(u.popupRef,[f])}const m=f.render();u.hidden&&(m.style.visibility="hidden"),await k(this,kc,Mj).call(this,m,u.id,i.elements),(l=(o=f.extraPopupElement)==null?void 0:o.popup)==null||l.renderCommentButton(),f._isEditable&&(c(this,Ul).set(f.data.id,f),(d=this._annotationEditorUIManager)==null||d.renderAnnotationElement(f))}k(this,kc,Rj).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:c(this,qd),svgFactory:new Pg,parent:this};for(const s of e){s.borderStyle||(s.borderStyle=Yf._defaultBorderStyle),t.data=s;const r=HT.create(t);if(!r.isRenderable)continue;const i=r.render();await k(this,kc,Mj).call(this,i,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Cc(t,{rotation:e.rotation}),k(this,kc,Rj).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(c(this,Ul).values())}getEditableAnnotation(e){return c(this,Ul).get(e)}addFakeAnnotation(e){var l;const{div:t}=this,{id:s,rotation:r}=e,i=new Q9({data:{id:s,rect:e.getPDFRect(),rotation:r},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:c(this,qd),annotationStorage:c(this,Kf)}),o=i.render();return t.append(o),(l=c(this,qf))==null||l.moveElementInDOM(t,o,o,!1),i.createOrUpdatePopup(),i}static get _defaultBorderStyle(){return Ee(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Gu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},qf=new WeakMap,Gd=new WeakMap,Kf=new WeakMap,Ul=new WeakMap,Jx=new WeakMap,qd=new WeakMap,kc=new WeakSet,Mj=async function(e,t,s){var l,d;const r=e.firstChild||e,i=r.id=`${gE}${t}`,o=await((l=c(this,Jx))==null?void 0:l.getAriaAttributes(i));if(o)for(const[u,h]of o)r.setAttribute(u,h);s?s.at(-1).container.after(e):(this.div.append(e),(d=c(this,qf))==null||d.moveElementInDOM(this.div,e,r,!1))},Rj=function(){var t;if(!c(this,Gd))return;const e=this.div;for(const[s,r]of c(this,Gd)){const i=e.querySelector(`[data-annotation-id="${s}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(r):o.classList.contains("annotationContent")?o.after(r):o.before(r):i.append(r);const l=c(this,Ul).get(s);l&&(l._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(s,i.id,r),l._hasNoCanvas=!1):l.canvas=r)}c(this,Gd).clear()},Yf);const Tv=/\r\n?|\n/g;var Ws,Zx,Kd,Gs,rn,UO,HO,VO,x0,jo,y0,v0,WO,Ij,GO;const bt=class bt extends pt{constructor(t){super({...t,name:"freeTextEditor"});A(this,rn);A(this,Ws,"");A(this,Zx,`${this.id}-editor`);A(this,Kd,null);A(this,Gs);J(this,"_colorPicker",null);this.color=t.color||bt._defaultColor||pt._defaultLineColor,C(this,Gs,t.fontSize||bt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=bt.prototype,s=o=>o.isEmpty(),r=Ac.TRANSLATE_SMALL,i=Ac.TRANSLATE_BIG;return Ee(this,"_keyboardManager",new Oy([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}]]))}static initialize(t,s){pt.initialize(t,s);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case Fe.FREETEXT_SIZE:bt._defaultFontSize=s;break;case Fe.FREETEXT_COLOR:bt._defaultColor=s;break}}updateParams(t,s){switch(t){case Fe.FREETEXT_SIZE:k(this,rn,UO).call(this,s);break;case Fe.FREETEXT_COLOR:k(this,rn,HO).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Fe.FREETEXT_SIZE,bt._defaultFontSize],[Fe.FREETEXT_COLOR,bt._defaultColor||pt._defaultLineColor]]}get propertiesToUpdate(){return[[Fe.FREETEXT_SIZE,c(this,Gs)],[Fe.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new jb(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Fe.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-bt._internalPadding*t,-(bt._internalPadding+c(this,Gs))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),C(this,Kd,new AbortController);const t=this._uiManager.combinedSignal(c(this,Kd));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,Zx)),this._isDraggable=!0,(t=c(this,Kd))==null||t.abort(),C(this,Kd,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=c(this,Ws),s=C(this,Ws,k(this,rn,VO).call(this).trimEnd());if(t===s)return;const r=i=>{if(C(this,Ws,i),!i){this.remove();return}k(this,rn,v0).call(this),this._uiManager.rebuild(this),k(this,rn,x0).call(this)};this.addCommands({cmd:()=>{r(s)},undo:()=>{r(t)},mustExec:!1}),k(this,rn,x0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){bt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,s;(this._isCopy||this.annotationElementId)&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,Zx)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${c(this,Gs)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[d,u]=this.getInitialTranslation();[d,u]=this.pageTranslationToScreen(d,u);const[h,f]=this.pageDimensions,[m,p]=this.pageTranslation;let b,g;switch(this.rotation){case 0:b=t+(l[0]-m)/h,g=s+this.height-(l[1]-p)/f;break;case 90:b=t+(l[0]-m)/h,g=s-(l[1]-p)/f,[d,u]=[u,-d];break;case 180:b=t-this.width+(l[0]-m)/h,g=s-(l[1]-p)/f,[d,u]=[-d,-u];break;case 270:b=t+(l[0]-m-this.height*f)/h,g=s+(l[1]-p-this.width*h)/f,[d,u]=[-u,d];break}this.setAt(b*i,g*o,d,u)}else this._moveAfterPaste(t,s);k(this,rn,v0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var b,g,N;const s=t.clipboardData||window.clipboardData,{types:r}=s;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=k(b=bt,jo,Ij).call(b,s.getData("text")||"").replaceAll(Tv,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!i.includes(`
`)){l.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:d,startOffset:u}=l,h=[],f=[];if(d.nodeType===Node.TEXT_NODE){const v=d.parentElement;if(f.push(d.nodeValue.slice(u).replaceAll(Tv,"")),v!==this.editorDiv){let y=h;for(const S of this.editorDiv.childNodes){if(S===v){y=f;continue}y.push(k(g=bt,jo,y0).call(g,S))}}h.push(d.nodeValue.slice(0,u).replaceAll(Tv,""))}else if(d===this.editorDiv){let v=h,y=0;for(const S of this.editorDiv.childNodes)y++===u&&(v=f),v.push(k(N=bt,jo,y0).call(N,S))}C(this,Ws,`${h.join(`
`)}${i}${f.join(`
`)}`),k(this,rn,v0).call(this);const m=new Range;let p=Math.sumPrecise(h.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const y=v.nodeValue.length;if(p<=y){m.setStart(v,p),m.setEnd(v,p);break}p-=y}o.removeAllRanges(),o.addRange(m)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=bt._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,s,r){var l;let i=null;if(t instanceof OO){const{data:{defaultAppearanceData:{fontSize:d,fontColor:u},rect:h,rotation:f,id:m,popupRef:p,richText:b,contentsObj:g,creationDate:N,modificationDate:v},textContent:y,textPosition:S,parent:{page:{pageNumber:w}}}=t;if(!y||y.length===0)return null;i=t={annotationType:Se.FREETEXT,color:Array.from(u),fontSize:d,value:y.join(`
`),position:S,pageIndex:w-1,rect:h.slice(0),rotation:f,annotationElementId:m,id:m,deleted:!1,popupRef:p,comment:(g==null?void 0:g.str)||null,richText:b,creationDate:N,modificationDate:v}}const o=await super.deserialize(t,s,r);return C(o,Gs,t.fontSize),o.color=he.makeHexColor(...t.color),C(o,Ws,k(l=bt,jo,Ij).call(l,t.value)),o._initialData=i,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=pt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(t),{color:s,fontSize:c(this,Gs),value:k(this,rn,WO).call(this)});return this.addComment(r),t?(r.isCopy=!0,r):this.annotationElementId&&!k(this,rn,GO).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(!s)return null;const{style:r}=s;r.fontSize=`calc(${c(this,Gs)}px * var(--total-scale-factor))`,r.color=this.color,s.replaceChildren();for(const i of c(this,Ws).split(`
`)){const o=document.createElement("div");o.append(i?document.createTextNode(i):document.createElement("br")),s.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:c(this,Ws)}}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Ws=new WeakMap,Zx=new WeakMap,Kd=new WeakMap,Gs=new WeakMap,rn=new WeakSet,UO=function(t){const s=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-c(this,Gs))*this.parentScale),C(this,Gs,i),k(this,rn,x0).call(this)},r=c(this,Gs);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},HO=function(t){const s=i=>{this.color=i,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},VO=function(){var r;const t=[];this.editorDiv.normalize();let s=null;for(const i of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(k(r=bt,jo,y0).call(r,i)),s=i);return t.join(`
`)},x0=function(){const[t,s]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,l=o.style.display,d=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/s):(this.width=r.height/t,this.height=r.width/s),this.fixAndSetPosition()},jo=new WeakSet,y0=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Tv,"")},v0=function(){if(this.editorDiv.replaceChildren(),!!c(this,Ws))for(const t of c(this,Ws).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},WO=function(){return c(this,Ws).replaceAll(" "," ")},Ij=function(t){return t.replaceAll(" "," ")},GO=function(t){const{value:s,fontSize:r,color:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==s||t.fontSize!==r||t.color.some((l,d)=>l!==i[d])||t.pageIndex!==o},A(bt,jo),J(bt,"_freeTextDefaultContent",""),J(bt,"_internalPadding",0),J(bt,"_defaultColor",null),J(bt,"_defaultFontSize",10),J(bt,"_type","freetext"),J(bt,"_editorType",Se.FREETEXT);let Dj=bt;class ue{toSVGPath(){ht("Abstract method `toSVGPath` must be implemented.")}get box(){ht("Abstract getter `box` must be implemented.")}serialize(e,t){ht("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,r,i,o){o||(o=new Float32Array(e.length));for(let l=0,d=e.length;l<d;l+=2)o[l]=t+e[l]*r,o[l+1]=s+e[l+1]*i;return o}static _rescaleAndSwap(e,t,s,r,i,o){o||(o=new Float32Array(e.length));for(let l=0,d=e.length;l<d;l+=2)o[l]=t+e[l+1]*r,o[l+1]=s+e[l]*i;return o}static _translate(e,t,s,r){r||(r=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)r[i]=t+e[i],r[i+1]=s+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,r,i){switch(i){case 90:return[1-t/s,e/r];case 180:return[1-e/s,1-t/r];case 270:return[t/s,1-e/r];default:return[e/s,t/r]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,r,i,o){return[(e+5*s)/6,(t+5*r)/6,(5*s+i)/6,(5*r+o)/6,(s+i)/2,(r+o)/2]}}J(ue,"PRECISION",1e-4);var qs,ai,Xf,Qf,ea,De,Yd,Xd,ey,ty,Jf,Zf,Hl,ny,Yb,Xb,hn,Rp,qO,KO,YO,XO,QO,JO;const _a=class _a{constructor({x:e,y:t},s,r,i,o,l=0){A(this,hn);A(this,qs);A(this,ai,[]);A(this,Xf);A(this,Qf);A(this,ea,[]);A(this,De,new Float32Array(18));A(this,Yd);A(this,Xd);A(this,ey);A(this,ty);A(this,Jf);A(this,Zf);A(this,Hl,[]);C(this,qs,s),C(this,Zf,i*r),C(this,Qf,o),c(this,De).set([NaN,NaN,NaN,NaN,e,t],6),C(this,Xf,l),C(this,ty,c(_a,ny)*r),C(this,ey,c(_a,Xb)*r),C(this,Jf,r),c(this,Hl).push(e,t)}isEmpty(){return isNaN(c(this,De)[8])}add({x:e,y:t}){var _;C(this,Yd,e),C(this,Xd,t);const[s,r,i,o]=c(this,qs);let[l,d,u,h]=c(this,De).subarray(8,12);const f=e-u,m=t-h,p=Math.hypot(f,m);if(p<c(this,ey))return!1;const b=p-c(this,ty),g=b/p,N=g*f,v=g*m;let y=l,S=d;l=u,d=h,u+=N,h+=v,(_=c(this,Hl))==null||_.push(e,t);const w=-v/b,j=N/b,E=w*c(this,Zf),T=j*c(this,Zf);return c(this,De).set(c(this,De).subarray(2,8),0),c(this,De).set([u+E,h+T],4),c(this,De).set(c(this,De).subarray(14,18),12),c(this,De).set([u-E,h-T],16),isNaN(c(this,De)[6])?(c(this,ea).length===0&&(c(this,De).set([l+E,d+T],2),c(this,ea).push(NaN,NaN,NaN,NaN,(l+E-s)/i,(d+T-r)/o),c(this,De).set([l-E,d-T],14),c(this,ai).push(NaN,NaN,NaN,NaN,(l-E-s)/i,(d-T-r)/o)),c(this,De).set([y,S,l,d,u,h],6),!this.isEmpty()):(c(this,De).set([y,S,l,d,u,h],6),Math.abs(Math.atan2(S-d,y-l)-Math.atan2(v,N))<Math.PI/2?([l,d,u,h]=c(this,De).subarray(2,6),c(this,ea).push(NaN,NaN,NaN,NaN,((l+u)/2-s)/i,((d+h)/2-r)/o),[l,d,y,S]=c(this,De).subarray(14,18),c(this,ai).push(NaN,NaN,NaN,NaN,((y+l)/2-s)/i,((S+d)/2-r)/o),!0):([y,S,l,d,u,h]=c(this,De).subarray(0,6),c(this,ea).push(((y+5*l)/6-s)/i,((S+5*d)/6-r)/o,((5*l+u)/6-s)/i,((5*d+h)/6-r)/o,((l+u)/2-s)/i,((d+h)/2-r)/o),[u,h,l,d,y,S]=c(this,De).subarray(12,18),c(this,ai).push(((y+5*l)/6-s)/i,((S+5*d)/6-r)/o,((5*l+u)/6-s)/i,((5*d+h)/6-r)/o,((l+u)/2-s)/i,((d+h)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=c(this,ea),t=c(this,ai);if(isNaN(c(this,De)[6])&&!this.isEmpty())return k(this,hn,qO).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?s.push(`L${e[r+4]} ${e[r+5]}`):s.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);k(this,hn,YO).call(this,s);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return k(this,hn,KO).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,r,i,o){return new ZO(e,t,s,r,i,o)}getOutlines(){var f;const e=c(this,ea),t=c(this,ai),s=c(this,De),[r,i,o,l]=c(this,qs),d=new Float32Array((((f=c(this,Hl))==null?void 0:f.length)??0)+2);for(let m=0,p=d.length-2;m<p;m+=2)d[m]=(c(this,Hl)[m]-r)/o,d[m+1]=(c(this,Hl)[m+1]-i)/l;if(d[d.length-2]=(c(this,Yd)-r)/o,d[d.length-1]=(c(this,Xd)-i)/l,isNaN(s[6])&&!this.isEmpty())return k(this,hn,XO).call(this,d);const u=new Float32Array(c(this,ea).length+24+c(this,ai).length);let h=e.length;for(let m=0;m<h;m+=2){if(isNaN(e[m])){u[m]=u[m+1]=NaN;continue}u[m]=e[m],u[m+1]=e[m+1]}h=k(this,hn,JO).call(this,u,h);for(let m=t.length-6;m>=6;m-=6)for(let p=0;p<6;p+=2){if(isNaN(t[m+p])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=t[m+p],u[h+1]=t[m+p+1],h+=2}return k(this,hn,QO).call(this,u,h),this.newFreeDrawOutline(u,d,c(this,qs),c(this,Jf),c(this,Xf),c(this,Qf))}};qs=new WeakMap,ai=new WeakMap,Xf=new WeakMap,Qf=new WeakMap,ea=new WeakMap,De=new WeakMap,Yd=new WeakMap,Xd=new WeakMap,ey=new WeakMap,ty=new WeakMap,Jf=new WeakMap,Zf=new WeakMap,Hl=new WeakMap,ny=new WeakMap,Yb=new WeakMap,Xb=new WeakMap,hn=new WeakSet,Rp=function(){const e=c(this,De).subarray(4,6),t=c(this,De).subarray(16,18),[s,r,i,o]=c(this,qs);return[(c(this,Yd)+(e[0]-t[0])/2-s)/i,(c(this,Xd)+(e[1]-t[1])/2-r)/o,(c(this,Yd)+(t[0]-e[0])/2-s)/i,(c(this,Xd)+(t[1]-e[1])/2-r)/o]},qO=function(){const[e,t,s,r]=c(this,qs),[i,o,l,d]=k(this,hn,Rp).call(this);return`M${(c(this,De)[2]-e)/s} ${(c(this,De)[3]-t)/r} L${(c(this,De)[4]-e)/s} ${(c(this,De)[5]-t)/r} L${i} ${o} L${l} ${d} L${(c(this,De)[16]-e)/s} ${(c(this,De)[17]-t)/r} L${(c(this,De)[14]-e)/s} ${(c(this,De)[15]-t)/r} Z`},KO=function(e){const t=c(this,ai);e.push(`L${t[4]} ${t[5]} Z`)},YO=function(e){const[t,s,r,i]=c(this,qs),o=c(this,De).subarray(4,6),l=c(this,De).subarray(16,18),[d,u,h,f]=k(this,hn,Rp).call(this);e.push(`L${(o[0]-t)/r} ${(o[1]-s)/i} L${d} ${u} L${h} ${f} L${(l[0]-t)/r} ${(l[1]-s)/i}`)},XO=function(e){const t=c(this,De),[s,r,i,o]=c(this,qs),[l,d,u,h]=k(this,hn,Rp).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(t[2]-s)/i,(t[3]-r)/o,NaN,NaN,NaN,NaN,(t[4]-s)/i,(t[5]-r)/o,NaN,NaN,NaN,NaN,l,d,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(t[16]-s)/i,(t[17]-r)/o,NaN,NaN,NaN,NaN,(t[14]-s)/i,(t[15]-r)/o],0),this.newFreeDrawOutline(f,e,c(this,qs),c(this,Jf),c(this,Xf),c(this,Qf))},QO=function(e,t){const s=c(this,ai);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},JO=function(e,t){const s=c(this,De).subarray(4,6),r=c(this,De).subarray(16,18),[i,o,l,d]=c(this,qs),[u,h,f,m]=k(this,hn,Rp).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-i)/l,(s[1]-o)/d,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(r[0]-i)/l,(r[1]-o)/d],t),t+=24},A(_a,ny,8),A(_a,Yb,2),A(_a,Xb,c(_a,ny)+c(_a,Yb));let Cb=_a;var em,Qd,oo,sy,Ks,ry,Xt,Qb,e4;class ZO extends ue{constructor(t,s,r,i,o,l){super();A(this,Qb);A(this,em);A(this,Qd,new Float32Array(4));A(this,oo);A(this,sy);A(this,Ks);A(this,ry);A(this,Xt);C(this,Xt,t),C(this,Ks,s),C(this,em,r),C(this,ry,i),C(this,oo,o),C(this,sy,l),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],k(this,Qb,e4).call(this,l);const[d,u,h,f]=c(this,Qd);for(let m=0,p=t.length;m<p;m+=2)t[m]=(t[m]-d)/h,t[m+1]=(t[m+1]-u)/f;for(let m=0,p=s.length;m<p;m+=2)s[m]=(s[m]-d)/h,s[m+1]=(s[m+1]-u)/f}toSVGPath(){const t=[`M${c(this,Xt)[4]} ${c(this,Xt)[5]}`];for(let s=6,r=c(this,Xt).length;s<r;s+=6){if(isNaN(c(this,Xt)[s])){t.push(`L${c(this,Xt)[s+4]} ${c(this,Xt)[s+5]}`);continue}t.push(`C${c(this,Xt)[s]} ${c(this,Xt)[s+1]} ${c(this,Xt)[s+2]} ${c(this,Xt)[s+3]} ${c(this,Xt)[s+4]} ${c(this,Xt)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,r,i],o){const l=r-t,d=i-s;let u,h;switch(o){case 0:u=ue._rescale(c(this,Xt),t,i,l,-d),h=ue._rescale(c(this,Ks),t,i,l,-d);break;case 90:u=ue._rescaleAndSwap(c(this,Xt),t,s,l,d),h=ue._rescaleAndSwap(c(this,Ks),t,s,l,d);break;case 180:u=ue._rescale(c(this,Xt),r,s,-l,d),h=ue._rescale(c(this,Ks),r,s,-l,d);break;case 270:u=ue._rescaleAndSwap(c(this,Xt),r,i,-l,-d),h=ue._rescaleAndSwap(c(this,Ks),r,i,-l,-d);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return c(this,Qd)}newOutliner(t,s,r,i,o,l=0){return new Cb(t,s,r,i,o,l)}getNewOutline(t,s){const[r,i,o,l]=c(this,Qd),[d,u,h,f]=c(this,em),m=o*h,p=l*f,b=r*h+d,g=i*f+u,N=this.newOutliner({x:c(this,Ks)[0]*m+b,y:c(this,Ks)[1]*p+g},c(this,em),c(this,ry),t,c(this,sy),s??c(this,oo));for(let v=2;v<c(this,Ks).length;v+=2)N.add({x:c(this,Ks)[v]*m+b,y:c(this,Ks)[v+1]*p+g});return N.getOutlines()}}em=new WeakMap,Qd=new WeakMap,oo=new WeakMap,sy=new WeakMap,Ks=new WeakMap,ry=new WeakMap,Xt=new WeakMap,Qb=new WeakSet,e4=function(t){const s=c(this,Xt);let r=s[4],i=s[5];const o=[r,i,r,i];let l=r,d=i,u=r,h=i;const f=t?Math.max:Math.min,m=new Float32Array(4);for(let b=6,g=s.length;b<g;b+=6){const N=s[b+4],v=s[b+5];isNaN(s[b])?(he.pointBoundingBox(N,v,o),d>v?(l=N,d=v):d===v&&(l=f(l,N)),h<v?(u=N,h=v):h===v&&(u=f(u,N))):(m[0]=m[1]=1/0,m[2]=m[3]=-1/0,he.bezierBoundingBox(r,i,...s.slice(b,b+6),m),he.rectBoundingBox(m[0],m[1],m[2],m[3],o),d>m[1]?(l=m[0],d=m[1]):d===m[1]&&(l=f(l,m[0])),h<m[3]?(u=m[2],h=m[3]):h===m[3]&&(u=f(u,m[2]))),r=N,i=v}const p=c(this,Qd);p[0]=o[0]-c(this,oo),p[1]=o[1]-c(this,oo),p[2]=o[2]-o[0]+2*c(this,oo),p[3]=o[3]-o[1]+2*c(this,oo),this.firstPoint=[l,d],this.lastPoint=[u,h]};var iy,ay,oy,Vl,oi,hs,t4,b0,n4,s4,Fj;class Lj{constructor(e,t=0,s=0,r=!0){A(this,hs);A(this,iy);A(this,ay);A(this,oy);A(this,Vl,[]);A(this,oi,[]);const i=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:N,y:v,width:y,height:S}of e){const w=Math.floor((N-t)/l)*l,j=Math.ceil((N+y+t)/l)*l,E=Math.floor((v-t)/l)*l,T=Math.ceil((v+S+t)/l)*l,P=[w,E,T,!0],_=[j,E,T,!1];c(this,Vl).push(P,_),he.rectBoundingBox(w,E,j,T,i)}const d=i[2]-i[0]+2*s,u=i[3]-i[1]+2*s,h=i[0]-s,f=i[1]-s;let m=r?-1/0:1/0,p=1/0;const b=c(this,Vl).at(r?-1:-2),g=[b[0],b[2]];for(const N of c(this,Vl)){const[v,y,S,w]=N;!w&&r?y<p?(p=y,m=v):y===p&&(m=Math.max(m,v)):w&&!r&&(y<p?(p=y,m=v):y===p&&(m=Math.min(m,v))),N[0]=(v-h)/d,N[1]=(y-f)/u,N[2]=(S-f)/u}C(this,iy,new Float32Array([h,f,d,u])),C(this,ay,[m,p]),C(this,oy,g)}getOutlines(){c(this,Vl).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of c(this,Vl))t[3]?(e.push(...k(this,hs,Fj).call(this,t)),k(this,hs,n4).call(this,t)):(k(this,hs,s4).call(this,t),e.push(...k(this,hs,Fj).call(this,t)));return k(this,hs,t4).call(this,e)}}iy=new WeakMap,ay=new WeakMap,oy=new WeakMap,Vl=new WeakMap,oi=new WeakMap,hs=new WeakSet,t4=function(e){const t=[],s=new Set;for(const o of e){const[l,d,u]=o;t.push([l,d,o],[l,u,o])}t.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=t.length;o<l;o+=2){const d=t[o][2],u=t[o+1][2];d.push(u),u.push(d),s.add(d),s.add(u)}const r=[];let i;for(;s.size>0;){const o=s.values().next().value;let[l,d,u,h,f]=o;s.delete(o);let m=l,p=d;for(i=[l,u],r.push(i);;){let b;if(s.has(h))b=h;else if(s.has(f))b=f;else break;s.delete(b),[l,d,u,h,f]=b,m!==l&&(i.push(m,p,l,p===d?d:u),m=l),p=p===d?u:d}i.push(m,p)}return new mK(r,c(this,iy),c(this,ay),c(this,oy))},b0=function(e){const t=c(this,oi);let s=0,r=t.length-1;for(;s<=r;){const i=s+r>>1,o=t[i][0];if(o===e)return i;o<e?s=i+1:r=i-1}return r+1},n4=function([,e,t]){const s=k(this,hs,b0).call(this,e);c(this,oi).splice(s,0,[e,t])},s4=function([,e,t]){const s=k(this,hs,b0).call(this,e);for(let r=s;r<c(this,oi).length;r++){const[i,o]=c(this,oi)[r];if(i!==e)break;if(i===e&&o===t){c(this,oi).splice(r,1);return}}for(let r=s-1;r>=0;r--){const[i,o]=c(this,oi)[r];if(i!==e)break;if(i===e&&o===t){c(this,oi).splice(r,1);return}}},Fj=function(e){const[t,s,r]=e,i=[[t,s,r]],o=k(this,hs,b0).call(this,r);for(let l=0;l<o;l++){const[d,u]=c(this,oi)[l];for(let h=0,f=i.length;h<f;h++){const[,m,p]=i[h];if(!(u<=m||p<=d)){if(m>=d){if(p>u)i[h][1]=u;else{if(f===1)return[];i.splice(h,1),h--,f--}continue}i[h][2]=d,p>u&&i.push([t,u,p])}}}return i};var ly,tm;class mK extends ue{constructor(t,s,r,i){super();A(this,ly);A(this,tm);C(this,tm,t),C(this,ly,s),this.firstPoint=r,this.lastPoint=i}toSVGPath(){const t=[];for(const s of c(this,tm)){let[r,i]=s;t.push(`M${r} ${i}`);for(let o=2;o<s.length;o+=2){const l=s[o],d=s[o+1];l===r?(t.push(`V${d}`),i=d):d===i&&(t.push(`H${l}`),r=l)}t.push("Z")}return t.join(" ")}serialize([t,s,r,i],o){const l=[],d=r-t,u=i-s;for(const h of c(this,tm)){const f=new Array(h.length);for(let m=0;m<h.length;m+=2)f[m]=t+h[m]*d,f[m+1]=i-h[m+1]*u;l.push(f)}return l}get box(){return c(this,ly)}get classNamesForOutlining(){return["highlightOutline"]}}ly=new WeakMap,tm=new WeakMap;class Oj extends Cb{newFreeDrawOutline(e,t,s,r,i,o){return new pK(e,t,s,r,i,o)}}class pK extends ZO{newOutliner(e,t,s,r,i,o=0){return new Oj(e,t,s,r,i,o)}}var nm,cy,lo,Jd,dy,Cs,uy,hy,Zd,Ys,Xs,Tn,sm,rm,Xn,im,Pr,fy,ke,Bj,w0,r4,i4,a4,$j,zc,Fr,Ju,o4,S0,N0,l4,c4,d4,u4,h4;const Ge=class Ge extends pt{constructor(t){super({...t,name:"highlightEditor"});A(this,ke);A(this,nm,null);A(this,cy,0);A(this,lo);A(this,Jd,null);A(this,dy,null);A(this,Cs,null);A(this,uy,null);A(this,hy,0);A(this,Zd,null);A(this,Ys,null);A(this,Xs,null);A(this,Tn,!1);A(this,sm,null);A(this,rm,null);A(this,Xn,null);A(this,im,"");A(this,Pr);A(this,fy,"");this.color=t.color||Ge._defaultColor,C(this,Pr,t.thickness||Ge._defaultThickness),this.opacity=t.opacity||Ge._defaultOpacity,C(this,lo,t.boxes||null),C(this,fy,t.methodOfCreation||""),C(this,im,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(C(this,Tn,!0),k(this,ke,w0).call(this,t),k(this,ke,zc).call(this)):c(this,lo)&&(C(this,nm,t.anchorNode),C(this,cy,t.anchorOffset),C(this,uy,t.focusNode),C(this,hy,t.focusOffset),k(this,ke,Bj).call(this),k(this,ke,zc).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Ge.prototype;return Ee(this,"_keyboardManager",new Oy([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,Tn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:c(this,Pr),methodOfCreation:c(this,fy)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var r;pt.initialize(t,s),Ge._defaultColor||(Ge._defaultColor=((r=s.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case Fe.HIGHLIGHT_COLOR:Ge._defaultColor=s;break;case Fe.HIGHLIGHT_THICKNESS:Ge._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return c(this,rm)}get commentButtonPosition(){return c(this,sm)}updateParams(t,s){switch(t){case Fe.HIGHLIGHT_COLOR:k(this,ke,r4).call(this,s);break;case Fe.HIGHLIGHT_THICKNESS:k(this,ke,i4).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Fe.HIGHLIGHT_COLOR,Ge._defaultColor],[Fe.HIGHLIGHT_THICKNESS,Ge._defaultThickness]]}get propertiesToUpdate(){return[[Fe.HIGHLIGHT_COLOR,this.color||Ge._defaultColor],[Fe.HIGHLIGHT_THICKNESS,c(this,Pr)||Ge._defaultThickness],[Fe.HIGHLIGHT_FREE,c(this,Tn)]]}onUpdatedColor(){var t,s;(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Xs),{root:{fill:this.color,"fill-opacity":this.opacity}}),(s=c(this,dy))==null||s.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",C(this,dy,new Tg({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(k(this,ke,N0).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,k(this,ke,N0).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){k(this,ke,$j).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,ke,zc).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?k(this,ke,$j).call(this):t&&(k(this,ke,zc).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var i,o,l;const{drawLayer:s}=this.parent;let r;c(this,Tn)?(t=(t-this.rotation+360)%360,r=k(i=Ge,Fr,Ju).call(i,c(this,Ys).box,t)):r=k(o=Ge,Fr,Ju).call(o,[this.x,this.y,this.width,this.height],t),s.updateProperties(c(this,Xs),{bbox:r,root:{"data-main-rotation":t}}),s.updateProperties(c(this,Xn),{bbox:k(l=Ge,Fr,Ju).call(l,c(this,Cs).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();c(this,im)&&(t.setAttribute("aria-label",c(this,im)),t.setAttribute("role","mark")),c(this,Tn)?t.classList.add("free"):this.div.addEventListener("keydown",k(this,ke,o4).bind(this),{signal:this._uiManager._signal});const s=C(this,Zd,document.createElement("div"));return t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=c(this,Jd),this.setDims(this.width,this.height),RF(this,c(this,Zd),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Xn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Xn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:k(this,ke,S0).call(this,!0);break;case 1:case 3:k(this,ke,S0).call(this,!1);break}}select(){var t;super.select(),c(this,Xn)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,Xn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),c(this,Xn)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,Xn),{rootClass:{selected:!1}}),c(this,Tn)||k(this,ke,S0).call(this,!1))}get _mustFixPosition(){return!c(this,Tn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(c(this,Xs),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(c(this,Xn),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:r,x:i,y:o}){const{x:l,y:d,width:u,height:h}=r.getBoundingClientRect(),f=new AbortController,m=t.combinedSignal(f),p=b=>{f.abort(),k(this,Fr,u4).call(this,t,b)};window.addEventListener("blur",p,{signal:m}),window.addEventListener("pointerup",p,{signal:m}),window.addEventListener("pointerdown",Dt,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",fr,{signal:m}),r.addEventListener("pointermove",k(this,Fr,d4).bind(this,t),{signal:m}),this._freeHighlight=new Oj({x:i,y:o},[l,d,u,h],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,r){var g,N,v,y;let i=null;if(t instanceof $O){const{data:{quadPoints:S,rect:w,rotation:j,id:E,color:T,opacity:P,popupRef:_,richText:R,contentsObj:I,creationDate:L,modificationDate:U},parent:{page:{pageNumber:B}}}=t;i=t={annotationType:Se.HIGHLIGHT,color:Array.from(T),opacity:P,quadPoints:S,boxes:null,pageIndex:B-1,rect:w.slice(0),rotation:j,annotationElementId:E,id:E,deleted:!1,popupRef:_,richText:R,comment:(I==null?void 0:I.str)||null,creationDate:L,modificationDate:U}}else if(t instanceof AE){const{data:{inkLists:S,rect:w,rotation:j,id:E,color:T,borderStyle:{rawWidth:P},popupRef:_,richText:R,contentsObj:I,creationDate:L,modificationDate:U},parent:{page:{pageNumber:B}}}=t;i=t={annotationType:Se.HIGHLIGHT,color:Array.from(T),thickness:P,inkLists:S,boxes:null,pageIndex:B-1,rect:w.slice(0),rotation:j,annotationElementId:E,id:E,deleted:!1,popupRef:_,richText:R,comment:(I==null?void 0:I.str)||null,creationDate:L,modificationDate:U}}const{color:o,quadPoints:l,inkLists:d,opacity:u}=t,h=await super.deserialize(t,s,r);h.color=he.makeHexColor(...o),h.opacity=u||1,d&&C(h,Pr,t.thickness),h._initialData=i,t.comment&&h.setCommentData(t);const[f,m]=h.pageDimensions,[p,b]=h.pageTranslation;if(l){const S=C(h,lo,[]);for(let w=0;w<l.length;w+=8)S.push({x:(l[w]-p)/f,y:1-(l[w+1]-b)/m,width:(l[w+2]-l[w])/f,height:(l[w+1]-l[w+5])/m});k(g=h,ke,Bj).call(g),k(N=h,ke,zc).call(N),h.rotate(h.rotation)}else if(d){C(h,Tn,!0);const S=d[0],w={x:S[0]-p,y:m-(S[1]-b)},j=new Oj(w,[0,0,f,m],1,c(h,Pr)/2,!0,.001);for(let P=0,_=S.length;P<_;P+=2)w.x=S[P]-p,w.y=m-(S[P+1]-b),j.add(w);const{id:E,clipPathId:T}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:j.toSVGPath()}},!0,!0);k(v=h,ke,w0).call(v,{highlightOutlines:j.getOutlines(),highlightId:E,clipPathId:T}),k(y=h,ke,zc).call(y),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=pt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(t);return Object.assign(r,{color:s,opacity:this.opacity,thickness:c(this,Pr),quadPoints:k(this,ke,l4).call(this),outlines:k(this,ke,c4).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!k(this,ke,h4).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};nm=new WeakMap,cy=new WeakMap,lo=new WeakMap,Jd=new WeakMap,dy=new WeakMap,Cs=new WeakMap,uy=new WeakMap,hy=new WeakMap,Zd=new WeakMap,Ys=new WeakMap,Xs=new WeakMap,Tn=new WeakMap,sm=new WeakMap,rm=new WeakMap,Xn=new WeakMap,im=new WeakMap,Pr=new WeakMap,fy=new WeakMap,ke=new WeakSet,Bj=function(){const t=new Lj(c(this,lo),.001);C(this,Ys,t.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,Ys).box;const s=new Lj(c(this,lo),.0025,.001,this._uiManager.direction==="ltr");C(this,Cs,s.getOutlines());const{firstPoint:r}=c(this,Ys);C(this,sm,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:i}=c(this,Cs);C(this,rm,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},w0=function({highlightOutlines:t,highlightId:s,clipPathId:r}){var m,p;if(C(this,Ys,t),C(this,Cs,t.getNewOutline(c(this,Pr)/2+1.5,.0025)),s>=0)C(this,Xs,s),C(this,Jd,r),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),C(this,Xn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,Cs).box,path:{d:c(this,Cs).toSVGPath()}},!0));else if(this.parent){const b=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,Xs),{bbox:k(m=Ge,Fr,Ju).call(m,c(this,Ys).box,(b-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,Xn),{bbox:k(p=Ge,Fr,Ju).call(p,c(this,Cs).box,b),path:{d:c(this,Cs).toSVGPath()}})}const[o,l,d,u]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=d,this.height=u;break;case 90:{const[b,g]=this.parentDimensions;this.x=l,this.y=1-o,this.width=d*g/b,this.height=u*b/g;break}case 180:this.x=1-o,this.y=1-l,this.width=d,this.height=u;break;case 270:{const[b,g]=this.parentDimensions;this.x=1-l,this.y=o,this.width=d*g/b,this.height=u*b/g;break}}const{firstPoint:h}=t;C(this,sm,[(h[0]-o)/d,(h[1]-l)/u]);const{lastPoint:f}=c(this,Cs);C(this,rm,[(f[0]-o)/d,(f[1]-l)/u])},r4=function(t){const s=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},r=this.color,i=this.opacity;this.addCommands({cmd:s.bind(this,t,Ge._defaultOpacity),undo:s.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},i4=function(t){const s=c(this,Pr),r=i=>{C(this,Pr,i),k(this,ke,a4).call(this,i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},a4=function(t){c(this,Tn)&&(k(this,ke,w0).call(this,{highlightOutlines:c(this,Ys).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},$j=function(){c(this,Xs)===null||!this.parent||(this.parent.drawLayer.remove(c(this,Xs)),C(this,Xs,null),this.parent.drawLayer.remove(c(this,Xn)),C(this,Xn,null))},zc=function(t=this.parent){c(this,Xs)===null&&({id:Ot(this,Xs)._,clipPathId:Ot(this,Jd)._}=t.drawLayer.draw({bbox:c(this,Ys).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:c(this,Tn)},path:{d:c(this,Ys).toSVGPath()}},!1,!0),C(this,Xn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,Tn)},bbox:c(this,Cs).box,path:{d:c(this,Cs).toSVGPath()}},c(this,Tn))),c(this,Zd)&&(c(this,Zd).style.clipPath=c(this,Jd)))},Fr=new WeakSet,Ju=function([t,s,r,i],o){switch(o){case 90:return[1-s-i,t,i,r];case 180:return[1-t-r,1-s-i,r,i];case 270:return[s,1-t-r,i,r]}return[t,s,r,i]},o4=function(t){Ge._keyboardManager.exec(this,t)},S0=function(t){if(!c(this,nm))return;const s=window.getSelection();t?s.setPosition(c(this,nm),c(this,cy)):s.setPosition(c(this,uy),c(this,hy))},N0=function(){return c(this,Tn)?this.rotation:0},l4=function(){if(c(this,Tn))return null;const[t,s]=this.pageDimensions,[r,i]=this.pageTranslation,o=c(this,lo),l=new Float32Array(o.length*8);let d=0;for(const{x:u,y:h,width:f,height:m}of o){const p=u*t+r,b=(1-h)*s+i;l[d]=l[d+4]=p,l[d+1]=l[d+3]=b,l[d+2]=l[d+6]=p+f*t,l[d+5]=l[d+7]=b-m*s,d+=8}return l},c4=function(t){return c(this,Ys).serialize(t,k(this,ke,N0).call(this))},d4=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},u4=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},h4=function(t){const{color:s}=this._initialData;return this.hasEditedComment||t.color.some((r,i)=>r!==s[i])},A(Ge,Fr),J(Ge,"_defaultColor",null),J(Ge,"_defaultOpacity",1),J(Ge,"_defaultThickness",12),J(Ge,"_type","highlight"),J(Ge,"_editorType",Se.HIGHLIGHT),J(Ge,"_freeHighlightId",-1),J(Ge,"_freeHighlight",null),J(Ge,"_freeHighlightClipId","");let Ab=Ge;var eu;class f4{constructor(){A(this,eu,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){c(this,eu)[e]=t}toSVGProperties(){const e=c(this,eu);return C(this,eu,Object.create(null)),{root:e}}reset(){C(this,eu,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){ht("Not implemented")}}eu=new WeakMap;var Qs,am,pn,tu,nu,Wl,Gl,ql,su,Ue,zj,Uj,Hj,Dp,m4,j0,Ip,Zu;const me=class me extends pt{constructor(t){super(t);A(this,Ue);A(this,Qs,null);A(this,am);J(this,"_colorPicker",null);J(this,"_drawId",null);C(this,am,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(k(this,Ue,zj).call(this,t),k(this,Ue,Dp).call(this))}static _mergeSVGProperties(t,s){const r=new Set(Object.keys(t));for(const[i,o]of Object.entries(s))r.has(i)?Object.assign(t[i],o):t[i]=o;return t}static getDefaultDrawingOptions(t){ht("Not implemented")}static get typesMap(){ht("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,s),this._currentParent&&(c(me,pn).updateProperty(r,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)t.push([r,s[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[r,i]of this.constructor.typesMap)t.push([r,s[i]]);return t}_updateProperty(t,s,r){const i=this._drawingOptions,o=i[s],l=d=>{var h;i.updateProperty(s,d);const u=c(this,Qs).updateProperty(s,d);u&&k(this,Ue,Ip).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,r),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,me._mergeSVGProperties(c(this,Qs).getPathResizingSVGProperties(k(this,Ue,j0).call(this)),{bbox:k(this,Ue,Zu).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,me._mergeSVGProperties(c(this,Qs).getPathResizedSVGProperties(k(this,Ue,j0).call(this)),{bbox:k(this,Ue,Zu).call(this)}))}_onTranslating(t,s){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:k(this,Ue,Zu).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,me._mergeSVGProperties(c(this,Qs).getPathTranslatedSVGProperties(k(this,Ue,j0).call(this),this.parentDimensions),{bbox:k(this,Ue,Zu).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,am)&&(C(this,am,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){k(this,Ue,Hj).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,Ue,Dp).call(this),k(this,Ue,Ip).call(this,c(this,Qs).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),k(this,Ue,Hj).call(this)):t&&(this._uiManager.addShouldRescale(this),k(this,Ue,Dp).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,me._mergeSVGProperties({bbox:k(this,Ue,Zu).call(this)},c(this,Qs).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&k(this,Ue,Ip).call(this,c(this,Qs).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,s;this._isCopy&&(t=this.x,s=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");return r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,s),r}static createDrawerInstance(t,s,r,i,o){ht("Not implemented")}static startDrawing(t,s,r,i){var N;const{target:o,offsetX:l,offsetY:d,pointerId:u,pointerType:h}=i;if(c(me,Gl)&&c(me,Gl)!==h)return;const{viewport:{rotation:f}}=t,{width:m,height:p}=o.getBoundingClientRect(),b=C(me,tu,new AbortController),g=t.combinedSignal(b);if(c(me,Wl)||C(me,Wl,u),c(me,Gl)??C(me,Gl,h),window.addEventListener("pointerup",v=>{var y;c(me,Wl)===v.pointerId?this._endDraw(v):(y=c(me,ql))==null||y.delete(v.pointerId)},{signal:g}),window.addEventListener("pointercancel",v=>{var y;c(me,Wl)===v.pointerId?this._currentParent.endDrawingSession():(y=c(me,ql))==null||y.delete(v.pointerId)},{signal:g}),window.addEventListener("pointerdown",v=>{c(me,Gl)===v.pointerType&&((c(me,ql)||C(me,ql,new Set)).add(v.pointerId),c(me,pn).isCancellable()&&(c(me,pn).removeLastElement(),c(me,pn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",fr,{signal:g}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),o.addEventListener("touchmove",v=>{v.timeStamp===c(me,su)&&Dt(v)},{signal:g}),t.toggleDrawing(),(N=s._editorUndoBar)==null||N.hide(),c(me,pn)){t.drawLayer.updateProperties(this._currentDrawId,c(me,pn).startNew(l,d,m,p,f));return}s.updateUIForDefaultProperties(this),C(me,pn,this.createDrawerInstance(l,d,m,p,f)),C(me,nu,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(c(me,nu).toSVGProperties(),c(me,pn).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(C(me,su,-1),!c(me,pn))return;const{offsetX:s,offsetY:r,pointerId:i}=t;if(c(me,Wl)===i){if(((o=c(me,ql))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(me,pn).add(s,r)),C(me,su,t.timeStamp),Dt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,C(me,pn,null),C(me,nu,null),C(me,Gl,null),C(me,su,NaN)),c(me,tu)&&(c(me,tu).abort(),C(me,tu,null),C(me,Wl,NaN),C(me,ql,null))}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,c(me,pn).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=c(me,pn),i=this._currentDrawId,o=r.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(i,r.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:Fe.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(Fe.DRAW_STEP),!c(me,pn).isEmpty()){const{pageDimensions:[r,i],scale:o}=s,l=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(me,pn).getOutlines(r*o,i*o,o,this._INNER_MARGIN),drawingOptions:c(me,nu),mustBeCommitted:!t});return this._cleanup(!0),l}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,r,i,o,l){ht("Not implemented")}static async deserialize(t,s,r){var f,m;const{rawDims:{pageWidth:i,pageHeight:o,pageX:l,pageY:d}}=s.viewport,u=this.deserializeDraw(l,d,i,o,this._INNER_MARGIN,t),h=await super.deserialize(t,s,r);return h.createDrawingOptions(t),k(f=h,Ue,zj).call(f,{drawOutlines:u}),k(m=h,Ue,Dp).call(m),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[s,r]=this.pageTranslation,[i,o]=this.pageDimensions;return c(this,Qs).serialize([s,r,i,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Qs=new WeakMap,am=new WeakMap,pn=new WeakMap,tu=new WeakMap,nu=new WeakMap,Wl=new WeakMap,Gl=new WeakMap,ql=new WeakMap,su=new WeakMap,Ue=new WeakSet,zj=function({drawOutlines:t,drawId:s,drawingOptions:r}){C(this,Qs,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=k(this,Ue,Uj).call(this,t,this.parent),k(this,Ue,Ip).call(this,t.box)},Uj=function(t,s){const{id:r}=s.drawLayer.draw(me._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},Hj=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Dp=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=k(this,Ue,Uj).call(this,c(this,Qs),t)}},m4=function([t,s,r,i]){const{parentDimensions:[o,l],rotation:d}=this;switch(d){case 90:return[s,1-t,r*(l/o),i*(o/l)];case 180:return[1-t,1-s,r,i];case 270:return[1-s,t,r*(l/o),i*(o/l)];default:return[t,s,r,i]}},j0=function(){const{x:t,y:s,width:r,height:i,parentDimensions:[o,l],rotation:d}=this;switch(d){case 90:return[1-s,t,r*(o/l),i*(l/o)];case 180:return[1-t,1-s,r,i];case 270:return[s,1-t,r*(o/l),i*(l/o)];default:return[t,s,r,i]}},Ip=function(t){[this.x,this.y,this.width,this.height]=k(this,Ue,m4).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Zu=function(){const{x:t,y:s,width:r,height:i,rotation:o,parentRotation:l,parentDimensions:[d,u]}=this;switch((o*4+l)/90){case 1:return[1-s-i,t,i,r];case 2:return[1-t-r,1-s-i,r,i];case 3:return[s,1-t-r,i,r];case 4:return[t,s-r*(d/u),i*(u/d),r*(d/u)];case 5:return[1-s,t,r*(d/u),i*(u/d)];case 6:return[1-t-i*(u/d),1-s,i*(u/d),r*(d/u)];case 7:return[s-r*(d/u),1-t-i*(u/d),r*(d/u),i*(u/d)];case 8:return[t-r,s-i,r,i];case 9:return[1-s,t-r,i,r];case 10:return[1-t,1-s,r,i];case 11:return[s-i,1-t,i,r];case 12:return[t-i*(u/d),s,i*(u/d),r*(d/u)];case 13:return[1-s-r*(d/u),t-i*(u/d),r*(d/u),i*(u/d)];case 14:return[1-t,1-s-r*(d/u),i*(u/d),r*(d/u)];case 15:return[s,1-t,r*(d/u),i*(u/d)];default:return[t,s,r,i]}},J(me,"_currentDrawId",-1),J(me,"_currentParent",null),A(me,pn,null),A(me,tu,null),A(me,nu,null),A(me,Wl,NaN),A(me,Gl,null),A(me,ql,null),A(me,su,NaN),J(me,"_INNER_MARGIN",3);let Eb=me;var ta,gn,xn,ru,om,is,Pn,_r,iu,au,ou,lm,C0;class gK{constructor(e,t,s,r,i,o){A(this,lm);A(this,ta,new Float64Array(6));A(this,gn);A(this,xn);A(this,ru);A(this,om);A(this,is);A(this,Pn,"");A(this,_r,0);A(this,iu,new $y);A(this,au);A(this,ou);C(this,au,s),C(this,ou,r),C(this,ru,i),C(this,om,o),[e,t]=k(this,lm,C0).call(this,e,t);const l=C(this,gn,[NaN,NaN,NaN,NaN,e,t]);C(this,is,[e,t]),C(this,xn,[{line:l,points:c(this,is)}]),c(this,ta).set(l,0)}updateProperty(e,t){e==="stroke-width"&&C(this,om,t)}isEmpty(){return!c(this,xn)||c(this,xn).length===0}isCancellable(){return c(this,is).length<=10}add(e,t){[e,t]=k(this,lm,C0).call(this,e,t);const[s,r,i,o]=c(this,ta).subarray(2,6),l=e-i,d=t-o;return Math.hypot(c(this,au)*l,c(this,ou)*d)<=2?null:(c(this,is).push(e,t),isNaN(s)?(c(this,ta).set([i,o,e,t],2),c(this,gn).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(c(this,ta)[0])&&c(this,gn).splice(6,6),c(this,ta).set([s,r,i,o,e,t],0),c(this,gn).push(...ue.createBezierPoints(s,r,i,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(c(this,is).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,r,i){C(this,au,s),C(this,ou,r),C(this,ru,i),[e,t]=k(this,lm,C0).call(this,e,t);const o=C(this,gn,[NaN,NaN,NaN,NaN,e,t]);C(this,is,[e,t]);const l=c(this,xn).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),c(this,xn).push({line:o,points:c(this,is)}),c(this,ta).set(o,0),C(this,_r,0),this.toSVGPath(),null}getLastElement(){return c(this,xn).at(-1)}setLastElement(e){return c(this,xn)?(c(this,xn).push(e),C(this,gn,e.line),C(this,is,e.points),C(this,_r,0),{path:{d:this.toSVGPath()}}):c(this,iu).setLastElement(e)}removeLastElement(){if(!c(this,xn))return c(this,iu).removeLastElement();c(this,xn).pop(),C(this,Pn,"");for(let e=0,t=c(this,xn).length;e<t;e++){const{line:s,points:r}=c(this,xn)[e];C(this,gn,s),C(this,is,r),C(this,_r,0),this.toSVGPath()}return{path:{d:c(this,Pn)}}}toSVGPath(){const e=ue.svgRound(c(this,gn)[4]),t=ue.svgRound(c(this,gn)[5]);if(c(this,is).length===2)return C(this,Pn,`${c(this,Pn)} M ${e} ${t} Z`),c(this,Pn);if(c(this,is).length<=6){const r=c(this,Pn).lastIndexOf("M");C(this,Pn,`${c(this,Pn).slice(0,r)} M ${e} ${t}`),C(this,_r,6)}if(c(this,is).length===4){const r=ue.svgRound(c(this,gn)[10]),i=ue.svgRound(c(this,gn)[11]);return C(this,Pn,`${c(this,Pn)} L ${r} ${i}`),C(this,_r,12),c(this,Pn)}const s=[];c(this,_r)===0&&(s.push(`M ${e} ${t}`),C(this,_r,6));for(let r=c(this,_r),i=c(this,gn).length;r<i;r+=6){const[o,l,d,u,h,f]=c(this,gn).slice(r,r+6).map(ue.svgRound);s.push(`C${o} ${l} ${d} ${u} ${h} ${f}`)}return C(this,Pn,c(this,Pn)+s.join(" ")),C(this,_r,c(this,gn).length),c(this,Pn)}getOutlines(e,t,s,r){const i=c(this,xn).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),c(this,iu).build(c(this,xn),e,t,s,c(this,ru),c(this,om),r),C(this,ta,null),C(this,gn,null),C(this,xn,null),C(this,Pn,null),c(this,iu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ta=new WeakMap,gn=new WeakMap,xn=new WeakMap,ru=new WeakMap,om=new WeakMap,is=new WeakMap,Pn=new WeakMap,_r=new WeakMap,iu=new WeakMap,au=new WeakMap,ou=new WeakMap,lm=new WeakSet,C0=function(e,t){return ue._normalizePoint(e,t,c(this,au),c(this,ou),c(this,ru))};var as,my,py,Js,na,sa,cm,dm,lu,Rn,ka,p4,g4,x4;class $y extends ue{constructor(){super(...arguments);A(this,Rn);A(this,as);A(this,my,0);A(this,py);A(this,Js);A(this,na);A(this,sa);A(this,cm);A(this,dm);A(this,lu)}build(t,s,r,i,o,l,d){C(this,na,s),C(this,sa,r),C(this,cm,i),C(this,dm,o),C(this,lu,l),C(this,py,d??0),C(this,Js,t),k(this,Rn,g4).call(this)}get thickness(){return c(this,lu)}setLastElement(t){return c(this,Js).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,Js).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of c(this,Js)){if(t.push(`M${ue.svgRound(s[4])} ${ue.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12&&isNaN(s[6])){t.push(`L${ue.svgRound(s[10])} ${ue.svgRound(s[11])}`);continue}for(let r=6,i=s.length;r<i;r+=6){const[o,l,d,u,h,f]=s.subarray(r,r+6).map(ue.svgRound);t.push(`C${o} ${l} ${d} ${u} ${h} ${f}`)}}return t.join("")}serialize([t,s,r,i],o){const l=[],d=[],[u,h,f,m]=k(this,Rn,p4).call(this);let p,b,g,N,v,y,S,w,j;switch(c(this,dm)){case 0:j=ue._rescale,p=t,b=s+i,g=r,N=-i,v=t+u*r,y=s+(1-h-m)*i,S=t+(u+f)*r,w=s+(1-h)*i;break;case 90:j=ue._rescaleAndSwap,p=t,b=s,g=r,N=i,v=t+h*r,y=s+u*i,S=t+(h+m)*r,w=s+(u+f)*i;break;case 180:j=ue._rescale,p=t+r,b=s,g=-r,N=i,v=t+(1-u-f)*r,y=s+h*i,S=t+(1-u)*r,w=s+(h+m)*i;break;case 270:j=ue._rescaleAndSwap,p=t+r,b=s+i,g=-r,N=-i,v=t+(1-h-m)*r,y=s+(1-u-f)*i,S=t+(1-h)*r,w=s+(1-u)*i;break}for(const{line:E,points:T}of c(this,Js))l.push(j(E,p,b,g,N,o?new Array(E.length):null)),d.push(j(T,p,b,g,N,o?new Array(T.length):null));return{lines:l,points:d,rect:[v,y,S,w]}}static deserialize(t,s,r,i,o,{paths:{lines:l,points:d},rotation:u,thickness:h}){const f=[];let m,p,b,g,N;switch(u){case 0:N=ue._rescale,m=-t/r,p=s/i+1,b=1/r,g=-1/i;break;case 90:N=ue._rescaleAndSwap,m=-s/i,p=-t/r,b=1/i,g=1/r;break;case 180:N=ue._rescale,m=t/r+1,p=-s/i,b=-1/r,g=1/i;break;case 270:N=ue._rescaleAndSwap,m=s/i+1,p=t/r+1,b=-1/i,g=-1/r;break}if(!l){l=[];for(const y of d){const S=y.length;if(S===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1]]));continue}if(S===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1],NaN,NaN,NaN,NaN,y[2],y[3]]));continue}const w=new Float32Array(3*(S-2));l.push(w);let[j,E,T,P]=y.subarray(0,4);w.set([NaN,NaN,NaN,NaN,j,E],0);for(let _=4;_<S;_+=2){const R=y[_],I=y[_+1];w.set(ue.createBezierPoints(j,E,T,P,R,I),(_-2)*3),[j,E,T,P]=[T,P,R,I]}}}for(let y=0,S=l.length;y<S;y++)f.push({line:N(l[y].map(w=>w??NaN),m,p,b,g),points:N(d[y].map(w=>w??NaN),m,p,b,g)});const v=new this.prototype.constructor;return v.build(f,r,i,1,u,h,o),v}get box(){return c(this,as)}updateProperty(t,s){return t==="stroke-width"?k(this,Rn,x4).call(this,s):null}updateParentDimensions([t,s],r){const[i,o]=k(this,Rn,ka).call(this);C(this,na,t),C(this,sa,s),C(this,cm,r);const[l,d]=k(this,Rn,ka).call(this),u=l-i,h=d-o,f=c(this,as);return f[0]-=u,f[1]-=h,f[2]+=2*u,f[3]+=2*h,f}updateRotation(t){return C(this,my,t),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,as).map(ue.svgRound).join(" ")}get defaultProperties(){const[t,s]=c(this,as);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ue.svgRound(t)} ${ue.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=c(this,as);let r=0,i=0,o=0,l=0,d=0,u=0;switch(c(this,my)){case 90:i=s/t,o=-t/s,d=t;break;case 180:r=-1,l=-1,d=t,u=s;break;case 270:i=-s/t,o=t/s,u=s;break;default:return""}return`matrix(${r} ${i} ${o} ${l} ${ue.svgRound(d)} ${ue.svgRound(u)})`}getPathResizingSVGProperties([t,s,r,i]){const[o,l]=k(this,Rn,ka).call(this),[d,u,h,f]=c(this,as);if(Math.abs(h-o)<=ue.PRECISION||Math.abs(f-l)<=ue.PRECISION){const N=t+r/2-(d+h/2),v=s+i/2-(u+f/2);return{path:{"transform-origin":`${ue.svgRound(t)} ${ue.svgRound(s)}`,transform:`${this.rotationTransform} translate(${N} ${v})`}}}const m=(r-2*o)/(h-2*o),p=(i-2*l)/(f-2*l),b=h/r,g=f/i;return{path:{"transform-origin":`${ue.svgRound(d)} ${ue.svgRound(u)}`,transform:`${this.rotationTransform} scale(${b} ${g}) translate(${ue.svgRound(o)} ${ue.svgRound(l)}) scale(${m} ${p}) translate(${ue.svgRound(-o)} ${ue.svgRound(-l)})`}}}getPathResizedSVGProperties([t,s,r,i]){const[o,l]=k(this,Rn,ka).call(this),d=c(this,as),[u,h,f,m]=d;if(d[0]=t,d[1]=s,d[2]=r,d[3]=i,Math.abs(f-o)<=ue.PRECISION||Math.abs(m-l)<=ue.PRECISION){const v=t+r/2-(u+f/2),y=s+i/2-(h+m/2);for(const{line:S,points:w}of c(this,Js))ue._translate(S,v,y,S),ue._translate(w,v,y,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ue.svgRound(t)} ${ue.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(r-2*o)/(f-2*o),b=(i-2*l)/(m-2*l),g=-p*(u+o)+t+o,N=-b*(h+l)+s+l;if(p!==1||b!==1||g!==0||N!==0)for(const{line:v,points:y}of c(this,Js))ue._rescale(v,g,N,p,b,v),ue._rescale(y,g,N,p,b,y);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ue.svgRound(t)} ${ue.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],r){const[i,o]=r,l=c(this,as),d=t-l[0],u=s-l[1];if(c(this,na)===i&&c(this,sa)===o)for(const{line:h,points:f}of c(this,Js))ue._translate(h,d,u,h),ue._translate(f,d,u,f);else{const h=c(this,na)/i,f=c(this,sa)/o;C(this,na,i),C(this,sa,o);for(const{line:m,points:p}of c(this,Js))ue._rescale(m,d,u,h,f,m),ue._rescale(p,d,u,h,f,p);l[2]*=h,l[3]*=f}return l[0]=t,l[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ue.svgRound(t)} ${ue.svgRound(s)}`}}}get defaultSVGProperties(){const t=c(this,as);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ue.svgRound(t[0])} ${ue.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}as=new WeakMap,my=new WeakMap,py=new WeakMap,Js=new WeakMap,na=new WeakMap,sa=new WeakMap,cm=new WeakMap,dm=new WeakMap,lu=new WeakMap,Rn=new WeakSet,ka=function(t=c(this,lu)){const s=c(this,py)+t/2*c(this,cm);return c(this,dm)%180===0?[s/c(this,na),s/c(this,sa)]:[s/c(this,sa),s/c(this,na)]},p4=function(){const[t,s,r,i]=c(this,as),[o,l]=k(this,Rn,ka).call(this,0);return[t+o,s+l,r-2*o,i-2*l]},g4=function(){const t=C(this,as,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of c(this,Js)){if(i.length<=12){for(let d=4,u=i.length;d<u;d+=6)he.pointBoundingBox(i[d],i[d+1],t);continue}let o=i[4],l=i[5];for(let d=6,u=i.length;d<u;d+=6){const[h,f,m,p,b,g]=i.subarray(d,d+6);he.bezierBoundingBox(o,l,h,f,m,p,b,g,t),o=b,l=g}}const[s,r]=k(this,Rn,ka).call(this);t[0]=Qn(t[0]-s,0,1),t[1]=Qn(t[1]-r,0,1),t[2]=Qn(t[2]+s,0,1),t[3]=Qn(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},x4=function(t){const[s,r]=k(this,Rn,ka).call(this);C(this,lu,t);const[i,o]=k(this,Rn,ka).call(this),[l,d]=[i-s,o-r],u=c(this,as);return u[0]-=l,u[1]-=d,u[2]+=2*l,u[3]+=2*d,u};class qw extends f4{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:pt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new qw(this._viewParameters);return e.updateAll(this),e}}var Jb,y4;const gh=class gh extends Eb{constructor(t){super({...t,name:"inkEditor"});A(this,Jb);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,s){pt.initialize(t,s),this._defaultDrawingOptions=new qw(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ee(this,"typesMap",new Map([[Fe.INK_THICKNESS,"stroke-width"],[Fe.INK_COLOR,"stroke"],[Fe.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,r,i,o){return new gK(t,s,r,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,r,i,o,l){return $y.deserialize(t,s,r,i,o,l)}static async deserialize(t,s,r){let i=null;if(t instanceof AE){const{data:{inkLists:l,rect:d,rotation:u,id:h,color:f,opacity:m,borderStyle:{rawWidth:p},popupRef:b,richText:g,contentsObj:N,creationDate:v,modificationDate:y},parent:{page:{pageNumber:S}}}=t;i=t={annotationType:Se.INK,color:Array.from(f),thickness:p,opacity:m,paths:{points:l},boxes:null,pageIndex:S-1,rect:d.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:b,richText:g,comment:(N==null?void 0:N.str)||null,creationDate:v,modificationDate:y}}const o=await super.deserialize(t,s,r);return o._initialData=i,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new jb(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Fe.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:r}=this;s.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:r}){this._drawingOptions=gh.getDefaultDrawingOptions({stroke:he.makeHexColor(...t),"stroke-width":s,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:r}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":o,"stroke-width":l}}=this,d=Object.assign(super.serialize(t),{color:pt._colorManager.convert(i),opacity:o,thickness:l,paths:{lines:s,points:r}});return this.addComment(d),t?(d.isCopy=!0,d):this.annotationElementId&&!k(this,Jb,y4).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:s,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:s,popup:this.comment}),null}};Jb=new WeakSet,y4=function(t){const{color:s,thickness:r,opacity:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,d)=>l!==s[d])||t.thickness!==r||t.opacity!==i||t.pageIndex!==o},J(gh,"_type","ink"),J(gh,"_editorType",Se.INK),J(gh,"_defaultDrawingOptions",null);let Vj=gh;class Wj extends $y{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Pv=8,up=3;var cu,Ke,Gj,li,v4,b4,qj,A0,w4,S4,N4,Kj,Yj,j4;class ca{static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:r},i,o,l,d){let u=new OffscreenCanvas(1,1),h=u.getContext("2d",{alpha:!1});const f=200,m=h.font=`${s} ${r} ${f}px ${t}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:b,actualBoundingBoxAscent:g,actualBoundingBoxDescent:N,fontBoundingBoxAscent:v,fontBoundingBoxDescent:y,width:S}=h.measureText(e),w=1.5,j=Math.ceil(Math.max(Math.abs(p)+Math.abs(b)||0,S)*w),E=Math.ceil(Math.max(Math.abs(g)+Math.abs(N)||f,Math.abs(v)+Math.abs(y)||f)*w);u=new OffscreenCanvas(j,E),h=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=m,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,j,E),h.fillStyle="black",h.fillText(e,j*(w-1)/2,E*(3-w)/2);const T=k(this,Ke,Kj).call(this,h.getImageData(0,0,j,E).data),P=k(this,Ke,N4).call(this,T),_=k(this,Ke,Yj).call(this,P),R=k(this,Ke,qj).call(this,T,j,E,_);return this.processDrawnLines({lines:{curves:R,width:j,height:E},pageWidth:i,pageHeight:o,rotation:l,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(e,t,s,r,i){const[o,l,d]=k(this,Ke,j4).call(this,e),[u,h]=k(this,Ke,S4).call(this,o,l,d,Math.hypot(l,d)*c(this,cu).sigmaSFactor,c(this,cu).sigmaR,c(this,cu).kernelSize),f=k(this,Ke,Yj).call(this,h),m=k(this,Ke,qj).call(this,u,l,d,f);return this.processDrawnLines({lines:{curves:m,width:l,height:d},pageWidth:t,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:o,areContours:l}){r%180!==0&&([t,s]=[s,t]);const{curves:d,width:u,height:h}=e,f=e.thickness??0,m=[],p=Math.min(t/u,s/h),b=p/t,g=p/s,N=[];for(const{points:y}of d){const S=o?k(this,Ke,w4).call(this,y):y;if(!S)continue;N.push(S);const w=S.length,j=new Float32Array(w),E=new Float32Array(3*(w===2?2:w-2));if(m.push({line:E,points:j}),w===2){j[0]=S[0]*b,j[1]=S[1]*g,E.set([NaN,NaN,NaN,NaN,j[0],j[1]],0);continue}let[T,P,_,R]=S;T*=b,P*=g,_*=b,R*=g,j.set([T,P,_,R],0),E.set([NaN,NaN,NaN,NaN,T,P],0);for(let I=4;I<w;I+=2){const L=j[I]=S[I]*b,U=j[I+1]=S[I+1]*g;E.set(ue.createBezierPoints(T,P,_,R,L,U),(I-2)*3),[T,P,_,R]=[_,R,L,U]}}if(m.length===0)return null;const v=l?new Wj:new $y;return v.build(m,t,s,1,r,l?0:f,i),{outline:v,newCurves:N,areContours:l,thickness:f,width:u,height:h}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:r,height:i}){let o=1/0,l=-1/0,d=0;for(const S of e){d+=S.length;for(let w=2,j=S.length;w<j;w++){const E=S[w]-S[w-2];o=Math.min(o,E),l=Math.max(l,E)}}let u;o>=-128&&l<=127?u=Int8Array:o>=-32768&&l<=32767?u=Int16Array:u=Int32Array;const h=e.length,f=Pv+up*h,m=new Uint32Array(f);let p=0;m[p++]=f*Uint32Array.BYTES_PER_ELEMENT+(d-2*h)*u.BYTES_PER_ELEMENT,m[p++]=0,m[p++]=r,m[p++]=i,m[p++]=t?0:1,m[p++]=Math.max(0,Math.floor(s??0)),m[p++]=h,m[p++]=u.BYTES_PER_ELEMENT;for(const S of e)m[p++]=S.length-2,m[p++]=S[0],m[p++]=S[1];const b=new CompressionStream("deflate-raw"),g=b.writable.getWriter();await g.ready,g.write(m);const N=u.prototype.constructor;for(const S of e){const w=new N(S.length-2);for(let j=2,E=S.length;j<E;j++)w[j-2]=S[j]-S[j-2];g.write(w)}g.close();const v=await new Response(b.readable).arrayBuffer(),y=new Uint8Array(v);return wF(y)}static async decompressSignature(e){try{const t=zq(e),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),i=r.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,l=0;for await(const S of s)o||(o=new Uint8Array(new Uint32Array(S.buffer,0,4)[0])),o.set(S,l),l+=S.length;const d=new Uint32Array(o.buffer,0,o.length>>2),u=d[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const h=d[2],f=d[3],m=d[4]===0,p=d[5],b=d[6],g=d[7],N=[],v=(Pv+up*b)*Uint32Array.BYTES_PER_ELEMENT;let y;switch(g){case Int8Array.BYTES_PER_ELEMENT:y=new Int8Array(o.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:y=new Int16Array(o.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:y=new Int32Array(o.buffer,v);break}l=0;for(let S=0;S<b;S++){const w=d[up*S+Pv],j=new Float32Array(w+2);N.push(j);for(let E=0;E<up-1;E++)j[E]=d[up*S+Pv+E+1];for(let E=0;E<w;E++)j[E+2]=j[E]+y[l++]}return{areContours:m,thickness:p,outlines:N,width:h,height:f}}catch(t){return Ne(`decompressSignature: ${t}`),null}}}cu=new WeakMap,Ke=new WeakSet,Gj=function(e,t,s,r){return s-=e,r-=t,s===0?r>0?0:4:s===1?r+6:2-r},li=new WeakMap,v4=function(e,t,s,r,i,o,l){const d=k(this,Ke,Gj).call(this,s,r,i,o);for(let u=0;u<8;u++){const h=(-u+d-l+16)%8,f=c(this,li)[2*h],m=c(this,li)[2*h+1];if(e[(s+f)*t+(r+m)]!==0)return h}return-1},b4=function(e,t,s,r,i,o,l){const d=k(this,Ke,Gj).call(this,s,r,i,o);for(let u=0;u<8;u++){const h=(u+d+l+16)%8,f=c(this,li)[2*h],m=c(this,li)[2*h+1];if(e[(s+f)*t+(r+m)]!==0)return h}return-1},qj=function(e,t,s,r){const i=e.length,o=new Int32Array(i);for(let h=0;h<i;h++)o[h]=e[h]<=r?1:0;for(let h=1;h<s-1;h++)o[h*t]=o[h*t+t-1]=0;for(let h=0;h<t;h++)o[h]=o[t*s-1-h]=0;let l=1,d;const u=[];for(let h=1;h<s-1;h++){d=1;for(let f=1;f<t-1;f++){const m=h*t+f,p=o[m];if(p===0)continue;let b=h,g=f;if(p===1&&o[m-1]===0)l+=1,g-=1;else if(p>=1&&o[m+1]===0)l+=1,g+=1,p>1&&(d=p);else{p!==1&&(d=Math.abs(p));continue}const N=[f,h],v=g===f+1,y={isHole:v,points:N,id:l,parent:0};u.push(y);let S;for(const I of u)if(I.id===d){S=I;break}S?S.isHole?y.parent=v?S.parent:d:y.parent=v?d:S.parent:y.parent=v?d:0;const w=k(this,Ke,v4).call(this,o,t,h,f,b,g,0);if(w===-1){o[m]=-l,o[m]!==1&&(d=Math.abs(o[m]));continue}let j=c(this,li)[2*w],E=c(this,li)[2*w+1];const T=h+j,P=f+E;b=T,g=P;let _=h,R=f;for(;;){const I=k(this,Ke,b4).call(this,o,t,_,R,b,g,1);j=c(this,li)[2*I],E=c(this,li)[2*I+1];const L=_+j,U=R+E;N.push(U,L);const B=_*t+R;if(o[B+1]===0?o[B]=-l:o[B]===1&&(o[B]=l),L===h&&U===f&&_===T&&R===P){o[m]!==1&&(d=Math.abs(o[m]));break}else b=_,g=R,_=L,R=U}}}return u},A0=function(e,t,s,r){if(s-t<=4){for(let T=t;T<s-2;T+=2)r.push(e[T],e[T+1]);return}const i=e[t],o=e[t+1],l=e[s-4]-i,d=e[s-3]-o,u=Math.hypot(l,d),h=l/u,f=d/u,m=h*o-f*i,p=d/l,b=1/u,g=Math.atan(p),N=Math.cos(g),v=Math.sin(g),y=b*(Math.abs(N)+Math.abs(v)),S=b*(1-y+y**2),w=Math.max(Math.atan(Math.abs(v+N)*S),Math.atan(Math.abs(v-N)*S));let j=0,E=t;for(let T=t+2;T<s-2;T+=2){const P=Math.abs(m-h*e[T+1]+f*e[T]);P>j&&(E=T,j=P)}j>(u*w)**2?(k(this,Ke,A0).call(this,e,t,E+2,r),k(this,Ke,A0).call(this,e,E,s,r)):r.push(i,o)},w4=function(e){const t=[],s=e.length;return k(this,Ke,A0).call(this,e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t},S4=function(e,t,s,r,i,o){const l=new Float32Array(o**2),d=-2*r**2,u=o>>1;for(let g=0;g<o;g++){const N=(g-u)**2;for(let v=0;v<o;v++)l[g*o+v]=Math.exp((N+(v-u)**2)/d)}const h=new Float32Array(256),f=-2*i**2;for(let g=0;g<256;g++)h[g]=Math.exp(g**2/f);const m=e.length,p=new Uint8Array(m),b=new Uint32Array(256);for(let g=0;g<s;g++)for(let N=0;N<t;N++){const v=g*t+N,y=e[v];let S=0,w=0;for(let E=0;E<o;E++){const T=g+E-u;if(!(T<0||T>=s))for(let P=0;P<o;P++){const _=N+P-u;if(_<0||_>=t)continue;const R=e[T*t+_],I=l[E*o+P]*h[Math.abs(R-y)];S+=R*I,w+=I}}const j=p[v]=Math.round(S/w);b[j]++}return[p,b]},N4=function(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t},Kj=function(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let r=-1/0,i=1/0;for(let l=0,d=s.length;l<d;l++){const u=s[l]=e[l<<2];r=Math.max(r,u),i=Math.min(i,u)}const o=255/(r-i);for(let l=0,d=s.length;l<d;l++)s[l]=(s[l]-i)*o;return s},Yj=function(e){let t,s=-1/0,r=-1/0;const i=e.findIndex(d=>d!==0);let o=i,l=i;for(t=i;t<256;t++){const d=e[t];d>s&&(t-o>r&&(r=t-o,l=t-1),s=d,o=t)}for(t=l-1;t>=0&&!(e[t]>e[t+1]);t--);return t},j4=function(e){const t=e,{width:s,height:r}=e,{maxDim:i}=c(this,cu);let o=s,l=r;if(s>i||r>i){let m=s,p=r,b=Math.log2(Math.max(s,r)/i);const g=Math.floor(b);b=b===g?g-1:g;for(let v=0;v<b;v++){o=Math.ceil(m/2),l=Math.ceil(p/2);const y=new OffscreenCanvas(o,l);y.getContext("2d").drawImage(e,0,0,m,p,0,0,o,l),m=o,p=l,e!==t&&e.close(),e=y.transferToImageBitmap()}const N=Math.min(i/o,i/l);o=Math.round(o*N),l=Math.round(l*N)}const u=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,l),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,o,l);const h=u.getImageData(0,0,o,l).data;return[k(this,Ke,Kj).call(this,h),o,l]},A(ca,Ke),A(ca,cu,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),A(ca,li,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class kE extends f4{constructor(){super(),super.updateProperties({fill:pt._defaultLineColor,"stroke-width":0})}clone(){const e=new kE;return e.updateAll(this),e}}class TE extends qw{constructor(e){super(e),super.updateProperties({stroke:pt._defaultLineColor,"stroke-width":1})}clone(){const e=new TE(this._viewParameters);return e.updateAll(this),e}}var Kl,ra,Yl,du;const Is=class Is extends Eb{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});A(this,Kl,!1);A(this,ra,null);A(this,Yl,null);A(this,du,null);this._willKeepAspectRatio=!0,C(this,Yl,t.signatureData||null),C(this,ra,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,s){pt.initialize(t,s),this._defaultDrawingOptions=new kE,this._defaultDrawnSignatureOptions=new TE(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ee(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!c(this,ra)}}static computeTelemetryFinalData(t){const s=t.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,s;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,s=this.y),super.render(),this._drawId===null)if(c(this,Yl)){const{lines:i,mustSmooth:o,areContours:l,description:d,uuid:u,heightInPage:h}=c(this,Yl),{rawDims:{pageWidth:f,pageHeight:m},rotation:p}=this.parent.viewport,b=ca.processDrawnLines({lines:i,pageWidth:f,pageHeight:m,rotation:p,innerMargin:Is._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(b,h,d,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:c(this,ra)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,s)),this.div}setUuid(t){C(this,du,t),this.addEditToolbar()}getUuid(){return c(this,du)}get description(){return c(this,ra)}set description(t){C(this,ra,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:s,thickness:r,width:i,height:o}=c(this,Yl),l=Math.max(i,o),d=ca.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:r,width:i,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:d.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,s,r,i){const{x:o,y:l}=this,{outline:d}=C(this,Yl,t);C(this,Kl,d instanceof Wj),this.description=r;let u;c(this,Kl)?u=Is.getDefaultDrawingOptions():(u=Is._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":d.thickness})),this._addOutlines({drawOutlines:d,drawingOptions:u});const[,h]=this.pageDimensions;let f=s/h;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return ca.process(t,s,r,i,Is._INNER_MARGIN)}getFromText(t,s){const{rawDims:{pageWidth:r,pageHeight:i},rotation:o}=this.parent.viewport;return ca.extractContoursFromText(t,s,r,i,o,Is._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return ca.processDrawnLines({lines:t,pageWidth:s,pageHeight:r,rotation:i,innerMargin:Is._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:s}){t?this._drawingOptions=Is.getDefaultDrawingOptions():(this._drawingOptions=Is._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:s,points:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:c(this,Kl),color:[0,0,0],thickness:c(this,Kl)?0:i});return this.addComment(o),t?(o.paths={lines:s,points:r},o.uuid=c(this,du),o.isCopy=!0):o.lines=s,c(this,ra)&&(o.accessibilityData={type:"Figure",alt:c(this,ra)}),o}static deserializeDraw(t,s,r,i,o,l){return l.areContours?Wj.deserialize(t,s,r,i,o,l):$y.deserialize(t,s,r,i,o,l)}static async deserialize(t,s,r){var o;const i=await super.deserialize(t,s,r);return C(i,Kl,t.areContours),i.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",C(i,du,t.uuid),i}};Kl=new WeakMap,ra=new WeakMap,Yl=new WeakMap,du=new WeakMap,J(Is,"_type","signature"),J(Is,"_editorType",Se.SIGNATURE),J(Is,"_defaultDrawingOptions",null);let Xj=Is;var Tt,yn,Xl,co,Ql,um,uo,uu,ia,Zs,hm,He,Lp,Fp,E0,k0,T0,Jj,P0,C4;class Qj extends pt{constructor(t){super({...t,name:"stampEditor"});A(this,He);A(this,Tt,null);A(this,yn,null);A(this,Xl,null);A(this,co,null);A(this,Ql,null);A(this,um,"");A(this,uo,null);A(this,uu,!1);A(this,ia,null);A(this,Zs,!1);A(this,hm,!1);C(this,co,t.bitmapUrl),C(this,Ql,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,s){pt.initialize(t,s)}static isHandlingMimeForPasting(t){return vb.includes(t)}static paste(t,s){s.pasteEditor({mode:Se.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,d=await r.guess({name:"altText",request:{data:i,width:o,height:l,channels:i.length/(o*l)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const u=d.output;return await this.setGuessedAltText(u),s&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;c(this,yn)&&(C(this,Tt,null),this._uiManager.imageManager.deleteId(c(this,yn)),(t=c(this,uo))==null||t.remove(),C(this,uo,null),c(this,ia)&&(clearTimeout(c(this,ia)),C(this,ia,null))),super.remove()}rebuild(){if(!this.parent){c(this,yn)&&k(this,He,E0).call(this);return}super.rebuild(),this.div!==null&&(c(this,yn)&&c(this,uo)===null&&k(this,He,E0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(c(this,Xl)||c(this,Tt)||c(this,co)||c(this,Ql)||c(this,yn)||c(this,uu))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;return this._isCopy&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.createAltText(),c(this,uu)||(c(this,Tt)?k(this,He,k0).call(this):k(this,He,E0).call(this)),this._isCopy&&this._moveAfterPaste(t,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,s){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,s);s.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(C(this,yn,r),i&&C(this,Tt,i),C(this,uu,!1),k(this,He,k0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,ia)!==null&&clearTimeout(c(this,ia)),C(this,ia,setTimeout(()=>{C(this,ia,null),k(this,He,Jj).call(this)},200))}copyCanvas(t,s,r=!1){t||(t=224);const{width:i,height:o}=c(this,Tt),l=new Si;let d=c(this,Tt),u=i,h=o,f=null;if(s){if(i>s||o>s){const T=Math.min(s/i,s/o);u=Math.floor(i*T),h=Math.floor(o*T)}f=document.createElement("canvas");const p=f.width=Math.ceil(u*l.sx),b=f.height=Math.ceil(h*l.sy);c(this,Zs)||(d=k(this,He,T0).call(this,p,b));const g=f.getContext("2d");g.filter=this._uiManager.hcmFilter;let N="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":Vq.isDarkMode&&(N="#8f8f9d",v="#42414d");const y=15,S=y*l.sx,w=y*l.sy,j=new OffscreenCanvas(S*2,w*2),E=j.getContext("2d");E.fillStyle=N,E.fillRect(0,0,S*2,w*2),E.fillStyle=v,E.fillRect(0,0,S,w),E.fillRect(S,w,S,w),g.fillStyle=g.createPattern(j,"repeat"),g.fillRect(0,0,p,b),g.drawImage(d,0,0,d.width,d.height,0,0,p,b)}let m=null;if(r){let p,b;if(l.symmetric&&d.width<t&&d.height<t)p=d.width,b=d.height;else if(d=c(this,Tt),i>t||o>t){const v=Math.min(t/i,t/o);p=Math.floor(i*v),b=Math.floor(o*v),c(this,Zs)||(d=k(this,He,T0).call(this,p,b))}const N=new OffscreenCanvas(p,b).getContext("2d",{willReadFrequently:!0});N.drawImage(d,0,0,d.width,d.height,0,0,p,b),m={width:p,height:b,data:N.getImageData(0,0,p,b).data}}return{canvas:f,width:u,height:h,imageData:m}}static async deserialize(t,s,r){var N;let i=null,o=!1;if(t instanceof zO){const{data:{rect:v,rotation:y,id:S,structParent:w,popupRef:j,richText:E,contentsObj:T,creationDate:P,modificationDate:_},container:R,parent:{page:{pageNumber:I}},canvas:L}=t;let U,B;L?(delete t.canvas,{id:U,bitmap:B}=r.imageManager.getFromCanvas(R.id,L),L.remove()):(o=!0,t._hasNoCanvas=!0);const Q=((N=await s._structTree.getAriaAttributes(`${gE}${S}`))==null?void 0:N.get("aria-label"))||"";i=t={annotationType:Se.STAMP,bitmapId:U,bitmap:B,pageIndex:I-1,rect:v.slice(0),rotation:y,annotationElementId:S,id:S,deleted:!1,accessibilityData:{decorative:!1,altText:Q},isSvg:!1,structParent:w,popupRef:j,richText:E,comment:(T==null?void 0:T.str)||null,creationDate:P,modificationDate:_}}const l=await super.deserialize(t,s,r),{rect:d,bitmap:u,bitmapUrl:h,bitmapId:f,isSvg:m,accessibilityData:p}=t;o?(r.addMissingCanvas(t.id,l),C(l,uu,!0)):f&&r.imageManager.isValidId(f)?(C(l,yn,f),u&&C(l,Tt,u)):C(l,co,h),C(l,Zs,m);const[b,g]=l.pageDimensions;return l.width=(d[2]-d[0])/b,l.height=(d[3]-d[1])/g,p&&(l.altTextData=p),l._initialData=i,t.comment&&l.setCommentData(t),C(l,hm,!!i),l}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(t),{bitmapId:c(this,yn),isSvg:c(this,Zs)});if(this.addComment(r),t)return r.bitmapUrl=k(this,He,P0).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const d=k(this,He,C4).call(this,r);return d.isSame?null:(d.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(s===null)return r;s.stamps||(s.stamps=new Map);const l=c(this,Zs)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!s.stamps.has(c(this,yn)))s.stamps.set(c(this,yn),{area:l,serialized:r}),r.bitmap=k(this,He,P0).call(this,!1);else if(c(this,Zs)){const d=s.stamps.get(c(this,yn));l>d.area&&(d.area=l,d.serialized.bitmap.close(),d.serialized.bitmap=k(this,He,P0).call(this,!1))}return r}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Tt=new WeakMap,yn=new WeakMap,Xl=new WeakMap,co=new WeakMap,Ql=new WeakMap,um=new WeakMap,uo=new WeakMap,uu=new WeakMap,ia=new WeakMap,Zs=new WeakMap,hm=new WeakMap,He=new WeakSet,Lp=function(t,s=!1){if(!t){this.remove();return}C(this,Tt,t.bitmap),s||(C(this,yn,t.id),C(this,Zs,t.isSvg)),t.file&&C(this,um,t.file.name),k(this,He,k0).call(this)},Fp=function(){if(C(this,Xl,null),this._uiManager.enableWaiting(!1),!!c(this,uo)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Tt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Tt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},E0=function(){if(c(this,yn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,yn)).then(r=>k(this,He,Lp).call(this,r,!0)).finally(()=>k(this,He,Fp).call(this));return}if(c(this,co)){const r=c(this,co);C(this,co,null),this._uiManager.enableWaiting(!0),C(this,Xl,this._uiManager.imageManager.getFromUrl(r).then(i=>k(this,He,Lp).call(this,i)).finally(()=>k(this,He,Fp).call(this)));return}if(c(this,Ql)){const r=c(this,Ql);C(this,Ql,null),this._uiManager.enableWaiting(!0),C(this,Xl,this._uiManager.imageManager.getFromFile(r).then(i=>k(this,He,Lp).call(this,i)).finally(()=>k(this,He,Fp).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=vb.join(",");const s=this._uiManager._signal;C(this,Xl,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),k(this,He,Lp).call(this,i)}r()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:s})}).finally(()=>k(this,He,Fp).call(this))),t.click()},k0=function(){var u;const{div:t}=this;let{width:s,height:r}=c(this,Tt);const[i,o]=this.pageDimensions,l=.75;if(this.width)s=this.width*i,r=this.height*o;else if(s>l*i||r>l*o){const h=Math.min(l*i/s,l*o/r);s*=h,r*=h}this._uiManager.enableWaiting(!1);const d=C(this,uo,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),this.width=s/i,this.height=r/o,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),k(this,He,Jj).call(this),c(this,hm)||(this.parent.addUndoableEditor(this),C(this,hm,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,um)&&this.div.setAttribute("aria-description",c(this,um)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},T0=function(t,s){const{width:r,height:i}=c(this,Tt);let o=r,l=i,d=c(this,Tt);for(;o>2*t||l>2*s;){const u=o,h=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*s&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const f=new OffscreenCanvas(o,l);f.getContext("2d").drawImage(d,0,0,u,h,0,0,o,l),d=f.transferToImageBitmap()}return d},Jj=function(){const[t,s]=this.parentDimensions,{width:r,height:i}=this,o=new Si,l=Math.ceil(r*t*o.sx),d=Math.ceil(i*s*o.sy),u=c(this,uo);if(!u||u.width===l&&u.height===d)return;u.width=l,u.height=d;const h=c(this,Zs)?c(this,Tt):k(this,He,T0).call(this,l,d),f=u.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,l,d)},P0=function(t){if(t){if(c(this,Zs)){const i=this._uiManager.imageManager.getSvgUrl(c(this,yn));if(i)return i}const s=document.createElement("canvas");return{width:s.width,height:s.height}=c(this,Tt),s.getContext("2d").drawImage(c(this,Tt),0,0),s.toDataURL()}if(c(this,Zs)){const[s,r]=this.pageDimensions,i=Math.round(this.width*s*Io.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*Io.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(i,o);return l.getContext("2d").drawImage(c(this,Tt),0,0,c(this,Tt).width,c(this,Tt).height,0,0,i,o),l.transferToImageBitmap()}return structuredClone(c(this,Tt))},C4=function(t){var l;const{pageIndex:s,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===s,o=(((l=t.accessibilityData)==null?void 0:l.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}},J(Qj,"_type","stamp"),J(Qj,"_editorType",Se.STAMP);var hu,fm,Jl,Zl,ho,As,ec,mm,pm,ci,fo,vn,mo,tc,gm,ye,nc,dt,Zj,A4,_i,eC,tC,_0;const Xr=class Xr{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:r,accessibilityManager:i,annotationLayer:o,drawLayer:l,textLayer:d,viewport:u,l10n:h}){A(this,dt);A(this,hu);A(this,fm,!1);A(this,Jl,null);A(this,Zl,null);A(this,ho,null);A(this,As,new Map);A(this,ec,!1);A(this,mm,!1);A(this,pm,!1);A(this,ci,null);A(this,fo,null);A(this,vn,null);A(this,mo,null);A(this,tc,null);A(this,gm,-1);A(this,ye);const f=[...c(Xr,nc).values()];if(!Xr._initialized){Xr._initialized=!0;for(const m of f)m.initialize(h,e)}e.registerEditorTypes(f),C(this,ye,e),this.pageIndex=t,this.div=s,C(this,hu,i),C(this,Jl,o),this.viewport=u,C(this,vn,d),this.drawLayer=l,this._structTree=r,c(this,ye).addLayer(this)}get isEmpty(){return c(this,As).size===0}get isInvisible(){return this.isEmpty&&c(this,ye).getMode()===Se.NONE}updateToolbar(e){c(this,ye).updateToolbar(e)}updateMode(e=c(this,ye).getMode()){switch(k(this,dt,_0).call(this),e){case Se.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Se.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Se.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Se.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const s of c(Xr,nc).values())t.toggle(`${s._type}Editing`,e===s._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=c(this,vn))==null?void 0:t.div)}setEditingState(e){c(this,ye).setEditingState(e)}addCommands(e){c(this,ye).addCommands(e)}cleanUndoStack(e){c(this,ye).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=c(this,Jl))==null||t.div.classList.toggle("disabled",!e)}async enable(){var s;C(this,pm,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(s=c(this,tc))==null||s.abort(),C(this,tc,null);const e=new Set;for(const r of c(this,dt,Zj))r.enableEditing(),r.show(!0),r.annotationElementId&&(c(this,ye).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));const t=c(this,Jl);if(t)for(const r of t.getEditableAnnotations()){if(r.hide(),c(this,ye).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}C(this,pm,!1),c(this,ye)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var s;if(C(this,mm,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),c(this,vn)&&!c(this,tc)){C(this,tc,new AbortController);const r=c(this,ye).combinedSignal(c(this,tc));c(this,vn).div.addEventListener("pointerdown",i=>{const{clientX:l,clientY:d,timeStamp:u}=i,h=c(this,gm);if(u-h>500){C(this,gm,u);return}C(this,gm,-1);const{classList:f}=this.div;f.toggle("getElements",!0);const m=document.elementsFromPoint(l,d);if(f.toggle("getElements",!1),!this.div.contains(m[0]))return;let p;const b=new RegExp(`^${Ng}[0-9]+$`);for(const N of m)if(b.test(N.id)){p=N.id;break}if(!p)return;const g=c(this,As).get(p);(g==null?void 0:g.annotationElementId)===null&&(i.stopPropagation(),i.preventDefault(),g.dblclick(i))},{signal:r,capture:!0})}const e=c(this,Jl);if(e){const r=new Map,i=new Map;for(const l of c(this,dt,Zj)){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(e);continue}if(l.serialize()!==null){r.set(l.annotationElementId,l);continue}else i.set(l.annotationElementId,l);(s=this.getEditableAnnotation(l.annotationElementId))==null||s.show(),l.remove()}const o=e.getEditableAnnotations();for(const l of o){const{id:d}=l.data;if(c(this,ye).isDeletedAnnotationElement(d)){l.updateEdited({deleted:!0});continue}let u=i.get(d);if(u){u.resetAnnotationElement(l),u.show(!1),l.show();continue}u=r.get(d),u&&(c(this,ye).addChangedExistingAnnotation(u),u.renderAnnotationElement(l)&&u.show(!1)),l.show()}}k(this,dt,_0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const r of c(Xr,nc).values())t.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),C(this,mm,!1)}getEditableAnnotation(e){var t;return((t=c(this,Jl))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){c(this,ye).getActive()!==e&&c(this,ye).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=c(this,vn))!=null&&e.div&&!c(this,mo)){C(this,mo,new AbortController);const t=c(this,ye).combinedSignal(c(this,mo));c(this,vn).div.addEventListener("pointerdown",k(this,dt,A4).bind(this),{signal:t}),c(this,vn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=c(this,vn))!=null&&e.div&&c(this,mo)&&(c(this,mo).abort(),C(this,mo,null),c(this,vn).div.classList.remove("highlighting"))}enableClick(){if(c(this,Zl))return;C(this,Zl,new AbortController);const e=c(this,ye).combinedSignal(c(this,Zl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=c(this,Zl))==null||e.abort(),C(this,Zl,null)}attach(e){c(this,As).set(e.id,e);const{annotationElementId:t}=e;t&&c(this,ye).isDeletedAnnotationElement(t)&&c(this,ye).removeDeletedAnnotationElement(e)}detach(e){var t;c(this,As).delete(e.id),(t=c(this,hu))==null||t.removePointerInTextLayer(e.contentDiv),!c(this,mm)&&e.annotationElementId&&c(this,ye).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c(this,ye).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(c(this,ye).addDeletedAnnotationElement(e.annotationElementId),pt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),c(this,ye).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!c(this,pm)),c(this,ye).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!c(this,ho)&&(e._focusEventsAllowed=!1,C(this,ho,setTimeout(()=>{C(this,ho,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:c(this,ye)._signal}),t.focus())},0))),e._structTreeParentId=(s=c(this,hu))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getEditorByUID(e){for(const t of c(this,As).values())if(t.uid===e)return t;return null}getNextId(){return c(this,ye).getId()}combinedSignal(e){return c(this,ye).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=c(this,dt,_i))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await c(this,ye).updateMode(e.mode);const{offsetX:s,offsetY:r}=k(this,dt,tC).call(this),i=this.getNextId(),o=k(this,dt,eC).call(this,{parent:this,id:i,x:s,y:r,uiManager:c(this,ye),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=c(Xr,nc).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,c(this,ye)))||null}createAndAddNewEditor(e,t,s={}){const r=this.getNextId(),i=k(this,dt,eC).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:c(this,ye),isCentered:t,...s});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(k(this,dt,tC).call(this),!0,e)}setSelected(e){c(this,ye).setSelected(e)}toggleSelected(e){c(this,ye).toggleSelected(e)}unselect(e){c(this,ye).unselect(e)}pointerup(e){var r;const{isMac:t}=Sn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!c(this,ec)||(C(this,ec,!1),(r=c(this,dt,_i))!=null&&r.isDrawer&&c(this,dt,_i).supportMultipleDrawings))return;if(!c(this,fm)){C(this,fm,!0);return}const s=c(this,ye).getMode();if(s===Se.STAMP||s===Se.SIGNATURE){c(this,ye).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(c(this,ye).getMode()===Se.HIGHLIGHT&&this.enableTextSelection(),c(this,ec)){C(this,ec,!1);return}const{isMac:t}=Sn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(C(this,ec,!0),(r=c(this,dt,_i))!=null&&r.isDrawer){this.startDrawingSession(e);return}const s=c(this,ye).getActive();C(this,fm,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),c(this,ci)){c(this,dt,_i).startDrawing(this,c(this,ye),!1,e);return}c(this,ye).setCurrentDrawingSession(this),C(this,ci,new AbortController);const t=c(this,ye).combinedSignal(c(this,ci));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(C(this,fo,null),this.commitOrRemove())},{signal:t}),c(this,dt,_i).startDrawing(this,c(this,ye),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&C(this,fo,t);return}c(this,fo)&&setTimeout(()=>{var t;(t=c(this,fo))==null||t.focus(),C(this,fo,null)},0)}endDrawingSession(e=!1){return c(this,ci)?(c(this,ye).setCurrentDrawingSession(null),c(this,ci).abort(),C(this,ci,null),C(this,fo,null),c(this,dt,_i).endDrawing(e)):null}findNewParent(e,t,s){const r=c(this,ye).findParent(t,s);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return c(this,ci)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,ci)&&c(this,dt,_i).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=c(this,ye).getActive())==null?void 0:e.parent)===this&&(c(this,ye).commitOrRemove(),c(this,ye).setActiveEditor(null)),c(this,ho)&&(clearTimeout(c(this,ho)),C(this,ho,null));for(const s of c(this,As).values())(t=c(this,hu))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,c(this,As).clear(),c(this,ye).removeLayer(this)}render({viewport:e}){this.viewport=e,Cc(this.div,e);for(const t of c(this,ye).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){c(this,ye).commitOrRemove(),k(this,dt,_0).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Cc(this.div,{rotation:s}),t!==s)for(const r of c(this,As).values())r.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return c(this,ye).viewParameters.realScale}};hu=new WeakMap,fm=new WeakMap,Jl=new WeakMap,Zl=new WeakMap,ho=new WeakMap,As=new WeakMap,ec=new WeakMap,mm=new WeakMap,pm=new WeakMap,ci=new WeakMap,fo=new WeakMap,vn=new WeakMap,mo=new WeakMap,tc=new WeakMap,gm=new WeakMap,ye=new WeakMap,nc=new WeakMap,dt=new WeakSet,Zj=function(){return c(this,As).size!==0?c(this,As).values():c(this,ye).getEditors(this.pageIndex)},A4=function(e){c(this,ye).unselectAll();const{target:t}=e;if(t===c(this,vn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&c(this,vn).div.contains(t)){const{isMac:s}=Sn.platform;if(e.button!==0||e.ctrlKey&&s)return;c(this,ye).showAllEditors("highlight",!0,!0),c(this,vn).div.classList.add("free"),this.toggleDrawing(),Ab.startHighlighting(this,c(this,ye).direction==="ltr",{target:c(this,vn).div,x:e.x,y:e.y}),c(this,vn).div.addEventListener("pointerup",()=>{c(this,vn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,ye)._signal}),e.preventDefault()}},_i=function(){return c(Xr,nc).get(c(this,ye).getMode())},eC=function(e){const t=c(this,dt,_i);return t?new t.prototype.constructor(e):null},tC=function(){const{x:e,y:t,width:s,height:r}=this.boundingClientRect,i=Math.max(0,e),o=Math.max(0,t),l=Math.min(window.innerWidth,e+s),d=Math.min(window.innerHeight,t+r),u=(i+l)/2-e,h=(o+d)/2-t,[f,m]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:f,offsetY:m}},_0=function(){for(const e of c(this,As).values())e.isEmpty()&&e.remove()},J(Xr,"_initialized",!1),A(Xr,nc,new Map([Dj,Vj,Qj,Ab,Xj].map(e=>[e._editorType,e])));let kb=Xr;var di,os,fu,gy,Zb,E4,va,nC,k4,sC;const an=class an{constructor({pageIndex:e}){A(this,va);A(this,di,null);A(this,os,new Map);A(this,fu,new Map);this.pageIndex=e}setParent(e){if(!c(this,di)){C(this,di,e);return}if(c(this,di)!==e){if(c(this,os).size>0)for(const t of c(this,os).values())t.remove(),e.append(t);C(this,di,e)}}static get _svgFactory(){return Ee(this,"_svgFactory",new Pg)}draw(e,t=!1,s=!1){const r=Ot(an,gy)._++,i=k(this,va,nC).call(this),o=an._svgFactory.createElement("defs");i.append(o);const l=an._svgFactory.createElement("path");o.append(l);const d=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",d),l.setAttribute("vector-effect","non-scaling-stroke"),t&&c(this,fu).set(r,l);const u=s?k(this,va,k4).call(this,o,d):null,h=an._svgFactory.createElement("use");return i.append(h),h.setAttribute("href",`#${d}`),this.updateProperties(i,e),c(this,os).set(r,i),{id:r,clipPathId:`url(#${u})`}}drawOutline(e,t){const s=Ot(an,gy)._++,r=k(this,va,nC).call(this),i=an._svgFactory.createElement("defs");r.append(i);const o=an._svgFactory.createElement("path");i.append(o);const l=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let d;if(t){const f=an._svgFactory.createElement("mask");i.append(f),d=`mask_p${this.pageIndex}_${s}`,f.setAttribute("id",d),f.setAttribute("maskUnits","objectBoundingBox");const m=an._svgFactory.createElement("rect");f.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const p=an._svgFactory.createElement("use");f.append(p),p.setAttribute("href",`#${l}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=an._svgFactory.createElement("use");r.append(u),u.setAttribute("href",`#${l}`),d&&u.setAttribute("mask",`url(#${d})`);const h=u.cloneNode();return r.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(r,e),c(this,os).set(s,r),s}finalizeDraw(e,t){c(this,fu).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var d;if(!t)return;const{root:s,bbox:r,rootClass:i,path:o}=t,l=typeof e=="number"?c(this,os).get(e):e;if(l){if(s&&k(this,va,sC).call(this,l,s),r&&k(d=an,Zb,E4).call(d,l,r),i){const{classList:u}=l;for(const[h,f]of Object.entries(i))u.toggle(h,f)}if(o){const h=l.firstChild.firstChild;k(this,va,sC).call(this,h,o)}}}updateParent(e,t){if(t===this)return;const s=c(this,os).get(e);s&&(c(t,di).append(s),c(this,os).delete(e),c(t,os).set(e,s))}remove(e){c(this,fu).delete(e),c(this,di)!==null&&(c(this,os).get(e).remove(),c(this,os).delete(e))}destroy(){C(this,di,null);for(const e of c(this,os).values())e.remove();c(this,os).clear(),c(this,fu).clear()}};di=new WeakMap,os=new WeakMap,fu=new WeakMap,gy=new WeakMap,Zb=new WeakSet,E4=function(e,[t,s,r,i]){const{style:o}=e;o.top=`${100*s}%`,o.left=`${100*t}%`,o.width=`${100*r}%`,o.height=`${100*i}%`},va=new WeakSet,nC=function(){const e=an._svgFactory.create(1,1,!0);return c(this,di).append(e),e.setAttribute("aria-hidden",!0),e},k4=function(e,t){const s=an._svgFactory.createElement("clipPath");e.append(s);const r=`clip_${t}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const i=an._svgFactory.createElement("use");return s.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),r},sC=function(e,t){for(const[s,r]of Object.entries(t))r===null?e.removeAttribute(s):e.setAttribute(s,r)},A(an,Zb),A(an,gy,0);let Tb=an;globalThis._pdfjsTestingUtils={HighlightOutliner:Lj};globalThis.pdfjsLib={AbortException:Do,AnnotationEditorLayer:kb,AnnotationEditorParamsType:Fe,AnnotationEditorType:Se,AnnotationEditorUIManager:Ac,AnnotationLayer:EE,AnnotationMode:la,AnnotationType:Kt,applyOpacity:AF,build:TO,ColorPicker:Tg,createValidAbsoluteUrl:fE,CSSConstants:CF,DOMSVGFactory:Pg,DrawLayer:Tb,FeatureTest:Sn,fetchData:qm,findContrastColor:EF,getDocument:SE,getFilenameFromUrl:SF,getPdfFilenameFromUrl:NF,getRGB:Km,getUuid:pE,getXfaPageViewport:jF,GlobalWorkerOptions:Ir,ImageKind:Jp,InvalidPDFException:yb,isDataScheme:Fy,isPdfFile:Ww,isValidExplicitDest:aO,MathClamp:Qn,noContextMenu:fr,normalizeUnicode:bF,OPS:Pm,OutputScale:Si,PasswordResponses:yF,PDFDataRangeTransport:NE,PDFDateString:Ag,PDFWorker:_m,PermissionFlag:xF,PixelsPerInch:Io,RenderingCancelledException:Vw,renderRichText:yE,ResponseException:jg,setLayerDimensions:Cc,shadow:Ee,SignatureExtractor:ca,stopEvent:Dt,SupportedImageMimeTypes:vb,TextLayer:kg,TouchManager:Eg,updateUrlHash:mE,Util:he,VerbosityLevel:Dy,version:jE,XfaLayer:xE};const xK=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Do,AnnotationEditorLayer:kb,AnnotationEditorParamsType:Fe,AnnotationEditorType:Se,AnnotationEditorUIManager:Ac,AnnotationLayer:EE,AnnotationMode:la,AnnotationType:Kt,CSSConstants:CF,ColorPicker:Tg,DOMSVGFactory:Pg,DrawLayer:Tb,FeatureTest:Sn,GlobalWorkerOptions:Ir,ImageKind:Jp,InvalidPDFException:yb,MathClamp:Qn,OPS:Pm,OutputScale:Si,PDFDataRangeTransport:NE,PDFDateString:Ag,PDFWorker:_m,PasswordResponses:yF,PermissionFlag:xF,PixelsPerInch:Io,RenderingCancelledException:Vw,ResponseException:jg,SignatureExtractor:ca,SupportedImageMimeTypes:vb,TextLayer:kg,TouchManager:Eg,Util:he,VerbosityLevel:Dy,XfaLayer:xE,applyOpacity:AF,build:TO,createValidAbsoluteUrl:fE,fetchData:qm,findContrastColor:EF,getDocument:SE,getFilenameFromUrl:SF,getPdfFilenameFromUrl:NF,getRGB:Km,getUuid:pE,getXfaPageViewport:jF,isDataScheme:Fy,isPdfFile:Ww,isValidExplicitDest:aO,noContextMenu:fr,normalizeUnicode:bF,renderRichText:yE,setLayerDimensions:Cc,shadow:Ee,stopEvent:Dt,updateUrlHash:mE,version:jE},Symbol.toStringTag,{value:"Module"}));var VT=Object.prototype.hasOwnProperty;function WT(n,e,t){for(t of n.keys())if(Th(t,e))return t}function Th(n,e){var t,s,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((s=n.length)===e.length)for(;s--&&Th(n[s],e[s]););return s===-1}if(t===Set){if(n.size!==e.size)return!1;for(s of n)if(r=s,r&&typeof r=="object"&&(r=WT(e,r),!r)||!e.has(r))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(s of n)if(r=s[0],r&&typeof r=="object"&&(r=WT(e,r),!r)||!Th(s[1],e.get(r)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((s=n.byteLength)===e.byteLength)for(;s--&&n.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(n)){if((s=n.byteLength)===e.byteLength)for(;s--&&n[s]===e[s];);return s===-1}if(!t||typeof n=="object"){s=0;for(t in n)if(VT.call(n,t)&&++s&&!VT.call(e,t)||!(t in e)||!Th(n[t],e[t]))return!1;return Object.keys(e).length===s}}return n!==n&&e!==e}function zy(n){let e=!1;return{promise:new Promise((s,r)=>{n.then(i=>!e&&s(i)).catch(i=>!e&&r(i))}),cancel(){e=!0}}}const yK=["onCopy","onCut","onPaste"],vK=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],bK=["onFocus","onBlur"],wK=["onInput","onInvalid","onReset","onSubmit"],SK=["onLoad","onError"],NK=["onKeyDown","onKeyPress","onKeyUp"],jK=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],CK=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],AK=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],EK=["onSelect"],kK=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],TK=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],PK=["onScroll"],_K=["onWheel"],MK=["onAnimationStart","onAnimationEnd","onAnimationIteration"],RK=["onTransitionEnd"],DK=["onToggle"],IK=["onChange"],LK=[...yK,...vK,...bK,...wK,...SK,...NK,...jK,...CK,...AK,...EK,...kK,...TK,...PK,..._K,...MK,...RK,...IK,...DK];function T4(n,e){const t={};for(const s of LK){const r=n[s];r&&(e?t[s]=i=>r(i,e(s)):t[s]=r)}return t}var FK="Invariant failed";function ct(n,e){if(!n)throw new Error(FK)}var OK=function(){},BK=OK;const Zn=mC(BK),P4=x.createContext(null),$K="noopener noreferrer nofollow";class zK{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return ct(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){ct(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||$K,e.target=s?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{ct(this.pdfDocument),ct(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{ct(Array.isArray(t));const s=t[0];new Promise(r=>{ct(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(i=>{r(i)}).catch(()=>{ct(!1)}):typeof s=="number"?r(s):ct(!1)}).then(r=>{const i=r+1;ct(this.pdfViewer),ct(i>=1&&i<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:r,pageNumber:i})})})}goToPage(e){const t=e-1;ct(this.pdfViewer),ct(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function Ph({children:n,type:e}){return a.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const GT={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function UK(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function Mm(){return x.useReducer(UK,{value:void 0,error:void 0})}const Kw=typeof window<"u",_4=Kw&&window.location.protocol==="file:";function HK(n){return typeof n<"u"}function Ic(n){return HK(n)&&n!==null}function VK(n){return typeof n=="string"}function WK(n){return n instanceof ArrayBuffer}function GK(n){return ct(Kw),n instanceof Blob}function rC(n){return VK(n)&&/^data:/.test(n)}function qT(n){ct(rC(n));const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function qK(){return Kw&&window.devicePixelRatio||1}const M4="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function KT(){Zn(!_4,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${M4}`)}function KK(){Zn(!_4,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${M4}`)}function Pu(n){n!=null&&n.cancel&&n.cancel()}function iC(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function YK(n){return n.name==="RenderingCancelledException"}function XK(n){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=r=>{if(!r.target)return t(new Error("Error while reading a file."));const{error:i}=r.target;if(!i)return t(new Error("Error while reading a file."));switch(i.code){case i.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case i.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case i.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:QK}=xK,JK=(n,e)=>{switch(e){case GT.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case GT.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function YT(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const ZK=x.forwardRef(function({children:e,className:t,error:s="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:i,file:o,inputRef:l,imageResourcesPath:d,loading:u="Loading PDF…",noData:h="No PDF file specified.",onItemClick:f,onLoadError:m,onLoadProgress:p,onLoadSuccess:b,onPassword:g=JK,onSourceError:N,onSourceSuccess:v,options:y,renderMode:S,rotate:w,scale:j,...E},T){const[P,_]=Mm(),{value:R,error:I}=P,[L,U]=Mm(),{value:B,error:Q}=L,F=x.useRef(new zK),H=x.useRef([]),$=x.useRef(void 0),K=x.useRef(void 0);o&&o!==$.current&&YT(o)&&(Zn(!Th(o,$.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),$.current=o),y&&y!==K.current&&(Zn(!Th(y,K.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),K.current=y);const D=x.useRef({scrollPageIntoView:ge=>{const{dest:le,pageNumber:_e,pageIndex:Le=_e-1}=ge;if(f){f({dest:le,pageIndex:Le,pageNumber:_e});return}const At=H.current[Le];if(At){At.scrollIntoView();return}Zn(!1,`An internal link leading to page ${_e} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});x.useImperativeHandle(T,()=>({linkService:F,pages:H,viewer:D}),[]);function M(){v&&v()}function q(){I&&(Zn(!1,I.toString()),N&&N(I))}function z(){_({type:"RESET"})}x.useEffect(z,[o,_]);const G=x.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return rC(o)?{data:qT(o)}:(KT(),{url:o});if(o instanceof QK)return{range:o};if(WK(o))return{data:o};if(Kw&&GK(o))return{data:await XK(o)};if(ct(typeof o=="object"),ct(YT(o)),"url"in o&&typeof o.url=="string"){if(rC(o.url)){const{url:ge,...le}=o;return{data:qT(ge),...le}}KT()}return o},[o]);x.useEffect(()=>{const ge=zy(G());return ge.promise.then(le=>{_({type:"RESOLVE",value:le})}).catch(le=>{_({type:"REJECT",error:le})}),()=>{Pu(ge)}},[G,_]),x.useEffect(()=>{if(!(typeof R>"u")){if(R===!1){q();return}M()}},[R]);function W(){B&&(b&&b(B),H.current=new Array(B.numPages),F.current.setDocument(B))}function X(){Q&&(Zn(!1,Q.toString()),m&&m(Q))}x.useEffect(function(){U({type:"RESET"})},[U,R]),x.useEffect(function(){if(!R)return;const le=y?{...R,...y}:R,_e=SE(le);p&&(_e.onProgress=p),g&&(_e.onPassword=g);const Le=_e,At=Le.promise.then(jn=>{U({type:"RESOLVE",value:jn})}).catch(jn=>{Le.destroyed||U({type:"REJECT",error:jn})});return()=>{At.finally(()=>Le.destroy())}},[y,U,R]),x.useEffect(()=>{if(!(typeof B>"u")){if(B===!1){X();return}W()}},[B]),x.useEffect(function(){F.current.setViewer(D.current),F.current.setExternalLinkRel(r),F.current.setExternalLinkTarget(i)},[r,i]);const V=x.useCallback((ge,le)=>{H.current[ge]=le},[]),se=x.useCallback(ge=>{delete H.current[ge]},[]),ve=x.useMemo(()=>({imageResourcesPath:d,linkService:F.current,onItemClick:f,pdf:B,registerPage:V,renderMode:S,rotate:w,scale:j,unregisterPage:se}),[d,f,B,V,S,w,j,se]),ae=x.useMemo(()=>T4(E,()=>B),[E,B]);function ce(){function ge(_e){return!!(_e!=null&&_e.pdf)}if(!ge(ve))throw new Error("pdf is undefined");const le=typeof e=="function"?e(ve):e;return a.jsx(P4.Provider,{value:ve,children:le})}function xe(){return o?B==null?a.jsx(Ph,{type:"loading",children:typeof u=="function"?u():u}):B===!1?a.jsx(Ph,{type:"error",children:typeof s=="function"?s():s}):ce():a.jsx(Ph,{type:"no-data",children:typeof h=="function"?h():h})}return a.jsx("div",{className:$m("react-pdf__Document",t),ref:l,...ae,children:xe()})});function R4(){return x.useContext(P4)}function D4(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(i){for(var o=0,l=t;o<l.length;o++){var d=l[o];typeof d=="function"?d(i):d&&(d.current=i)}}}const I4=x.createContext(null);function Yw(){return x.useContext(I4)}function eY(){const n=R4(),e=Yw();ct(e);const t={...n,...e},{imageResourcesPath:s,linkService:r,onGetAnnotationsError:i,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:d,page:u,pdf:h,renderForms:f,rotate:m,scale:p=1}=t;ct(h),ct(u),ct(r);const[b,g]=Mm(),{value:N,error:v}=b,y=x.useRef(null);Zn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function S(){N&&o&&o(N)}function w(){v&&(Zn(!1,v.toString()),i&&i(v))}x.useEffect(function(){g({type:"RESET"})},[g,u]),x.useEffect(function(){if(!u)return;const _=zy(u.getAnnotations()),R=_;return _.promise.then(I=>{g({type:"RESOLVE",value:I})}).catch(I=>{g({type:"REJECT",error:I})}),()=>{Pu(R)}},[g,u]),x.useEffect(()=>{if(N!==void 0){if(N===!1){w();return}S()}},[N]);function j(){d&&d()}function E(P){Zn(!1,`${P}`),l&&l(P)}const T=x.useMemo(()=>u.getViewport({scale:p,rotation:m}),[u,m,p]);return x.useEffect(function(){if(!h||!u||!r||!N)return;const{current:_}=y;if(!_)return;const R=T.clone({dontFlip:!0}),I={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:h.annotationStorage,commentManager:null,div:_,l10n:null,linkService:r,page:u,structTreeLayer:null,viewport:R},L={annotations:N,annotationStorage:h.annotationStorage,div:_,imageResourcesPath:s,linkService:r,page:u,renderForms:f,viewport:R};_.innerHTML="";try{new EE(I).render(L),j()}catch(U){E(U)}return()=>{}},[N,s,r,u,h,f,T]),a.jsx("div",{className:$m("react-pdf__Page__annotations","annotationLayer"),ref:y})}const L4={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},tY=/^H(\d+)$/;function nY(n){return n in L4}function Xw(n){return"children"in n}function F4(n){return Xw(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function sY(n){const e={};if(Xw(n)){const{role:t}=n,s=t.match(tY);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(nY(t)){const r=L4[t];r&&(e.role=r)}}return e}function O4(n){const e={};if(Xw(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),F4(n)){const[t]=n.children;if(t){const s=O4(t);return{...e,...s}}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function rY(n){return n?{...sY(n),...O4(n)}:null}function B4({className:n,node:e}){const t=x.useMemo(()=>rY(e),[e]),s=x.useMemo(()=>!Xw(e)||F4(e)?null:e.children.map((r,i)=>a.jsx(B4,{node:r},i)),[e]);return a.jsx("span",{className:n,...t,children:s})}function iY(){const n=Yw();ct(n);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[s,r]=Mm(),{value:i,error:o}=s,{customTextRenderer:l,page:d}=n;function u(){i&&t&&t(i)}function h(){o&&(Zn(!1,o.toString()),e&&e(o))}return x.useEffect(function(){r({type:"RESET"})},[r,d]),x.useEffect(function(){if(l||!d)return;const m=zy(d.getStructTree()),p=m;return m.promise.then(b=>{r({type:"RESOLVE",value:b})}).catch(b=>{r({type:"REJECT",error:b})}),()=>Pu(p)},[l,d,r]),x.useEffect(()=>{if(i!==void 0){if(i===!1){h();return}u()}},[i]),i?a.jsx(B4,{className:"react-pdf__Page__structTree structTree",node:i}):null}const XT=la;function aY(n){const e=Yw();ct(e);const t={...e,...n},{_className:s,canvasBackground:r,devicePixelRatio:i=qK(),onRenderError:o,onRenderSuccess:l,page:d,renderForms:u,renderTextLayer:h,rotate:f,scale:m}=t,{canvasRef:p}=n;ct(d);const b=x.useRef(null);function g(){d&&l&&l(iC(d,m))}function N(w){YK(w)||(Zn(!1,w.toString()),o&&o(w))}const v=x.useMemo(()=>d.getViewport({scale:m*i,rotation:f}),[i,d,f,m]),y=x.useMemo(()=>d.getViewport({scale:m,rotation:f}),[d,f,m]);x.useEffect(function(){if(!d)return;d.cleanup();const{current:j}=b;if(!j)return;j.width=v.width,j.height=v.height,j.style.width=`${Math.floor(y.width)}px`,j.style.height=`${Math.floor(y.height)}px`,j.style.visibility="hidden";const E={annotationMode:u?XT.ENABLE_FORMS:XT.ENABLE,canvas:j,canvasContext:j.getContext("2d",{alpha:!1}),viewport:v};r&&(E.background=r);const T=d.render(E),P=T;return T.promise.then(()=>{j.style.visibility="",g()}).catch(N),()=>Pu(P)},[r,d,u,v,y]);const S=x.useCallback(()=>{const{current:w}=b;w&&(w.width=0,w.height=0)},[]);return x.useEffect(()=>S,[S]),a.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:D4(p,b),style:{display:"block",userSelect:"none"},children:h?a.jsx(iY,{}):null})}function oY(n){return"str"in n}function lY(){const n=Yw();ct(n);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:r,onRenderTextLayerSuccess:i,page:o,pageIndex:l,pageNumber:d,rotate:u,scale:h}=n;ct(o);const[f,m]=Mm(),{value:p,error:b}=f,g=x.useRef(null);Zn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function N(){p&&s&&s(p)}function v(){b&&(Zn(!1,b.toString()),t&&t(b))}x.useEffect(function(){m({type:"RESET"})},[o,m]),x.useEffect(function(){if(!o)return;const P=zy(o.getTextContent()),_=P;return P.promise.then(R=>{m({type:"RESOLVE",value:R})}).catch(R=>{m({type:"REJECT",error:R})}),()=>Pu(_)},[o,m]),x.useEffect(()=>{if(p!==void 0){if(p===!1){v();return}N()}},[p]);const y=x.useCallback(()=>{i&&i()},[i]),S=x.useCallback(T=>{Zn(!1,T.toString()),r&&r(T)},[r]);function w(){const T=g.current;T&&T.classList.add("selecting")}function j(){const T=g.current;T&&T.classList.remove("selecting")}const E=x.useMemo(()=>o.getViewport({scale:h,rotation:u}),[o,u,h]);return x.useLayoutEffect(function(){if(!o||!p)return;const{current:P}=g;if(!P)return;P.innerHTML="";const _=o.streamTextContent({includeMarkedContent:!0}),R={container:P,textContentSource:_,viewport:E},I=new kg(R),L=I;return I.render().then(()=>{const U=document.createElement("div");U.className="endOfContent",P.append(U);const B=P.querySelectorAll('[role="presentation"]');if(e){let Q=0;p.items.forEach((F,H)=>{if(!oY(F))return;const $=B[Q];if(!$)return;const K=e({pageIndex:l,pageNumber:d,itemIndex:H,...F});$.innerHTML=K,Q+=F.str&&F.hasEOL?2:1})}y()}).catch(S),()=>Pu(L)},[e,S,y,o,l,d,p,E]),a.jsx("div",{className:$m("react-pdf__Page__textContent","textLayer"),onMouseUp:j,onMouseDown:w,ref:g})}const QT=1;function cY(n){const t={...R4(),...n},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:i,canvasRef:o,children:l,className:d,customRenderer:u,customTextRenderer:h,devicePixelRatio:f,error:m="Failed to load the page.",height:p,inputRef:b,loading:g="Loading page…",noData:N="No page specified.",onGetAnnotationsError:v,onGetAnnotationsSuccess:y,onGetStructTreeError:S,onGetStructTreeSuccess:w,onGetTextError:j,onGetTextSuccess:E,onLoadError:T,onLoadSuccess:P,onRenderAnnotationLayerError:_,onRenderAnnotationLayerSuccess:R,onRenderError:I,onRenderSuccess:L,onRenderTextLayerError:U,onRenderTextLayerSuccess:B,pageIndex:Q,pageNumber:F,pdf:H,registerPage:$,renderAnnotationLayer:K=!0,renderForms:D=!1,renderMode:M="canvas",renderTextLayer:q=!0,rotate:z,scale:G=QT,unregisterPage:W,width:X,...V}=t,[se,ve]=Mm(),{value:ae,error:ce}=se,xe=x.useRef(null);ct(H);const ge=Ic(F)?F-1:Q??null,le=F??(Ic(Q)?Q+1:null),_e=z??(ae?ae.rotate:null),Le=x.useMemo(()=>{if(!ae)return null;let Ai=1;const zo=G??QT;if(X||p){const Gr=ae.getViewport({scale:1,rotation:_e});X?Ai=X/Gr.width:p&&(Ai=p/Gr.height)}return zo*Ai},[p,ae,_e,G,X]);x.useEffect(function(){return()=>{Ic(ge)&&r&&W&&W(ge)}},[r,H,ge,W]);function At(){if(P){if(!ae||!Le)return;P(iC(ae,Le))}if(r&&$){if(!Ic(ge)||!xe.current)return;$(ge,xe.current)}}function jn(){ce&&(Zn(!1,ce.toString()),T&&T(ce))}x.useEffect(function(){ve({type:"RESET"})},[ve,H,ge]),x.useEffect(function(){if(!H||!le)return;const zo=zy(H.getPage(le)),Gr=zo;return zo.promise.then(Bu=>{ve({type:"RESOLVE",value:Bu})}).catch(Bu=>{ve({type:"REJECT",error:Bu})}),()=>Pu(Gr)},[ve,H,le]),x.useEffect(()=>{if(ae!==void 0){if(ae===!1){jn();return}At()}},[ae,Le]);const Bn=x.useMemo(()=>Ic(ge)&&le&&Ic(_e)&&Ic(Le)?{_className:s,canvasBackground:i,customTextRenderer:h,devicePixelRatio:f,onGetAnnotationsError:v,onGetAnnotationsSuccess:y,onGetStructTreeError:S,onGetStructTreeSuccess:w,onGetTextError:j,onGetTextSuccess:E,onRenderAnnotationLayerError:_,onRenderAnnotationLayerSuccess:R,onRenderError:I,onRenderSuccess:L,onRenderTextLayerError:U,onRenderTextLayerSuccess:B,page:ae,pageIndex:ge,pageNumber:le,renderForms:D,renderTextLayer:q,rotate:_e,scale:Le}:null,[s,i,h,f,v,y,S,w,j,E,_,R,I,L,U,B,ae,ge,le,D,q,_e,Le]),gr=x.useMemo(()=>T4(V,()=>ae&&(Le?iC(ae,Le):void 0)),[V,ae,Le]),Ou=`${ge}@${Le}/${_e}`;function n1(){switch(M){case"custom":return ct(u),a.jsx(u,{},`${Ou}_custom`);case"none":return null;case"canvas":default:return a.jsx(aY,{canvasRef:o},`${Ou}_canvas`)}}function s1(){return q?a.jsx(lY,{},`${Ou}_text`):null}function Gy(){return K?a.jsx(eY,{},`${Ou}_annotations`):null}function r1(){function Ai(Gr){return!!(Gr!=null&&Gr.page)}if(!Ai(Bn))throw new Error("page is undefined");const zo=typeof l=="function"?l(Bn):l;return a.jsxs(I4.Provider,{value:Bn,children:[n1(),s1(),Gy(),zo]})}function qy(){return le?H===null||ae===void 0||ae===null?a.jsx(Ph,{type:"loading",children:typeof g=="function"?g():g}):H===!1||ae===!1?a.jsx(Ph,{type:"error",children:typeof m=="function"?m():m}):r1():a.jsx(Ph,{type:"no-data",children:typeof N=="function"?N():N})}return a.jsx("div",{className:$m(s,d),"data-page-number":le,ref:D4(b,xe),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Le}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:i||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...gr,children:qy()})}KK();Ir.workerSrc="pdf.worker.mjs";Ir.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${jE}/pdf.worker.min.js`;const dY=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768;function PE({url:n,title:e}){const[t,s]=x.useState(0),[r,i]=x.useState(1),[o,l]=x.useState(1),[d,u]=x.useState(!0),[h,f]=x.useState(!1),[m,p]=x.useState(!1);x.useEffect(()=>{f(dY())},[]);function b({numPages:j}){s(j),u(!1)}function g(j){console.error("Error loading PDF:",j),u(!1),p(!0)}function N(j){i(E=>E+j)}function v(){N(-1)}function y(){N(1)}function S(){l(j=>Math.min(j+.2,3))}function w(){l(j=>Math.max(j-.2,.5))}return h||m?a.jsx("div",{className:"flex flex-col h-full",children:a.jsx("div",{className:"flex-1 overflow-hidden bg-muted/30 relative",children:a.jsx("iframe",{src:`${n}#toolbar=1&navpanes=0&scrollbar=1&view=FitH`,className:"w-full h-full border-0 absolute inset-0",title:e||"PDF Viewer","data-testid":"iframe-pdf-viewer",allow:"fullscreen"})})}):a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"flex items-center justify-between p-2 md:p-3 border-b bg-background flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(O,{variant:"outline",size:"sm",onClick:v,disabled:r<=1,"data-testid":"button-prev-page",children:a.jsx(mc,{className:"h-4 w-4"})}),a.jsxs("span",{className:"text-sm whitespace-nowrap",children:[r," / ",t||"?"]}),a.jsx(O,{variant:"outline",size:"sm",onClick:y,disabled:r>=t,"data-testid":"button-next-page",children:a.jsx(ju,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(O,{variant:"outline",size:"sm",onClick:w,disabled:o<=.5,"data-testid":"button-zoom-out",children:a.jsx(pU,{className:"h-4 w-4"})}),a.jsxs("span",{className:"text-sm hidden md:inline",children:[Math.round(o*100),"%"]}),a.jsx(O,{variant:"outline",size:"sm",onClick:S,disabled:o>=3,"data-testid":"button-zoom-in",children:a.jsx(mU,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"flex-1 overflow-auto bg-muted/30 flex items-center justify-center",children:[d&&a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(We,{className:"h-6 w-6 animate-spin"}),a.jsx("span",{children:"Loading PDF..."})]}),a.jsx("div",{className:"p-4",children:a.jsx(ZK,{file:n,onLoadSuccess:b,onLoadError:g,loading:null,error:a.jsxs("div",{className:"text-center p-8",children:[a.jsx("p",{className:"text-destructive font-medium",children:"Failed to load PDF"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"The page will reload to use mobile-friendly viewer"})]}),children:a.jsx(cY,{pageNumber:r,scale:o,renderTextLayer:!0,renderAnnotationLayer:!0,className:"shadow-lg"})})})]})]})}function uY(){const{data:n}=Te({queryKey:["/api/trisandhya-pdfs"]}),[e,t]=x.useState(null),[s,r]=x.useState(!1),i=l=>{t(l),r(!0)},o=(l,d)=>{const u=document.createElement("a");u.href=l,u.download=`Trisandhya_Path_${d}.pdf`,document.body.appendChild(u),u.click(),document.body.removeChild(u)};return a.jsxs("div",{className:"space-y-4 sm:space-y-6 pb-8",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold font-serif",children:"Daily Sadhna"}),a.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Complete Trisandhya Path from Bhavishya Malika"})]}),a.jsxs(xa,{defaultValue:"trisandhya",className:"w-full",children:[a.jsxs(ya,{className:"grid w-full grid-cols-3 h-auto",children:[a.jsx(qt,{value:"trisandhya",className:"text-xs sm:text-sm","data-testid":"tab-trisandhya",children:"Trisandhya Path"}),a.jsx(qt,{value:"mahapuran",className:"text-xs sm:text-sm","data-testid":"tab-mahapuran",children:"Mahapuran"}),a.jsx(qt,{value:"jap",className:"text-xs sm:text-sm","data-testid":"tab-jap",children:"Madhav Jap"})]}),a.jsxs(gt,{value:"trisandhya",className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold font-serif",children:"Complete Trisandhya Recitation"}),a.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Perform this sacred practice three times daily • Duration: 10-15 minutes"})]}),n&&n.length>0?a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:n.map(l=>a.jsx(Z,{className:"p-6 hover:shadow-xl transition-all duration-300 bg-card dark:bg-card border-border dark:border-border","data-testid":`card-trisandhya-pdf-${l.id}`,children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(at,{className:"h-5 w-5 text-primary"}),a.jsx("h3",{className:"text-xl font-semibold text-foreground dark:text-foreground",children:l.languageName})]}),l.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:l.description}),l.fileSize&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["File size: ",(l.fileSize/(1024*1024)).toFixed(2)," MB"]})]})}),a.jsxs("div",{className:"flex flex-col gap-2 pt-4 border-t border-border dark:border-border",children:[l.pdfUrl&&a.jsxs(a.Fragment,{children:[a.jsxs(O,{onClick:()=>i(l),className:"w-full",variant:"default","data-testid":`button-read-trisandhya-${l.id}`,children:[a.jsx(at,{className:"h-4 w-4 mr-2"}),"Read Online"]}),a.jsxs(O,{onClick:()=>o(l.pdfUrl,l.languageName),variant:"outline",className:"w-full","data-testid":`button-download-trisandhya-${l.id}`,children:[a.jsx(vo,{className:"h-4 w-4 mr-2"}),"Download PDF"]})]}),!l.pdfUrl&&a.jsx("p",{className:"text-sm text-center text-muted-foreground py-2",children:"PDF will be available soon"})]})]})},l.id))}):a.jsxs(Z,{className:"p-12 text-center bg-card dark:bg-card",children:[a.jsx(at,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-xl font-semibold mb-2 text-foreground dark:text-foreground",children:"PDFs Coming Soon"}),a.jsx("p",{className:"text-muted-foreground",children:"The complete Trisandhya Path PDFs in different languages will be available here soon for download and reading."})]}),a.jsx(Z,{className:"p-6 bg-gradient-to-br from-primary/10 to-primary/5 border-primary/20",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-2 bg-primary/20 rounded-lg",children:a.jsx(NA,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"font-semibold text-base",children:"Important Note"}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"This sacred practice takes only 10-15 minutes. Perform it three times daily at the prescribed timings to receive divine protection and spiritual benefits as mentioned in Bhavishya Malika. Regular practice brings peace, prosperity, and spiritual progress."})]})]})})]}),a.jsx(gt,{value:"mahapuran",className:"space-y-4",children:a.jsxs(Z,{className:"p-6 sm:p-8 space-y-6",children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold font-serif",children:"Sacred Mahapuran Library"}),a.jsx("p",{className:"text-muted-foreground",children:"Explore the divine wisdom of the Mahapurans - ancient scriptures containing spiritual knowledge and cosmic truths"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-primary/5 p-6 rounded-lg space-y-4",children:[a.jsx("h3",{className:"font-semibold text-lg",children:"📚 Complete Collection"}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Access the complete Mahapuran texts organized by titles, skandas (books), and chapters. Each text is presented in an easy-to-read format with summaries and navigation."}),a.jsxs(O,{className:"w-full sm:w-auto",onClick:()=>window.location.href="/mahapuran","data-testid":"button-browse-mahapuran",children:[a.jsx(ha,{className:"h-4 w-4 mr-2"}),"Browse Mahapuran Library"]})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Daily Reading"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Reading one chapter daily brings wisdom and spiritual growth. Start your journey today!"})]}),a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Organized Structure"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Navigate through titles → skandas → chapters with ease and track your reading progress."})]})]}),a.jsx("div",{className:"p-4 bg-accent/50 rounded-lg",children:a.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"💡 Tip: Combine Mahapuran reading with your daily Trisandhya practice for complete spiritual development"})})]})}),a.jsxs(gt,{value:"jap",className:"space-y-4",children:[a.jsx(_q,{}),a.jsx(Z,{className:"p-4 bg-accent/50",children:a.jsx("p",{className:"text-sm text-center text-muted-foreground leading-relaxed",children:'Regular chanting of "Mādhava Mādhava" purifies the mind and brings you closer to the divine presence. The continuous repetition is the essence of spiritual practice.'})})]})]}),a.jsx(Nt,{open:s,onOpenChange:r,children:a.jsxs(xt,{className:"max-w-7xl h-[90vh] p-0 overflow-hidden",children:[a.jsxs(jt,{className:"p-4 pb-0 border-b",children:[a.jsx(Ct,{className:"text-xl font-serif",children:(e==null?void 0:e.languageName)||"Trisandhya Path"}),(e==null?void 0:e.description)&&a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.description})]}),a.jsx("div",{className:"flex-1 overflow-hidden h-full",children:(e==null?void 0:e.pdfUrl)&&a.jsx(PE,{url:e.pdfUrl,title:e.languageName||"Trisandhya Path"})})]})})]})}function $4(n){if(!n)return null;const e=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\?\/\s]+)/,/youtube\.com\/shorts\/([^&\?\/\s]+)/,/youtube\.com\/live\/([^&\?\/\s]+)/];for(const t of e){const s=n.match(t);if(s&&s[1])return s[1].split("?")[0]}return null}function hY(n){const e=$4(n);return e?`https://www.youtube.com/embed/${e}?autoplay=1`:""}function fY(n){const e=$4(n);return e?`https://i.ytimg.com/vi/${e}/hqdefault.jpg`:""}function JT({video:n}){const[e,t]=x.useState(!1);return a.jsxs(Z,{className:"overflow-hidden","data-testid":`video-${n.id}`,children:[a.jsx("div",{className:"relative aspect-video bg-black",children:e?a.jsx("iframe",{src:hY(n.url),title:n.title,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):a.jsx("div",{className:"w-full h-full flex items-center justify-center cursor-pointer relative",onClick:()=>t(!0),style:{backgroundImage:n.thumbnailUrl?`url(${n.thumbnailUrl})`:`url(${fY(n.url)})`,backgroundSize:"cover",backgroundPosition:"center"},children:a.jsx("div",{className:"absolute inset-0 bg-black/40 hover:bg-black/30 transition-colors flex items-center justify-center",children:a.jsx("div",{className:"bg-primary rounded-full p-4 hover:scale-110 transition-transform",children:a.jsx(yc,{className:"h-8 w-8 text-white fill-white"})})})})}),a.jsxs("div",{className:"p-4 space-y-2",children:[a.jsx("h3",{className:"font-semibold text-sm sm:text-base line-clamp-2",children:n.title}),a.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm text-muted-foreground",children:[a.jsx("span",{children:n.artist||"Unknown Artist"}),a.jsx("span",{children:n.duration})]}),n.description&&a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:n.description})]})]})}function ZT({audio:n,isFavorited:e,onToggleFavorite:t}){const{playTrack:s,playQueue:r,currentTrack:i,isPlaying:o,addToQueue:l}=rE(),d=(i==null?void 0:i.id)===n.id;return a.jsx(Z,{className:`overflow-hidden transition-colors ${d?"border-primary":""}`,"data-testid":`audio-${n.id}`,children:a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary/20 to-primary/5 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(or,{className:"h-8 w-8 text-primary"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-sm sm:text-base line-clamp-1",children:n.title}),a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground line-clamp-1",children:n.artist||"Unknown Artist"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(O,{size:"icon",variant:"ghost",onClick:()=>t(n.id),"data-testid":`button-favorite-${n.id}`,children:a.jsx(Cu,{className:`h-4 w-4 ${e?"fill-red-500 text-red-500":""}`})}),a.jsx(O,{size:"icon",variant:"ghost",onClick:()=>l(n),"data-testid":`button-add-queue-${n.id}`,children:a.jsx(ji,{className:"h-4 w-4"})}),a.jsx(O,{size:"icon",onClick:()=>r([n],0),"data-testid":`button-play-${n.id}`,children:d&&o?a.jsx(Cm,{className:"h-4 w-4"}):a.jsx(yc,{className:"h-4 w-4"})})]})]})})})}function mY(){const{toast:n}=On(),{playQueue:e}=rE(),[t,s]=x.useState("all"),[r,i]=x.useState("videos"),{data:o=[]}=Te({queryKey:["/api/media-categories"]}),{data:l=[],isLoading:d}=Te({queryKey:["/api/media"]}),{data:u=[]}=Te({queryKey:["/api/media-favorites"]}),h=Oe({mutationFn:async S=>await Ve("POST","/api/media-favorites",{mediaId:S}),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/media-favorites"]}),n({title:"Added to favorites"})}}),f=Oe({mutationFn:async S=>await Ve("DELETE",`/api/media-favorites/${S}`),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/media-favorites"]}),n({title:"Removed from favorites"})}}),m=S=>{u.some(j=>j.id===S)?f.mutate(S):h.mutate(S)},p=t==="all"?l:l.filter(S=>S.categoryId===t),b=p.filter(S=>S.type==="audio"),g=p.filter(S=>S.type==="youtube"),N=u.filter(S=>S.type==="audio"),v=u.filter(S=>S.type==="youtube"),y=S=>{const w=S.filter(j=>j.type==="audio");w.length>0&&(e(w,0),n({title:"Playing all tracks",description:`${w.length} tracks added to queue`}))};return d?a.jsx("div",{className:"space-y-6 pb-32",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold font-serif",children:"Media Library"}),a.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Loading spiritual content..."})]})}):a.jsxs("div",{className:"space-y-4 sm:space-y-6 pb-32",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold font-serif",children:"Media Library"}),a.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Sacred bhajans and pravachan videos for spiritual growth"})]}),o.length>0&&a.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[a.jsx(O,{variant:t==="all"?"default":"outline",size:"sm",onClick:()=>s("all"),"data-testid":"category-all",children:"All"}),o.map(S=>a.jsx(O,{variant:t===S.id?"default":"outline",size:"sm",onClick:()=>s(S.id),"data-testid":`category-${S.name}`,children:S.displayName},S.id))]}),a.jsxs(xa,{value:r,onValueChange:S=>i(S),className:"w-full",children:[a.jsxs(ya,{className:"grid w-full grid-cols-3 h-auto",children:[a.jsxs(qt,{value:"videos",className:"gap-2","data-testid":"tab-videos",children:[a.jsx(Kv,{className:"h-4 w-4"}),a.jsxs("span",{className:"text-xs sm:text-sm",children:["Videos (",g.length,")"]})]}),a.jsxs(qt,{value:"audio",className:"gap-2","data-testid":"tab-audio",children:[a.jsx(or,{className:"h-4 w-4"}),a.jsxs("span",{className:"text-xs sm:text-sm",children:["Audio (",b.length,")"]})]}),a.jsxs(qt,{value:"favorites",className:"gap-2","data-testid":"tab-favorites",children:[a.jsx(Cu,{className:"h-4 w-4"}),a.jsxs("span",{className:"text-xs sm:text-sm",children:["Favorites (",u.length,")"]})]})]}),a.jsx(gt,{value:"videos",className:"space-y-4 mt-4",children:g.length>0?a.jsx("div",{className:"grid gap-4 sm:gap-6",children:g.map(S=>a.jsx(JT,{video:S},S.id))}):a.jsxs(Z,{className:"p-8 sm:p-12 text-center",children:[a.jsx(Kv,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),a.jsx("p",{className:"text-muted-foreground",children:"No videos available in this category"})]})}),a.jsxs(gt,{value:"audio",className:"space-y-4 mt-4",children:[b.length>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("p",{className:"text-sm text-muted-foreground",children:[b.length," tracks"]}),a.jsxs(O,{size:"sm",onClick:()=>y(b),"data-testid":"button-play-all",children:[a.jsx(k2,{className:"h-4 w-4 mr-2"}),"Play All"]})]}),b.length>0?a.jsx("div",{className:"grid gap-4",children:b.map(S=>a.jsx(ZT,{audio:S,isFavorited:u.some(w=>w.id===S.id),onToggleFavorite:m},S.id))}):a.jsxs(Z,{className:"p-8 sm:p-12 text-center",children:[a.jsx(or,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),a.jsx("p",{className:"text-muted-foreground",children:"No audio available in this category"})]})]}),a.jsx(gt,{value:"favorites",className:"space-y-4 mt-4",children:u.length>0?a.jsxs(a.Fragment,{children:[N.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[a.jsx(or,{className:"h-5 w-5"}),"Favorite Audio (",N.length,")"]}),a.jsxs(O,{size:"sm",onClick:()=>y(N),"data-testid":"button-play-all-favorites",children:[a.jsx(k2,{className:"h-4 w-4 mr-2"}),"Play All"]})]}),a.jsx("div",{className:"grid gap-4",children:N.map(S=>a.jsx(ZT,{audio:S,isFavorited:!0,onToggleFavorite:m},S.id))})]}),v.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold flex items-center gap-2 mb-4",children:[a.jsx(Kv,{className:"h-5 w-5"}),"Favorite Videos (",v.length,")"]}),a.jsx("div",{className:"grid gap-4",children:v.map(S=>a.jsx(JT,{video:S},S.id))})]})]}):a.jsxs(Z,{className:"p-8 sm:p-12 text-center",children:[a.jsx(Cu,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),a.jsx("p",{className:"text-muted-foreground",children:"No favorites yet. Start adding tracks you love!"})]})})]})]})}function pY(){const{data:n}=Te({queryKey:["/api/sadhana-progress/stats"]}),e=new Date().toISOString().split("T")[0],t=oT(new Date,29).toISOString().split("T")[0],{data:s=[]}=Te({queryKey:["/api/sadhana-progress/range",t,e],queryFn:async()=>{const d=await fetch(`/api/sadhana-progress/range?startDate=${t}&endDate=${e}`);return d.ok?d.json():[]}}),{data:r}=Te({queryKey:["/api/japa-settings"]}),i=(r==null?void 0:r.dailyGoal)||108,o=Array.from({length:7},(d,u)=>{const h=oT(new Date,6-u),f=h.toISOString().split("T")[0],m=s.find(p=>p.date===f);return{date:f,day:pa(h,"EEE"),count:(m==null?void 0:m.japCount)||0,goalReached:((m==null?void 0:m.japCount)||0)>=i}}),l=Math.max(...o.map(d=>d.count),i);return a.jsxs("div",{className:"space-y-6 pb-8",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-3xl font-bold font-serif",children:"Your Spiritual Progress"}),a.jsx("p",{className:"text-muted-foreground",children:"Track your Sadhana journey and maintain consistency"})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[a.jsxs(Z,{className:"p-6 text-center space-y-2",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Streak"}),a.jsx("p",{className:"text-4xl font-bold text-primary",children:(n==null?void 0:n.currentStreak)||0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"days"})]}),a.jsxs(Z,{className:"p-6 text-center space-y-2",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Japa Count"}),a.jsx("p",{className:"text-4xl font-bold text-primary",children:(n==null?void 0:n.totalJapCount)||0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"chants"})]}),a.jsxs(Z,{className:"p-6 text-center space-y-2",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Longest Streak"}),a.jsx("p",{className:"text-4xl font-bold text-primary",children:(n==null?void 0:n.longestStreak)||0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"days"})]})]}),a.jsxs(Z,{className:"p-6 space-y-6","data-testid":"japa-history-chart",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(yN,{className:"h-5 w-5 text-primary"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Last 7 Days Japa Progress"})]}),a.jsxs(sn,{variant:"outline",className:"flex items-center gap-1",children:[a.jsx(EA,{className:"h-3 w-3"}),"Goal: ",i]})]}),a.jsx("div",{className:"space-y-4",children:o.map(d=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium min-w-[3rem]",children:d.day}),a.jsx("span",{className:"text-muted-foreground text-xs",children:pa(new Date(d.date),"MMM d")})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-semibold tabular-nums",children:d.count}),d.goalReached&&a.jsx(A2,{className:"h-4 w-4 text-primary"})]})]}),a.jsx("div",{className:"relative h-2 bg-muted rounded-full overflow-hidden",children:a.jsx("div",{className:`absolute inset-y-0 left-0 rounded-full transition-all ${d.goalReached?"bg-primary":"bg-primary/50"}`,style:{width:`${Math.min(d.count/l*100,100)}%`}})})]},d.date))}),o.filter(d=>d.goalReached).length>0&&a.jsx("div",{className:"pt-4 border-t",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(A2,{className:"h-4 w-4 text-primary"}),a.jsxs("span",{children:[o.filter(d=>d.goalReached).length," out of 7 days goal achieved"]})]})})]}),a.jsxs(Z,{className:"p-6 space-y-4","data-testid":"progress-calendar",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Sadhana Progress"}),a.jsxs(sn,{variant:"default",className:"text-sm",children:["🔥 ",(n==null?void 0:n.currentStreak)||0," Day Streak"]})]}),a.jsx("div",{className:"pt-4 border-t space-y-2",children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Completed Days"}),a.jsx("span",{className:"font-semibold",children:(n==null?void 0:n.completedDays)||0})]})})]}),a.jsxs(Z,{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(xg,{className:"h-5 w-5 text-primary"}),a.jsx("h3",{className:"font-semibold",children:"Consistency Insights"})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsx("p",{className:"text-muted-foreground",children:n!=null&&n.currentStreak?`You've maintained a ${n.currentStreak}-day streak! Keep going.`:"Start your journey today!"}),a.jsx("p",{className:"text-muted-foreground",children:"Regular practice brings spiritual growth and inner peace."})]})]})]})}var _E="Switch",[gY,NQ]=Nn(_E),[xY,yY]=gY(_E),z4=x.forwardRef((n,e)=>{const{__scopeSwitch:t,name:s,checked:r,defaultChecked:i,required:o,disabled:l,value:d="on",onCheckedChange:u,form:h,...f}=n,[m,p]=x.useState(null),b=we(e,S=>p(S)),g=x.useRef(!1),N=m?h||!!m.closest("form"):!0,[v=!1,y]=Ds({prop:r,defaultProp:i,onChange:u});return a.jsxs(xY,{scope:t,checked:v,disabled:l,children:[a.jsx(pe.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":V4(v),"data-disabled":l?"":void 0,disabled:l,value:d,...f,ref:b,onClick:oe(n.onClick,S=>{y(w=>!w),N&&(g.current=S.isPropagationStopped(),g.current||S.stopPropagation())})}),N&&a.jsx(vY,{control:m,bubbles:!g.current,name:s,value:d,checked:v,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});z4.displayName=_E;var U4="SwitchThumb",H4=x.forwardRef((n,e)=>{const{__scopeSwitch:t,...s}=n,r=yY(U4,t);return a.jsx(pe.span,{"data-state":V4(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:e})});H4.displayName=U4;var vY=n=>{const{control:e,checked:t,bubbles:s=!0,...r}=n,i=x.useRef(null),o=Bw(t),l=Aw(e);return x.useEffect(()=>{const d=i.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==t&&f){const m=new Event("click",{bubbles:s});f.call(d,t),d.dispatchEvent(m)}},[o,t,s]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...r,tabIndex:-1,ref:i,style:{...n.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function V4(n){return n?"checked":"unchecked"}var W4=z4,bY=H4;const Rs=x.forwardRef(({className:n,...e},t)=>a.jsx(W4,{className:ee("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:a.jsx(bY,{className:ee("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Rs.displayName=W4.displayName;var wY=[" ","Enter","ArrowUp","ArrowDown"],SY=[" ","Enter"],Uy="Select",[Qw,Jw,NY]=Ny(Uy),[Ym,jQ]=Nn(Uy,[NY,Vm]),Zw=Vm(),[jY,Rc]=Ym(Uy),[CY,AY]=Ym(Uy),G4=n=>{const{__scopeSelect:e,children:t,open:s,defaultOpen:r,onOpenChange:i,value:o,defaultValue:l,onValueChange:d,dir:u,name:h,autoComplete:f,disabled:m,required:p,form:b}=n,g=Zw(e),[N,v]=x.useState(null),[y,S]=x.useState(null),[w,j]=x.useState(!1),E=Wm(u),[T=!1,P]=Ds({prop:s,defaultProp:r,onChange:i}),[_,R]=Ds({prop:o,defaultProp:l,onChange:d}),I=x.useRef(null),L=N?b||!!N.closest("form"):!0,[U,B]=x.useState(new Set),Q=Array.from(U).map(F=>F.props.value).join(";");return a.jsx(BA,{...g,children:a.jsxs(jY,{required:p,scope:e,trigger:N,onTriggerChange:v,valueNode:y,onValueNodeChange:S,valueNodeHasChildren:w,onValueNodeHasChildrenChange:j,contentId:$r(),value:_,onValueChange:R,open:T,onOpenChange:P,dir:E,triggerPointerDownPosRef:I,disabled:m,children:[a.jsx(Qw.Provider,{scope:e,children:a.jsx(CY,{scope:n.__scopeSelect,onNativeOptionAdd:x.useCallback(F=>{B(H=>new Set(H).add(F))},[]),onNativeOptionRemove:x.useCallback(F=>{B(H=>{const $=new Set(H);return $.delete(F),$})},[]),children:t})}),L?a.jsxs(x3,{"aria-hidden":!0,required:p,tabIndex:-1,name:h,autoComplete:f,value:_,onChange:F=>R(F.target.value),disabled:m,form:b,children:[_===void 0?a.jsx("option",{value:""}):null,Array.from(U)]},Q):null]})})};G4.displayName=Uy;var q4="SelectTrigger",K4=x.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:s=!1,...r}=n,i=Zw(t),o=Rc(q4,t),l=o.disabled||s,d=we(e,o.onTriggerChange),u=Jw(t),h=x.useRef("touch"),[f,m,p]=y3(g=>{const N=u().filter(S=>!S.disabled),v=N.find(S=>S.value===o.value),y=v3(N,g,v);y!==void 0&&o.onValueChange(y.value)}),b=g=>{l||(o.onOpenChange(!0),p()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return a.jsx(Ew,{asChild:!0,...i,children:a.jsx(pe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":g3(o.value)?"":void 0,...r,ref:d,onClick:oe(r.onClick,g=>{g.currentTarget.focus(),h.current!=="mouse"&&b(g)}),onPointerDown:oe(r.onPointerDown,g=>{h.current=g.pointerType;const N=g.target;N.hasPointerCapture(g.pointerId)&&N.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(b(g),g.preventDefault())}),onKeyDown:oe(r.onKeyDown,g=>{const N=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&m(g.key),!(N&&g.key===" ")&&wY.includes(g.key)&&(b(),g.preventDefault())})})})});K4.displayName=q4;var Y4="SelectValue",X4=x.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:r,children:i,placeholder:o="",...l}=n,d=Rc(Y4,t),{onValueNodeHasChildrenChange:u}=d,h=i!==void 0,f=we(e,d.onValueNodeChange);return Jt(()=>{u(h)},[u,h]),a.jsx(pe.span,{...l,ref:f,style:{pointerEvents:"none"},children:g3(d.value)?a.jsx(a.Fragment,{children:o}):i})});X4.displayName=Y4;var EY="SelectIcon",Q4=x.forwardRef((n,e)=>{const{__scopeSelect:t,children:s,...r}=n;return a.jsx(pe.span,{"aria-hidden":!0,...r,ref:e,children:s||"▼"})});Q4.displayName=EY;var kY="SelectPortal",J4=n=>a.jsx(jy,{asChild:!0,...n});J4.displayName=kY;var _u="SelectContent",Z4=x.forwardRef((n,e)=>{const t=Rc(_u,n.__scopeSelect),[s,r]=x.useState();if(Jt(()=>{r(new DocumentFragment)},[]),!t.open){const i=s;return i?Du.createPortal(a.jsx(e3,{scope:n.__scopeSelect,children:a.jsx(Qw.Slot,{scope:n.__scopeSelect,children:a.jsx("div",{children:n.children})})}),i):null}return a.jsx(t3,{...n,ref:e})});Z4.displayName=_u;var Yr=10,[e3,Dc]=Ym(_u),TY="SelectContentImpl",PY=Nu("SelectContent.RemoveScroll"),t3=x.forwardRef((n,e)=>{const{__scopeSelect:t,position:s="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:d,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:b,hideWhenDetached:g,avoidCollisions:N,...v}=n,y=Rc(_u,t),[S,w]=x.useState(null),[j,E]=x.useState(null),T=we(e,V=>w(V)),[P,_]=x.useState(null),[R,I]=x.useState(null),L=Jw(t),[U,B]=x.useState(!1),Q=x.useRef(!1);x.useEffect(()=>{if(S)return WA(S)},[S]),VA();const F=x.useCallback(V=>{const[se,...ve]=L().map(xe=>xe.ref.current),[ae]=ve.slice(-1),ce=document.activeElement;for(const xe of V)if(xe===ce||(xe==null||xe.scrollIntoView({block:"nearest"}),xe===se&&j&&(j.scrollTop=0),xe===ae&&j&&(j.scrollTop=j.scrollHeight),xe==null||xe.focus(),document.activeElement!==ce))return},[L,j]),H=x.useCallback(()=>F([P,S]),[F,P,S]);x.useEffect(()=>{U&&H()},[U,H]);const{onOpenChange:$,triggerPointerDownPosRef:K}=y;x.useEffect(()=>{if(S){let V={x:0,y:0};const se=ae=>{var ce,xe;V={x:Math.abs(Math.round(ae.pageX)-(((ce=K.current)==null?void 0:ce.x)??0)),y:Math.abs(Math.round(ae.pageY)-(((xe=K.current)==null?void 0:xe.y)??0))}},ve=ae=>{V.x<=10&&V.y<=10?ae.preventDefault():S.contains(ae.target)||$(!1),document.removeEventListener("pointermove",se),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",se),document.addEventListener("pointerup",ve,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",se),document.removeEventListener("pointerup",ve,{capture:!0})}}},[S,$,K]),x.useEffect(()=>{const V=()=>$(!1);return window.addEventListener("blur",V),window.addEventListener("resize",V),()=>{window.removeEventListener("blur",V),window.removeEventListener("resize",V)}},[$]);const[D,M]=y3(V=>{const se=L().filter(ce=>!ce.disabled),ve=se.find(ce=>ce.ref.current===document.activeElement),ae=v3(se,V,ve);ae&&setTimeout(()=>ae.ref.current.focus())}),q=x.useCallback((V,se,ve)=>{const ae=!Q.current&&!ve;(y.value!==void 0&&y.value===se||ae)&&(_(V),ae&&(Q.current=!0))},[y.value]),z=x.useCallback(()=>S==null?void 0:S.focus(),[S]),G=x.useCallback((V,se,ve)=>{const ae=!Q.current&&!ve;(y.value!==void 0&&y.value===se||ae)&&I(V)},[y.value]),W=s==="popper"?aC:n3,X=W===aC?{side:l,sideOffset:d,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:b,hideWhenDetached:g,avoidCollisions:N}:{};return a.jsx(e3,{scope:t,content:S,viewport:j,onViewportChange:E,itemRefCallback:q,selectedItem:P,onItemLeave:z,itemTextRefCallback:G,focusSelectedItem:H,selectedItemText:R,position:s,isPositioned:U,searchRef:D,children:a.jsx(Dw,{as:PY,allowPinchZoom:!0,children:a.jsx(Mw,{asChild:!0,trapped:y.open,onMountAutoFocus:V=>{V.preventDefault()},onUnmountAutoFocus:oe(r,V=>{var se;(se=y.trigger)==null||se.focus({preventScroll:!0}),V.preventDefault()}),children:a.jsx(Bm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:V=>V.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:a.jsx(W,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:V=>V.preventDefault(),...v,...X,onPlaced:()=>B(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:oe(v.onKeyDown,V=>{const se=V.ctrlKey||V.altKey||V.metaKey;if(V.key==="Tab"&&V.preventDefault(),!se&&V.key.length===1&&M(V.key),["ArrowUp","ArrowDown","Home","End"].includes(V.key)){let ae=L().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);if(["ArrowUp","End"].includes(V.key)&&(ae=ae.slice().reverse()),["ArrowUp","ArrowDown"].includes(V.key)){const ce=V.target,xe=ae.indexOf(ce);ae=ae.slice(xe+1)}setTimeout(()=>F(ae)),V.preventDefault()}})})})})})})});t3.displayName=TY;var _Y="SelectItemAlignedPosition",n3=x.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:s,...r}=n,i=Rc(_u,t),o=Dc(_u,t),[l,d]=x.useState(null),[u,h]=x.useState(null),f=we(e,T=>h(T)),m=Jw(t),p=x.useRef(!1),b=x.useRef(!0),{viewport:g,selectedItem:N,selectedItemText:v,focusSelectedItem:y}=o,S=x.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&g&&N&&v){const T=i.trigger.getBoundingClientRect(),P=u.getBoundingClientRect(),_=i.valueNode.getBoundingClientRect(),R=v.getBoundingClientRect();if(i.dir!=="rtl"){const ce=R.left-P.left,xe=_.left-ce,ge=T.left-xe,le=T.width+ge,_e=Math.max(le,P.width),Le=window.innerWidth-Yr,At=bg(xe,[Yr,Math.max(Yr,Le-_e)]);l.style.minWidth=le+"px",l.style.left=At+"px"}else{const ce=P.right-R.right,xe=window.innerWidth-_.right-ce,ge=window.innerWidth-T.right-xe,le=T.width+ge,_e=Math.max(le,P.width),Le=window.innerWidth-Yr,At=bg(xe,[Yr,Math.max(Yr,Le-_e)]);l.style.minWidth=le+"px",l.style.right=At+"px"}const I=m(),L=window.innerHeight-Yr*2,U=g.scrollHeight,B=window.getComputedStyle(u),Q=parseInt(B.borderTopWidth,10),F=parseInt(B.paddingTop,10),H=parseInt(B.borderBottomWidth,10),$=parseInt(B.paddingBottom,10),K=Q+F+U+$+H,D=Math.min(N.offsetHeight*5,K),M=window.getComputedStyle(g),q=parseInt(M.paddingTop,10),z=parseInt(M.paddingBottom,10),G=T.top+T.height/2-Yr,W=L-G,X=N.offsetHeight/2,V=N.offsetTop+X,se=Q+F+V,ve=K-se;if(se<=G){const ce=I.length>0&&N===I[I.length-1].ref.current;l.style.bottom="0px";const xe=u.clientHeight-g.offsetTop-g.offsetHeight,ge=Math.max(W,X+(ce?z:0)+xe+H),le=se+ge;l.style.height=le+"px"}else{const ce=I.length>0&&N===I[0].ref.current;l.style.top="0px";const ge=Math.max(G,Q+g.offsetTop+(ce?q:0)+X)+ve;l.style.height=ge+"px",g.scrollTop=se-G+g.offsetTop}l.style.margin=`${Yr}px 0`,l.style.minHeight=D+"px",l.style.maxHeight=L+"px",s==null||s(),requestAnimationFrame(()=>p.current=!0)}},[m,i.trigger,i.valueNode,l,u,g,N,v,i.dir,s]);Jt(()=>S(),[S]);const[w,j]=x.useState();Jt(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const E=x.useCallback(T=>{T&&b.current===!0&&(S(),y==null||y(),b.current=!1)},[S,y]);return a.jsx(RY,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:a.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:a.jsx(pe.div,{...r,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});n3.displayName=_Y;var MY="SelectPopperPosition",aC=x.forwardRef((n,e)=>{const{__scopeSelect:t,align:s="start",collisionPadding:r=Yr,...i}=n,o=Zw(t);return a.jsx($A,{...o,...i,ref:e,align:s,collisionPadding:r,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});aC.displayName=MY;var[RY,ME]=Ym(_u,{}),oC="SelectViewport",s3=x.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:s,...r}=n,i=Dc(oC,t),o=ME(oC,t),l=we(e,i.onViewportChange),d=x.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),a.jsx(Qw.Slot,{scope:t,children:a.jsx(pe.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:oe(r.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const p=Math.abs(d.current-h.scrollTop);if(p>0){const b=window.innerHeight-Yr*2,g=parseFloat(f.style.minHeight),N=parseFloat(f.style.height),v=Math.max(g,N);if(v<b){const y=v+p,S=Math.min(b,y),w=y-S;f.style.height=S+"px",f.style.bottom==="0px"&&(h.scrollTop=w>0?w:0,f.style.justifyContent="flex-end")}}}d.current=h.scrollTop})})})]})});s3.displayName=oC;var r3="SelectGroup",[DY,IY]=Ym(r3),LY=x.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,r=$r();return a.jsx(DY,{scope:t,id:r,children:a.jsx(pe.div,{role:"group","aria-labelledby":r,...s,ref:e})})});LY.displayName=r3;var i3="SelectLabel",a3=x.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,r=IY(i3,t);return a.jsx(pe.div,{id:r.id,...s,ref:e})});a3.displayName=i3;var Pb="SelectItem",[FY,o3]=Ym(Pb),l3=x.forwardRef((n,e)=>{const{__scopeSelect:t,value:s,disabled:r=!1,textValue:i,...o}=n,l=Rc(Pb,t),d=Dc(Pb,t),u=l.value===s,[h,f]=x.useState(i??""),[m,p]=x.useState(!1),b=we(e,y=>{var S;return(S=d.itemRefCallback)==null?void 0:S.call(d,y,s,r)}),g=$r(),N=x.useRef("touch"),v=()=>{r||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(FY,{scope:t,value:s,disabled:r,textId:g,isSelected:u,onItemTextChange:x.useCallback(y=>{f(S=>S||((y==null?void 0:y.textContent)??"").trim())},[]),children:a.jsx(Qw.ItemSlot,{scope:t,value:s,disabled:r,textValue:h,children:a.jsx(pe.div,{role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:b,onFocus:oe(o.onFocus,()=>p(!0)),onBlur:oe(o.onBlur,()=>p(!1)),onClick:oe(o.onClick,()=>{N.current!=="mouse"&&v()}),onPointerUp:oe(o.onPointerUp,()=>{N.current==="mouse"&&v()}),onPointerDown:oe(o.onPointerDown,y=>{N.current=y.pointerType}),onPointerMove:oe(o.onPointerMove,y=>{var S;N.current=y.pointerType,r?(S=d.onItemLeave)==null||S.call(d):N.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:oe(o.onPointerLeave,y=>{var S;y.currentTarget===document.activeElement&&((S=d.onItemLeave)==null||S.call(d))}),onKeyDown:oe(o.onKeyDown,y=>{var w;((w=d.searchRef)==null?void 0:w.current)!==""&&y.key===" "||(SY.includes(y.key)&&v(),y.key===" "&&y.preventDefault())})})})})});l3.displayName=Pb;var Op="SelectItemText",c3=x.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:r,...i}=n,o=Rc(Op,t),l=Dc(Op,t),d=o3(Op,t),u=AY(Op,t),[h,f]=x.useState(null),m=we(e,v=>f(v),d.onItemTextChange,v=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,v,d.value,d.disabled)}),p=h==null?void 0:h.textContent,b=x.useMemo(()=>a.jsx("option",{value:d.value,disabled:d.disabled,children:p},d.value),[d.disabled,d.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:N}=u;return Jt(()=>(g(b),()=>N(b)),[g,N,b]),a.jsxs(a.Fragment,{children:[a.jsx(pe.span,{id:d.textId,...i,ref:m}),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Du.createPortal(i.children,o.valueNode):null]})});c3.displayName=Op;var d3="SelectItemIndicator",u3=x.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return o3(d3,t).isSelected?a.jsx(pe.span,{"aria-hidden":!0,...s,ref:e}):null});u3.displayName=d3;var lC="SelectScrollUpButton",h3=x.forwardRef((n,e)=>{const t=Dc(lC,n.__scopeSelect),s=ME(lC,n.__scopeSelect),[r,i]=x.useState(!1),o=we(e,s.onScrollButtonChange);return Jt(()=>{if(t.viewport&&t.isPositioned){let l=function(){const u=d.scrollTop>0;i(u)};const d=t.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),r?a.jsx(m3,{...n,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=t;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});h3.displayName=lC;var cC="SelectScrollDownButton",f3=x.forwardRef((n,e)=>{const t=Dc(cC,n.__scopeSelect),s=ME(cC,n.__scopeSelect),[r,i]=x.useState(!1),o=we(e,s.onScrollButtonChange);return Jt(()=>{if(t.viewport&&t.isPositioned){let l=function(){const u=d.scrollHeight-d.clientHeight,h=Math.ceil(d.scrollTop)<u;i(h)};const d=t.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),r?a.jsx(m3,{...n,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=t;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});f3.displayName=cC;var m3=x.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:s,...r}=n,i=Dc("SelectScrollButton",t),o=x.useRef(null),l=Jw(t),d=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>d(),[d]),Jt(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),a.jsx(pe.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:oe(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:oe(r.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:oe(r.onPointerLeave,()=>{d()})})}),OY="SelectSeparator",p3=x.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return a.jsx(pe.div,{"aria-hidden":!0,...s,ref:e})});p3.displayName=OY;var dC="SelectArrow",BY=x.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,r=Zw(t),i=Rc(dC,t),o=Dc(dC,t);return i.open&&o.position==="popper"?a.jsx(zA,{...r,...s,ref:e}):null});BY.displayName=dC;function g3(n){return n===""||n===void 0}var x3=x.forwardRef((n,e)=>{const{value:t,...s}=n,r=x.useRef(null),i=we(e,r),o=Bw(t);return x.useEffect(()=>{const l=r.current,d=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(d,"value").set;if(o!==t&&h){const f=new Event("change",{bubbles:!0});h.call(l,t),l.dispatchEvent(f)}},[o,t]),a.jsx(Cy,{asChild:!0,children:a.jsx("select",{...s,ref:i,defaultValue:t})})});x3.displayName="BubbleSelect";function y3(n){const e=Gt(n),t=x.useRef(""),s=x.useRef(0),r=x.useCallback(o=>{const l=t.current+o;e(l),function d(u){t.current=u,window.clearTimeout(s.current),u!==""&&(s.current=window.setTimeout(()=>d(""),1e3))}(l)},[e]),i=x.useCallback(()=>{t.current="",window.clearTimeout(s.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(s.current),[]),[t,r,i]}function v3(n,e,t){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let o=$Y(n,Math.max(i,0));r.length===1&&(o=o.filter(u=>u!==t));const d=o.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return d!==t?d:void 0}function $Y(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var zY=G4,b3=K4,UY=X4,HY=Q4,VY=J4,w3=Z4,WY=s3,S3=a3,N3=l3,GY=c3,qY=u3,j3=h3,C3=f3,A3=p3;const _g=zY,Mg=UY,Rm=x.forwardRef(({className:n,children:e,...t},s)=>a.jsxs(b3,{ref:s,className:ee("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,a.jsx(HY,{asChild:!0,children:a.jsx(bw,{className:"h-4 w-4 opacity-50"})})]}));Rm.displayName=b3.displayName;const E3=x.forwardRef(({className:n,...e},t)=>a.jsx(j3,{ref:t,className:ee("flex cursor-default items-center justify-center py-1",n),...e,children:a.jsx(RR,{className:"h-4 w-4"})}));E3.displayName=j3.displayName;const k3=x.forwardRef(({className:n,...e},t)=>a.jsx(C3,{ref:t,className:ee("flex cursor-default items-center justify-center py-1",n),...e,children:a.jsx(bw,{className:"h-4 w-4"})}));k3.displayName=C3.displayName;const Dm=x.forwardRef(({className:n,children:e,position:t="popper",...s},r)=>a.jsx(VY,{children:a.jsxs(w3,{ref:r,className:ee("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...s,children:[a.jsx(E3,{}),a.jsx(WY,{className:ee("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(k3,{})]})}));Dm.displayName=w3.displayName;const KY=x.forwardRef(({className:n,...e},t)=>a.jsx(S3,{ref:t,className:ee("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));KY.displayName=S3.displayName;const Lr=x.forwardRef(({className:n,children:e,...t},s)=>a.jsxs(N3,{ref:s,className:ee("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(qY,{children:a.jsx(SA,{className:"h-4 w-4"})})}),a.jsx(GY,{children:e})]}));Lr.displayName=N3.displayName;const YY=x.forwardRef(({className:n,...e},t)=>a.jsx(A3,{ref:t,className:ee("-mx-1 my-1 h-px bg-muted",n),...e}));YY.displayName=A3.displayName;const T3=x.forwardRef(({className:n,...e},t)=>a.jsx("span",{ref:t,className:ee("absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0",n),...e}));T3.displayName="VisuallyHidden";const XY="/assets/lord_jagannath_deity_12203068-83NeaDyr.jpg";function QY({open:n,onOpenChange:e,sandhyaName:t}){const s=()=>{e(!1)},r=()=>{e(!1)},i=()=>{e(!1)};return a.jsx(Nt,{open:n,onOpenChange:e,children:a.jsxs(xt,{className:"max-w-full h-screen p-0 border-0",children:[a.jsxs(T3,{children:[a.jsxs(Ct,{children:[t," Alarm"]}),a.jsxs(bo,{children:["It's time for ",t,". Choose to begin your Sadhana practice, dismiss the alarm, or snooze for 5 minutes."]})]}),a.jsxs("div",{className:"relative h-full w-full flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${XY})`}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/50 to-black/30"}),a.jsxs("div",{className:"relative z-10 text-center space-y-8 px-6",children:[a.jsx("h1",{className:"text-5xl font-bold font-serif text-white drop-shadow-lg","data-testid":"text-sandhya-name",children:t}),a.jsxs("div",{className:"flex flex-col gap-4 items-center mt-12",children:[a.jsx(O,{size:"lg",className:"px-12 py-6 text-lg rounded-full",onClick:s,"data-testid":"button-begin-sadhana",children:"Begin Sadhana"}),a.jsx(O,{variant:"outline",size:"lg",className:"px-12 py-6 text-lg rounded-full backdrop-blur-md bg-white/10 border-white/30 text-white hover:bg-white/20",onClick:r,"data-testid":"button-dismiss-alarm",children:"Dismiss"})]}),a.jsx("div",{className:"mt-8",children:a.jsx(O,{variant:"ghost",size:"sm",className:"text-white/80 hover:text-white",onClick:i,"data-testid":"button-snooze",children:"Snooze for 5 minutes"})})]})]})]})})}function JY({size:n="md",className:e,text:t}){const s={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};return a.jsxs("div",{className:ee("flex items-center justify-center gap-2",e),children:[a.jsx(We,{className:ee("animate-spin text-muted-foreground",s[n])}),t&&a.jsx("span",{className:"text-sm text-muted-foreground",children:t})]})}function eP({isVisible:n,text:e,className:t}){return n?a.jsx("div",{className:ee("absolute inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-50",t),children:a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx(We,{className:"h-8 w-8 animate-spin text-primary"}),e&&a.jsx("p",{className:"text-sm text-muted-foreground",children:e})]})}):null}function ZY(){const{toast:n}=On(),[e,t]=x.useState(!1),[s,r]=x.useState(null),[i]=x.useState(new Audio),{data:o,isLoading:l}=Te({queryKey:["/api/alarm-settings"]}),{data:d=[],isLoading:u}=Te({queryKey:["/api/alarm-sounds"]}),h=d.find(g=>g.isDefault),f=(o==null?void 0:o.alarmSoundId)||(h==null?void 0:h.id),m=Oe({mutationFn:async g=>await Ve("POST","/api/alarm-settings",{...o,...g}),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/alarm-settings"]}),n({title:"Settings updated"})},onError:g=>{n({title:"Error",description:g.message||"Failed to update settings",variant:"destructive"})}}),p=(g,N)=>{m.mutate({[g]:N})},b=async g=>{if(s===g.id)i.pause(),r(null);else{i.src=g.url,i.volume=((o==null?void 0:o.volume)||80)/100;try{await i.play(),r(g.id),i.onended=()=>r(null)}catch{n({title:"Playback Error",description:"Failed to play alarm sound. The audio file may not be available.",variant:"destructive"}),r(null)}}};return x.useEffect(()=>()=>{i.pause()},[i]),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-3xl font-bold font-serif",children:"Alarm Configuration"}),a.jsx("p",{className:"text-muted-foreground",children:"Set up reminders for your daily Sandhya practices"})]}),a.jsx(eP,{isVisible:l,text:"Loading settings..."}),a.jsxs(Z,{className:"p-6 space-y-6 relative","data-testid":"alarm-settings",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Alarm Settings"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Y,{htmlFor:"pratah-alarm",className:"text-base font-semibold",children:"Pratah Sandhya"}),a.jsx(Rs,{id:"pratah-alarm",checked:o==null?void 0:o.pratahEnabled,onCheckedChange:g=>p("pratahEnabled",g),"data-testid":"switch-pratah-alarm"})]}),a.jsxs("div",{className:"flex items-center gap-2 pl-4",children:[a.jsx(Y,{htmlFor:"pratah-time",className:"text-sm text-muted-foreground",children:"Time:"}),a.jsx("input",{type:"time",id:"pratah-time",value:(o==null?void 0:o.pratahTime)||"05:30",onChange:g=>m.mutate({pratahTime:g.target.value}),disabled:!(o!=null&&o.pratahEnabled),className:"px-3 py-1.5 rounded-md border bg-background text-sm disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"input-pratah-time"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"(3:35 AM - 6:30 AM)"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Y,{htmlFor:"madhyahna-alarm",className:"text-base font-semibold",children:"Madhyahna Sandhya"}),a.jsx(Rs,{id:"madhyahna-alarm",checked:o==null?void 0:o.madhyahnaEnabled,onCheckedChange:g=>p("madhyahnaEnabled",g),"data-testid":"switch-madhyahna-alarm"})]}),a.jsxs("div",{className:"flex items-center gap-2 pl-4",children:[a.jsx(Y,{htmlFor:"madhyahna-time",className:"text-sm text-muted-foreground",children:"Time:"}),a.jsx("input",{type:"time",id:"madhyahna-time",value:(o==null?void 0:o.madhyahnaTime)||"12:00",onChange:g=>m.mutate({madhyahnaTime:g.target.value}),disabled:!(o!=null&&o.madhyahnaEnabled),className:"px-3 py-1.5 rounded-md border bg-background text-sm disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"input-madhyahna-time"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"(11:30 AM - 1:00 PM)"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Y,{htmlFor:"sayam-alarm",className:"text-base font-semibold",children:"Sayam Sandhya"}),a.jsx(Rs,{id:"sayam-alarm",checked:o==null?void 0:o.sayamEnabled,onCheckedChange:g=>p("sayamEnabled",g),"data-testid":"switch-sayam-alarm"})]}),a.jsxs("div",{className:"flex items-center gap-2 pl-4",children:[a.jsx(Y,{htmlFor:"sayam-time",className:"text-sm text-muted-foreground",children:"Time:"}),a.jsx("input",{type:"time",id:"sayam-time",value:(o==null?void 0:o.sayamTime)||"18:00",onChange:g=>m.mutate({sayamTime:g.target.value}),disabled:!(o!=null&&o.sayamEnabled),className:"px-3 py-1.5 rounded-md border bg-background text-sm disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"input-sayam-time"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"(5:30 PM - 6:30 PM)"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"alarm-sound",children:"Alarm Sound"}),a.jsxs(_g,{value:f,onValueChange:g=>m.mutate({alarmSoundId:g}),children:[a.jsx(Rm,{id:"alarm-sound","data-testid":"select-alarm-sound",children:a.jsx(Mg,{placeholder:"Select alarm sound"})}),a.jsx(Dm,{children:d.map(g=>a.jsxs(Lr,{value:g.id,children:[g.name," ",g.isDefault&&"(Default)"]},g.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Y,{htmlFor:"alarm-volume",children:"Volume"}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:[(o==null?void 0:o.volume)||80,"%"]})]}),a.jsx(Sg,{id:"alarm-volume",value:[(o==null?void 0:o.volume)||80],onValueChange:g=>m.mutate({volume:g[0]}),max:100,step:1,"data-testid":"slider-alarm-volume"})]})]}),a.jsxs(Z,{className:"p-6 space-y-4 relative",children:[a.jsx(eP,{isVisible:u,text:"Loading sounds..."}),a.jsx("h3",{className:"font-semibold",children:"Available Alarm Sounds"}),a.jsx("div",{className:"space-y-3",children:d.map(g=>a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-md","data-testid":`sound-preview-${g.id}`,children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"font-medium",children:g.name}),g.isDefault&&a.jsx("span",{className:"text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:"Default"})]}),g.description&&a.jsx("p",{className:"text-sm text-muted-foreground",children:g.description})]}),a.jsx(O,{size:"icon",variant:"ghost",onClick:()=>b(g),disabled:m.isPending,"data-testid":`button-play-sound-${g.id}`,children:s===g.id?a.jsx(Cm,{className:"h-4 w-4"}):a.jsx(yc,{className:"h-4 w-4"})})]},g.id))})]}),a.jsxs(Z,{className:"p-6 space-y-4",children:[a.jsx("h3",{className:"font-semibold",children:"Test Alarm Interface"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Preview how the alarm will appear when it's time for Sandhya"}),a.jsx(O,{onClick:()=>t(!0),"data-testid":"button-test-alarm",children:"Show Test Alarm"})]}),a.jsx(QY,{open:e,onOpenChange:t,sandhyaName:"Pratah Sandhya"})]})}const eX="TrisandhyaAlarms",tX=2,Un="alarms",vr="customTones",Pi="alarmInstances";class nX{constructor(){this.db=null}async init(){return new Promise((e,t)=>{const s=indexedDB.open(eX,tX);s.onerror=()=>{var r;return t(new Error(`Failed to open database: ${((r=s.error)==null?void 0:r.message)||"Unknown error"}`))},s.onsuccess=()=>{this.db=s.result,e()},s.onupgradeneeded=r=>{const i=r.target.result;if(!i.objectStoreNames.contains(Un)){const o=i.createObjectStore(Un,{keyPath:"id"});o.createIndex("enabled","enabled",{unique:!1}),o.createIndex("time","time",{unique:!1})}if(i.objectStoreNames.contains(vr)||i.createObjectStore(vr,{keyPath:"id"}),!i.objectStoreNames.contains(Pi)){const o=i.createObjectStore(Pi,{keyPath:"id"});o.createIndex("alarmId","alarmId",{unique:!1}),o.createIndex("scheduledTime","scheduledTime",{unique:!1})}}})}async ensureDB(){if(this.db||await this.init(),!this.db)throw new Error("Failed to initialize database");return this.db}async createAlarm(e){const t=await this.ensureDB(),s=Date.now(),r={...e,id:`alarm_${crypto.randomUUID()}`,createdAt:s,updatedAt:s};return new Promise((i,o)=>{const l=t.transaction([Un],"readwrite");l.onerror=()=>{var h;return o(new Error(`Transaction failed: ${((h=l.error)==null?void 0:h.message)||"Unknown error"}`))};const u=l.objectStore(Un).add(r);u.onsuccess=()=>i(r),u.onerror=()=>{var h;return o(new Error(`Failed to create alarm: ${((h=u.error)==null?void 0:h.message)||"Unknown error"}`))}})}async updateAlarm(e,t){const s=await this.ensureDB(),r=await this.getAlarm(e);if(!r)throw new Error("Alarm not found");const i={...r,...t,id:r.id,createdAt:r.createdAt,updatedAt:Date.now()};return new Promise((o,l)=>{const d=s.transaction([Un],"readwrite");d.onerror=()=>{var f;return l(new Error(`Transaction failed: ${((f=d.error)==null?void 0:f.message)||"Unknown error"}`))};const h=d.objectStore(Un).put(i);h.onsuccess=()=>o(),h.onerror=()=>{var f;return l(new Error(`Failed to update alarm: ${((f=h.error)==null?void 0:f.message)||"Unknown error"}`))}})}async deleteAlarm(e){const t=await this.ensureDB();return new Promise((s,r)=>{const i=t.transaction([Un],"readwrite");i.onerror=()=>{var d;return r(new Error(`Transaction failed: ${((d=i.error)==null?void 0:d.message)||"Unknown error"}`))};const l=i.objectStore(Un).delete(e);l.onsuccess=()=>s(),l.onerror=()=>{var d;return r(new Error(`Failed to delete alarm: ${((d=l.error)==null?void 0:d.message)||"Unknown error"}`))}})}async getAlarm(e){const t=await this.ensureDB();return new Promise((s,r)=>{const l=t.transaction([Un],"readonly").objectStore(Un).get(e);l.onsuccess=()=>s(l.result||null),l.onerror=()=>r(l.error)})}async getAllAlarms(){const e=await this.ensureDB();return new Promise((t,s)=>{const o=e.transaction([Un],"readonly").objectStore(Un).getAll();o.onsuccess=()=>t(o.result||[]),o.onerror=()=>s(o.error)})}async getEnabledAlarms(){const e=await this.ensureDB();return new Promise((t,s)=>{const l=e.transaction([Un],"readonly").objectStore(Un).index("enabled").getAll(IDBKeyRange.only(!0));l.onsuccess=()=>t(l.result||[]),l.onerror=()=>s(l.error)})}async addCustomTone(e){const t=await this.ensureDB(),s={...e,id:`tone_${crypto.randomUUID()}`,createdAt:Date.now()};return new Promise((r,i)=>{const d=t.transaction([vr],"readwrite").objectStore(vr).add(s);d.onsuccess=()=>r(s),d.onerror=()=>i(d.error)})}async deleteCustomTone(e){const t=await this.ensureDB();return new Promise((s,r)=>{const l=t.transaction([vr],"readwrite").objectStore(vr).delete(e);l.onsuccess=()=>s(),l.onerror=()=>r(l.error)})}async getAllCustomTones(){const e=await this.ensureDB();return new Promise((t,s)=>{const o=e.transaction([vr],"readonly").objectStore(vr).getAll();o.onsuccess=()=>t(o.result||[]),o.onerror=()=>s(o.error)})}async getCustomTone(e){const t=await this.ensureDB();return new Promise((s,r)=>{const l=t.transaction([vr],"readonly").objectStore(vr).get(e);l.onsuccess=()=>s(l.result||null),l.onerror=()=>r(l.error)})}async createAlarmInstance(e){const t=await this.ensureDB(),s={...e,id:`instance_${crypto.randomUUID()}`};return new Promise((r,i)=>{const d=t.transaction([Pi],"readwrite").objectStore(Pi).add(s);d.onsuccess=()=>r(s),d.onerror=()=>i(d.error)})}async updateAlarmInstance(e,t){const s=await this.ensureDB();return new Promise((r,i)=>{const l=s.transaction([Pi],"readwrite").objectStore(Pi),d=l.get(e);d.onsuccess=()=>{const u=d.result;if(!u){i(new Error("Instance not found"));return}const h={...u,...t},f=l.put(h);f.onsuccess=()=>r(),f.onerror=()=>i(f.error)},d.onerror=()=>i(d.error)})}async getAlarmInstances(e){const t=await this.ensureDB();return new Promise((s,r)=>{const d=t.transaction([Pi],"readonly").objectStore(Pi).index("alarmId").getAll(e);d.onsuccess=()=>s(d.result||[]),d.onerror=()=>r(d.error)})}async clearAllData(){const e=await this.ensureDB();return new Promise((t,s)=>{const r=e.transaction([Un,vr,Pi],"readwrite");r.objectStore(Un).clear(),r.objectStore(vr).clear(),r.objectStore(Pi).clear(),r.oncomplete=()=>t(),r.onerror=()=>s(r.error)})}}const tn=new nX;class sX{constructor(){this.checkInterval=null,this.onAlarmTrigger=null,this.triggeredToday=new Set,this.permissionGranted=!1,this.midnightTimeoutId=null}async initialize(e){if(this.onAlarmTrigger=e,"Notification"in window){const t=await Notification.requestPermission();if(this.permissionGranted=t==="granted",!this.permissionGranted)return!1}else return!1;return await tn.init(),this.startMonitoring(),await this.rescheduleAllAlarms(),!0}startMonitoring(){this.checkInterval=window.setInterval(()=>{this.checkDueAlarms()},3e4),this.checkDueAlarms(),this.scheduleMidnightReset()}scheduleMidnightReset(){const e=new Date,t=new Date(e);t.setDate(t.getDate()+1),t.setHours(0,0,0,0);const s=t.getTime()-e.getTime();this.midnightTimeoutId=window.setTimeout(()=>{this.triggeredToday.clear(),localStorage.setItem("lastAlarmReset",new Date().toDateString()),this.scheduleMidnightReset()},s)}async checkDueAlarms(){try{const e=await tn.getEnabledAlarms(),t=new Date,s=`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`,r=t.getDay(),i=t.toDateString();for(const o of e){const l=`${i}-${o.id}`,d=`${i}-${o.id}-pre`;if(!this.triggeredToday.has(l)){if(o.enablePreAlarm&&!this.triggeredToday.has(d)){const[u,h]=o.time.split(":").map(Number);let m=u*60+h-(o.preAlarmMinutes||0),p=r;m<0&&(m+=1440,p=(r-1+7)%7),t.getHours()*60+t.getMinutes()===m&&(o.repeatDays.length===0||o.repeatDays.includes(p))&&(this.triggerPreAlarm(o),this.triggeredToday.add(d))}o.time===s&&(o.repeatDays.length===0||o.repeatDays.includes(r))&&(this.triggerAlarm(o),this.triggeredToday.add(l),o.repeatDays.length===0&&await tn.updateAlarm(o.id,{enabled:!1}))}}}catch{}}triggerPreAlarm(e){if(this.permissionGranted&&new Notification("Pre-alarm",{body:`Gentle wake for ${e.label} in ${e.preAlarmMinutes} minutes`,icon:"/icon-192.png",badge:"/icon-192.png",tag:`pre-alarm-${e.id}`,requireInteraction:!1,silent:!0}),this.onAlarmTrigger){const t={...e,label:`${e.label} (Pre-alarm)`,volume:Math.min(20,e.volume*.3),vibrate:!1,fadeInDuration:10};this.onAlarmTrigger(t)}}triggerAlarm(e){this.showNotification(e),this.onAlarmTrigger&&this.onAlarmTrigger(e),tn.createAlarmInstance({alarmId:e.id,scheduledTime:Date.now(),triggered:!0,snoozed:!1,dismissed:!1})}showNotification(e){if(!this.permissionGranted)return;const t=new Notification(e.label||"Alarm",{body:`It's time for ${e.label}`,icon:"/icon-192.png",badge:"/icon-192.png",tag:`alarm-${e.id}`,requireInteraction:!0,silent:!1,data:{alarmId:e.id,time:e.time}});t.onclick=()=>{window.focus(),t.close()}}async scheduleAlarm(e){}async cancelAlarm(e){const s=`${new Date().toDateString()}-${e}`;this.triggeredToday.delete(s)}async snoozeAlarm(e,t){try{const s=await tn.getAlarm(e);if(!s)return;const r=new Date,i=new Date(r.getTime()+t*60*1e3),o=`${i.getHours().toString().padStart(2,"0")}:${i.getMinutes().toString().padStart(2,"0")}`;await tn.createAlarm({label:`${s.label} (Snoozed)`,time:o,enabled:!0,repeatDays:[],toneId:s.toneId,toneName:s.toneName,volume:s.volume,vibrate:s.vibrate,snoozeMinutes:s.snoozeMinutes,fadeInDuration:s.fadeInDuration,enablePreAlarm:!1,preAlarmMinutes:s.preAlarmMinutes});const l=await tn.getAlarmInstances(e),d=l[l.length-1];d&&await tn.updateAlarmInstance(d.id,{snoozed:!0})}catch{}}async dismissAlarm(e){try{const t=await tn.getAlarmInstances(e),s=t[t.length-1];s&&await tn.updateAlarmInstance(s.id,{dismissed:!0})}catch{}}async rescheduleAllAlarms(){try{const e=await tn.getEnabledAlarms();for(const t of e)await this.scheduleAlarm(t)}catch{}}getNextOccurrence(e){const t=new Date,[s,r]=e.time.split(":").map(Number);if(e.repeatDays.length===0){const d=new Date;return d.setHours(s,r,0,0),d<=t&&d.setDate(d.getDate()+1),d}const i=t.getDay(),o=t.getHours()*60+t.getMinutes(),l=s*60+r;if(e.repeatDays.includes(i)&&l>o){const d=new Date;return d.setHours(s,r,0,0),d}for(let d=1;d<=7;d++){const u=(i+d)%7;if(e.repeatDays.includes(u)){const h=new Date;return h.setDate(h.getDate()+d),h.setHours(s,r,0,0),h}}return null}cleanup(){this.checkInterval!==null&&(clearInterval(this.checkInterval),this.checkInterval=null),this.midnightTimeoutId!==null&&(clearTimeout(this.midnightTimeoutId),this.midnightTimeoutId=null)}}const Go=new sX;class rX{constructor(){this.audioContext=null,this.currentSource=null,this.gainNode=null,this.isPlaying=!1,this.loopTimeout=null,typeof window<"u"&&"AudioContext"in window&&(this.audioContext=new AudioContext,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination))}async playAlarmSound(e,t=80,s=!0,r=0){if(!(!this.audioContext||!this.gainNode))try{await this.stopAlarmSound(),this.audioContext.state==="suspended"&&await this.audioContext.resume();const i=t/100;r>0?(this.gainNode.gain.value=i*.05,this.gainNode.gain.linearRampToValueAtTime(i,this.audioContext.currentTime+r),s&&"vibrate"in navigator&&setTimeout(()=>{navigator.vibrate([500,250,500,250,500])},r*1e3)):(this.gainNode.gain.value=i,s&&"vibrate"in navigator&&navigator.vibrate([500,250,500,250,500])),e&&e.startsWith("data:")?await this.playCustomAudio(e):await this.playDefaultAlarmSound(),this.isPlaying=!0}catch{try{await this.playDefaultAlarmSound(),this.isPlaying=!0}catch{}}}async playCustomAudio(e){if(!(!this.audioContext||!this.gainNode))try{const s=await(await fetch(e)).arrayBuffer(),r=await this.audioContext.decodeAudioData(s);this.playBuffer(r)}catch{await this.playDefaultAlarmSound()}}async playDefaultAlarmSound(){if(!this.audioContext||!this.gainNode)return;const e=this.generateBellSound();this.playBuffer(e)}generateBellSound(){if(!this.audioContext)throw new Error("Audio context not available");const e=this.audioContext.sampleRate,s=this.audioContext.createBuffer(1,e*2,e),r=s.getChannelData(0);for(let i=0;i<r.length;i++){const o=i/e,l=Math.sin(2*Math.PI*523.25*o),d=Math.sin(2*Math.PI*659.25*o)*.5,u=Math.sin(2*Math.PI*783.99*o)*.3,h=Math.exp(-o*2.5);r[i]=(l+d+u)*h*.3}return s}playBuffer(e){if(!this.audioContext||!this.gainNode)return;const t=()=>{this.currentSource=this.audioContext.createBufferSource(),this.currentSource.buffer=e,this.currentSource.connect(this.gainNode),this.currentSource.start(),this.loopTimeout=window.setTimeout(()=>{this.isPlaying&&t()},(e.duration+.5)*1e3)};t()}async stopAlarmSound(){if(this.isPlaying=!1,"vibrate"in navigator&&navigator.vibrate(0),this.loopTimeout!==null&&(clearTimeout(this.loopTimeout),this.loopTimeout=null),this.currentSource){try{this.currentSource.stop()}catch{}this.currentSource.disconnect(),this.currentSource=null}}setVolume(e){this.gainNode&&(this.gainNode.gain.value=Math.max(0,Math.min(100,e))/100)}async testSound(e,t=80){await this.playAlarmSound(e,t,!1),setTimeout(()=>{this.stopAlarmSound()},3e3)}getIsPlaying(){return this.isPlaying}async cleanup(){await this.stopAlarmSound(),this.audioContext&&this.audioContext.state!=="closed"&&await this.audioContext.close(),this.audioContext=null,this.currentSource=null,this.gainNode=null,this.isPlaying=!1,this.loopTimeout=null}}const M0=new rX;function P3(){const[n,e]=x.useState({alarms:[],activeAlarm:null,isInitialized:!1,hasPermission:!1}),t=x.useCallback(async()=>{try{const f=await tn.getAllAlarms();e(m=>({...m,alarms:f}))}catch(f){console.error("Failed to load alarms:",f)}},[]),s=x.useCallback(async f=>{e(p=>({...p,activeAlarm:f}));let m=null;if(f.toneId&&!f.toneId.startsWith("default")&&!f.toneId.startsWith("gentle")&&!f.toneId.startsWith("classic"))try{const p=await tn.getCustomTone(f.toneId);p&&(m=p.dataUrl)}catch(p){console.error("Failed to load custom tone:",p)}M0.playAlarmSound(m,f.volume,f.vibrate,f.fadeInDuration)},[]);x.useEffect(()=>((async()=>{try{const m=await Go.initialize(s);e(p=>({...p,isInitialized:!0,hasPermission:m})),await t()}catch(m){console.error("Failed to initialize alarm system:",m)}})(),()=>{Go.cleanup()}),[s,t]);const r=x.useCallback(async f=>{try{const m=await tn.createAlarm(f);return m.enabled&&await Go.scheduleAlarm(m),await t(),m}catch(m){throw console.error("Failed to create alarm:",m),m}},[t]),i=x.useCallback(async(f,m)=>{try{await tn.updateAlarm(f,m);const p=await tn.getAlarm(f);p&&(p.enabled?await Go.scheduleAlarm(p):await Go.cancelAlarm(f)),await t()}catch(p){throw console.error("Failed to update alarm:",p),p}},[t]),o=x.useCallback(async f=>{try{await Go.cancelAlarm(f),await tn.deleteAlarm(f),await t()}catch(m){throw console.error("Failed to delete alarm:",m),m}},[t]),l=x.useCallback(async(f,m)=>{await i(f,{enabled:m})},[i]),d=x.useCallback(async()=>{n.activeAlarm&&(await M0.stopAlarmSound(),await Go.dismissAlarm(n.activeAlarm.id),e(f=>({...f,activeAlarm:null})))},[n.activeAlarm]),u=x.useCallback(async f=>{if(!n.activeAlarm)return;await M0.stopAlarmSound();const m=f||n.activeAlarm.snoozeMinutes;await Go.snoozeAlarm(n.activeAlarm.id,m),e(p=>({...p,activeAlarm:null}))},[n.activeAlarm]),h=x.useCallback(async()=>{if("Notification"in window){const f=await Notification.requestPermission();return e(m=>({...m,hasPermission:f==="granted"})),f==="granted"}return!1},[]);return{...n,createAlarm:r,updateAlarm:i,deleteAlarm:o,toggleAlarm:l,dismissAlarm:d,snoozeAlarm:u,requestPermission:h,refreshAlarms:t}}const iX=[{id:0,label:"S",fullLabel:"Sunday"},{id:1,label:"M",fullLabel:"Monday"},{id:2,label:"T",fullLabel:"Tuesday"},{id:3,label:"W",fullLabel:"Wednesday"},{id:4,label:"T",fullLabel:"Thursday"},{id:5,label:"F",fullLabel:"Friday"},{id:6,label:"S",fullLabel:"Saturday"}],aS=[{id:"default",name:"Default Bell"},{id:"gentle",name:"Gentle Chime"},{id:"classic",name:"Classic Alarm"}];function aX({open:n,onOpenChange:e,editingAlarm:t,onClose:s,onDelete:r}){const{toast:i}=On(),{createAlarm:o,updateAlarm:l}=P3(),d=x.useRef(null),[u,h]=x.useState(""),[f,m]=x.useState("06:00"),[p,b]=x.useState([]),[g,N]=x.useState([80]),[v,y]=x.useState(!0),[S,w]=x.useState(5),[j,E]=x.useState(null),[T,P]=x.useState([]),[_,R]=x.useState(!1),[I,L]=x.useState(30),[U,B]=x.useState(!1),[Q,F]=x.useState(30);x.useEffect(()=>{n&&H()},[n]),x.useEffect(()=>{t?(h(t.label),m(t.time),b(t.repeatDays),N([t.volume]),y(t.vibrate),w(t.snoozeMinutes),E(t.toneId),L(t.fadeInDuration),B(t.enablePreAlarm),F(t.preAlarmMinutes)):(h(""),m("06:00"),b([]),N([80]),y(!0),w(5),E(null),L(30),B(!1),F(30))},[t,n]);const H=async()=>{try{const W=await tn.getAllCustomTones();P(W)}catch(W){console.error("Failed to load custom tones:",W)}},$=W=>{b(X=>X.includes(W)?X.filter(V=>V!==W):[...X,W].sort())},K=async W=>{var V;const X=(V=W.target.files)==null?void 0:V[0];if(X){if(X.size>5*1024*1024){i({title:"File too large",description:"Please select an audio file smaller than 5MB",variant:"destructive"});return}if(!X.type.startsWith("audio/")){i({title:"Invalid file type",description:"Please select an audio file (MP3, WAV, etc.)",variant:"destructive"});return}R(!0);try{const se=await D(X),ve=await tn.addCustomTone({name:X.name.replace(/\.[^/.]+$/,""),dataUrl:se,duration:null,fileSize:X.size,mimeType:X.type});await H(),E(ve.id),i({title:"Tone uploaded",description:`${X.name} has been added`,duration:2e3})}catch(se){console.error("Failed to upload tone:",se),i({title:"Upload failed",description:"Could not upload audio file",variant:"destructive"})}finally{R(!1),d.current&&(d.current.value="")}}},D=W=>new Promise((X,V)=>{const se=new FileReader;se.onload=()=>X(se.result),se.onerror=V,se.readAsDataURL(W)}),M=async()=>{try{let W=null;if(j&&!aS.find(X=>X.id===j)){const X=await tn.getCustomTone(j);W=(X==null?void 0:X.dataUrl)||null}await M0.testSound(W,g[0])}catch(W){console.error("Failed to test tone:",W),i({title:"Test failed",description:"Could not play alarm tone",variant:"destructive"})}},q=async()=>{try{const W=j?aS.find(V=>V.id===j)||T.find(V=>V.id===j):null,X={label:u||"Alarm",time:f,enabled:!0,repeatDays:p,toneId:j,toneName:(W==null?void 0:W.name)||"Default Bell",volume:g[0],vibrate:v,snoozeMinutes:S,fadeInDuration:I,enablePreAlarm:U,preAlarmMinutes:Q};t?(await l(t.id,X),i({title:"Alarm updated",duration:2e3})):(await o(X),i({title:"Alarm created",duration:2e3})),s()}catch{i({title:"Error",description:"Failed to save alarm",variant:"destructive"})}},z=()=>{t&&(r(t.id,t.label),s())},G=[...aS,...T];return a.jsx(Nt,{open:n,onOpenChange:e,children:a.jsxs(xt,{className:"sm:max-w-[500px] bg-zinc-900 text-white border-white/10 max-h-[90vh] overflow-y-auto",children:[a.jsx(jt,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Ct,{className:"text-xl font-light",children:t?"Edit alarm":"Add alarm"}),t&&a.jsx(O,{variant:"ghost",size:"icon",onClick:z,className:"text-red-400 hover:text-red-300 hover:bg-red-500/10","data-testid":"button-delete-alarm",children:a.jsx(wa,{className:"h-5 w-5"})})]})}),a.jsxs("div",{className:"space-y-6 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{className:"text-sm text-white/70",children:"Time"}),a.jsx(re,{type:"time",value:f,onChange:W=>m(W.target.value),className:"text-5xl font-light h-24 text-center bg-white/5 border-white/10 text-white tabular-nums","data-testid":"input-alarm-time"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{className:"text-sm text-white/70",children:"Label"}),a.jsx(re,{value:u,onChange:W=>h(W.target.value),placeholder:"Alarm",className:"bg-white/5 border-white/10 text-white placeholder:text-white/30","data-testid":"input-alarm-label"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Y,{className:"text-sm text-white/70",children:"Repeat"}),a.jsx("div",{className:"flex gap-2 justify-between",children:iX.map(W=>a.jsx(O,{variant:p.includes(W.id)?"default":"outline",size:"sm",className:`w-11 h-11 p-0 rounded-full font-medium ${p.includes(W.id)?"bg-orange-500 hover:bg-orange-600 text-white border-0":"bg-white/5 hover:bg-white/10 text-white/70 border-white/10"}`,onClick:()=>$(W.id),"data-testid":`button-repeat-day-${W.id}`,children:W.label},W.id))}),p.length===0&&a.jsx("p",{className:"text-xs text-white/40",children:"Alarm will ring once"}),p.length===7&&a.jsx("p",{className:"text-xs text-orange-400",children:"Every day"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Y,{className:"text-sm text-white/70",children:"Alarm Tone"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(_g,{value:j||void 0,onValueChange:E,children:[a.jsx(Rm,{className:"flex-1 bg-white/5 border-white/10 text-white",children:a.jsx(Mg,{placeholder:"Default Bell"})}),a.jsx(Dm,{className:"bg-zinc-900 border-white/10",children:G.map(W=>a.jsx(Lr,{value:W.id,className:"text-white focus:bg-white/10 focus:text-white",children:W.name},W.id))})]}),a.jsx(O,{variant:"outline",size:"icon",onClick:M,className:"bg-white/5 border-white/10 text-white hover:bg-white/10","data-testid":"button-test-tone",children:a.jsx(yc,{className:"h-4 w-4"})})]}),a.jsxs("div",{children:[a.jsx("input",{ref:d,type:"file",accept:"audio/*",onChange:K,className:"hidden","data-testid":"input-file-upload"}),a.jsxs(O,{variant:"outline",size:"sm",onClick:()=>{var W;return(W=d.current)==null?void 0:W.click()},disabled:_,className:"w-full bg-white/5 border-white/10 text-white/70 hover:bg-white/10 hover:text-white","data-testid":"button-upload-tone",children:[a.jsx(ib,{className:"h-4 w-4 mr-2"}),_?"Uploading...":"Upload Custom Tone"]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(Y,{className:"text-sm text-white/70 flex items-center gap-2",children:[a.jsx(kA,{className:"h-4 w-4"}),"Volume"]}),a.jsxs("span",{className:"text-sm text-white/50",children:[g[0],"%"]})]}),a.jsx(Sg,{value:g,onValueChange:N,min:0,max:100,step:5,className:"[&_[role=slider]]:bg-orange-500 [&_[role=slider]]:border-orange-500","data-testid":"slider-volume"})]}),a.jsxs("div",{className:"flex items-center justify-between py-2",children:[a.jsxs(Y,{className:"text-sm text-white/70 flex items-center gap-2",children:[a.jsx(To,{className:"h-4 w-4"}),"Vibrate"]}),a.jsx(Rs,{checked:v,onCheckedChange:y,className:"data-[state=checked]:bg-orange-500","data-testid":"switch-vibrate"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{className:"text-sm text-white/70",children:"Snooze duration (minutes)"}),a.jsx(re,{type:"number",value:S,onChange:W=>w(Number(W.target.value)),min:1,max:30,className:"bg-white/5 border-white/10 text-white","data-testid":"input-snooze-minutes"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Y,{className:"text-sm text-white/70",children:"Volume fade-in (seconds)"}),a.jsxs("span",{className:"text-sm text-white/50",children:[I,"s"]})]}),a.jsx(Sg,{value:[I],onValueChange:W=>L(W[0]),min:0,max:60,step:5,className:"[&_[role=slider]]:bg-orange-500 [&_[role=slider]]:border-orange-500","data-testid":"slider-fade-in"}),I===0&&a.jsx("p",{className:"text-xs text-white/40",children:"Instant full volume"}),I>0&&a.jsxs("p",{className:"text-xs text-orange-400",children:["Gradually increases volume over ",I,"s"]})]}),a.jsxs("div",{className:"space-y-3 border-t border-white/10 pt-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(Y,{className:"text-sm text-white/70",children:"Pre-alarm (gentle wake)"}),a.jsx("p",{className:"text-xs text-white/40 mt-1",children:"Low volume alarm before main alarm"})]}),a.jsx(Rs,{checked:U,onCheckedChange:B,className:"data-[state=checked]:bg-orange-500","data-testid":"switch-pre-alarm"})]}),U&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{className:"text-sm text-white/70",children:"Pre-alarm time (minutes before)"}),a.jsx(re,{type:"number",value:Q,onChange:W=>F(Number(W.target.value)),min:5,max:60,className:"bg-white/5 border-white/10 text-white","data-testid":"input-pre-alarm-minutes"})]})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx(O,{onClick:()=>s(),variant:"outline",className:"flex-1 bg-transparent border-white/10 text-white/70 hover:bg-white/5","data-testid":"button-cancel",children:"Cancel"}),a.jsx(O,{onClick:q,className:"flex-1 bg-orange-500 hover:bg-orange-600 text-white","data-testid":"button-save-alarm",children:t?"Save":"Add"})]})]})]})})}function oX({alarm:n,onDismiss:e,onSnooze:t}){const[s,r]=x.useState(new Date),[i,o]=x.useState(1),[l,d]=x.useState(0),[u,h]=x.useState(!1),[f,m]=x.useState(n.snoozeMinutes),p=x.useRef(null),b=x.useRef(null),g=x.useRef(null),N=x.useRef([...Array(20)].map(()=>({width:Math.random()*100+50,height:Math.random()*100+50,left:Math.random()*100,top:Math.random()*100,delay:Math.random()*5,duration:Math.random()*10+10}))).current;x.useEffect(()=>{const P=setInterval(()=>{r(new Date)},1e3),_=setInterval(()=>{o(R=>R===1?1.15:1)},1e3);return()=>{clearInterval(P),clearInterval(_),p.current&&clearTimeout(p.current),b.current&&clearInterval(b.current),g.current&&clearTimeout(g.current)}},[]);const v=s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),y=()=>{d(0),b.current=window.setInterval(()=>{d(P=>{const _=P+5;return _>=100?100:_})},100),p.current=window.setTimeout(()=>{e()},2e3)},S=()=>{p.current&&(clearTimeout(p.current),p.current=null),b.current&&(clearInterval(b.current),b.current=null),d(0)},w=()=>{g.current=window.setTimeout(()=>{h(!0)},1e3)},j=()=>{g.current&&(clearTimeout(g.current),g.current=null)},E=()=>{j(),t()},T=()=>{t(f),h(!1)};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"fixed inset-0 z-50 bg-gradient-to-br from-zinc-900 via-black to-zinc-900 flex flex-col items-center justify-between p-8 animate-in fade-in duration-500",children:[a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:N.map((P,_)=>a.jsx("div",{className:"absolute bg-orange-500/10 rounded-full animate-float",style:{width:`${P.width}px`,height:`${P.height}px`,left:`${P.left}%`,top:`${P.top}%`,animationDelay:`${P.delay}s`,animationDuration:`${P.duration}s`}},_))}),a.jsxs("div",{className:"text-center pt-12 animate-in slide-in-from-top duration-700 relative z-10",children:[a.jsx("p",{className:"text-white/50 text-sm mb-2",children:"Now"}),a.jsx("h1",{className:"text-white text-6xl font-extralight tabular-nums tracking-tight",children:v})]}),a.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 space-y-6 relative z-10",children:[a.jsxs("div",{className:"relative animate-in zoom-in duration-500",style:{transform:`scale(${i})`,transition:"transform 1s cubic-bezier(0.4, 0, 0.2, 1)"},children:[a.jsx("div",{className:"absolute inset-0 animate-ping",children:a.jsx("div",{className:"absolute inset-0 bg-orange-500/20 blur-3xl rounded-full scale-150"})}),a.jsx("div",{className:"absolute inset-0 bg-orange-500/30 blur-3xl rounded-full animate-pulse"}),a.jsx("div",{className:"relative bg-gradient-to-br from-orange-500 to-orange-600 p-12 rounded-full shadow-2xl shadow-orange-500/50",children:a.jsx(To,{className:"h-24 w-24 text-white animate-bounce",style:{animationDuration:"2s"}})}),a.jsx("div",{className:"absolute inset-0 border-4 border-orange-400/30 rounded-full animate-spin",style:{animationDuration:"8s"}})]}),a.jsxs("div",{className:"text-center space-y-2 animate-in slide-in-from-bottom duration-700 delay-200",children:[a.jsx("h2",{className:"text-4xl font-light text-white animate-in fade-in duration-500 delay-300",children:n.label||"Alarm"}),a.jsxs("div",{className:"flex items-center justify-center gap-2 text-white/60 animate-in fade-in duration-500 delay-500",children:[a.jsx(ww,{className:"h-4 w-4"}),a.jsx("span",{className:"text-lg tabular-nums",children:n.time})]}),a.jsx("p",{className:"text-sm text-white/40 mt-4 animate-in fade-in duration-500 delay-700",children:n.toneName}),n.fadeInDuration>0&&a.jsxs("p",{className:"text-xs text-orange-400/60 animate-in fade-in duration-500 delay-1000",children:["Volume fading in over ",n.fadeInDuration,"s"]})]})]}),a.jsxs("div",{className:"w-full max-w-md space-y-4 pb-8 relative z-10 animate-in slide-in-from-bottom duration-700 delay-300",children:[a.jsxs(O,{onClick:E,onMouseDown:w,onMouseUp:j,onMouseLeave:j,onTouchStart:w,onTouchEnd:j,size:"lg",variant:"outline",className:"w-full h-16 text-lg font-medium bg-white/10 backdrop-blur-sm border-white/20 text-white hover:bg-white/20 rounded-2xl transition-all active:scale-95","data-testid":"button-snooze-alarm",children:["Snooze ",n.snoozeMinutes," min",a.jsx("span",{className:"text-xs opacity-60 ml-2",children:"(Hold for custom)"})]}),a.jsx("div",{className:"relative",children:a.jsxs(O,{onMouseDown:y,onMouseUp:S,onMouseLeave:S,onTouchStart:y,onTouchEnd:S,size:"lg",className:"w-full h-16 text-lg font-medium bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white rounded-2xl shadow-lg shadow-orange-500/30 transition-all active:scale-95 overflow-hidden relative","data-testid":"button-dismiss-alarm",children:[a.jsx("div",{className:"absolute inset-0 bg-white/30 transition-all duration-100",style:{width:`${l}%`,left:0}}),a.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-2",children:[a.jsx(sU,{className:"h-5 w-5"}),"Hold to Dismiss"]})]})}),a.jsx("p",{className:"text-center text-white/40 text-sm",children:"Hold dismiss button for 2 seconds"})]})]}),a.jsx(Nt,{open:u,onOpenChange:h,children:a.jsxs(xt,{className:"sm:max-w-[400px] bg-zinc-900 text-white border-white/10",children:[a.jsx(jt,{children:a.jsx(Ct,{className:"text-xl font-light",children:"Custom Snooze"})}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{className:"text-sm text-white/70",children:"Snooze duration (minutes)"}),a.jsx(re,{type:"number",value:f,onChange:P=>m(Number(P.target.value)),min:1,max:60,className:"text-3xl font-light h-16 text-center bg-white/5 border-white/10 text-white tabular-nums","data-testid":"input-custom-snooze",autoFocus:!0})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(O,{onClick:()=>h(!1),variant:"outline",className:"flex-1 bg-transparent border-white/10 text-white/70 hover:bg-white/5","data-testid":"button-cancel-custom-snooze",children:"Cancel"}),a.jsx(O,{onClick:T,className:"flex-1 bg-orange-500 hover:bg-orange-600 text-white","data-testid":"button-apply-custom-snooze",children:"Snooze"})]})]})]})})]})}const lX=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function cX(){const{toast:n}=On(),{alarms:e,activeAlarm:t,hasPermission:s,isInitialized:r,toggleAlarm:i,deleteAlarm:o,dismissAlarm:l,snoozeAlarm:d,requestPermission:u}=P3(),[h,f]=x.useState(!1),[m,p]=x.useState(null),b=async(j,E)=>{try{await i(j,E),n({title:E?"Alarm enabled":"Alarm disabled",duration:2e3})}catch{n({title:"Error",description:"Failed to toggle alarm",variant:"destructive"})}},g=async(j,E)=>{if(confirm(`Delete alarm "${E}"?`))try{await o(j),n({title:"Alarm deleted",duration:2e3})}catch{n({title:"Error",description:"Failed to delete alarm",variant:"destructive"})}},N=j=>{p(j),f(!0)},v=async()=>{if(!s&&!await u()){n({title:"Permission Required",description:"Please enable notifications to use alarms",variant:"destructive"});return}p(null),f(!0)},y=()=>{f(!1),p(null)},S=j=>j.length===0?"Once":j.length===7?"Every day":j.length===5&&!j.includes(0)&&!j.includes(6)?"Weekdays":j.length===2&&j.includes(0)&&j.includes(6)?"Weekends":j.map(E=>lX[E]).join(", "),w=j=>{const E=new Date,[T,P]=j.time.split(":").map(Number);if(j.repeatDays.length===0){const _=new Date;_.setHours(T,P,0,0),_<=E&&_.setDate(_.getDate()+1);const R=new Date(E);return R.setDate(R.getDate()+1),R.setHours(0,0,0,0),_.toDateString()===E.toDateString()?"Today":_.toDateString()===R.toDateString()?"Tomorrow":_.toLocaleDateString("en-US",{month:"short",day:"numeric"})}return S(j.repeatDays)};return r?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"min-h-screen bg-black dark:bg-black text-white",children:[a.jsx("div",{className:"sticky top-0 z-10 bg-black/80 backdrop-blur-sm border-b border-white/10",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-light tracking-tight",children:"Alarm"}),!s&&a.jsx("p",{className:"text-xs text-red-400 mt-1",children:"Notifications disabled"})]}),a.jsx(O,{onClick:v,size:"icon",variant:"ghost",className:"rounded-full h-12 w-12 text-orange-500 hover:bg-white/10","data-testid":"button-add-alarm",children:a.jsx(ji,{className:"h-7 w-7"})})]})}),!s&&a.jsx("div",{className:"max-w-4xl mx-auto px-4 py-3",children:a.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 flex items-start gap-3",children:[a.jsx(Bz,{className:"h-5 w-5 text-red-400 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium text-red-400",children:"Notifications Disabled"}),a.jsx("p",{className:"text-sm text-red-300/70 mt-1",children:"Enable notifications to receive alarm alerts"}),a.jsx(O,{onClick:u,size:"sm",variant:"outline",className:"mt-2 border-red-500/50 text-red-400 hover:bg-red-500/10","data-testid":"button-enable-notifications",children:"Enable Notifications"})]})]})}),a.jsx("div",{className:"max-w-4xl mx-auto px-4 py-2 space-y-1",children:e.length===0?a.jsxs("div",{className:"text-center py-24",children:[a.jsx(ww,{className:"h-24 w-24 mx-auto mb-6 text-white/10"}),a.jsx("h2",{className:"text-xl font-light text-white/50 mb-2",children:"No alarms"}),a.jsx("p",{className:"text-sm text-white/30 mb-6",children:"Tap + to create your first alarm"})]}):e.sort((j,E)=>{const[T,P]=j.time.split(":").map(Number),[_,R]=E.time.split(":").map(Number);return T*60+P-(_*60+R)}).map(j=>a.jsx("div",{className:`bg-white/5 backdrop-blur-sm rounded-2xl p-5 transition-all hover:bg-white/8 border ${j.enabled?"border-white/10":"border-white/5"}`,"data-testid":`alarm-card-${j.id}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>N(j),"data-testid":`alarm-time-${j.id}`,children:[a.jsx("div",{className:"flex items-baseline gap-3 mb-1",children:a.jsx("span",{className:`text-6xl font-extralight tabular-nums tracking-tight ${j.enabled?"text-white":"text-white/30"}`,children:j.time})}),a.jsx("div",{className:`text-sm mt-2 ${j.enabled?"text-white/70":"text-white/30"}`,children:j.label||"Alarm"}),a.jsx("div",{className:"text-xs text-white/40 mt-1",children:w(j)})]}),a.jsx("div",{className:"flex flex-col items-end gap-3",children:a.jsx(Rs,{checked:j.enabled,onCheckedChange:E=>b(j.id,E),className:"data-[state=checked]:bg-orange-500","data-testid":`switch-alarm-${j.id}`})})]})},j.id))}),a.jsx("div",{className:"h-20"})]}),a.jsx(aX,{open:h,onOpenChange:f,editingAlarm:m,onClose:y,onDelete:g}),t&&a.jsx(oX,{alarm:t,onDismiss:l,onSnooze:j=>d(j)})]}):a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-black dark:bg-black text-white",children:a.jsx("div",{className:"text-center space-y-4",children:a.jsx(JY,{size:"lg",text:"Initializing alarm system..."})})})}var RE="Avatar",[dX,CQ]=Nn(RE),[uX,_3]=dX(RE),M3=x.forwardRef((n,e)=>{const{__scopeAvatar:t,...s}=n,[r,i]=x.useState("idle");return a.jsx(uX,{scope:t,imageLoadingStatus:r,onImageLoadingStatusChange:i,children:a.jsx(pe.span,{...s,ref:e})})});M3.displayName=RE;var R3="AvatarImage",D3=x.forwardRef((n,e)=>{const{__scopeAvatar:t,src:s,onLoadingStatusChange:r=()=>{},...i}=n,o=_3(R3,t),l=hX(s,i),d=Gt(u=>{r(u),o.onImageLoadingStatusChange(u)});return Jt(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?a.jsx(pe.img,{...i,ref:e,src:s}):null});D3.displayName=R3;var I3="AvatarFallback",L3=x.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:s,...r}=n,i=_3(I3,t),[o,l]=x.useState(s===void 0);return x.useEffect(()=>{if(s!==void 0){const d=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(d)}},[s]),o&&i.imageLoadingStatus!=="loaded"?a.jsx(pe.span,{...r,ref:e}):null});L3.displayName=I3;function tP(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function hX(n,{referrerPolicy:e,crossOrigin:t}){const s=mX(),r=x.useRef(null),i=s?(r.current||(r.current=new window.Image),r.current):null,[o,l]=x.useState(()=>tP(i,n));return Jt(()=>{l(tP(i,n))},[i,n]),Jt(()=>{const d=f=>()=>{l(f)};if(!i)return;const u=d("loaded"),h=d("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof t=="string"&&(i.crossOrigin=t),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,t,e]),o}function fX(){return()=>{}}function mX(){return x.useSyncExternalStore(fX,()=>!0,()=>!1)}var F3=M3,O3=D3,B3=L3;const _b=x.forwardRef(({className:n,...e},t)=>a.jsx(F3,{ref:t,className:ee(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,n),...e}));_b.displayName=F3.displayName;const Mb=x.forwardRef(({className:n,...e},t)=>a.jsx(O3,{ref:t,className:ee("aspect-square h-full w-full",n),...e}));Mb.displayName=O3.displayName;const Rb=x.forwardRef(({className:n,...e},t)=>a.jsx(B3,{ref:t,className:ee("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));Rb.displayName=B3.displayName;function pX(){var i,o;const{user:n}=Ry(),[e,t]=x.useState(!0),[s,r]=x.useState(!0);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-3xl font-bold font-serif",children:"Settings"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your app preferences and profile"})]}),a.jsx(Z,{className:"p-6 space-y-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-semibold",children:"Profile Information"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(_b,{className:"h-20 w-20",children:[a.jsx(Mb,{src:(n==null?void 0:n.profileImageUrl)||void 0,className:"object-cover"}),a.jsx(Rb,{className:"text-2xl",children:((i=n==null?void 0:n.firstName)==null?void 0:i[0])||((o=n==null?void 0:n.email)==null?void 0:o[0])||"U"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-lg",children:n!=null&&n.firstName&&(n!=null&&n.lastName)?`${n.firstName} ${n.lastName}`:(n==null?void 0:n.email)||"User"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:n==null?void 0:n.email})]})]})]})}),a.jsxs(Z,{className:"p-6 space-y-4",children:[a.jsx("h3",{className:"font-semibold",children:"App Preferences"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(Y,{htmlFor:"notifications",children:"Push Notifications"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive reminders for Sandhya times"})]}),a.jsx(Rs,{id:"notifications",checked:e,onCheckedChange:t,"data-testid":"switch-notifications"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(Y,{htmlFor:"offline",children:"Offline Mode"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Cache content for offline access"})]}),a.jsx(Rs,{id:"offline",checked:s,onCheckedChange:r,"data-testid":"switch-offline"})]})]})]}),a.jsxs(Z,{className:"p-6 space-y-4",children:[a.jsx("h3",{className:"font-semibold",children:"About"}),a.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[a.jsx("p",{children:"Trisandhya Sadhana Companion v1.0"}),a.jsx("p",{children:"Spiritual content sourced from Bhavishyamalika.com"}),a.jsx("p",{className:"pt-2 font-serif italic",children:"May Lord Jagannath bless your spiritual journey"})]})]})]})}function gX(){const[n,e]=x.useState(null),[t,s]=x.useState(!1),{data:r,isLoading:i}=Te({queryKey:["/api/mahapuran-pdfs"]}),o=(d,u)=>{const h=document.createElement("a");h.href=d,h.download=`Shreemad_Bhagwat_Mahapuran_${u}.pdf`,document.body.appendChild(h),h.click(),document.body.removeChild(h)},l=d=>{e(d)};return i?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(We,{className:"h-8 w-8 animate-spin text-primary","data-testid":"loader-mahapuran"})}):a.jsxs("div",{className:"space-y-8 pb-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ha,{className:"h-10 w-10 text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-bold font-serif text-foreground dark:text-foreground",children:"Shreemad Bhagwat Mahapuran"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"The sacred scripture in multiple languages"})]})]}),a.jsx("div",{className:"bg-primary/5 dark:bg-primary/10 border border-primary/20 rounded-lg p-4",children:a.jsx("p",{className:"text-sm text-foreground dark:text-foreground leading-relaxed",children:"The Shreemad Bhagwat Mahapuran is one of the eighteen great Puranas and is considered the essence of all Vedic literature. It contains the divine stories of Lord Krishna and profound spiritual wisdom. Read or download the complete scripture in your preferred language."})})]}),!r||r.length===0?a.jsxs(Z,{className:"p-12 text-center bg-card dark:bg-card",children:[a.jsx(Po,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-xl font-semibold mb-2 text-foreground dark:text-foreground",children:"PDFs Coming Soon"}),a.jsx("p",{className:"text-muted-foreground",children:"The Mahapuran PDFs in different languages will be available here soon."})]}):a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.map(d=>a.jsx(Z,{className:"p-6 hover:shadow-xl transition-all duration-300 bg-card dark:bg-card border-border dark:border-border","data-testid":`card-pdf-${d.id}`,children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(at,{className:"h-6 w-6 text-primary flex-shrink-0 mt-1"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-lg font-bold text-foreground dark:text-foreground line-clamp-2 leading-tight",title:d.title||d.languageName,"data-testid":`text-title-${d.id}`,children:d.title||d.languageName}),a.jsx(sn,{variant:"secondary",className:"mt-2","data-testid":`badge-language-${d.id}`,children:d.languageCode.toUpperCase()})]})]}),d.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2","data-testid":`text-description-${d.id}`,children:d.description}),a.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-muted-foreground pt-2 border-t border-border/50",children:[d.fileSize&&a.jsxs("div",{className:"flex items-center gap-1","data-testid":`text-filesize-${d.id}`,children:[a.jsx(Po,{className:"h-3 w-3"}),a.jsxs("span",{children:[(d.fileSize/(1024*1024)).toFixed(2)," MB"]})]}),d.totalChapters&&a.jsxs("div",{className:"flex items-center gap-1","data-testid":`text-chapters-${d.id}`,children:[a.jsx(ha,{className:"h-3 w-3"}),a.jsxs("span",{children:[d.totalChapters," Chapters"]})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-2 pt-4 border-t border-border dark:border-border",children:[d.pdfUrl&&a.jsxs(a.Fragment,{children:[a.jsxs(O,{onClick:()=>l(d),className:"w-full",variant:"default","data-testid":`button-read-${d.id}`,children:[a.jsx(at,{className:"h-4 w-4 mr-2"}),"Read Online"]}),a.jsxs(O,{onClick:()=>o(d.pdfUrl,d.languageName),variant:"outline",className:"w-full","data-testid":`button-download-${d.id}`,children:[a.jsx(vo,{className:"h-4 w-4 mr-2"}),"Download PDF"]})]}),!d.pdfUrl&&a.jsx("p",{className:"text-sm text-center text-muted-foreground py-2",children:"PDF will be available soon"})]})]})},d.id))}),a.jsxs("div",{className:"mt-8 p-6 bg-muted/50 dark:bg-muted/30 rounded-lg border border-border dark:border-border",children:[a.jsxs("h3",{className:"font-semibold mb-3 text-foreground dark:text-foreground flex items-center gap-2",children:[a.jsx(ha,{className:"h-5 w-5"}),"About Reading Options"]}),a.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-primary mt-1",children:"•"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Read Online:"})," Opens the PDF in a new tab for immediate reading in your browser"]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-primary mt-1",children:"•"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Download PDF:"})," Saves the complete PDF to your device for offline reading"]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-primary mt-1",children:"•"}),a.jsx("span",{children:"All PDFs contain the complete Shreemad Bhagwat Mahapuran with all 12 Skandas (books)"})]})]})]}),a.jsx(Nt,{open:!!n,onOpenChange:d=>{d||(e(null),s(!1))},children:a.jsx(xt,{className:t?"max-w-full w-screen h-screen p-0 m-0":"max-w-6xl w-[95vw] h-[90vh] p-0","data-testid":"dialog-pdf-viewer",children:n&&a.jsxs("div",{className:"flex flex-col h-full",children:[!t&&a.jsx(jt,{className:"px-4 md:px-6 py-3 md:py-4 border-b flex-shrink-0",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(Ct,{className:"text-lg md:text-xl truncate",children:n.title}),a.jsxs(bo,{className:"flex items-center gap-2 mt-1 flex-wrap",children:[a.jsx(sn,{variant:"secondary",className:"text-xs",children:n.languageName}),n.totalChapters&&a.jsxs("span",{className:"text-xs text-muted-foreground",children:[n.totalChapters," Chapters"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[a.jsxs(O,{variant:"outline",size:"sm",onClick:()=>s(!t),"data-testid":"button-toggle-fullscreen",className:"text-xs",children:[a.jsx(jA,{className:"h-3 w-3 md:h-4 md:w-4 md:mr-2"}),a.jsx("span",{className:"hidden md:inline",children:"Fullscreen"})]}),a.jsxs(O,{variant:"outline",size:"sm",onClick:()=>o(n.pdfUrl,n.languageName),"data-testid":"button-download-pdf-viewer",className:"text-xs",children:[a.jsx(vo,{className:"h-3 w-3 md:h-4 md:w-4 md:mr-2"}),a.jsx("span",{className:"hidden md:inline",children:"Download"})]})]})]})}),a.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[n.pdfUrl&&a.jsx(PE,{url:n.pdfUrl,title:`${n.title} - ${n.languageName}`}),t&&a.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 z-50",children:[a.jsxs(O,{variant:"secondary",size:"sm",onClick:()=>s(!1),"data-testid":"button-exit-fullscreen",className:"shadow-lg",children:[a.jsx(LR,{className:"h-4 w-4 mr-2"}),"Exit Fullscreen"]}),a.jsxs(O,{variant:"secondary",size:"sm",onClick:()=>o(n.pdfUrl,n.languageName),"data-testid":"button-download-fullscreen",className:"shadow-lg",children:[a.jsx(vo,{className:"h-4 w-4 mr-2"}),"Download"]})]})]}),n.description&&!t&&a.jsx("div",{className:"px-4 md:px-6 py-2 md:py-3 border-t bg-muted/30 flex-shrink-0",children:a.jsx("p",{className:"text-xs md:text-sm text-muted-foreground line-clamp-2",children:n.description})})]})})})]})}function uC(){const n=gw(),[e,t]=ba(),s=e.startsWith("/scriptures"),{data:r}=Te({queryKey:["/api/mahapuran-titles",n.titleId]}),{data:i,isLoading:o}=Te({queryKey:["/api/mahapuran-skandas",n.titleId]});return o?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>t(s?"/scriptures":"/mahapuran"),className:"mb-4","data-testid":"button-back-to-titles",children:[a.jsx(mc,{className:"h-4 w-4 mr-1"}),s?"Back to Scriptures":"Back to Mahapurans"]}),a.jsx("h1",{className:"text-3xl font-bold font-serif",children:r==null?void 0:r.title}),(r==null?void 0:r.description)&&a.jsx("p",{className:"text-muted-foreground mt-2",children:r.description})]}),!i||i.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ha,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Skandas Available"}),a.jsx("p",{className:"text-muted-foreground",children:"Content is being prepared and will be available soon."})]}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map(l=>a.jsx(Z,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer group",onClick:()=>t(`/mahapuran/${n.titleId}/skanda/${l.id}`),"data-testid":`card-skanda-${l.id}`,children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-2 group-hover:text-primary transition-colors",children:["Skanda ",l.skandaNumber,": ",l.title]}),l.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:l.description})]}),a.jsx(ju,{className:"h-5 w-5 text-muted-foreground group-hover:text-primary group-hover:translate-x-1 transition-all"})]})},l.id))})]})}function hC(){const n=gw(),[,e]=ba(),{data:t}=Te({queryKey:["/api/mahapuran-titles",n.titleId]}),{data:s}=Te({queryKey:["/api/mahapuran-skandas",n.titleId,n.skandaId]}),{data:r,isLoading:i}=Te({queryKey:["/api/mahapuran-chapters",n.skandaId]});return i?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>e(`/mahapuran/${n.titleId}`),className:"mb-4","data-testid":"button-back-to-skandas",children:[a.jsx(mc,{className:"h-4 w-4 mr-1"}),"Back to Skandas"]}),a.jsxs("h1",{className:"text-3xl font-bold font-serif",children:[t==null?void 0:t.title," - Skanda ",s==null?void 0:s.skandaNumber]}),(s==null?void 0:s.title)&&a.jsx("p",{className:"text-xl text-muted-foreground mt-1",children:s.title}),(s==null?void 0:s.description)&&a.jsx("p",{className:"text-muted-foreground mt-2",children:s.description})]}),!r||r.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(at,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Chapters Available"}),a.jsx("p",{className:"text-muted-foreground",children:"Content is being prepared and will be available soon."})]}):a.jsx("div",{className:"grid gap-3",children:r.map(o=>a.jsx(Z,{className:"p-4 hover:shadow-md transition-shadow cursor-pointer group",onClick:()=>e(`/mahapuran/${n.titleId}/skanda/${n.skandaId}/chapter/${o.id}`),"data-testid":`card-chapter-${o.id}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"font-semibold group-hover:text-primary transition-colors",children:["Chapter ",o.chapterNumber,": ",o.title]}),o.summary&&a.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-1",children:o.summary})]}),a.jsx(ju,{className:"h-5 w-5 text-muted-foreground group-hover:text-primary group-hover:translate-x-1 transition-all"})]})},o.id))})]})}function nP(){const n=gw(),[,e]=ba(),[t,s]=x.useState(!1),{data:r}=Te({queryKey:["/api/mahapuran-titles",n.titleId]}),{data:i}=Te({queryKey:["/api/mahapuran-skandas",n.titleId,n.skandaId]}),{data:o,isLoading:l}=Te({queryKey:["/api/mahapuran-chapters",n.skandaId,n.chapterId]}),{data:d}=Te({queryKey:["/api/mahapuran-chapters",n.skandaId]});if(l)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})});if(!o)return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(at,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Chapter Not Found"}),a.jsx(O,{onClick:()=>e(`/mahapuran/${n.titleId}/skanda/${n.skandaId}`),children:"Back to Chapters"})]});const u=(d==null?void 0:d.findIndex(p=>p.id===o.id))??-1,h=u>0?d==null?void 0:d[u-1]:null,f=u>=0&&d&&u<d.length-1?d[u+1]:null,m=window.location.pathname.includes("/scriptures/")?"/scriptures":"/mahapuran";return a.jsxs("div",{className:t?"fixed inset-0 z-50 bg-background overflow-auto":"max-w-4xl mx-auto space-y-6",children:[t&&a.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between p-4 border-b bg-background/95 backdrop-blur",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>s(!1),"data-testid":"button-exit-fullscreen",children:[a.jsx(bc,{className:"h-4 w-4 mr-2"}),"Exit Fullscreen"]}),a.jsxs("div",{className:"text-sm font-medium",children:[r==null?void 0:r.title," › Skanda ",i==null?void 0:i.skandaNumber," › Chapter ",o.chapterNumber]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(O,{variant:"outline",size:"sm",onClick:()=>h&&e(`${m}/${n.titleId}/skanda/${n.skandaId}/chapter/${h.id}`),disabled:!h,children:[a.jsx(mc,{className:"h-4 w-4 mr-1"}),"Previous"]}),a.jsxs(O,{variant:"outline",size:"sm",onClick:()=>f&&e(`${m}/${n.titleId}/skanda/${n.skandaId}/chapter/${f.id}`),disabled:!f,children:["Next",a.jsx(ju,{className:"h-4 w-4 ml-1"})]})]})]}),a.jsxs("div",{className:t?"max-w-5xl mx-auto p-6":"",children:[!t&&a.jsxs("div",{children:[a.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>e(`${m}/${n.titleId}/skanda/${n.skandaId}`),className:"mb-4","data-testid":"button-back-to-chapters",children:[a.jsx(mc,{className:"h-4 w-4 mr-1"}),"Back to Chapters"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{className:"text-sm text-muted-foreground",children:[r==null?void 0:r.title," › Skanda ",i==null?void 0:i.skandaNumber]}),a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("h1",{className:"text-3xl font-bold font-serif",children:["Chapter ",o.chapterNumber,": ",o.title]}),o.summary&&a.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:o.summary})]}),a.jsxs(O,{variant:"outline",size:"sm",onClick:()=>s(!0),"data-testid":"button-enter-fullscreen",children:[a.jsx(jA,{className:"h-4 w-4 mr-2"}),"Fullscreen"]})]})]})]}),a.jsx(Z,{className:t?"p-12 mt-6":"p-8",children:o.content?a.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:o.content},"data-testid":"chapter-content"}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(at,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Chapter content will be available soon."})]})}),!t&&a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs(O,{variant:"outline",onClick:()=>h&&e(`${m}/${n.titleId}/skanda/${n.skandaId}/chapter/${h.id}`),disabled:!h,"data-testid":"button-previous-chapter",children:[a.jsx(mc,{className:"h-4 w-4 mr-2"}),h?`Chapter ${h.chapterNumber}`:"Previous"]}),a.jsxs(O,{variant:"outline",onClick:()=>f&&e(`${m}/${n.titleId}/skanda/${n.skandaId}/chapter/${f.id}`),disabled:!f,"data-testid":"button-next-chapter",children:[f?`Chapter ${f.chapterNumber}`:"Next",a.jsx(ju,{className:"h-4 w-4 ml-2"})]})]})]})]})}function xX(){const[n,e]=x.useState(null),[t,s]=x.useState(!1),{data:r,isLoading:i}=Te({queryKey:["/api/scripture-pdfs"]}),o=(d,u)=>{const h=document.createElement("a");h.href=d,h.download=`Sacred_Scripture_${u}.pdf`,document.body.appendChild(h),h.click(),document.body.removeChild(h)},l=d=>{e(d)};return i?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(We,{className:"h-8 w-8 animate-spin text-primary","data-testid":"loader-scriptures"})}):a.jsxs("div",{className:"space-y-8 pb-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(at,{className:"h-10 w-10 text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-bold font-serif text-foreground dark:text-foreground",children:"Sacred Scriptures"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Explore the timeless wisdom of our sacred texts"})]})]}),a.jsx("div",{className:"bg-primary/5 dark:bg-primary/10 border border-primary/20 rounded-lg p-4",children:a.jsx("p",{className:"text-sm text-foreground dark:text-foreground leading-relaxed",children:"Dive deep into the sacred scriptures and discover profound spiritual wisdom. Each scripture is organized into books (Skandas) and chapters for easy navigation and study. Read at your own pace and let the divine teachings guide your spiritual journey."})})]}),!r||r.length===0?a.jsxs(Z,{className:"p-12 text-center bg-card dark:bg-card",children:[a.jsx(Po,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-xl font-semibold mb-2 text-foreground dark:text-foreground",children:"Scriptures Coming Soon"}),a.jsx("p",{className:"text-muted-foreground",children:"Sacred scripture texts will be available here soon for your study and reflection."})]}):a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.map(d=>a.jsx(Z,{className:"p-6 hover:shadow-xl transition-all duration-300 bg-card dark:bg-card border-border dark:border-border group","data-testid":`card-scripture-${d.id}`,children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(ha,{className:"h-5 w-5 text-primary flex-shrink-0"}),a.jsx("h3",{className:"text-xl font-semibold text-foreground dark:text-foreground truncate",title:d.title,"data-testid":`text-title-${d.id}`,children:d.title})]}),a.jsx(sn,{variant:"secondary",className:"mb-3","data-testid":`badge-language-${d.id}`,children:d.languageCode.toUpperCase()}),d.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3 mb-3","data-testid":`text-description-${d.id}`,children:d.description}),a.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[d.fileSize&&a.jsxs("p",{className:"flex items-center gap-1","data-testid":`text-filesize-${d.id}`,children:["File size: ",(d.fileSize/(1024*1024)).toFixed(2)," MB"]}),d.totalChapters&&a.jsxs("p",{className:"flex items-center gap-1","data-testid":`text-chapters-${d.id}`,children:[a.jsx(Po,{className:"h-3 w-3"}),"Chapters: ",d.totalChapters]})]})]})}),a.jsx("div",{className:"space-y-2 pt-4 border-t border-border dark:border-border",children:d.pdfUrl&&a.jsxs(a.Fragment,{children:[a.jsxs(O,{onClick:()=>l(d),className:"w-full group-hover:bg-primary group-hover:text-primary-foreground transition-colors",variant:"default","data-testid":`button-read-${d.id}`,children:[a.jsx(at,{className:"h-4 w-4 mr-2"}),"Read Online"]}),a.jsxs(O,{onClick:()=>o(d.pdfUrl,d.languageName),className:"w-full",variant:"outline","data-testid":`button-download-${d.id}`,children:[a.jsx(vo,{className:"h-4 w-4 mr-2"}),"Download PDF"]})]})})]})},d.id))}),a.jsxs("div",{className:"mt-8 p-6 bg-muted/50 dark:bg-muted/30 rounded-lg border border-border dark:border-border",children:[a.jsxs("h3",{className:"font-semibold mb-3 text-foreground dark:text-foreground flex items-center gap-2",children:[a.jsx(ha,{className:"h-5 w-5"}),"About Reading Options"]}),a.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-primary mt-1",children:"•"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Read Online:"})," Opens the PDF in a new tab for immediate reading in your browser"]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-primary mt-1",children:"•"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Download PDF:"})," Save the scripture to your device for offline reading and study"]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-primary mt-1",children:"•"}),a.jsx("span",{children:"Available in multiple languages to help you study in the language most comfortable for you"})]})]})]}),a.jsx(Nt,{open:!!n,onOpenChange:d=>!d&&e(null),children:a.jsx(xt,{className:`${t?"max-w-full h-screen":"max-w-5xl h-[90vh]"} p-0 flex flex-col`,children:n&&a.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[!t&&a.jsx(jt,{className:"p-4 md:p-6 border-b flex-shrink-0",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-lg md:text-xl font-semibold truncate",title:n.title,children:n.title}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1 text-sm text-muted-foreground",children:[a.jsx(sn,{variant:"secondary",children:n.languageCode.toUpperCase()}),n.totalChapters&&a.jsxs("span",{children:[n.totalChapters," Chapters"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[a.jsxs(O,{variant:"outline",size:"sm",onClick:()=>s(!0),"data-testid":"button-fullscreen",children:[a.jsx(jA,{className:"h-4 w-4 md:mr-2"}),a.jsx("span",{className:"hidden md:inline",children:"Fullscreen"})]}),a.jsxs(O,{variant:"outline",size:"sm",onClick:()=>o(n.pdfUrl,n.languageName),"data-testid":"button-download",children:[a.jsx(vo,{className:"h-4 w-4 md:mr-2"}),a.jsx("span",{className:"hidden md:inline",children:"Download"})]})]})]})}),a.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[n.pdfUrl&&a.jsx(PE,{url:n.pdfUrl,title:n.title}),t&&a.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 z-50",children:[a.jsxs(O,{variant:"secondary",size:"sm",onClick:()=>s(!1),"data-testid":"button-exit-fullscreen",className:"shadow-lg",children:[a.jsx(LR,{className:"h-4 w-4 mr-2"}),"Exit Fullscreen"]}),a.jsxs(O,{variant:"secondary",size:"sm",onClick:()=>o(n.pdfUrl,n.languageName),"data-testid":"button-download-fullscreen",className:"shadow-lg",children:[a.jsx(vo,{className:"h-4 w-4 mr-2"}),"Download"]})]})]}),n.description&&!t&&a.jsx("div",{className:"px-4 md:px-6 py-2 md:py-3 border-t bg-muted/30 flex-shrink-0",children:a.jsx("p",{className:"text-xs md:text-sm text-muted-foreground line-clamp-2",children:n.description})})]})})})]})}function yX(){return a.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 pb-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h1",{className:"text-4xl font-bold font-serif text-foreground",children:"About Us"}),a.jsx("p",{className:"text-xl text-muted-foreground",children:"Your digital companion for sacred Trikal Sandhya practice"})]}),a.jsx(Z,{className:"p-8",children:a.jsxs("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:[a.jsxs("h2",{className:"flex items-center gap-2 text-foreground",children:[a.jsx(EA,{className:"h-6 w-6 text-primary"}),"Our Mission"]}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:"Trisandhya Sadhana App is dedicated to helping devotees maintain their spiritual practice through technology. We provide a comprehensive digital platform for practicing the sacred Trikal Sandhya, accessing authentic spiritual content, and tracking your spiritual progress."}),a.jsxs("h2",{className:"flex items-center gap-2 text-foreground mt-8",children:[a.jsx(Cu,{className:"h-6 w-6 text-primary"}),"Our Purpose"]}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:"In today's fast-paced world, maintaining regular spiritual practice can be challenging. Our app serves as your devoted companion, ensuring you never miss your Sandhya times with timely reminders, providing access to authentic scriptures and mantras, and helping you stay connected with the divine teachings of Bhavishya Malika."}),a.jsxs("h2",{className:"flex items-center gap-2 text-foreground mt-8",children:[a.jsx(ha,{className:"h-6 w-6 text-primary"}),"What We Offer"]}),a.jsxs("ul",{className:"text-foreground dark:text-foreground",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Daily Sadhana Guidance:"})," Step-by-step instructions for your Trikal Sandhya practice"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Sacred Scriptures:"})," Access to Shreemad Bhagwat Mahapuran and other sacred texts in multiple languages"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Media Library:"})," Audio and video content to enhance your spiritual journey"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Smart Reminders:"})," Never miss a Sandhya time with customizable alarms"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Progress Tracking:"})," Monitor your spiritual practice and maintain consistency"]})]}),a.jsxs("h2",{className:"flex items-center gap-2 text-foreground mt-8",children:[a.jsx(Au,{className:"h-6 w-6 text-primary"}),"Our Community"]}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:"We are a community of devoted practitioners guided by the teachings of Mahapurush Achyutananda and the wisdom of Bhavishya Malika. Our content is sourced from authentic spiritual sources, ensuring you receive genuine teachings that align with our sacred traditions."}),a.jsx("div",{className:"bg-primary/5 dark:bg-primary/10 border border-primary/20 rounded-lg p-6 mt-8",children:a.jsx("p",{className:"text-center font-serif text-lg italic text-foreground dark:text-foreground mb-0",children:'"May Lord Jagannath bless your spiritual journey and guide you on the path to Satya Yuga"'})})]})}),a.jsxs(Z,{className:"p-6 bg-muted/50 dark:bg-muted/30",children:[a.jsx("h3",{className:"font-semibold mb-3 text-foreground",children:"Content Attribution"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Spiritual content and teachings are sourced from"," ",a.jsx("a",{href:"https://bhavishyamalika.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Bhavishyamalika.com"}),", a trusted source for authentic spiritual knowledge and ancient wisdom."]})]})]})}const Vr=x.forwardRef(({className:n,...e},t)=>a.jsx("textarea",{className:ee("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...e}));Vr.displayName="Textarea";function vX(){const{toast:n}=On(),[e,t]=x.useState({name:"",email:"",subject:"",message:""}),s=r=>{r.preventDefault(),n({title:"Message Sent",description:"Thank you for contacting us. We'll get back to you soon!"}),t({name:"",email:"",subject:"",message:""})};return a.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 pb-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h1",{className:"text-4xl font-bold font-serif text-foreground",children:"Contact Us"}),a.jsx("p",{className:"text-xl text-muted-foreground",children:"We'd love to hear from you. Get in touch with us."})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs(Z,{className:"p-6",children:[a.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2 text-foreground",children:[a.jsx(wN,{className:"h-5 w-5 text-primary"}),"Send Us a Message"]}),a.jsxs("form",{onSubmit:s,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"name",children:"Name"}),a.jsx(re,{id:"name",value:e.name,onChange:r=>t({...e,name:r.target.value}),placeholder:"Your name",required:!0,"data-testid":"input-contact-name"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"email",children:"Email"}),a.jsx(re,{id:"email",type:"email",value:e.email,onChange:r=>t({...e,email:r.target.value}),placeholder:"your@email.com",required:!0,"data-testid":"input-contact-email"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"subject",children:"Subject"}),a.jsx(re,{id:"subject",value:e.subject,onChange:r=>t({...e,subject:r.target.value}),placeholder:"What is this about?",required:!0,"data-testid":"input-contact-subject"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"message",children:"Message"}),a.jsx(Vr,{id:"message",value:e.message,onChange:r=>t({...e,message:r.target.value}),placeholder:"Your message...",rows:6,required:!0,"data-testid":"textarea-contact-message"})]}),a.jsxs(O,{type:"submit",className:"w-full","data-testid":"button-send-message",children:[a.jsx(po,{className:"h-4 w-4 mr-2"}),"Send Message"]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Z,{className:"p-6",children:[a.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2 text-foreground",children:[a.jsx(po,{className:"h-5 w-5 text-primary"}),"Email Us"]}),a.jsx("p",{className:"text-muted-foreground mb-2",children:"For general inquiries:"}),a.jsx("a",{href:"mailto:support@kalkiavatar.org",className:"text-primary hover:underline font-medium",children:"support@kalkiavatar.org"})]}),a.jsxs(Z,{className:"p-6",children:[a.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2 text-foreground",children:[a.jsx(wN,{className:"h-5 w-5 text-primary"}),"Feedback & Suggestions"]}),a.jsx("p",{className:"text-muted-foreground",children:"Your feedback helps us improve. If you have suggestions for new features or improvements, please let us know through the contact form or email us directly."})]}),a.jsxs(Z,{className:"p-6 bg-primary/5 dark:bg-primary/10 border-primary/20",children:[a.jsx("h3",{className:"font-semibold mb-3 text-foreground",children:"Response Time"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:'We typically respond to all inquiries within 24-48 hours. For urgent matters, please mark your subject line as "URGENT".'})]})]})]})]})}function bX(){return a.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 pb-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h1",{className:"text-4xl font-bold font-serif text-foreground",children:"Terms & Privacy"}),a.jsx("p",{className:"text-xl text-muted-foreground",children:"Legal information and privacy policies"})]}),a.jsxs(xa,{defaultValue:"terms",className:"w-full",children:[a.jsxs(ya,{className:"grid w-full grid-cols-3",children:[a.jsxs(qt,{value:"terms","data-testid":"tab-terms",children:[a.jsx(Po,{className:"h-4 w-4 mr-2"}),"Terms of Service"]}),a.jsxs(qt,{value:"privacy","data-testid":"tab-privacy",children:[a.jsx(Gv,{className:"h-4 w-4 mr-2"}),"Privacy Policy"]}),a.jsxs(qt,{value:"copyright","data-testid":"tab-copyright",children:[a.jsx(vc,{className:"h-4 w-4 mr-2"}),"Copyright"]})]}),a.jsx(gt,{value:"terms",children:a.jsx(Z,{className:"p-8",children:a.jsxs("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:[a.jsx("h2",{className:"text-foreground",children:"Terms of Service"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Last updated: October 17, 2025"}),a.jsx("h3",{className:"text-foreground mt-6",children:"1. Acceptance of Terms"}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:"By accessing and using the Trisandhya Sadhana App, you accept and agree to be bound by the terms and provision of this agreement."}),a.jsx("h3",{className:"text-foreground mt-6",children:"2. Use License"}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:"Permission is granted to use this application for personal, non-commercial spiritual practice and study. This license shall automatically terminate if you violate any of these restrictions."}),a.jsx("h3",{className:"text-foreground mt-6",children:"3. User Conduct"}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:"You agree to:"}),a.jsxs("ul",{className:"text-foreground dark:text-foreground",children:[a.jsx("li",{children:"Use the app respectfully and for its intended spiritual purposes"}),a.jsx("li",{children:"Not misuse or abuse any features or content provided"}),a.jsx("li",{children:"Respect the sacred nature of the content and teachings"}),a.jsx("li",{children:"Not attempt to reverse engineer or compromise the app's security"})]}),a.jsx("h3",{className:"text-foreground mt-6",children:"4. Content and Services"}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:'We strive to provide accurate and authentic spiritual content. However, we do not guarantee that all information will be error-free. Content is provided "as is" for educational and spiritual purposes.'}),a.jsx("h3",{className:"text-foreground mt-6",children:"5. Modifications"}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:"We reserve the right to modify these terms at any time. Continued use of the app after changes constitutes acceptance of the modified terms."})]})})}),a.jsx(gt,{value:"privacy",children:a.jsx(Z,{className:"p-8",children:a.jsxs("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:[a.jsx("h2",{className:"text-foreground",children:"Privacy Policy"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Last updated: October 17, 2025"}),a.jsx("h3",{className:"text-foreground mt-6",children:"1. Information We Collect"}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:"We collect information that you provide directly to us:"}),a.jsxs("ul",{className:"text-foreground dark:text-foreground",children:[a.jsx("li",{children:"Account information (email, name)"}),a.jsx("li",{children:"Usage data (progress tracking, preferences)"}),a.jsx("li",{children:"Device information (for notifications and alarms)"})]}),a.jsx("h3",{className:"text-foreground mt-6",children:"2. How We Use Your Information"}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:"Your information is used to:"}),a.jsxs("ul",{className:"text-foreground dark:text-foreground",children:[a.jsx("li",{children:"Provide and improve our services"}),a.jsx("li",{children:"Send notifications and reminders"}),a.jsx("li",{children:"Track your spiritual progress"}),a.jsx("li",{children:"Customize your experience"})]}),a.jsx("h3",{className:"text-foreground mt-6",children:"3. Data Storage and Security"}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:"We implement appropriate security measures to protect your personal information. Your data is stored securely and is only accessible to authorized personnel."}),a.jsx("h3",{className:"text-foreground mt-6",children:"4. Third-Party Services"}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:"We may use third-party services for analytics and cloud storage. These services have their own privacy policies and we encourage you to review them."}),a.jsx("h3",{className:"text-foreground mt-6",children:"5. Your Rights"}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:"You have the right to:"}),a.jsxs("ul",{className:"text-foreground dark:text-foreground",children:[a.jsx("li",{children:"Access your personal data"}),a.jsx("li",{children:"Request data correction or deletion"}),a.jsx("li",{children:"Opt-out of notifications"}),a.jsx("li",{children:"Export your data"})]}),a.jsx("h3",{className:"text-foreground mt-6",children:"6. Contact Us"}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:"If you have questions about this privacy policy, please contact us at support@kalkiavatar.org"})]})})}),a.jsx(gt,{value:"copyright",children:a.jsx(Z,{className:"p-8",children:a.jsxs("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:[a.jsx("h2",{className:"text-foreground",children:"Copyright & Content Attribution"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Last updated: October 17, 2025"}),a.jsx("h3",{className:"text-foreground mt-6",children:"1. App Copyright"}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:"© 2024-2025 Trisandhya Sadhana App. All rights reserved."}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:"The design, structure, and arrangement of this application are protected by copyright law. Unauthorized reproduction or distribution is prohibited."}),a.jsx("h3",{className:"text-foreground mt-6",children:"2. Content Sources"}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:"Spiritual content, teachings, and scriptures are sourced from:"}),a.jsxs("ul",{className:"text-foreground dark:text-foreground",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Bhavishya Malika:"})," Authentic spiritual teachings and content from"," ",a.jsx("a",{href:"https://bhavishyamalika.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"bhavishyamalika.com"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Sacred Scriptures:"})," Ancient texts and religious literature"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Audio/Video Content:"})," Devotional media and teachings"]})]}),a.jsx("h3",{className:"text-foreground mt-6",children:"3. Respect for Sacred Content"}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:"All spiritual content should be treated with reverence and respect. It is provided for personal spiritual development and study only."}),a.jsx("h3",{className:"text-foreground mt-6",children:"4. User-Generated Content"}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:"Any content you create or upload retains your copyright, but you grant us a license to use it within the app for providing our services."}),a.jsx("h3",{className:"text-foreground mt-6",children:"5. Fair Use"}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:"Content is provided for educational and spiritual purposes under fair use principles. Commercial use or redistribution is strictly prohibited."}),a.jsx("h3",{className:"text-foreground mt-6",children:"6. DMCA Compliance"}),a.jsx("p",{className:"text-foreground dark:text-foreground",children:"If you believe your copyright has been infringed, please contact us at support@kalkiavatar.org with detailed information."})]})})})]})]})}var DE="Collapsible",[wX,$3]=Nn(DE),[SX,IE]=wX(DE),z3=x.forwardRef((n,e)=>{const{__scopeCollapsible:t,open:s,defaultOpen:r,disabled:i,onOpenChange:o,...l}=n,[d=!1,u]=Ds({prop:s,defaultProp:r,onChange:o});return a.jsx(SX,{scope:t,disabled:i,contentId:$r(),open:d,onOpenToggle:x.useCallback(()=>u(h=>!h),[u]),children:a.jsx(pe.div,{"data-state":FE(d),"data-disabled":i?"":void 0,...l,ref:e})})});z3.displayName=DE;var U3="CollapsibleTrigger",H3=x.forwardRef((n,e)=>{const{__scopeCollapsible:t,...s}=n,r=IE(U3,t);return a.jsx(pe.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":FE(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...s,ref:e,onClick:oe(n.onClick,r.onOpenToggle)})});H3.displayName=U3;var LE="CollapsibleContent",V3=x.forwardRef((n,e)=>{const{forceMount:t,...s}=n,r=IE(LE,n.__scopeCollapsible);return a.jsx(ps,{present:t||r.open,children:({present:i})=>a.jsx(NX,{...s,ref:e,present:i})})});V3.displayName=LE;var NX=x.forwardRef((n,e)=>{const{__scopeCollapsible:t,present:s,children:r,...i}=n,o=IE(LE,t),[l,d]=x.useState(s),u=x.useRef(null),h=we(e,u),f=x.useRef(0),m=f.current,p=x.useRef(0),b=p.current,g=o.open||l,N=x.useRef(g),v=x.useRef(void 0);return x.useEffect(()=>{const y=requestAnimationFrame(()=>N.current=!1);return()=>cancelAnimationFrame(y)},[]),Jt(()=>{const y=u.current;if(y){v.current=v.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const S=y.getBoundingClientRect();f.current=S.height,p.current=S.width,N.current||(y.style.transitionDuration=v.current.transitionDuration,y.style.animationName=v.current.animationName),d(s)}},[o.open,s]),a.jsx(pe.div,{"data-state":FE(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...i,ref:h,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...n.style},children:g&&r})});function FE(n){return n?"open":"closed"}var jX=z3,CX=H3,AX=V3,$o="Accordion",EX=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[OE,kX,TX]=Ny($o),[e1,AQ]=Nn($o,[TX,$3]),BE=$3(),W3=ut.forwardRef((n,e)=>{const{type:t,...s}=n,r=s,i=s;return a.jsx(OE.Provider,{scope:n.__scopeAccordion,children:t==="multiple"?a.jsx(RX,{...i,ref:e}):a.jsx(MX,{...r,ref:e})})});W3.displayName=$o;var[G3,PX]=e1($o),[q3,_X]=e1($o,{collapsible:!1}),MX=ut.forwardRef((n,e)=>{const{value:t,defaultValue:s,onValueChange:r=()=>{},collapsible:i=!1,...o}=n,[l,d]=Ds({prop:t,defaultProp:s,onChange:r});return a.jsx(G3,{scope:n.__scopeAccordion,value:l?[l]:[],onItemOpen:d,onItemClose:ut.useCallback(()=>i&&d(""),[i,d]),children:a.jsx(q3,{scope:n.__scopeAccordion,collapsible:i,children:a.jsx(K3,{...o,ref:e})})})}),RX=ut.forwardRef((n,e)=>{const{value:t,defaultValue:s,onValueChange:r=()=>{},...i}=n,[o=[],l]=Ds({prop:t,defaultProp:s,onChange:r}),d=ut.useCallback(h=>l((f=[])=>[...f,h]),[l]),u=ut.useCallback(h=>l((f=[])=>f.filter(m=>m!==h)),[l]);return a.jsx(G3,{scope:n.__scopeAccordion,value:o,onItemOpen:d,onItemClose:u,children:a.jsx(q3,{scope:n.__scopeAccordion,collapsible:!0,children:a.jsx(K3,{...i,ref:e})})})}),[DX,t1]=e1($o),K3=ut.forwardRef((n,e)=>{const{__scopeAccordion:t,disabled:s,dir:r,orientation:i="vertical",...o}=n,l=ut.useRef(null),d=we(l,e),u=kX(t),f=Wm(r)==="ltr",m=oe(n.onKeyDown,p=>{var P;if(!EX.includes(p.key))return;const b=p.target,g=u().filter(_=>{var R;return!((R=_.ref.current)!=null&&R.disabled)}),N=g.findIndex(_=>_.ref.current===b),v=g.length;if(N===-1)return;p.preventDefault();let y=N;const S=0,w=v-1,j=()=>{y=N+1,y>w&&(y=S)},E=()=>{y=N-1,y<S&&(y=w)};switch(p.key){case"Home":y=S;break;case"End":y=w;break;case"ArrowRight":i==="horizontal"&&(f?j():E());break;case"ArrowDown":i==="vertical"&&j();break;case"ArrowLeft":i==="horizontal"&&(f?E():j());break;case"ArrowUp":i==="vertical"&&E();break}const T=y%v;(P=g[T].ref.current)==null||P.focus()});return a.jsx(DX,{scope:t,disabled:s,direction:r,orientation:i,children:a.jsx(OE.Slot,{scope:t,children:a.jsx(pe.div,{...o,"data-orientation":i,ref:d,onKeyDown:s?void 0:m})})})}),Db="AccordionItem",[IX,$E]=e1(Db),Y3=ut.forwardRef((n,e)=>{const{__scopeAccordion:t,value:s,...r}=n,i=t1(Db,t),o=PX(Db,t),l=BE(t),d=$r(),u=s&&o.value.includes(s)||!1,h=i.disabled||n.disabled;return a.jsx(IX,{scope:t,open:u,disabled:h,triggerId:d,children:a.jsx(jX,{"data-orientation":i.orientation,"data-state":t5(u),...l,...r,ref:e,disabled:h,open:u,onOpenChange:f=>{f?o.onItemOpen(s):o.onItemClose(s)}})})});Y3.displayName=Db;var X3="AccordionHeader",Q3=ut.forwardRef((n,e)=>{const{__scopeAccordion:t,...s}=n,r=t1($o,t),i=$E(X3,t);return a.jsx(pe.h3,{"data-orientation":r.orientation,"data-state":t5(i.open),"data-disabled":i.disabled?"":void 0,...s,ref:e})});Q3.displayName=X3;var fC="AccordionTrigger",J3=ut.forwardRef((n,e)=>{const{__scopeAccordion:t,...s}=n,r=t1($o,t),i=$E(fC,t),o=_X(fC,t),l=BE(t);return a.jsx(OE.ItemSlot,{scope:t,children:a.jsx(CX,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":r.orientation,id:i.triggerId,...l,...s,ref:e})})});J3.displayName=fC;var Z3="AccordionContent",e5=ut.forwardRef((n,e)=>{const{__scopeAccordion:t,...s}=n,r=t1($o,t),i=$E(Z3,t),o=BE(t);return a.jsx(AX,{role:"region","aria-labelledby":i.triggerId,"data-orientation":r.orientation,...o,...s,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...n.style}})});e5.displayName=Z3;function t5(n){return n?"open":"closed"}var LX=W3,FX=Y3,OX=Q3,n5=J3,s5=e5;const BX=LX,r5=x.forwardRef(({className:n,...e},t)=>a.jsx(FX,{ref:t,className:ee("border-b",n),...e}));r5.displayName="AccordionItem";const i5=x.forwardRef(({className:n,children:e,...t},s)=>a.jsx(OX,{className:"flex",children:a.jsxs(n5,{ref:s,className:ee("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",n),...t,children:[e,a.jsx(bw,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));i5.displayName=n5.displayName;const a5=x.forwardRef(({className:n,children:e,...t},s)=>a.jsx(s5,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...t,children:a.jsx("div",{className:ee("pb-4 pt-0",n),children:e})}));a5.displayName=s5.displayName;const sP=[{category:"Trisandhya Basics",icon:"🙏",color:"orange",questions:[{question:"What is the importance of chanting Madhav's name during Trisandhya?",answer:"Chanting Madhav's name during Trisandhya invokes divine grace and protection. It connects the devotee directly with Lord Madhav's consciousness and brings spiritual transformation. Regular practice purifies the mind and heart, leading to inner peace and divine blessings."},{question:"What is Durga Madhav Stuti?",answer:"Durga Madhav Stuti is a sacred hymn that praises both Goddess Durga and Lord Madhav. It is chanted during Trisandhya to invoke their combined divine power for protection, prosperity, and spiritual progress. The stuti acknowledges the divine masculine and feminine energies."},{question:"What is 'Dasavtara Strotra'?",answer:"Dasavtara Strotra is a prayer that glorifies the ten incarnations (avatars) of Lord Vishnu. Reciting this during Trisandhya helps devotees remember and honor the divine manifestations that came to restore dharma at different times in history, including the upcoming Kalki Avatar."},{question:"What is the 'Vishnu Shodasha Naam' and why should it be chanted?",answer:"Vishnu Shodasha Naam refers to the sixteen sacred names of Lord Vishnu. Chanting these names during Trisandhya invokes different divine qualities and energies. Each name carries specific spiritual vibrations that purify consciousness and grant divine blessings."},{question:"What is the Gayatri Mantra, and what is its significance in Trisandhya?",answer:"The Gayatri Mantra is one of the most powerful Vedic mantras that invokes divine light and wisdom. In Trisandhya, it is chanted to illuminate the mind, remove ignorance, and awaken spiritual consciousness. It is considered the essence of all Vedic knowledge."},{question:"Which mantras are chanted with Trisandhya / Trikal Sandhya?",answer:"Trisandhya includes several mantras: Gayatri Mantra, Vishnu Shodasha Naam, Dasavtara Strotra, Durga Madhav Stuti, and continuous chanting of Madhav's name. Each mantra serves a specific spiritual purpose and collectively they create a complete spiritual practice."}]},{category:"Practice & Timing",icon:"⏰",color:"amber",questions:[{question:"It was told that Trisandhya can be done in less than 5 minutes, especially during lunch break in the office for working people. Please give a complete step-by-step process to do it in the mentioned duration.",answer:"Quick Trisandhya process: 1) Sit quietly and take 3 deep breaths (30 seconds). 2) Chant 'Om Namo Madhavaya' 21 times with focus (2 minutes). 3) Recite Gayatri Mantra 3 times (1 minute). 4) Close eyes and meditate on Madhav for 1 minute. 5) Pray for guidance (30 seconds). Total: approximately 5 minutes. The key is sincere devotion, not duration."},{question:"What to do if we forget any one of Trikal sandhya, like in morning?",answer:"If you miss morning Trisandhya, do it as soon as you remember during the day. The important thing is not to feel guilty but to resume practice with devotion. You can also do an extra round during the next Sandhya time as compensation. Lord Madhav appreciates sincere effort more than perfect timing."},{question:"I do Trisandhya regularly, but I'm away at work all day, so I'm unable to do it with my 1.5-year-old baby. Is there a way for my baby to also benefit from it?",answer:"Your baby automatically receives spiritual benefits from your Trisandhya practice! The divine energy you generate creates a protective aura around your family. You can also play Madhav naam chanting audio for your baby, or do a quick simplified Trisandhya (just Madhav naam chanting) together when you're with your child in the morning or evening."}]},{category:"Spiritual Questions",icon:"✨",color:"blue",questions:[{question:"My Rajput friend has been following non-vegetarian food habits from birth. Now he wants to change and become a vegetarian. Is it necessary to follow Trisandhya? Is it possible for him to become pure?",answer:"Yes, it is absolutely possible for anyone to become pure through sincere practice! Trisandhya greatly helps in spiritual transformation. When someone regularly practices Trisandhya, their consciousness naturally elevates and they develop sattvic (pure) tendencies. The combination of vegetarian diet and Trisandhya accelerates spiritual purification. Start gradually - reduce non-vegetarian food while increasing Trisandhya practice. Divine grace supports all sincere seekers regardless of their past."}]}];function $X(){const[n,e]=x.useState(""),t=sP.map(r=>({...r,questions:r.questions.filter(i=>i.question.toLowerCase().includes(n.toLowerCase())||i.answer.toLowerCase().includes(n.toLowerCase()))})).filter(r=>r.questions.length>0),s=sP.reduce((r,i)=>r+i.questions.length,0);return a.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[a.jsxs(Z,{className:"border-2 shadow-xl bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20",children:[a.jsx(xi,{className:"border-b pb-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-3 bg-blue-500 text-white rounded-xl",children:a.jsx(at,{className:"h-6 w-6"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx(yi,{className:"text-3xl font-bold",children:"Question / Answers"}),a.jsx(wo,{className:"text-base mt-1",children:"Read all answers about Trisandhya based on authentic information from Bhavishya Malika"})]}),a.jsxs(sn,{variant:"secondary",className:"text-lg px-4 py-2",children:[s," Questions"]})]})}),a.jsxs(Dn,{className:"pt-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx(CA,{className:"absolute left-4 top-4 h-5 w-5 text-muted-foreground"}),a.jsx(re,{placeholder:"Search questions about Trisandhya, mantras, practice...",value:n,onChange:r=>e(r.target.value),className:"pl-12 h-14 text-lg border-2 focus:border-blue-500 dark:focus:border-blue-400","data-testid":"input-search-questions"})]}),n&&a.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(lr,{className:"h-4 w-4"}),a.jsxs("span",{children:["Found ",t.reduce((r,i)=>r+i.questions.length,0)," results"]})]})]})]}),t.length===0?a.jsx(Z,{className:"border-2 shadow-xl",children:a.jsxs(Dn,{className:"py-16 text-center",children:[a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-blue-100 dark:bg-blue-900/20 mb-4",children:a.jsx(DR,{className:"h-10 w-10 text-blue-500"})})}),a.jsx("h3",{className:"text-2xl font-bold mb-3",children:"No results found"}),a.jsxs("p",{className:"text-lg text-muted-foreground mb-6 max-w-md mx-auto",children:[`We couldn't find any questions matching "`,n,'". Try different keywords or browse all categories below.']}),a.jsx(O,{variant:"default",size:"lg",className:"bg-blue-500 hover:bg-blue-600",onClick:()=>e(""),children:"Clear Search"})]})}):a.jsx("div",{className:"grid gap-6",children:t.map((r,i)=>a.jsxs(Z,{className:"border-2 shadow-xl overflow-hidden",children:[a.jsx(xi,{className:`bg-gradient-to-r ${r.color==="orange"?"from-orange-50 to-amber-50 dark:from-orange-950/20 dark:to-amber-950/20":r.color==="amber"?"from-amber-50 to-yellow-50 dark:from-amber-950/20 dark:to-yellow-950/20":r.color==="blue"?"from-blue-50 to-cyan-50 dark:from-blue-950/20 dark:to-cyan-950/20":"from-purple-50 to-pink-50 dark:from-purple-950/20 dark:to-pink-950/20"} border-b-2`,children:a.jsxs(yi,{className:"flex items-center gap-3 text-2xl",children:[a.jsx("span",{className:"text-3xl",children:r.icon}),r.category,a.jsxs(sn,{variant:"secondary",className:"ml-auto text-sm",children:[r.questions.length," ",r.questions.length===1?"question":"questions"]})]})}),a.jsx(Dn,{className:"p-6",children:a.jsx(BX,{type:"single",collapsible:!0,className:"w-full space-y-3",children:r.questions.map((o,l)=>a.jsxs(r5,{value:`item-${i}-${l}`,className:`border-2 rounded-xl px-6 ${r.color==="orange"?"border-orange-200 dark:border-orange-800":r.color==="amber"?"border-amber-200 dark:border-amber-800":r.color==="blue"?"border-blue-200 dark:border-blue-800":"border-purple-200 dark:border-purple-800"}`,"data-testid":`accordion-item-${l}`,children:[a.jsx(i5,{className:"text-left hover:no-underline py-5",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(wN,{className:`h-5 w-5 mt-0.5 flex-shrink-0 ${r.color==="orange"?"text-orange-500":r.color==="amber"?"text-amber-600":r.color==="blue"?"text-blue-500":"text-purple-500"}`}),a.jsx("span",{className:"font-semibold text-base",children:o.question})]})}),a.jsx(a5,{className:`pt-2 pb-5 pl-8 text-base leading-relaxed ${r.color==="orange"?"text-orange-900/70 dark:text-orange-100/70":r.color==="amber"?"text-amber-900/70 dark:text-amber-100/70":r.color==="blue"?"text-blue-900/70 dark:text-blue-100/70":"text-purple-900/70 dark:text-purple-100/70"}`,children:o.answer})]},l))})})]},i))}),a.jsx(Z,{className:"border-2 shadow-xl bg-gradient-to-r from-amber-50 to-yellow-50 dark:from-amber-950/20 dark:to-yellow-950/20",children:a.jsxs(Dn,{className:"py-6 text-center",children:[a.jsx(lr,{className:"h-8 w-8 mx-auto mb-3 text-amber-600"}),a.jsx("p",{className:"text-sm font-medium text-amber-900 dark:text-amber-200 max-w-2xl mx-auto",children:"All answers are based on authentic information from the Bhavishya Malika community and Trisandhya teachings. For more detailed guidance, visit the official Bhavishya Malika website or consult with spiritual teachers."})]})}),a.jsx(Z,{className:"border-2 shadow-lg bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20",children:a.jsxs(Dn,{className:"py-6 text-center",children:[a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Still have questions?"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Can't find the answer you're looking for? Contact our support team."}),a.jsxs(O,{variant:"default",size:"sm",className:"bg-blue-500 hover:bg-blue-600",onClick:()=>window.location.href="/contact","data-testid":"button-contact-support",children:[a.jsx(po,{className:"h-4 w-4 mr-2"}),"Contact Support"]})]})})]})}const zX=Iu("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),zE=x.forwardRef(({className:n,variant:e,...t},s)=>a.jsx("div",{ref:s,role:"alert",className:ee(zX({variant:e}),n),...t}));zE.displayName="Alert";const UX=x.forwardRef(({className:n,...e},t)=>a.jsx("h5",{ref:t,className:ee("mb-1 font-medium leading-none tracking-tight",n),...e}));UX.displayName="AlertTitle";const UE=x.forwardRef(({className:n,...e},t)=>a.jsx("div",{ref:t,className:ee("text-sm [&_p]:leading-relaxed",n),...e}));UE.displayName="AlertDescription";function HX(){const[n,e]=x.useState(!0),[t,s]=x.useState(!1),[r,i]=x.useState(!1),[o,l]=x.useState(!1),[d,u]=x.useState("website"),h=x.useRef(null),f=x.useRef(null),{open:m,setOpen:p}=Lw(),{theme:b,setTheme:g}=pI(),{isAdmin:N}=Ry();x.useEffect(()=>{const w=requestAnimationFrame(()=>p(!1));return()=>cancelAnimationFrame(w)},[]),x.useEffect(()=>{const w=setTimeout(()=>{l(!0)},2e3);return()=>clearTimeout(w)},[]),x.useEffect(()=>{const w=j=>{f.current&&!f.current.contains(j.target)&&r&&i(!1)};return r&&document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[r]),x.useEffect(()=>()=>{i(!1),l(!0)},[]);const v=()=>{var w;document.fullscreenElement?(document.exitFullscreen(),s(!1)):((w=h.current)==null||w.requestFullscreen(),s(!0))};x.useEffect(()=>{const w=()=>{s(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",w),()=>document.removeEventListener("fullscreenchange",w)},[]);const y=()=>{g(b==="light"?"dark":"light")},S=()=>{o?(l(!1),i(!0)):i(!r)};return a.jsxs("div",{className:"fixed inset-0 bg-background",children:[a.jsx("div",{className:"fixed top-4 left-4 z-[100]",children:a.jsx("div",{className:"backdrop-blur-md bg-background/80 rounded-lg shadow-lg border border-border p-1",children:a.jsx(cI,{"data-testid":"button-sidebar-toggle",onClick:()=>p(!m)})})}),a.jsxs(xa,{value:d,onValueChange:u,className:"w-full h-full flex flex-col",children:[a.jsx(gt,{value:"website",className:"flex-1 mt-0 m-0 p-0 relative",children:a.jsxs("div",{className:"absolute inset-0",ref:h,children:[n&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-br from-orange-50 to-amber-50 dark:from-gray-900 dark:to-gray-800 z-10",children:a.jsxs("div",{className:"text-center space-y-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"animate-spin rounded-full h-20 w-20 border-4 border-orange-200 dark:border-orange-800 mx-auto"}),a.jsx("div",{className:"animate-spin rounded-full h-20 w-20 border-t-4 border-orange-500 mx-auto absolute top-0 left-1/2 -translate-x-1/2"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xl font-semibold text-orange-900 dark:text-orange-300",children:"Loading Sacred Content"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"Please wait while we connect to Bhavishya Malika..."})]})]})}),a.jsx("iframe",{src:"https://www.bhavishyamalika.com/",className:"w-full h-full border-0 notranslate",title:"Bhavishya Malika Official Website",onLoad:()=>e(!1),"data-testid":"iframe-bhavishyamalika",sandbox:"allow-same-origin allow-scripts allow-popups allow-forms allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation",allow:"fullscreen",translate:"no"})]})}),a.jsx(gt,{value:"introduction",className:"flex-1 overflow-auto mt-0 p-6",children:a.jsx("div",{className:"max-w-5xl mx-auto space-y-6",children:a.jsxs(Z,{className:"border-2 shadow-xl",children:[a.jsxs(xi,{className:"bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-950/20 dark:to-amber-950/20",children:[a.jsxs(yi,{className:"flex items-center gap-3 text-2xl",children:[a.jsx("div",{className:"p-2 bg-orange-500 text-white rounded-lg",children:a.jsx(at,{className:"h-6 w-6"})}),"About Bhavishya Malika"]}),a.jsx(wo,{className:"text-base",children:"The Sacred Prophetic Scripture - Garland of Prophecies"})]}),a.jsxs(Dn,{className:"space-y-6 p-8",children:[a.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[a.jsxs("p",{className:"text-lg leading-relaxed text-muted-foreground",children:["Bhavishya Malika, meaning ",a.jsx("strong",{children:'"Garland of Prophecies"'}),", is an ancient prophetic scripture written approximately 600 years ago (16th century, ~1450-1550 AD) by the ",a.jsx("strong",{children:"Panchasakha"})," (Five Friends) – a revered group of saints from Odisha, India. The primary author is ",a.jsx("strong",{children:"Sant Shri Achyutananda Das"}),", alongside Saints Ananta Das, Jasovanta Das, Jagannath Das, and Balaram Das."]}),a.jsxs("p",{className:"text-lg leading-relaxed text-muted-foreground",children:["This sacred text comprises approximately ",a.jsx("strong",{children:"185,000 individual works"})," originally inscribed on palm leaves in the Odia script. It is considered the ",a.jsx("strong",{children:"last and final scripture of Sanatan Dharma"})," for the Kali Yuga era."]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-950/20 dark:to-amber-950/20 p-6 rounded-xl border-2 border-orange-200 dark:border-orange-800",children:[a.jsxs("h4",{className:"font-bold text-xl mb-4 flex items-center gap-2",children:[a.jsx(lr,{className:"h-5 w-5 text-orange-500"}),"Divine Inspiration"]}),a.jsxs("p",{className:"text-base leading-relaxed",children:["Bhavishya Malika was divinely inspired by ",a.jsx("strong",{children:"Lord Jagannath"})," to guide humanity through the end of Kali Yuga, awaken devotees who have reincarnated across all four Yugas, prepare for Lord Kalki's arrival, and provide salvation guidance during the transformational period leading to ",a.jsx("strong",{children:"Satya Yuga"})," (the Golden Age), predicted to begin in ",a.jsx("strong",{children:"2032"}),"."]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-950/20 dark:to-amber-950/20 p-6 rounded-xl border-2 border-orange-200 dark:border-orange-800",children:[a.jsxs("h4",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[a.jsx(qv,{className:"h-5 w-5 text-orange-500"}),"Core Purpose"]}),a.jsxs("ul",{className:"space-y-3",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-orange-500 mt-1",children:"✦"}),a.jsx("span",{children:"Guide humanity through the end of Kali Yuga"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-orange-500 mt-1",children:"✦"}),a.jsx("span",{children:"Awaken devotees scattered across all four Yugas"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-orange-500 mt-1",children:"✦"}),a.jsx("span",{children:"Prepare for Lord Kalki's arrival"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-orange-500 mt-1",children:"✦"}),a.jsx("span",{children:"Provide salvation guidance for the transformation"})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-yellow-50 dark:from-amber-950/20 dark:to-yellow-950/20 p-6 rounded-xl border-2 border-amber-200 dark:border-amber-800",children:[a.jsxs("h4",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[a.jsx(NA,{className:"h-5 w-5 text-amber-600"}),"Key Prophecies"]}),a.jsxs("ul",{className:"space-y-3",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-amber-600 mt-1",children:"✦"}),a.jsx("span",{children:"Signs of the end of Kali Yuga (shortened to 5,000 years)"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-amber-600 mt-1",children:"✦"}),a.jsx("span",{children:"Natural disasters, wars, famines, epidemics"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-amber-600 mt-1",children:"✦"}),a.jsx("span",{children:"Signs from Jagannath Temple in Puri, Odisha"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-amber-600 mt-1",children:"✦"}),a.jsx("span",{children:"Lord Kalki's birthplace: Jajpur district, Odisha"})]})]})]})]}),a.jsxs(zE,{className:"border-2 border-orange-200 dark:border-orange-800 bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-950/30 dark:to-amber-950/30",children:[a.jsx(at,{className:"h-5 w-5 text-orange-600"}),a.jsxs(UE,{className:"text-base ml-2",children:[a.jsx("strong",{children:"Modern Availability:"})," Pandit Shri Kashinath Mishra, a renowned scholar of Jagannath culture, has translated and compiled the text after 40+ years of research. The scripture is now available in English, Hindi, Russian, German, Japanese, Gujarati, Kannada, Bengali, Telugu, and Punjabi. Free PDF downloads are available on en.bhavishyamalika.com."]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-950/20 dark:to-amber-950/20 p-6 rounded-xl border-2 border-orange-200 dark:border-orange-800",children:[a.jsxs("h4",{className:"font-bold text-xl mb-4 flex items-center gap-2",children:[a.jsx(lr,{className:"h-5 w-5 text-orange-500"}),"Spiritual Guidance for the Transition"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-base leading-relaxed",children:"The text emphasizes righteous living during these transformative times:"}),a.jsxs("ul",{className:"space-y-3 ml-4",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-orange-500 mt-1",children:"✦"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Righteous Living:"})," Give up harmful habits (non-vegetarian food, alcohol, intoxicants)"]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-orange-500 mt-1",children:"✦"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Daily Spiritual Practice:"}),' Trisandhya worship (three times daily), chanting "Madhav"']})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-orange-500 mt-1",children:"✦"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Scripture Study:"})," Reading Shrimad Bhagavat Mahapuran"]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-orange-500 mt-1",children:"✦"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Faith and Devotion:"})," Maintain unwavering faith to navigate coming challenges"]})]})]})]})]})]})]})})}),a.jsx(gt,{value:"prophecies",className:"flex-1 overflow-auto mt-0 p-6",children:a.jsx("div",{className:"max-w-5xl mx-auto space-y-6",children:a.jsxs(Z,{className:"border-2 shadow-xl",children:[a.jsxs(xi,{className:"bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-950/20 dark:to-amber-950/20",children:[a.jsxs(yi,{className:"flex items-center gap-3 text-2xl",children:[a.jsx("div",{className:"p-2 bg-orange-500 text-white rounded-lg",children:a.jsx(qv,{className:"h-6 w-6"})}),"Sacred Prophecies"]}),a.jsx(wo,{className:"text-base",children:"Ancient predictions about the future and the transformation of ages"})]}),a.jsx(Dn,{className:"p-8",children:a.jsx("div",{className:"grid gap-6",children:[{title:"The End of Kali Yuga",content:"The texts describe the culmination of Kali Yuga, an age characterized by discord, hypocrisy, and decline in dharma. Signs include moral degradation, natural calamities, and social upheaval.",color:"orange"},{title:"Major Events Predicted",content:"Bhavishya Malika predicts several major events during the transition period:",list:["Third World War","64 types of pandemics","Severe fires and solar storms","Seven days of darkness","Economic recession and natural disasters"],color:"amber"},{title:"The Divine Intervention",content:"Prophecies speak of divine intervention to restore balance and righteousness. The appearance of Kalki Avatar marks the beginning of this transformation, ushering in a new golden age.",color:"yellow"},{title:"The New Age - Satya Yuga",content:"The transition to Satya Yuga beginning in 2032 will bring peace, prosperity, and spiritual enlightenment. Humanity will live in harmony with nature and divine principles will govern society.",color:"orange"},{title:"The Role of Devotees",content:"Those who maintain their faith and practice sadhana (especially Trisandhya) during these transformative times will be blessed with spiritual progress and will assist in establishing the new age of truth.",color:"amber"}].map((w,j)=>a.jsxs("div",{className:`border-l-4 ${w.color==="orange"?"border-orange-500 bg-orange-50 dark:bg-orange-950/20":w.color==="amber"?"border-amber-500 bg-amber-50 dark:bg-amber-950/20":"border-yellow-500 bg-yellow-50 dark:bg-yellow-950/20"} pl-6 pr-6 py-5 rounded-r-xl`,children:[a.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center gap-2",children:[a.jsx("span",{className:`text-${w.color}-500`,children:"✦"}),w.title]}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:w.content}),w.list&&a.jsx("ul",{className:"mt-3 space-y-2 ml-4",children:w.list.map((E,T)=>a.jsxs("li",{className:"flex items-start gap-2 text-muted-foreground",children:[a.jsx("span",{className:`text-${w.color}-500 mt-1`,children:"•"}),a.jsx("span",{children:E})]},T))})]},j))})})]})})}),a.jsx(gt,{value:"timeline",className:"flex-1 overflow-auto mt-0 p-6",children:a.jsx("div",{className:"max-w-5xl mx-auto space-y-6",children:a.jsxs(Z,{className:"border-2 shadow-xl",children:[a.jsxs(xi,{className:"bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-950/20 dark:to-amber-950/20",children:[a.jsxs(yi,{className:"flex items-center gap-3 text-2xl",children:[a.jsx("div",{className:"p-2 bg-orange-500 text-white rounded-lg",children:a.jsx(yN,{className:"h-6 w-6"})}),"Prophetic Timeline"]}),a.jsx(wo,{className:"text-base",children:"Key events and periods in the prophecies"})]}),a.jsx(Dn,{className:"p-8",children:a.jsx("div",{className:"space-y-8",children:[{title:"The Dark Age (Kali Yuga)",description:"Period of spiritual decline, moral degradation, and increasing chaos. According to Bhavishya Malika, this age has now ended.",color:"gray"},{title:"Transition Period (Current Time)",description:"Natural calamities, pandemics, social upheaval, breakdown of traditional values, and widespread confusion mark the transition period between ages.",color:"amber"},{title:"2032 - Beginning of Satya Yuga",description:"According to Jagannath culture and Bhavishya Malika, Satya Yuga (the Golden Age) will begin in 2032, bringing a new era of truth and righteousness.",color:"orange",highlight:!0},{title:"Satya Yuga (Golden Age Fully Established)",description:"The new age of truth, righteousness, and spiritual enlightenment. Peace, prosperity, and divine knowledge prevail across the world.",color:"green"}].map((w,j)=>a.jsxs("div",{className:"relative pl-12 pb-2",children:[a.jsx("div",{className:`absolute left-0 top-2 w-6 h-6 rounded-full ${w.highlight?"bg-orange-500 ring-4 ring-orange-200 dark:ring-orange-800":w.color==="gray"?"bg-gray-400":w.color==="amber"?"bg-amber-500":"bg-green-500"} ${w.highlight?"animate-pulse":""}`}),j<3&&a.jsx("div",{className:"absolute left-3 top-8 bottom-0 w-0.5 bg-gradient-to-b from-gray-300 to-gray-100 dark:from-gray-700 dark:to-gray-800"}),a.jsxs("div",{className:`${w.highlight?"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-950/30 dark:to-amber-950/30 border-2 border-orange-300 dark:border-orange-700 shadow-lg":"bg-muted/30 border"} p-6 rounded-xl`,children:[a.jsx("h4",{className:"font-bold text-lg mb-2",children:w.title}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:w.description})]})]},j))})})]})})})]}),a.jsx("div",{ref:f,className:`fixed right-0 top-24 z-50 transition-all duration-500 ease-in-out ${o&&!r?"translate-x-[calc(100%-32px)]":"translate-x-0"}`,children:a.jsxs("div",{className:"relative",children:[o&&!r&&a.jsx("button",{onClick:S,className:"absolute right-0 top-0 h-16 w-16 rounded-l-full bg-orange-500 hover:bg-orange-600 text-white shadow-xl hover:shadow-2xl transition-all duration-300 flex items-center justify-start pl-3","data-testid":"button-floating-menu-collapsed",children:a.jsx(mc,{className:"h-6 w-6"})}),a.jsx("div",{className:`backdrop-blur-xl bg-gradient-to-br from-background/95 to-background/90 rounded-l-2xl shadow-2xl border-l border-t border-b border-border/50 overflow-hidden transition-all duration-500 ${o&&!r?"opacity-0 w-0":"opacity-100 w-72"}`,children:a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2 pb-3 border-b border-border/50",children:[a.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[a.jsx(Zz,{className:"h-5 w-5 text-orange-500"}),"Menu"]}),a.jsx(O,{onClick:()=>{i(!1),setTimeout(()=>l(!0),300)},variant:"ghost",size:"sm",className:"h-8 w-8 p-0","data-testid":"button-close-menu",children:a.jsx(bc,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs(O,{onClick:()=>{u("website")},variant:d==="website"?"default":"outline",size:"sm",className:"h-auto py-2 px-3 flex flex-col items-center gap-1","data-testid":"button-menu-website",children:[a.jsx(qz,{className:"h-4 w-4"}),a.jsx("span",{className:"text-xs",children:"Website"})]}),a.jsxs(O,{onClick:()=>{u("introduction")},variant:d==="introduction"?"default":"outline",size:"sm",className:"h-auto py-2 px-3 flex flex-col items-center gap-1","data-testid":"button-menu-introduction",children:[a.jsx(at,{className:"h-4 w-4"}),a.jsx("span",{className:"text-xs",children:"Introduction"})]}),a.jsxs(O,{onClick:()=>{u("prophecies")},variant:d==="prophecies"?"default":"outline",size:"sm",className:"h-auto py-2 px-3 flex flex-col items-center gap-1","data-testid":"button-menu-prophecies",children:[a.jsx(qv,{className:"h-4 w-4"}),a.jsx("span",{className:"text-xs",children:"Prophecies"})]}),a.jsxs(O,{onClick:()=>{u("timeline")},variant:d==="timeline"?"default":"outline",size:"sm",className:"h-auto py-2 px-3 flex flex-col items-center gap-1","data-testid":"button-menu-timeline",children:[a.jsx(yN,{className:"h-4 w-4"}),a.jsx("span",{className:"text-xs",children:"Timeline"})]})]}),d==="website"&&a.jsxs("div",{className:"space-y-2 pt-2 border-t border-border/50",children:[a.jsxs(O,{onClick:v,variant:"outline",size:"sm",className:"w-full justify-start gap-2 h-9","data-testid":"button-menu-fullscreen",children:[t?a.jsx(tU,{className:"h-4 w-4"}):a.jsx(Jz,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:t?"Exit Fullscreen":"Fullscreen"})]}),a.jsxs(O,{onClick:()=>window.open("https://www.bhavishyamalika.com/","_blank"),variant:"outline",size:"sm",className:"w-full justify-start gap-2 h-9","data-testid":"button-menu-external",children:[a.jsx(Yp,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Open in New Tab"})]})]}),a.jsxs("div",{className:"space-y-2 pt-2 border-t border-border/50",children:[N&&a.jsxs(O,{onClick:()=>window.location.href="/admin",variant:"outline",size:"sm",className:"w-full justify-start gap-2 h-9","data-testid":"button-menu-admin",children:[a.jsx(vc,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Admin Panel"})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("div",{className:"flex-1",children:a.jsx(YI,{})})}),a.jsxs(O,{onClick:y,variant:"outline",size:"sm",className:"w-full justify-start gap-2 h-9","data-testid":"button-menu-theme",children:[b==="light"?a.jsx(FR,{className:"h-4 w-4"}):a.jsx(BR,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:b==="light"?"Dark Mode":"Light Mode"})]}),a.jsxs(O,{onClick:()=>window.location.href="/api/logout",variant:"outline",size:"sm",className:"w-full justify-start gap-2 h-9 text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-950/20","data-testid":"button-menu-logout",children:[a.jsx(Qz,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Logout"})]})]})]})})]})})]})}const VX=[{title:"The Touch of Madhab: A Spiritual Awakening",author:"@KalpanaKal",views:"6.2K",timeAgo:"5 months ago",category:"Life Protection",excerpt:"What can I say about Madhab, Krishna—the one who is love itself for me? He resides in every heart and has blessed me with countless divine experiences throughout my spiritual journey."},{title:"Prabhuji's Divine Presence",author:"@HarshadaJoshi",views:"2.6K",timeAgo:"1 month ago",category:"Discernible",excerpt:"Last week, after completing the evening Trisandhya, I was sitting with my son and eldest sister. Suddenly, I felt an overwhelming divine presence that filled the entire room with peace."},{title:"Madhava Protected From Pahalgam Attack And More",author:"@DipaliLokhande",views:"6K",timeAgo:"5 months ago",category:"Life Protection",excerpt:"Jai Shri Madhav! When we went on the Kashmir tour, while going to Srinagar, our vehicle stopped on the way. Later we learned that there was an attack in Pahalgam, but Madhav protected us from danger."},{title:"From Dependence to Fearlessness",author:"@JyotiShirahatti",views:"6.4K",timeAgo:"5 months ago",category:"Say Something",excerpt:"There was a time when I was completely dependent on my husband for every little thing. Stepping out of the house alone seemed impossible. But through Trisandhya practice, I found inner strength."},{title:"The Fire Put Off Automatically - Divine Effect of Madhav Name Chants",author:"@ShailajaTripathi",views:"5.8K",timeAgo:"5 months ago",category:"Life Protection",excerpt:"This incident just took place yesterday. I was on work-off for three days straight and my husband was cooking. Suddenly, a fire broke out, but as I chanted Madhav's name, it extinguished automatically."},{title:"The Divine Grace Of Bhavishya Malika and Trisandhya",author:"@HarshadaJoshi",views:"6.5K",timeAgo:"5 months ago",category:"Dream",excerpt:"Gratitude at the lotus feet of Mahaprabhuji Shree Satya Ananta Madhav, Pujya Pandit Kashinath Mishraji. Through regular practice of Trisandhya, I received divine guidance in my dreams."},{title:"Experiencing the Divinity of Pandit Kashinath Mishraji",author:"@Dr.Revathi",views:"6.4K",timeAgo:"3 months ago",category:"Discernible",excerpt:"Jai Shri Madhav! Divine Experience of Ulhasnagar (Mumbai) Sabha. I silently prayed to Pandit Kashinath Mishraji and received an immediate divine response that filled my heart with joy."},{title:"Participated in Mahanritya with Prabhuji & Radha Ju",author:"@MohitSingh",views:"5.1K",timeAgo:"2 months ago",category:"Dream",excerpt:"On the morning of 16 August, 2025 Janmashtami, when I woke up, I was feeling extreme joy and delight. In my dream, I had participated in the divine dance (Mahanritya) with Prabhuji and Radha."},{title:"Unforgettable Experience",author:"@Dr.Revathi",views:"6K",timeAgo:"3 months ago",category:"Discernible",excerpt:"Jai Shri Madhav! After regular practice of Trisandhya, Shreemad Bhagavat Mahapuran reading, I experienced divine visions and received spiritual guidance that transformed my life completely."},{title:"Leela of the Divine: A Journey Through Dreams, Miracles, and Madhav's Grace",author:"@Leela2032",views:"5.5K",timeAgo:"2 months ago",category:"Discernible",excerpt:"Before Joining the Sudarma Maha Sangha: The Years of Seeking and Subtle Guidance. My childhood was filled with divine encounters and dreams that eventually led me to this sacred path."},{title:"Miraculous Recovery Through Madhav's Blessings",author:"@PriyaSharma",views:"4.8K",timeAgo:"4 months ago",category:"Life Protection",excerpt:"My mother was diagnosed with a severe illness. Doctors had given up hope. We started doing Trisandhya with complete faith in Madhav, and within weeks, she made a miraculous recovery that shocked all medical professionals."},{title:"Divine Intervention During Accident",author:"@RajeshKumar",views:"5.2K",timeAgo:"3 months ago",category:"Life Protection",excerpt:"I was driving on the highway when suddenly my car's brakes failed. At that moment, I chanted Madhav's name loudly. Miraculously, the car slowed down on its own and came to a safe stop without any collision."},{title:"Vision of Kalki Avatar in Meditation",author:"@AnandBhat",views:"7.1K",timeAgo:"2 months ago",category:"Dream",excerpt:"During my morning Trisandhya meditation, I had a powerful vision of Kalki Avatar riding the white horse Devadatta. The vision was so vivid and real that it brought tears of joy to my eyes and strengthened my faith immensely."},{title:"Lost Child Found Through Prayer",author:"@MeenakshiPatel",views:"4.5K",timeAgo:"4 months ago",category:"Life Protection",excerpt:"My 5-year-old daughter went missing in a crowded market. In panic, I continuously chanted Madhav's name. Within 15 minutes, a kind stranger brought her back safely. Madhav protected my child."},{title:"Guidance in Career Decision",author:"@VikramSingh",views:"3.9K",timeAgo:"5 months ago",category:"Discernible",excerpt:"I was confused between two job offers. After performing Trisandhya and seeking Madhav's guidance, I received clear signs and intuition about which path to take. Today, I am grateful for making the right choice."},{title:"Healing Through Divine Grace",author:"@SunitaRao",views:"5.6K",timeAgo:"3 months ago",category:"Life Protection",excerpt:"I was suffering from chronic pain for years. No medical treatment worked. When I started regular Trisandhya practice and surrendered to Madhav, the pain gradually disappeared. Doctors call it a medical mystery, but I know it's divine grace."},{title:"Protection During Natural Disaster",author:"@AmitDesai",views:"6.8K",timeAgo:"2 months ago",category:"Life Protection",excerpt:"During severe floods in our area, our house was the only one that remained safe while all neighboring houses were damaged. We had been regularly performing Trisandhya, and Madhav protected our family and home."},{title:"Dream Showing Future Path",author:"@KavitaNair",views:"4.2K",timeAgo:"6 months ago",category:"Dream",excerpt:"In my dream, I saw Pandit Kashinath Mishraji guiding me towards a specific spiritual practice. When I woke up and followed that guidance, my spiritual journey accelerated tremendously."},{title:"Financial Crisis Resolved Miraculously",author:"@SanjayGupta",views:"5.3K",timeAgo:"4 months ago",category:"Discernible",excerpt:"Our family was facing severe financial difficulties. We maintained our Trisandhya practice with faith. Unexpectedly, solutions appeared from nowhere, and we overcame the crisis through Madhav's grace."},{title:"Child's Illness Cured Instantly",author:"@PoojaVerma",views:"4.7K",timeAgo:"5 months ago",category:"Life Protection",excerpt:"My son had high fever for days. Medical treatments weren't helping. I prayed to Madhav with tears in my eyes during Trisandhya. That very evening, his fever broke and he was completely healthy by morning."},{title:"Divine Light During Meditation",author:"@RameshIyer",views:"3.8K",timeAgo:"6 months ago",category:"Discernible",excerpt:"During evening Trisandhya, I experienced a brilliant divine light filling my entire being. This experience of divine consciousness lasted for several minutes and left me in a state of profound peace and bliss."},{title:"Journey to Spiritual Awakening",author:"@NehaSaxena",views:"4.1K",timeAgo:"3 months ago",category:"Say Something",excerpt:"I was living a materialistic life without any spiritual awareness. Through a series of divine interventions and experiences with Trisandhya, I awakened to my true spiritual nature and found lasting peace."},{title:"Blessed by Madhav's Divine Vision",author:"@ManishJain",views:"6.3K",timeAgo:"1 month ago",category:"Dream",excerpt:"In my dream, I saw Madhav in his divine form blessing me and my family. The experience was so real and powerful that when I woke up, I could still feel his divine presence around me. This dream transformed my entire spiritual practice."}],rP=[{name:"All Experiences",value:"all",count:23,icon:lr},{name:"Discernible",value:"discernible",count:8,icon:vN},{name:"Life Protection",value:"life-protection",count:7,icon:vc},{name:"Dream",value:"dream",count:6,icon:Hz},{name:"Say Something",value:"say-something",count:2,icon:eU}];function WX(){var m;const[n,e]=x.useState(""),[t,s]=x.useState("all"),[r,i]=x.useState(null),[o,l]=x.useState(!1),d=VX.filter(p=>{const b=p.title.toLowerCase().includes(n.toLowerCase())||p.excerpt.toLowerCase().includes(n.toLowerCase())||p.author.toLowerCase().includes(n.toLowerCase()),g=t==="all"||p.category.toLowerCase().replace(" ","-")===t;return b&&g}),u=p=>{switch(p.toLowerCase()){case"life protection":return"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300";case"discernible":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300";case"dream":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300";case"say something":return"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300";default:return"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-300"}},h=p=>{i(p),l(!0)},f=()=>{window.open("https://en.bhavishyamalika.com/experiences","_blank"),l(!1)};return a.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[a.jsxs(Z,{className:"border-2 shadow-xl bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-950/20 dark:to-amber-950/20",children:[a.jsx(xi,{className:"border-b pb-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-3 bg-orange-500 text-white rounded-xl",children:a.jsx(Cu,{className:"h-6 w-6"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx(yi,{className:"text-3xl font-bold",children:"Divine Experiences"}),a.jsx(wo,{className:"text-base mt-1",children:"The blessings granted by Lord to His devotees, which constantly make them feel His grace"})]})]})}),a.jsx(Dn,{className:"pt-6",children:a.jsxs("div",{className:"relative",children:[a.jsx(CA,{className:"absolute left-4 top-4 h-5 w-5 text-muted-foreground"}),a.jsx(re,{placeholder:"Search experiences by title, author, or content...",value:n,onChange:p=>e(p.target.value),className:"pl-12 h-14 text-lg border-2 focus:border-orange-500 dark:focus:border-orange-400","data-testid":"input-search-experiences"})]})})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:rP.map(p=>a.jsx(Z,{className:`cursor-pointer transition-all hover:shadow-lg border-2 ${t===p.value?"border-orange-500 bg-orange-50 dark:bg-orange-950/30":"border-gray-200 dark:border-gray-800"}`,onClick:()=>s(p.value),"data-testid":`category-${p.value}`,children:a.jsxs(Dn,{className:"pt-6 text-center",children:[a.jsx(p.icon,{className:`h-8 w-8 mx-auto mb-2 ${t===p.value?"text-orange-500":"text-muted-foreground"}`}),a.jsx("p",{className:`font-semibold text-sm mb-1 ${t===p.value?"text-orange-700 dark:text-orange-300":""}`,children:p.name}),a.jsx(sn,{variant:"secondary",className:"text-xs",children:p.count})]})},p.value))}),n&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(lr,{className:"h-4 w-4"}),a.jsxs("span",{children:["Found ",d.length," ",d.length===1?"experience":"experiences",t!=="all"&&` in ${(m=rP.find(p=>p.value===t))==null?void 0:m.name}`]})]}),a.jsx("div",{className:"grid gap-6",children:d.length===0?a.jsx(Z,{className:"border-2 shadow-xl",children:a.jsxs(Dn,{className:"py-16 text-center",children:[a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-orange-100 dark:bg-orange-900/20 mb-4",children:a.jsx(Cu,{className:"h-10 w-10 text-orange-500"})})}),a.jsx("h3",{className:"text-2xl font-bold mb-3",children:"No experiences found"}),a.jsx("p",{className:"text-lg text-muted-foreground max-w-md mx-auto",children:"Try adjusting your search or select a different category"})]})}):d.map((p,b)=>a.jsxs(Z,{className:"border-2 shadow-xl hover:shadow-2xl transition-all cursor-pointer group","data-testid":`experience-card-${b}`,children:[a.jsx(xi,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx(yi,{className:"text-xl mb-2 leading-tight group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors",children:p.title}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-muted-foreground",children:[a.jsx("span",{className:"flex items-center gap-1",children:a.jsx("span",{className:"font-medium text-orange-600 dark:text-orange-400",children:p.author})}),a.jsx(Kc,{orientation:"vertical",className:"h-4"}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(vN,{className:"h-3 w-3"}),p.views," Views"]}),a.jsx(Kc,{orientation:"vertical",className:"h-4"}),a.jsx("span",{children:p.timeAgo})]})]}),a.jsx(sn,{className:`${u(p.category)} border-0 font-medium`,children:p.category})]})}),a.jsxs(Dn,{children:[a.jsx("p",{className:"text-base leading-relaxed text-muted-foreground mb-4",children:p.excerpt}),a.jsxs(O,{variant:"outline",size:"sm",className:"text-orange-600 border-orange-300 hover:bg-orange-50 dark:hover:bg-orange-950/20",onClick:()=>h(p),"data-testid":`button-read-more-${b}`,children:[a.jsx(Yp,{className:"h-3 w-3 mr-2"}),"Read Full Experience"]})]})]},b))}),a.jsx(Z,{className:"border-2 shadow-xl bg-gradient-to-r from-amber-50 to-yellow-50 dark:from-amber-950/20 dark:to-yellow-950/20",children:a.jsxs(Dn,{className:"py-6 text-center",children:[a.jsx(lr,{className:"h-8 w-8 mx-auto mb-3 text-amber-600"}),a.jsxs("p",{className:"text-sm font-medium text-amber-900 dark:text-amber-200 max-w-2xl mx-auto",children:["These divine experiences are shared by devotees who have been blessed through regular practice of Trisandhya Sadhana and devotion to Lord Madhav. Total: ",a.jsx("strong",{children:"23 Divine Experiences"})," from the Bhavishya Malika community."]})]})}),a.jsx(Nt,{open:o,onOpenChange:l,children:a.jsxs(xt,{className:"sm:max-w-[600px]",children:[a.jsxs(jt,{children:[a.jsx(Ct,{className:"text-2xl",children:r==null?void 0:r.title}),a.jsx(bo,{className:"text-base pt-2",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[a.jsx("span",{className:"font-medium text-orange-600 dark:text-orange-400",children:r==null?void 0:r.author}),a.jsx(Kc,{orientation:"vertical",className:"h-4"}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(vN,{className:"h-3 w-3"}),r==null?void 0:r.views," Views"]}),a.jsx(Kc,{orientation:"vertical",className:"h-4"}),a.jsx("span",{children:r==null?void 0:r.timeAgo})]})})]}),a.jsxs("div",{className:"py-6",children:[a.jsx(sn,{className:`${r?u(r.category):""} border-0 font-medium mb-4`,children:r==null?void 0:r.category}),a.jsx("p",{className:"text-base leading-relaxed text-muted-foreground mb-6",children:r==null?void 0:r.excerpt}),a.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-950/20 dark:to-amber-950/20 p-4 rounded-lg border-2 border-orange-200 dark:border-orange-800",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Yp,{className:"h-5 w-5 text-orange-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-orange-900 dark:text-orange-200 mb-1",children:"Read the Complete Experience"}),a.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-300",children:"To read the full divine experience with all details, please visit the official Bhavishya Malika website."})]})]})})]}),a.jsxs(ma,{className:"flex-col sm:flex-row gap-2",children:[a.jsx(O,{variant:"outline",onClick:()=>l(!1),"data-testid":"button-close-dialog",children:"Close"}),a.jsxs(O,{className:"bg-orange-500 hover:bg-orange-600",onClick:f,"data-testid":"button-visit-website",children:[a.jsx(Yp,{className:"h-4 w-4 mr-2"}),"Visit Bhavishya Malika Website"]})]})]})})]})}function GX(){return a.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[a.jsx(Z,{className:"border-2 shadow-xl bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-950/20 dark:to-cyan-950/20",children:a.jsx(xi,{className:"border-b",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-3 bg-blue-500 text-white rounded-xl",children:a.jsx(SN,{className:"h-6 w-6"})}),a.jsxs("div",{children:[a.jsx(yi,{className:"text-3xl font-bold",children:"Articles"}),a.jsx(wo,{className:"text-base mt-1",children:"Sacred knowledge, spiritual guidance, and divine wisdom"})]})]})})}),a.jsx(Z,{className:"border-2 shadow-xl",children:a.jsxs(Dn,{className:"py-20 text-center",children:[a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full bg-gradient-to-br from-blue-100 to-cyan-100 dark:from-blue-900/20 dark:to-cyan-900/20 mb-6",children:a.jsx(Po,{className:"h-12 w-12 text-blue-500"})})}),a.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Articles Coming Soon"}),a.jsx("p",{className:"text-lg text-muted-foreground mb-8 max-w-2xl mx-auto",children:"We are preparing a collection of sacred articles about spiritual knowledge, Bhavishya Malika prophecies, and guidance for your spiritual journey. This section will feature in-depth articles, teachings, and wisdom."}),a.jsxs(zE,{className:"max-w-2xl mx-auto border-2 border-blue-200 dark:border-blue-800 bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-950/30 dark:to-cyan-950/30",children:[a.jsx(lr,{className:"h-5 w-5 text-blue-600"}),a.jsxs(UE,{className:"text-base ml-2",children:[a.jsx("strong",{children:"Stay tuned!"})," New articles about Trisandhya Sadhana, Bhavishya Malika, and spiritual practices will be added regularly."]})]})]})}),a.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[{title:"Spiritual Practices",icon:at,description:"Learn about various spiritual practices and their significance",color:"orange"},{title:"Sacred Prophecies",icon:SN,description:"Deep dive into Bhavishya Malika predictions and interpretations",color:"purple"},{title:"Divine Wisdom",icon:lr,description:"Timeless wisdom from sacred scriptures and teachings",color:"amber"}].map((n,e)=>a.jsx(Z,{className:"border-2 shadow-lg",children:a.jsxs(xi,{children:[a.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-xl mb-3 ${n.color==="orange"?"bg-orange-100 dark:bg-orange-900/20":n.color==="purple"?"bg-purple-100 dark:bg-purple-900/20":"bg-amber-100 dark:bg-amber-900/20"}`,children:a.jsx(n.icon,{className:`h-6 w-6 ${n.color==="orange"?"text-orange-600":n.color==="purple"?"text-purple-600":"text-amber-600"}`})}),a.jsx(yi,{className:"text-xl",children:n.title}),a.jsx(wo,{className:"text-sm",children:n.description})]})},e))})]})}function qX(){const{data:n=[]}=Te({queryKey:["/api/admin/users"]}),{data:e=[]}=Te({queryKey:["/api/media"]}),{data:t=[]}=Te({queryKey:["/api/scriptures"]}),{data:s=[]}=Te({queryKey:["/api/sadhana-content"]}),r=n.length,i=n.filter(h=>h.isAdmin).length,o=r-i,l=e.length,d=t.length,u=s.length;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-3xl font-bold font-serif",children:"Admin Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your Trisandhya Companion platform"})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:[a.jsx(Z,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Users"}),a.jsx("p",{className:"text-2xl font-bold","data-testid":"stat-total-users",children:r})]}),a.jsx(Au,{className:"h-6 w-6 text-primary"})]})}),a.jsx(Z,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Regular Users"}),a.jsx("p",{className:"text-2xl font-bold","data-testid":"stat-regular-users",children:o})]}),a.jsx(Au,{className:"h-6 w-6 text-accent"})]})}),a.jsx(Z,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Admin Users"}),a.jsx("p",{className:"text-2xl font-bold","data-testid":"stat-admin-users",children:i})]}),a.jsx(xg,{className:"h-6 w-6 text-primary"})]})}),a.jsx(Z,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Media Items"}),a.jsx("p",{className:"text-2xl font-bold","data-testid":"stat-media-items",children:l})]}),a.jsx(or,{className:"h-6 w-6 text-primary"})]})}),a.jsx(Z,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Scriptures"}),a.jsx("p",{className:"text-2xl font-bold","data-testid":"stat-scriptures",children:d})]}),a.jsx(at,{className:"h-6 w-6 text-primary"})]})}),a.jsx(Z,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sadhana Items"}),a.jsx("p",{className:"text-2xl font-bold","data-testid":"stat-sadhana-content",children:u})]}),a.jsx(ha,{className:"h-6 w-6 text-primary"})]})})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs(Z,{className:"p-6 space-y-4",children:[a.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[a.jsx(at,{className:"h-5 w-5 text-primary"}),"Quick Actions"]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsx("p",{className:"text-muted-foreground",children:"• Manage users and permissions"}),a.jsx("p",{className:"text-muted-foreground",children:"• Add or edit media content"}),a.jsx("p",{className:"text-muted-foreground",children:"• Update scripture chapters"}),a.jsx("p",{className:"text-muted-foreground",children:"• View platform analytics"})]})]}),a.jsxs(Z,{className:"p-6 space-y-4",children:[a.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[a.jsx(xg,{className:"h-5 w-5 text-primary"}),"Recent Activity"]}),a.jsx("div",{className:"space-y-2 text-sm text-muted-foreground",children:a.jsx("p",{children:"Platform activity will appear here"})})]})]})]})}const oS=50;function KX(){const{toast:n}=On(),[e,t]=x.useState(""),[s,r]=x.useState("all"),[i,o]=x.useState(1),{data:l=[]}=Te({queryKey:["/api/admin/users"]}),d=Oe({mutationFn:async({userId:y,isAdmin:S})=>await Ve("PATCH",`/api/admin/users/${y}/admin`,{isAdmin:S}),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/admin/users"]}),n({title:"Success",description:"User admin status updated"})}}),u=Oe({mutationFn:async y=>await Ve("DELETE",`/api/admin/users/${y}`),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/admin/users"]}),n({title:"Success",description:"User deleted successfully"})}}),h=x.useMemo(()=>{let y=l;if(s==="admin"?y=y.filter(S=>S.isAdmin):s==="regular"&&(y=y.filter(S=>!S.isAdmin)),e.trim()){const S=e.toLowerCase();y=y.filter(w=>{var j,E,T;return((j=w.email)==null?void 0:j.toLowerCase().includes(S))||((E=w.firstName)==null?void 0:E.toLowerCase().includes(S))||((T=w.lastName)==null?void 0:T.toLowerCase().includes(S))||`${w.firstName} ${w.lastName}`.toLowerCase().includes(S)})}return y},[l,s,e]),f=Math.ceil(h.length/oS),m=(i-1)*oS,p=m+oS,b=h.slice(m,p);x.useMemo(()=>{o(1)},[e,s]);const g=l.filter(y=>y.isAdmin),N=l.filter(y=>!y.isAdmin),v=({user:y})=>{var S,w;return a.jsxs("div",{className:"p-4 flex items-center justify-between gap-4","data-testid":`user-row-${y.id}`,children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[a.jsxs(_b,{className:"h-12 w-12",children:[a.jsx(Mb,{src:y.profileImageUrl||void 0,className:"object-cover"}),a.jsx(Rb,{className:"text-lg",children:((S=y.firstName)==null?void 0:S[0])||((w=y.email)==null?void 0:w[0])||"U"})]}),a.jsxs("div",{className:"flex-1 space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"font-semibold",children:y.firstName&&y.lastName?`${y.firstName} ${y.lastName}`:y.email||"Unknown User"}),y.isAdmin&&a.jsxs(sn,{variant:"default",className:"text-xs",children:[a.jsx(vc,{className:"h-3 w-3 mr-1"}),"Admin"]})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:y.email}),y.lastLogin&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last login: ",pa(new Date(y.lastLogin),"PPp")]}),y.createdAt&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Joined: ",pa(new Date(y.createdAt),"PP")]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Admin"}),a.jsx(Rs,{checked:y.isAdmin,onCheckedChange:j=>d.mutate({userId:y.id,isAdmin:j}),"data-testid":`switch-admin-${y.id}`})]}),a.jsx(O,{size:"icon",variant:"ghost",onClick:()=>{confirm(`Are you sure you want to delete ${y.firstName||y.email}?`)&&u.mutate(y.id)},"data-testid":`button-delete-${y.id}`,children:a.jsx(wa,{className:"h-4 w-4 text-destructive"})})]})]},y.id)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-3xl font-bold font-serif",children:"User Management"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage users, permissions, and analytics"})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsx(Z,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Users"}),a.jsx("p",{className:"text-3xl font-bold","data-testid":"stat-total-users",children:l.length})]}),a.jsx(Au,{className:"h-8 w-8 text-primary"})]})}),a.jsx(Z,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Admin Users"}),a.jsx("p",{className:"text-3xl font-bold","data-testid":"stat-admin-users",children:g.length})]}),a.jsx(Vz,{className:"h-8 w-8 text-primary"})]})}),a.jsx(Z,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Regular Users"}),a.jsx("p",{className:"text-3xl font-bold","data-testid":"stat-regular-users",children:N.length})]}),a.jsx(xg,{className:"h-8 w-8 text-primary"})]})})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(CA,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(re,{placeholder:"Search by name or email...",value:e,onChange:y=>t(y.target.value),className:"pl-10","data-testid":"input-search-users"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(O,{variant:s==="all"?"default":"outline",size:"sm",onClick:()=>r("all"),"data-testid":"filter-all",children:["All (",l.length,")"]}),a.jsxs(O,{variant:s==="admin"?"default":"outline",size:"sm",onClick:()=>r("admin"),"data-testid":"filter-admin",children:["Admins (",g.length,")"]}),a.jsxs(O,{variant:s==="regular"?"default":"outline",size:"sm",onClick:()=>r("regular"),"data-testid":"filter-regular",children:["Regular (",N.length,")"]})]})]}),a.jsxs(xa,{defaultValue:"all",className:"w-full",children:[a.jsxs(ya,{className:"grid w-full grid-cols-2",children:[a.jsxs(qt,{value:"all","data-testid":"tab-all-users",children:["All Users (",h.length,")"]}),a.jsxs(qt,{value:"admins","data-testid":"tab-admin-users",children:["Admin Analytics (",g.length,")"]})]}),a.jsxs(gt,{value:"all",className:"mt-6 space-y-4",children:[a.jsx(Z,{children:a.jsx("div",{className:"divide-y",children:b.length>0?b.map(y=>a.jsx(v,{user:y},y.id)):a.jsxs("div",{className:"p-12 text-center text-muted-foreground",children:[a.jsx(Au,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No users found matching your criteria"})]})})}),f>1&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",m+1," to ",Math.min(p,h.length)," of ",h.length," users"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(O,{variant:"outline",size:"sm",onClick:()=>o(y=>Math.max(1,y-1)),disabled:i===1,"data-testid":"button-prev-page",children:[a.jsx(mc,{className:"h-4 w-4 mr-1"}),"Previous"]}),a.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:f},(y,S)=>S+1).filter(y=>y===1||y===f||Math.abs(y-i)<=1).map((y,S,w)=>a.jsxs("div",{className:"flex items-center",children:[S>0&&w[S-1]!==y-1&&a.jsx("span",{className:"px-2 text-muted-foreground",children:"..."}),a.jsx(O,{variant:i===y?"default":"outline",size:"sm",onClick:()=>o(y),"data-testid":`button-page-${y}`,children:y})]},y))}),a.jsxs(O,{variant:"outline",size:"sm",onClick:()=>o(y=>Math.min(f,y+1)),disabled:i===f,"data-testid":"button-next-page",children:["Next",a.jsx(ju,{className:"h-4 w-4 ml-1"})]})]})]})]}),a.jsxs(gt,{value:"admins",className:"mt-6 space-y-6",children:[a.jsxs(Z,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Admin Users Overview"}),a.jsx("div",{className:"space-y-4",children:g.length>0?g.map(y=>{var S,w;return a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg","data-testid":`admin-card-${y.id}`,children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(_b,{className:"h-10 w-10",children:[a.jsx(Mb,{src:y.profileImageUrl||void 0,className:"object-cover"}),a.jsx(Rb,{children:((S=y.firstName)==null?void 0:S[0])||((w=y.email)==null?void 0:w[0])||"A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:y.firstName&&y.lastName?`${y.firstName} ${y.lastName}`:y.email}),a.jsx("p",{className:"text-sm text-muted-foreground",children:y.email}),y.lastLogin&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last active: ",pa(new Date(y.lastLogin),"PPp")]})]})]}),a.jsxs(sn,{variant:"default",children:[a.jsx(vc,{className:"h-3 w-3 mr-1"}),"Administrator"]})]},y.id)}):a.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No admin users found"})})]}),a.jsxs(Z,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Admin Activity Summary"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Total Admins"}),a.jsx("span",{className:"font-semibold",children:g.length})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Active Admins (logged in)"}),a.jsx("span",{className:"font-semibold",children:g.filter(y=>y.lastLogin).length})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Admin Permissions"}),a.jsx("span",{className:"font-semibold",children:"Full Access"})]})]})]})]})]})]})}function YX(){const{toast:n}=On(),[e,t]=x.useState(!1),[s,r]=x.useState(null),[i,o]=x.useState(!1),[l,d]=x.useState(""),[u,h]=x.useState("youtube"),[f,m]=x.useState(""),{data:p=[]}=Te({queryKey:["/api/media-categories"]}),{data:b=[]}=Te({queryKey:["/api/media"]}),g=Oe({mutationFn:async E=>await Ve("POST","/api/admin/media",E),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/media"]}),t(!1),m(""),h("youtube"),n({title:"Success",description:"Media created successfully"})}}),N=Oe({mutationFn:async({id:E,data:T})=>await Ve("PATCH",`/api/admin/media/${E}`,T),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/media"]}),r(null),m(""),n({title:"Success",description:"Media updated successfully"})}}),v=Oe({mutationFn:async E=>await Ve("DELETE",`/api/admin/media/${E}`),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/media"]}),n({title:"Success",description:"Media deleted successfully"})}}),y=async E=>{var _;const T=(_=E.target.files)==null?void 0:_[0];if(!T)return;const P=new FormData;P.append("file",T),o(!0);try{const R=await fetch("/api/admin/media/upload",{method:"POST",body:P,credentials:"include"});if(!R.ok){const L=await R.json();throw new Error(L.message||"Upload failed")}const I=await R.json();m(I.url),n({title:"Success",description:"File uploaded successfully"})}catch(R){n({title:"Error",description:R.message,variant:"destructive"})}finally{o(!1)}},S=E=>{E.preventDefault();const T=new FormData(E.currentTarget),P=u==="youtube"?T.get("url"):f;if(!P){n({title:"Error",description:"Please provide a URL or upload a file",variant:"destructive"});return}const _=T.get("categoryId"),R={title:T.get("title"),categoryId:!_||_==="none"?null:_,type:u,artist:T.get("artist"),url:P,thumbnailUrl:T.get("thumbnailUrl")||null,duration:T.get("duration")||null,description:T.get("description")||null,fileSize:null,mimeType:null};s?N.mutate({id:s.id,data:R}):g.mutate(R)},w=E=>{if(!E)return null;const T=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\?\/\s]+)/,/youtube\.com\/shorts\/([^&\?\/\s]+)/,/youtube\.com\/live\/([^&\?\/\s]+)/];for(const P of T){const _=E.match(P);if(_&&_[1])return _[1].split("?")[0]}return null},j=E=>{const T=w(E);return T?`https://i.ytimg.com/vi/${T}/hqdefault.jpg`:""};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-3xl font-bold font-serif",children:"Media Management"}),a.jsx("p",{className:"text-muted-foreground",children:"Upload audio files or add YouTube videos"})]}),a.jsxs(Nt,{open:e,onOpenChange:t,children:[a.jsx(jc,{asChild:!0,children:a.jsxs(O,{"data-testid":"button-add-media",children:[a.jsx(ji,{className:"h-4 w-4 mr-2"}),"Add Media"]})}),a.jsxs(xt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsx(jt,{children:a.jsx(Ct,{children:"Add New Media"})}),a.jsxs("form",{onSubmit:S,className:"space-y-4",children:[a.jsxs(xa,{value:u,onValueChange:h,children:[a.jsxs(ya,{className:"grid w-full grid-cols-2",children:[a.jsxs(qt,{value:"youtube","data-testid":"tab-youtube",children:[a.jsx(Kv,{className:"h-4 w-4 mr-2"}),"YouTube Video"]}),a.jsxs(qt,{value:"audio","data-testid":"tab-audio",children:[a.jsx(or,{className:"h-4 w-4 mr-2"}),"Audio File"]})]}),a.jsx(gt,{value:"youtube",className:"space-y-4 mt-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"youtube-url",children:"YouTube URL"}),a.jsx(re,{id:"youtube-url",name:"url",type:"url",required:u==="youtube",placeholder:"https://www.youtube.com/watch?v=...","data-testid":"input-youtube-url"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Paste the full YouTube video URL"})]})}),a.jsx(gt,{value:"audio",className:"space-y-4 mt-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"audio-file",children:"Upload Audio File"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(re,{id:"audio-file",type:"file",accept:"audio/*",onChange:y,disabled:i,"data-testid":"input-audio-file"}),i&&a.jsx(We,{className:"h-4 w-4 animate-spin"})]}),f&&a.jsx("p",{className:"text-xs text-green-600",children:"File uploaded successfully!"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Supported formats: MP3, WAV, AAC, FLAC, OGG, M4A (Max 50MB)"})]})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"title",children:"Title"}),a.jsx(re,{id:"title",name:"title",required:!0,"data-testid":"input-title"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"categoryId",children:"Category"}),a.jsxs(_g,{name:"categoryId",value:l,onValueChange:d,children:[a.jsx(Rm,{"data-testid":"select-category",children:a.jsx(Mg,{placeholder:"Select category (optional)"})}),a.jsxs(Dm,{children:[a.jsx(Lr,{value:"none",children:"No Category"}),p.map(E=>a.jsx(Lr,{value:E.id,children:E.displayName},E.id))]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"artist",children:"Artist/Speaker"}),a.jsx(re,{id:"artist",name:"artist","data-testid":"input-artist"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"thumbnailUrl",children:"Thumbnail URL (Optional)"}),a.jsx(re,{id:"thumbnailUrl",name:"thumbnailUrl",type:"url",placeholder:"https://...","data-testid":"input-thumbnail"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"YouTube thumbnails are auto-extracted"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"duration",children:"Duration"}),a.jsx(re,{id:"duration",name:"duration",placeholder:"e.g., 5:30","data-testid":"input-duration"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"description",children:"Description (Optional)"}),a.jsx(re,{id:"description",name:"description",placeholder:"Brief description","data-testid":"input-description"})]}),a.jsx(O,{type:"submit",className:"w-full",disabled:g.isPending||u==="audio"&&!f,"data-testid":"button-submit",children:g.isPending?"Creating...":"Create Media"})]})]})]})]}),a.jsx(Z,{children:a.jsx("div",{className:"divide-y",children:b.length===0?a.jsxs("div",{className:"p-12 text-center text-muted-foreground",children:[a.jsx(or,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:'No media added yet. Click "Add Media" to get started.'})]}):b.map(E=>{var T;return a.jsxs("div",{className:"p-4 flex items-center justify-between","data-testid":`media-item-${E.id}`,children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[E.type==="youtube"&&E.url&&a.jsx("img",{src:E.thumbnailUrl||j(E.url),alt:E.title,className:"w-20 h-12 object-cover rounded"}),E.type==="audio"&&a.jsx("div",{className:"w-20 h-12 bg-muted rounded flex items-center justify-center",children:a.jsx(or,{className:"h-6 w-6 text-muted-foreground"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:E.title}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mt-1",children:[a.jsx("span",{className:"capitalize",children:E.type}),E.artist&&a.jsxs("span",{children:["• ",E.artist]}),E.duration&&a.jsxs("span",{children:["• ",E.duration]}),E.categoryId&&a.jsxs("span",{children:["• ",((T=p.find(P=>P.id===E.categoryId))==null?void 0:T.displayName)||"Unknown Category"]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(Nt,{open:(s==null?void 0:s.id)===E.id,onOpenChange:P=>!P&&r(null),children:[a.jsx(jc,{asChild:!0,children:a.jsx(O,{size:"icon",variant:"ghost",onClick:()=>r(E),"data-testid":`button-edit-${E.id}`,children:a.jsx(Sw,{className:"h-4 w-4"})})}),a.jsxs(xt,{className:"max-w-2xl",children:[a.jsx(jt,{children:a.jsx(Ct,{children:"Edit Media"})}),a.jsxs("form",{onSubmit:S,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"edit-title",children:"Title"}),a.jsx(re,{id:"edit-title",name:"title",defaultValue:s==null?void 0:s.title,required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"edit-categoryId",children:"Category"}),a.jsxs(_g,{name:"categoryId",defaultValue:(s==null?void 0:s.categoryId)||"none",children:[a.jsx(Rm,{children:a.jsx(Mg,{})}),a.jsxs(Dm,{children:[a.jsx(Lr,{value:"none",children:"No Category"}),p.map(P=>a.jsx(Lr,{value:P.id,children:P.displayName},P.id))]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"edit-artist",children:"Artist/Speaker"}),a.jsx(re,{id:"edit-artist",name:"artist",defaultValue:(s==null?void 0:s.artist)||""})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"edit-url",children:"URL"}),a.jsx(re,{id:"edit-url",name:"url",type:"url",defaultValue:s==null?void 0:s.url,required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"edit-thumbnailUrl",children:"Thumbnail URL"}),a.jsx(re,{id:"edit-thumbnailUrl",name:"thumbnailUrl",type:"url",defaultValue:(s==null?void 0:s.thumbnailUrl)||""})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"edit-duration",children:"Duration"}),a.jsx(re,{id:"edit-duration",name:"duration",defaultValue:(s==null?void 0:s.duration)||""})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"edit-description",children:"Description"}),a.jsx(re,{id:"edit-description",name:"description",defaultValue:(s==null?void 0:s.description)||""})]}),a.jsx(O,{type:"submit",className:"w-full",disabled:N.isPending,children:N.isPending?"Updating...":"Update Media"})]})]})]}),a.jsx(O,{size:"icon",variant:"ghost",onClick:()=>{confirm("Are you sure you want to delete this media?")&&v.mutate(E.id)},disabled:v.isPending,"data-testid":`button-delete-${E.id}`,children:a.jsx(wa,{className:"h-4 w-4 text-destructive"})})]})]},E.id)})})})]})}function XX(){const{toast:n}=On(),[e,t]=x.useState(!1),[s,r]=x.useState(null),{data:i=[]}=Te({queryKey:["/api/media-categories"]}),o=Oe({mutationFn:async h=>await Ve("POST","/api/admin/media-categories",h),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/media-categories"]}),t(!1),n({title:"Success",description:"Category created successfully"})}}),l=Oe({mutationFn:async({id:h,data:f})=>await Ve("PATCH",`/api/admin/media-categories/${h}`,f),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/media-categories"]}),r(null),n({title:"Success",description:"Category updated successfully"})}}),d=Oe({mutationFn:async h=>await Ve("DELETE",`/api/admin/media-categories/${h}`),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/media-categories"]}),n({title:"Success",description:"Category deleted successfully"})}}),u=h=>{h.preventDefault();const f=new FormData(h.currentTarget),m={name:f.get("name"),displayName:f.get("displayName"),description:f.get("description")||null,orderIndex:f.get("orderIndex")?parseInt(f.get("orderIndex")):0};s?l.mutate({id:s.id,data:m}):o.mutate(m)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Media Categories"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage categories for your media library"})]}),a.jsxs(Nt,{open:e,onOpenChange:t,children:[a.jsx(jc,{asChild:!0,children:a.jsxs(O,{"data-testid":"button-add-category",children:[a.jsx(ji,{className:"h-4 w-4 mr-2"}),"Add Category"]})}),a.jsxs(xt,{children:[a.jsx(jt,{children:a.jsx(Ct,{children:"Add New Category"})}),a.jsxs("form",{onSubmit:u,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(Y,{htmlFor:"name",children:"Name (ID)"}),a.jsx(re,{id:"name",name:"name",placeholder:"e.g., bhajan, pravachan, katha",required:!0,"data-testid":"input-category-name"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Lowercase, no spaces (used internally)"})]}),a.jsxs("div",{children:[a.jsx(Y,{htmlFor:"displayName",children:"Display Name"}),a.jsx(re,{id:"displayName",name:"displayName",placeholder:"e.g., Bhajan, Pravachan, Katha",required:!0,"data-testid":"input-category-display-name"})]}),a.jsxs("div",{children:[a.jsx(Y,{htmlFor:"description",children:"Description"}),a.jsx(Vr,{id:"description",name:"description",placeholder:"Optional description","data-testid":"input-category-description"})]}),a.jsxs("div",{children:[a.jsx(Y,{htmlFor:"orderIndex",children:"Order Index"}),a.jsx(re,{id:"orderIndex",name:"orderIndex",type:"number",defaultValue:"0","data-testid":"input-category-order"})]}),a.jsx(O,{type:"submit",className:"w-full",disabled:o.isPending,"data-testid":"button-submit-category",children:o.isPending?"Creating...":"Create Category"})]})]})]})]}),a.jsx("div",{className:"grid gap-4",children:i.length===0?a.jsxs(Z,{className:"p-12 text-center",children:[a.jsx(or,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),a.jsx("p",{className:"text-muted-foreground",children:"No categories yet. Add your first category above."})]}):i.map(h=>a.jsx(Z,{className:"p-4","data-testid":`category-${h.id}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold",children:h.displayName}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",h.name]}),h.description&&a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:h.description}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Order: ",h.orderIndex]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Nt,{open:(s==null?void 0:s.id)===h.id,onOpenChange:f=>!f&&r(null),children:[a.jsx(jc,{asChild:!0,children:a.jsx(O,{variant:"outline",size:"icon",onClick:()=>r(h),"data-testid":`button-edit-${h.id}`,children:a.jsx(Sw,{className:"h-4 w-4"})})}),a.jsxs(xt,{children:[a.jsx(jt,{children:a.jsx(Ct,{children:"Edit Category"})}),a.jsxs("form",{onSubmit:u,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(Y,{htmlFor:"edit-name",children:"Name (ID)"}),a.jsx(re,{id:"edit-name",name:"name",defaultValue:s==null?void 0:s.name,required:!0,"data-testid":"input-edit-category-name"})]}),a.jsxs("div",{children:[a.jsx(Y,{htmlFor:"edit-displayName",children:"Display Name"}),a.jsx(re,{id:"edit-displayName",name:"displayName",defaultValue:s==null?void 0:s.displayName,required:!0,"data-testid":"input-edit-category-display-name"})]}),a.jsxs("div",{children:[a.jsx(Y,{htmlFor:"edit-description",children:"Description"}),a.jsx(Vr,{id:"edit-description",name:"description",defaultValue:(s==null?void 0:s.description)||"","data-testid":"input-edit-category-description"})]}),a.jsxs("div",{children:[a.jsx(Y,{htmlFor:"edit-orderIndex",children:"Order Index"}),a.jsx(re,{id:"edit-orderIndex",name:"orderIndex",type:"number",defaultValue:s==null?void 0:s.orderIndex,"data-testid":"input-edit-category-order"})]}),a.jsx(O,{type:"submit",className:"w-full",disabled:l.isPending,"data-testid":"button-update-category",children:l.isPending?"Updating...":"Update Category"})]})]})]}),a.jsx(O,{variant:"outline",size:"icon",onClick:()=>{confirm(`Delete ${h.displayName}? This will also delete all media in this category.`)&&d.mutate(h.id)},disabled:d.isPending,"data-testid":`button-delete-${h.id}`,children:a.jsx(wa,{className:"h-4 w-4"})})]})]})},h.id))})]})}const Hy=x.forwardRef(({className:n,...e},t)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:t,className:ee("w-full caption-bottom text-sm",n),...e})}));Hy.displayName="Table";const Vy=x.forwardRef(({className:n,...e},t)=>a.jsx("thead",{ref:t,className:ee("[&_tr]:border-b",n),...e}));Vy.displayName="TableHeader";const Wy=x.forwardRef(({className:n,...e},t)=>a.jsx("tbody",{ref:t,className:ee("[&_tr:last-child]:border-0",n),...e}));Wy.displayName="TableBody";const QX=x.forwardRef(({className:n,...e},t)=>a.jsx("tfoot",{ref:t,className:ee("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...e}));QX.displayName="TableFooter";const dr=x.forwardRef(({className:n,...e},t)=>a.jsx("tr",{ref:t,className:ee("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...e}));dr.displayName="TableRow";const wt=x.forwardRef(({className:n,...e},t)=>a.jsx("th",{ref:t,className:ee("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...e}));wt.displayName="TableHead";const Je=x.forwardRef(({className:n,...e},t)=>a.jsx("td",{ref:t,className:ee("p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...e}));Je.displayName="TableCell";const JX=x.forwardRef(({className:n,...e},t)=>a.jsx("caption",{ref:t,className:ee("mt-4 text-sm text-muted-foreground",n),...e}));JX.displayName="TableCaption";function ZX(){const{toast:n}=On(),[,e]=ba(),[t,s]=x.useState(!1),[r,i]=x.useState(null),[o,l]=x.useState(null),[d,u]=x.useState({title:"Shreemad Bhagwat Mahapuran",language:"",languageName:"",description:"",pdfUrl:"",pdfKey:"",fileSize:null,totalSkandas:12,totalChapters:null,orderIndex:0}),{data:h,isLoading:f}=Te({queryKey:["/api/mahapuran-titles"]}),m=Oe({mutationFn:async j=>{const E=new FormData;E.append("pdf",j);const T=await fetch("/api/mahapuran-pdfs/upload",{method:"POST",credentials:"include",body:E});if(!T.ok){let P="Failed to upload PDF";try{P=(await T.json()).message||P}catch{P=`Server error: ${T.status} ${T.statusText}`}throw new Error(P)}return await T.json()},onSuccess:j=>{u(E=>({...E,pdfUrl:j.pdfUrl,pdfKey:j.pdfKey,fileSize:j.fileSize})),l(null),n({title:"Success",description:"PDF uploaded successfully. Please fill in the details."})},onError:j=>{l(null),n({variant:"destructive",title:"Upload Failed",description:j.message})}}),p=Oe({mutationFn:async j=>Ve("POST","/api/admin/mahapuran-titles",j),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/mahapuran-titles"]}),s(!1),N(),n({title:"Success",description:"Scripture title created successfully"})},onError:j=>{n({variant:"destructive",title:"Error",description:j.message})}}),b=Oe({mutationFn:async({id:j,data:E})=>Ve("PATCH",`/api/admin/mahapuran-titles/${j}`,E),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/mahapuran-titles"]}),i(null),N(),n({title:"Success",description:"Scripture title updated successfully"})},onError:j=>{n({variant:"destructive",title:"Error",description:j.message})}}),g=Oe({mutationFn:async j=>Ve("DELETE",`/api/admin/mahapuran-titles/${j}`),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/mahapuran-titles"]}),n({title:"Success",description:"Scripture title deleted successfully"})},onError:j=>{n({variant:"destructive",title:"Error",description:j.message})}}),N=()=>{u({title:"Shreemad Bhagwat Mahapuran",language:"",languageName:"",description:"",pdfUrl:"",pdfKey:"",fileSize:null,totalSkandas:12,totalChapters:null,orderIndex:0}),l(null)},v=j=>{var T;const E=(T=j.target.files)==null?void 0:T[0];E&&(l(E),m.mutate(E))},y=j=>{if(j.preventDefault(),!d.pdfUrl&&!r){n({variant:"destructive",title:"Error",description:"Please upload a PDF file first"});return}r?b.mutate({id:r.id,data:{...d,collectionType:"other"}}):p.mutate({...d,collectionType:"other"})},S=j=>{i(j),u({title:j.title,language:j.language,languageName:j.language,description:j.description||"",pdfUrl:"",pdfKey:"",fileSize:null,totalSkandas:j.totalSkandas,totalChapters:null,orderIndex:j.orderIndex})},w=j=>{confirm("Are you sure you want to delete this scripture? All associated skandas and chapters will also be deleted.")&&g.mutate(j)};return f?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Scriptures Management"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage sacred scripture titles and their content"})]}),a.jsxs(O,{onClick:()=>s(!0),"data-testid":"button-add-scripture",children:[a.jsx(ji,{className:"h-4 w-4 mr-2"}),"Add Scripture"]})]}),a.jsx(Z,{children:a.jsxs(Hy,{children:[a.jsx(Vy,{children:a.jsxs(dr,{children:[a.jsx(wt,{children:"Title"}),a.jsx(wt,{children:"Language"}),a.jsx(wt,{children:"Description"}),a.jsx(wt,{children:"Skandas"}),a.jsx(wt,{children:"Order"}),a.jsx(wt,{children:"Actions"})]})}),a.jsx(Wy,{children:h&&h.length>0?h.map(j=>a.jsxs(dr,{"data-testid":`row-scripture-${j.id}`,children:[a.jsx(Je,{className:"font-medium",children:j.title}),a.jsx(Je,{children:a.jsx(sn,{variant:"outline",children:j.language.toUpperCase()})}),a.jsx(Je,{className:"max-w-md truncate",children:j.description||"No description"}),a.jsx(Je,{children:j.totalSkandas}),a.jsx(Je,{children:j.orderIndex}),a.jsx(Je,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(O,{variant:"ghost",size:"sm",onClick:()=>e(`/admin/scriptures/${j.id}`),"data-testid":`button-manage-${j.id}`,title:"Manage Skandas & Chapters",children:a.jsx(Wz,{className:"h-4 w-4"})}),a.jsx(O,{variant:"ghost",size:"sm",onClick:()=>S(j),"data-testid":`button-edit-${j.id}`,children:a.jsx(AA,{className:"h-4 w-4"})}),a.jsx(O,{variant:"ghost",size:"sm",onClick:()=>w(j.id),"data-testid":`button-delete-${j.id}`,children:a.jsx(wa,{className:"h-4 w-4"})})]})})]},j.id)):a.jsx(dr,{children:a.jsx(Je,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No scripture titles found. Add your first scripture to get started."})})})]})}),a.jsx(Nt,{open:t||r!==null,onOpenChange:j=>{j||(s(!1),i(null),N())},children:a.jsxs(xt,{className:"max-w-2xl",children:[a.jsx(jt,{children:a.jsx(Ct,{children:r?"Edit Scripture Title":"Add New Scripture Title"})}),a.jsxs("form",{onSubmit:y,className:"space-y-4",children:[!r&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"pdf-file",children:"PDF File *"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(re,{id:"pdf-file",type:"file",accept:".pdf",onChange:v,disabled:m.isPending,"data-testid":"input-pdf-file"}),m.isPending&&a.jsx(We,{className:"h-4 w-4 animate-spin"})]}),d.pdfUrl&&a.jsx("p",{className:"text-sm text-green-600",children:"✓ PDF uploaded successfully"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"language",children:"Language Code *"}),a.jsx(re,{id:"language",value:d.language,onChange:j=>u({...d,language:j.target.value}),placeholder:"e.g., en, hin, guj",required:!0,"data-testid":"input-language-code"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"language-name",children:"Language Name *"}),a.jsx(re,{id:"language-name",value:d.languageName,onChange:j=>u({...d,languageName:j.target.value}),placeholder:"e.g., English, Hindi, Gujarati",required:!0,"data-testid":"input-language-name"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"title",children:"Title"}),a.jsx(re,{id:"title",value:d.title,onChange:j=>u({...d,title:j.target.value}),placeholder:"Shreemad Bhagwat Mahapuran","data-testid":"input-title"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"description",children:"Description"}),a.jsx(Vr,{id:"description",value:d.description,onChange:j=>u({...d,description:j.target.value}),placeholder:"Description of this scripture...",rows:3,"data-testid":"input-description"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"total-skandas",children:"Total Skandas"}),a.jsx(re,{id:"total-skandas",type:"number",value:d.totalSkandas,onChange:j=>u({...d,totalSkandas:parseInt(j.target.value)}),"data-testid":"input-total-skandas"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"total-chapters",children:"Total Chapters"}),a.jsx(re,{id:"total-chapters",type:"number",value:d.totalChapters||"",onChange:j=>u({...d,totalChapters:j.target.value?parseInt(j.target.value):null}),placeholder:"Optional","data-testid":"input-total-chapters"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"order-index",children:"Display Order"}),a.jsx(re,{id:"order-index",type:"number",value:d.orderIndex,onChange:j=>u({...d,orderIndex:parseInt(j.target.value)}),"data-testid":"input-order-index"})]})]}),a.jsxs(ma,{children:[a.jsx(O,{type:"button",variant:"outline",onClick:()=>{s(!1),i(null),N()},"data-testid":"button-cancel",children:"Cancel"}),a.jsx(O,{type:"submit",disabled:p.isPending||b.isPending,"data-testid":"button-submit",children:p.isPending||b.isPending?a.jsxs(a.Fragment,{children:[a.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):r?"Update Scripture":"Create Scripture"})]})]})]})})]})}function eQ(){const{toast:n}=On(),[e,t]=x.useState(!1),[s,r]=x.useState(null),[i,o]=x.useState(null),[l]=x.useState(new Audio),[d,u]=x.useState(!1),[h,f]=x.useState(""),[m,p]=x.useState("upload"),{data:b=[]}=Te({queryKey:["/api/alarm-sounds"]}),g=Oe({mutationFn:async j=>await Ve("POST","/api/admin/alarm-sounds",j),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/alarm-sounds"]}),t(!1),n({title:"Success",description:"Alarm sound created successfully"})}}),N=Oe({mutationFn:async({id:j,data:E})=>await Ve("PATCH",`/api/admin/alarm-sounds/${j}`,E),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/alarm-sounds"]}),r(null),n({title:"Success",description:"Alarm sound updated successfully"})}}),v=Oe({mutationFn:async j=>await Ve("DELETE",`/api/admin/alarm-sounds/${j}`),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/alarm-sounds"]}),n({title:"Success",description:"Alarm sound deleted successfully"})}}),y=j=>{i===j.id?(l.pause(),o(null)):(l.src=j.url,l.play(),o(j.id),l.onended=()=>o(null))},S=async j=>{var P;const E=(P=j.target.files)==null?void 0:P[0];if(!E)return;const T=new FormData;T.append("file",E),u(!0);try{const _=await fetch("/api/admin/alarm-sounds/upload",{method:"POST",body:T,credentials:"include"});if(!_.ok){const I=await _.json();throw new Error(I.message||"Upload failed")}const R=await _.json();f(R.url),n({title:"Success",description:"File uploaded successfully"})}catch(_){n({title:"Error",description:_.message,variant:"destructive"})}finally{u(!1)}},w=j=>{j.preventDefault();const E=new FormData(j.currentTarget),T=m==="upload"?h:E.get("url");if(!T){n({title:"Error",description:"Please provide a URL or upload a file",variant:"destructive"});return}const P={name:E.get("name"),url:T,duration:E.get("duration")?parseInt(E.get("duration")):null,description:E.get("description")||null,isDefault:E.get("isDefault")==="on"};s?N.mutate({id:s.id,data:P}):g.mutate(P),f("")};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-3xl font-bold font-serif",children:"Alarm Sounds Management"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage alarm sounds for Sandhya reminders"})]}),a.jsxs(Nt,{open:e,onOpenChange:t,children:[a.jsx(jc,{asChild:!0,children:a.jsxs(O,{"data-testid":"button-add-alarm-sound",children:[a.jsx(ji,{className:"h-4 w-4 mr-2"}),"Add Sound"]})}),a.jsxs(xt,{children:[a.jsx(jt,{children:a.jsx(Ct,{children:"Add New Alarm Sound"})}),a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"name",children:"Sound Name"}),a.jsx(re,{id:"name",name:"name",required:!0,"data-testid":"input-name",placeholder:"e.g., Temple Bell"})]}),a.jsxs(xa,{value:m,onValueChange:p,children:[a.jsxs(ya,{className:"grid w-full grid-cols-2",children:[a.jsxs(qt,{value:"upload","data-testid":"tab-upload",children:[a.jsx(ib,{className:"h-4 w-4 mr-2"}),"Upload File"]}),a.jsxs(qt,{value:"url","data-testid":"tab-url",children:[a.jsx(bN,{className:"h-4 w-4 mr-2"}),"Provide URL"]})]}),a.jsxs(gt,{value:"upload",className:"space-y-2 mt-4",children:[a.jsx(Y,{htmlFor:"audio-file",children:"Upload Audio File"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(re,{id:"audio-file",type:"file",accept:"audio/*",onChange:S,disabled:d,"data-testid":"input-audio-file"}),d&&a.jsx(We,{className:"h-4 w-4 animate-spin"})]}),h&&a.jsx("p",{className:"text-xs text-green-600",children:"File uploaded successfully!"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Supported: MP3, WAV, OGG, AAC, FLAC (Max 50MB)"})]}),a.jsxs(gt,{value:"url",className:"space-y-2 mt-4",children:[a.jsx(Y,{htmlFor:"url",children:"Sound URL"}),a.jsx(re,{id:"url",name:"url",type:"url",required:m==="url","data-testid":"input-url",placeholder:"https://..."}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Direct link to audio file"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"duration",children:"Duration (seconds, optional)"}),a.jsx(re,{id:"duration",name:"duration",type:"number","data-testid":"input-duration",placeholder:"10"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"description",children:"Description"}),a.jsx(Vr,{id:"description",name:"description",rows:2,"data-testid":"textarea-description"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Rs,{id:"isDefault",name:"isDefault","data-testid":"switch-default"}),a.jsx(Y,{htmlFor:"isDefault",children:"Set as default alarm sound"})]}),a.jsx(O,{type:"submit",className:"w-full","data-testid":"button-submit",children:"Create Sound"})]})]})]})]}),a.jsx(Z,{children:a.jsx("div",{className:"divide-y",children:b.map(j=>a.jsxs("div",{className:"p-4 flex items-center justify-between gap-4","data-testid":`sound-item-${j.id}`,children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"font-semibold",children:j.name}),j.isDefault&&a.jsx("span",{className:"text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:"Default"})]}),j.description&&a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:j.description}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:j.url}),j.duration&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:[j.duration," seconds"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(O,{size:"icon",variant:"ghost",onClick:()=>y(j),"data-testid":`button-play-${j.id}`,children:i===j.id?a.jsx(Cm,{className:"h-4 w-4"}):a.jsx(yc,{className:"h-4 w-4"})}),a.jsxs(Nt,{open:(s==null?void 0:s.id)===j.id,onOpenChange:E=>!E&&r(null),children:[a.jsx(jc,{asChild:!0,children:a.jsx(O,{size:"icon",variant:"ghost",onClick:()=>r(j),"data-testid":`button-edit-${j.id}`,children:a.jsx(Sw,{className:"h-4 w-4"})})}),a.jsxs(xt,{children:[a.jsx(jt,{children:a.jsx(Ct,{children:"Edit Alarm Sound"})}),a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"edit-name",children:"Sound Name"}),a.jsx(re,{id:"edit-name",name:"name",defaultValue:s==null?void 0:s.name,required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"edit-url",children:"Sound URL"}),a.jsx(re,{id:"edit-url",name:"url",type:"url",defaultValue:s==null?void 0:s.url,required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"edit-duration",children:"Duration (seconds, optional)"}),a.jsx(re,{id:"edit-duration",name:"duration",type:"number",defaultValue:(s==null?void 0:s.duration)||""})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"edit-description",children:"Description"}),a.jsx(Vr,{id:"edit-description",name:"description",rows:2,defaultValue:(s==null?void 0:s.description)||""})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Rs,{id:"edit-isDefault",name:"isDefault",defaultChecked:s==null?void 0:s.isDefault}),a.jsx(Y,{htmlFor:"edit-isDefault",children:"Set as default alarm sound"})]}),a.jsx(O,{type:"submit",className:"w-full",children:"Update Sound"})]})]})]}),a.jsx(O,{size:"icon",variant:"ghost",onClick:()=>{confirm("Are you sure you want to delete this sound?")&&v.mutate(j.id)},"data-testid":`button-delete-${j.id}`,children:a.jsx(wa,{className:"h-4 w-4 text-destructive"})})]})]},j.id))})})]})}function tQ(){const{toast:n}=On(),[e,t]=x.useState(!1),[s,r]=x.useState(null),[i,o]=x.useState(null),[l]=x.useState(new Audio),[d,u]=x.useState(!1),[h,f]=x.useState(""),[m,p]=x.useState("upload"),{data:b=[]}=Te({queryKey:["/api/japa-audios"]}),g=Oe({mutationFn:async j=>await Ve("POST","/api/admin/japa-audios",j),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/japa-audios"]}),t(!1),n({title:"Success",description:"Japa audio created successfully"})}}),N=Oe({mutationFn:async({id:j,data:E})=>await Ve("PATCH",`/api/admin/japa-audios/${j}`,E),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/japa-audios"]}),r(null),n({title:"Success",description:"Japa audio updated successfully"})}}),v=Oe({mutationFn:async j=>await Ve("DELETE",`/api/admin/japa-audios/${j}`),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/japa-audios"]}),n({title:"Success",description:"Japa audio deleted successfully"})}}),y=j=>{i===j.id?(l.pause(),o(null)):(l.src=j.url,l.play(),o(j.id),l.onended=()=>o(null))},S=async j=>{var P;const E=(P=j.target.files)==null?void 0:P[0];if(!E)return;const T=new FormData;T.append("file",E),u(!0);try{const _=await fetch("/api/admin/japa-audios/upload",{method:"POST",body:T,credentials:"include"});if(!_.ok){const I=await _.json();throw new Error(I.message||"Upload failed")}const R=await _.json();f(R.url),n({title:"Success",description:"File uploaded successfully"})}catch(_){n({title:"Error",description:_.message,variant:"destructive"})}finally{u(!1)}},w=j=>{j.preventDefault();const E=new FormData(j.currentTarget),T=m==="upload"?h:E.get("url");if(!T){n({title:"Error",description:"Please provide a URL or upload a file",variant:"destructive"});return}const P={name:E.get("name"),url:T,duration:E.get("duration")?parseInt(E.get("duration")):null,description:E.get("description")||null,isDefault:E.get("isDefault")==="on"};s?N.mutate({id:s.id,data:P}):g.mutate(P),f("")};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-3xl font-bold font-serif",children:"Japa Audios Management"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage audio tracks for japa meditation"})]}),a.jsxs(Nt,{open:e,onOpenChange:t,children:[a.jsx(jc,{asChild:!0,children:a.jsxs(O,{"data-testid":"button-add-japa-audio",children:[a.jsx(ji,{className:"h-4 w-4 mr-2"}),"Add Audio"]})}),a.jsxs(xt,{children:[a.jsx(jt,{children:a.jsx(Ct,{children:"Add New Japa Audio"})}),a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"name",children:"Audio Name"}),a.jsx(re,{id:"name",name:"name",required:!0,"data-testid":"input-name",placeholder:"e.g., Om Chanting"})]}),a.jsxs(xa,{value:m,onValueChange:p,children:[a.jsxs(ya,{className:"grid w-full grid-cols-2",children:[a.jsxs(qt,{value:"upload","data-testid":"tab-upload",children:[a.jsx(ib,{className:"h-4 w-4 mr-2"}),"Upload File"]}),a.jsxs(qt,{value:"url","data-testid":"tab-url",children:[a.jsx(bN,{className:"h-4 w-4 mr-2"}),"Provide URL"]})]}),a.jsxs(gt,{value:"upload",className:"space-y-2 mt-4",children:[a.jsx(Y,{htmlFor:"audio-file",children:"Upload Audio File"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(re,{id:"audio-file",type:"file",accept:"audio/*",onChange:S,disabled:d,"data-testid":"input-audio-file"}),d&&a.jsx(We,{className:"h-4 w-4 animate-spin"})]}),h&&a.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"File uploaded successfully"})]}),a.jsxs(gt,{value:"url",className:"space-y-2 mt-4",children:[a.jsx(Y,{htmlFor:"url",children:"Audio URL"}),a.jsx(re,{id:"url",name:"url",type:"url",placeholder:"https://example.com/audio.mp3","data-testid":"input-url"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"duration",children:"Duration (seconds)"}),a.jsx(re,{id:"duration",name:"duration",type:"number","data-testid":"input-duration",placeholder:"e.g., 300"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"description",children:"Description"}),a.jsx(Vr,{id:"description",name:"description","data-testid":"input-description",placeholder:"Brief description of the audio"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Rs,{id:"isDefault",name:"isDefault","data-testid":"switch-default"}),a.jsx(Y,{htmlFor:"isDefault",children:"Set as Default"})]}),a.jsx(O,{type:"submit",className:"w-full",disabled:g.isPending||N.isPending,"data-testid":"button-submit",children:g.isPending||N.isPending?a.jsxs(a.Fragment,{children:[a.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):s?"Update Audio":"Add Audio"})]})]})]})]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:b.map(j=>a.jsxs(Z,{className:"p-4 space-y-3","data-testid":`card-japa-audio-${j.id}`,children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:j.name}),j.isDefault&&a.jsx("span",{className:"text-xs bg-primary/20 text-primary px-2 py-0.5 rounded",children:"Default"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(O,{size:"icon",variant:"ghost",onClick:()=>y(j),"data-testid":`button-play-${j.id}`,children:i===j.id?a.jsx(Cm,{className:"h-4 w-4"}):a.jsx(yc,{className:"h-4 w-4"})}),a.jsx(O,{size:"icon",variant:"ghost",onClick:()=>r(j),"data-testid":`button-edit-${j.id}`,children:a.jsx(Sw,{className:"h-4 w-4"})}),a.jsx(O,{size:"icon",variant:"ghost",onClick:()=>v.mutate(j.id),"data-testid":`button-delete-${j.id}`,children:a.jsx(wa,{className:"h-4 w-4 text-destructive"})})]})]}),j.description&&a.jsx("p",{className:"text-sm text-muted-foreground",children:j.description}),j.duration&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Duration: ",Math.floor(j.duration/60),":",(j.duration%60).toString().padStart(2,"0")]})]},j.id))}),s&&a.jsx(Nt,{open:!!s,onOpenChange:()=>r(null),children:a.jsxs(xt,{children:[a.jsx(jt,{children:a.jsx(Ct,{children:"Edit Japa Audio"})}),a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"edit-name",children:"Audio Name"}),a.jsx(re,{id:"edit-name",name:"name",required:!0,defaultValue:s.name,"data-testid":"input-edit-name"})]}),a.jsxs(xa,{value:m,onValueChange:p,children:[a.jsxs(ya,{className:"grid w-full grid-cols-2",children:[a.jsxs(qt,{value:"upload",children:[a.jsx(ib,{className:"h-4 w-4 mr-2"}),"Upload File"]}),a.jsxs(qt,{value:"url",children:[a.jsx(bN,{className:"h-4 w-4 mr-2"}),"Provide URL"]})]}),a.jsxs(gt,{value:"upload",className:"space-y-2 mt-4",children:[a.jsx(Y,{htmlFor:"edit-audio-file",children:"Upload Audio File"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(re,{id:"edit-audio-file",type:"file",accept:"audio/*",onChange:S,disabled:d}),d&&a.jsx(We,{className:"h-4 w-4 animate-spin"})]}),h&&a.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"New file uploaded successfully"})]}),a.jsxs(gt,{value:"url",className:"space-y-2 mt-4",children:[a.jsx(Y,{htmlFor:"edit-url",children:"Audio URL"}),a.jsx(re,{id:"edit-url",name:"url",type:"url",defaultValue:s.url,placeholder:"https://example.com/audio.mp3"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"edit-duration",children:"Duration (seconds)"}),a.jsx(re,{id:"edit-duration",name:"duration",type:"number",defaultValue:s.duration||""})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"edit-description",children:"Description"}),a.jsx(Vr,{id:"edit-description",name:"description",defaultValue:s.description||""})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Rs,{id:"edit-isDefault",name:"isDefault",defaultChecked:s.isDefault}),a.jsx(Y,{htmlFor:"edit-isDefault",children:"Set as Default"})]}),a.jsx(O,{type:"submit",className:"w-full",disabled:N.isPending,children:N.isPending?a.jsxs(a.Fragment,{children:[a.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):"Update Audio"})]})]})})]})}function nQ(){const{toast:n}=On(),[e,t]=x.useState(!1),[s,r]=x.useState(null),[i,o]=x.useState(null),[l,d]=x.useState({languageCode:"",languageName:"",title:"Shreemad Bhagwat Mahapuran",description:"",pdfUrl:"",pdfKey:"",fileSize:null,totalSkandas:12,totalChapters:null,orderIndex:0}),{data:u,isLoading:h}=Te({queryKey:["/api/mahapuran-pdfs"]}),f=Oe({mutationFn:async w=>{const j=new FormData;j.append("pdf",w);const E=await fetch("/api/mahapuran-pdfs/upload",{method:"POST",credentials:"include",body:j});if(!E.ok){let P="Failed to upload PDF";try{P=(await E.json()).message||P}catch{P=`Server error: ${E.status} ${E.statusText}`}throw new Error(P)}const T=E.headers.get("content-type");if(!T||!T.includes("application/json"))throw new Error("Server returned non-JSON response. Please check if you're logged in as admin.");return await E.json()},onSuccess:w=>{d(j=>({...j,pdfUrl:w.pdfUrl,pdfKey:w.pdfKey,fileSize:w.fileSize})),o(null),n({title:"Success",description:"PDF uploaded successfully. Please fill in the language details."})},onError:w=>{o(null),n({variant:"destructive",title:"Upload Failed",description:w.message})}}),m=Oe({mutationFn:async w=>Ve("POST","/api/mahapuran-pdfs",w),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/mahapuran-pdfs"]}),t(!1),g(),n({title:"Success",description:"Mahapuran PDF created successfully"})},onError:w=>{n({variant:"destructive",title:"Error",description:w.message})}}),p=Oe({mutationFn:async({id:w,data:j})=>Ve("PATCH",`/api/mahapuran-pdfs/${w}`,j),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/mahapuran-pdfs"]}),r(null),g(),n({title:"Success",description:"Mahapuran PDF updated successfully"})},onError:w=>{n({variant:"destructive",title:"Error",description:w.message})}}),b=Oe({mutationFn:async w=>Ve("DELETE",`/api/mahapuran-pdfs/${w}`),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/mahapuran-pdfs"]}),n({title:"Success",description:"Mahapuran PDF deleted successfully"})},onError:w=>{n({variant:"destructive",title:"Error",description:w.message})}}),g=()=>{d({languageCode:"",languageName:"",title:"Shreemad Bhagwat Mahapuran",description:"",pdfUrl:"",pdfKey:"",fileSize:null,totalSkandas:12,totalChapters:null,orderIndex:0}),o(null)},N=w=>{var E;const j=(E=w.target.files)==null?void 0:E[0];j&&(o(j),f.mutate(j))},v=w=>{if(w.preventDefault(),!l.pdfUrl){n({variant:"destructive",title:"Error",description:"Please upload a PDF file first"});return}s?p.mutate({id:s.id,data:l}):m.mutate(l)},y=w=>{r(w),d({languageCode:w.languageCode,languageName:w.languageName,title:w.title,description:w.description||"",pdfUrl:w.pdfUrl||"",pdfKey:w.pdfKey||"",fileSize:w.fileSize,totalSkandas:w.totalSkandas,totalChapters:w.totalChapters,orderIndex:w.orderIndex})},S=w=>{confirm("Are you sure you want to delete this PDF? This action cannot be undone.")&&b.mutate(w)};return h?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Mahapuran PDFs Management"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage Shreemad Bhagwat Mahapuran PDFs in different languages"})]}),a.jsxs(O,{onClick:()=>t(!0),"data-testid":"button-add-pdf",children:[a.jsx(ji,{className:"h-4 w-4 mr-2"}),"Add PDF"]})]}),a.jsx(Z,{children:a.jsxs(Hy,{children:[a.jsx(Vy,{children:a.jsxs(dr,{children:[a.jsx(wt,{children:"Language"}),a.jsx(wt,{children:"Code"}),a.jsx(wt,{children:"Title"}),a.jsx(wt,{children:"File Size"}),a.jsx(wt,{children:"Chapters"}),a.jsx(wt,{children:"Status"}),a.jsx(wt,{children:"Actions"})]})}),a.jsx(Wy,{children:u&&u.length>0?u.map(w=>a.jsxs(dr,{"data-testid":`row-pdf-${w.id}`,children:[a.jsx(Je,{className:"font-medium",children:w.languageName}),a.jsx(Je,{children:a.jsx(sn,{variant:"outline",children:w.languageCode.toUpperCase()})}),a.jsx(Je,{children:w.title}),a.jsx(Je,{children:w.fileSize?`${(w.fileSize/(1024*1024)).toFixed(2)} MB`:"N/A"}),a.jsx(Je,{children:w.totalChapters||"N/A"}),a.jsx(Je,{children:w.isActive?a.jsx(sn,{variant:"default",children:"Active"}):a.jsx(sn,{variant:"secondary",children:"Inactive"})}),a.jsx(Je,{children:a.jsxs("div",{className:"flex gap-2",children:[w.pdfUrl&&a.jsx(O,{variant:"ghost",size:"sm",onClick:()=>window.open(w.pdfUrl,"_blank"),"data-testid":`button-view-${w.id}`,children:a.jsx(at,{className:"h-4 w-4"})}),a.jsx(O,{variant:"ghost",size:"sm",onClick:()=>y(w),"data-testid":`button-edit-${w.id}`,children:a.jsx(AA,{className:"h-4 w-4"})}),a.jsx(O,{variant:"ghost",size:"sm",onClick:()=>S(w.id),"data-testid":`button-delete-${w.id}`,children:a.jsx(wa,{className:"h-4 w-4"})})]})})]},w.id)):a.jsx(dr,{children:a.jsx(Je,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No PDFs found. Add your first PDF to get started."})})})]})}),u&&u.length>0&&a.jsx(Z,{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Frontend Preview"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"This is how the PDFs will appear to users on the Mahapuran Library page"})]}),a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:u.map(w=>a.jsx(Z,{className:"p-6 hover:shadow-xl transition-all duration-300 bg-card dark:bg-card border-border dark:border-border",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(at,{className:"h-5 w-5 text-primary"}),a.jsx("h3",{className:"text-xl font-semibold text-foreground dark:text-foreground",children:w.languageName})]}),w.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:w.description}),w.fileSize&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["File size: ",(w.fileSize/(1024*1024)).toFixed(2)," MB"]}),w.totalChapters&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Chapters: ",w.totalChapters]})]})}),a.jsx("div",{className:"flex flex-col gap-2 pt-4 border-t border-border dark:border-border",children:w.pdfUrl?a.jsxs(a.Fragment,{children:[a.jsxs(O,{onClick:()=>window.open(w.pdfUrl,"_blank"),className:"w-full",variant:"default",children:[a.jsx(at,{className:"h-4 w-4 mr-2"}),"Read Online"]}),a.jsxs(O,{onClick:()=>{const j=document.createElement("a");j.href=w.pdfUrl,j.download=`${w.title}_${w.languageName}.pdf`,document.body.appendChild(j),j.click(),document.body.removeChild(j)},variant:"outline",className:"w-full",children:[a.jsx(vo,{className:"h-4 w-4 mr-2"}),"Download PDF"]})]}):a.jsx("p",{className:"text-sm text-center text-muted-foreground py-2",children:"PDF will be available soon"})})]})},w.id))})]})}),a.jsx(Nt,{open:e||s!==null,onOpenChange:w=>{w||(t(!1),r(null),g())},children:a.jsxs(xt,{className:"max-w-2xl",children:[a.jsx(jt,{children:a.jsx(Ct,{children:s?"Edit Mahapuran PDF":"Add New Mahapuran PDF"})}),a.jsxs("form",{onSubmit:v,className:"space-y-4",children:[!s&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"pdf-file",children:"PDF File *"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(re,{id:"pdf-file",type:"file",accept:".pdf",onChange:N,disabled:f.isPending,"data-testid":"input-pdf-file"}),f.isPending&&a.jsx(We,{className:"h-4 w-4 animate-spin"})]}),l.pdfUrl&&a.jsx("p",{className:"text-sm text-green-600",children:"✓ PDF uploaded successfully"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"language-code",children:"Language Code *"}),a.jsx(re,{id:"language-code",value:l.languageCode,onChange:w=>d({...l,languageCode:w.target.value}),placeholder:"e.g., en, hin, guj",required:!0,"data-testid":"input-language-code"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"language-name",children:"Language Name *"}),a.jsx(re,{id:"language-name",value:l.languageName,onChange:w=>d({...l,languageName:w.target.value}),placeholder:"e.g., English, Hindi, Gujarati",required:!0,"data-testid":"input-language-name"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"title",children:"Title"}),a.jsx(re,{id:"title",value:l.title,onChange:w=>d({...l,title:w.target.value}),placeholder:"Shreemad Bhagwat Mahapuran","data-testid":"input-title"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"description",children:"Description"}),a.jsx(Vr,{id:"description",value:l.description,onChange:w=>d({...l,description:w.target.value}),placeholder:"Description of this PDF version...",rows:3,"data-testid":"input-description"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"total-skandas",children:"Total Skandas"}),a.jsx(re,{id:"total-skandas",type:"number",value:l.totalSkandas,onChange:w=>d({...l,totalSkandas:parseInt(w.target.value)}),"data-testid":"input-total-skandas"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"total-chapters",children:"Total Chapters"}),a.jsx(re,{id:"total-chapters",type:"number",value:l.totalChapters||"",onChange:w=>d({...l,totalChapters:w.target.value?parseInt(w.target.value):null}),placeholder:"Optional","data-testid":"input-total-chapters"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"order-index",children:"Display Order"}),a.jsx(re,{id:"order-index",type:"number",value:l.orderIndex,onChange:w=>d({...l,orderIndex:parseInt(w.target.value)}),"data-testid":"input-order-index"})]})]}),a.jsxs(ma,{children:[a.jsx(O,{type:"button",variant:"outline",onClick:()=>{t(!1),r(null),g()},"data-testid":"button-cancel",children:"Cancel"}),a.jsx(O,{type:"submit",disabled:m.isPending||p.isPending,"data-testid":"button-submit",children:m.isPending||p.isPending?a.jsxs(a.Fragment,{children:[a.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):s?"Update PDF":"Create PDF"})]})]})]})})]})}function sQ(){const{toast:n}=On(),[e,t]=x.useState(!1),[s,r]=x.useState(null),[i,o]=x.useState(null),[l,d]=x.useState({languageCode:"",languageName:"",title:"",description:"",pdfUrl:"",pdfKey:"",fileSize:null,orderIndex:0}),{data:u,isLoading:h}=Te({queryKey:["/api/trisandhya-pdfs"]}),f=Oe({mutationFn:async w=>{const j=new FormData;j.append("pdf",w);const E=await fetch("/api/trisandhya-pdfs/upload",{method:"POST",credentials:"include",body:j});if(!E.ok){let P="Failed to upload PDF";try{P=(await E.json()).message||P}catch{P=`Server error: ${E.status} ${E.statusText}`}throw new Error(P)}const T=E.headers.get("content-type");if(!T||!T.includes("application/json"))throw new Error("Server returned non-JSON response. Please check if you're logged in as admin.");return await E.json()},onSuccess:w=>{d(j=>({...j,pdfUrl:w.pdfUrl,pdfKey:w.pdfKey,fileSize:w.fileSize})),o(null),n({title:"Success",description:"PDF uploaded successfully. Please fill in the language details."})},onError:w=>{o(null),n({variant:"destructive",title:"Upload Failed",description:w.message})}}),m=Oe({mutationFn:async w=>Ve("POST","/api/trisandhya-pdfs",w),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/trisandhya-pdfs"]}),t(!1),g(),n({title:"Success",description:"Trisandhya PDF created successfully"})},onError:w=>{n({variant:"destructive",title:"Error",description:w.message})}}),p=Oe({mutationFn:async({id:w,data:j})=>Ve("PATCH",`/api/trisandhya-pdfs/${w}`,j),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/trisandhya-pdfs"]}),r(null),g(),n({title:"Success",description:"Trisandhya PDF updated successfully"})},onError:w=>{n({variant:"destructive",title:"Error",description:w.message})}}),b=Oe({mutationFn:async w=>Ve("DELETE",`/api/trisandhya-pdfs/${w}`),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/trisandhya-pdfs"]}),n({title:"Success",description:"Trisandhya PDF deleted successfully"})},onError:w=>{n({variant:"destructive",title:"Error",description:w.message})}}),g=()=>{d({languageCode:"",languageName:"",title:"",description:"",pdfUrl:"",pdfKey:"",fileSize:null,orderIndex:0}),o(null)},N=w=>{var E;const j=(E=w.target.files)==null?void 0:E[0];j&&(o(j),f.mutate(j))},v=w=>{if(w.preventDefault(),!l.pdfUrl){n({variant:"destructive",title:"Error",description:"Please upload a PDF file first"});return}s?p.mutate({id:s.id,data:l}):m.mutate(l)},y=w=>{r(w),d({languageCode:w.languageCode,languageName:w.languageName,title:w.title,description:w.description||"",pdfUrl:w.pdfUrl||"",pdfKey:w.pdfKey||"",fileSize:w.fileSize,orderIndex:w.orderIndex})},S=w=>{confirm("Are you sure you want to delete this PDF? This action cannot be undone.")&&b.mutate(w)};return h?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Trisandhya Path PDFs Management"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage Trisandhya Path PDFs in different languages"})]}),a.jsxs(O,{onClick:()=>t(!0),"data-testid":"button-add-trisandhya-pdf",children:[a.jsx(ji,{className:"h-4 w-4 mr-2"}),"Add PDF"]})]}),a.jsx(Z,{children:a.jsxs(Hy,{children:[a.jsx(Vy,{children:a.jsxs(dr,{children:[a.jsx(wt,{children:"Language"}),a.jsx(wt,{children:"Description"}),a.jsx(wt,{children:"File Size"}),a.jsx(wt,{children:"Order"}),a.jsx(wt,{children:"Actions"})]})}),a.jsx(Wy,{children:u&&u.length>0?u.map(w=>a.jsxs(dr,{"data-testid":`row-trisandhya-pdf-${w.id}`,children:[a.jsx(Je,{className:"font-medium",children:w.languageName}),a.jsx(Je,{className:"max-w-xs truncate",children:w.description||"—"}),a.jsx(Je,{children:w.fileSize?`${(w.fileSize/(1024*1024)).toFixed(2)} MB`:"N/A"}),a.jsx(Je,{children:w.orderIndex}),a.jsx(Je,{children:a.jsxs("div",{className:"flex gap-2",children:[w.pdfUrl&&a.jsx(O,{variant:"ghost",size:"sm",onClick:()=>window.open(w.pdfUrl,"_blank"),"data-testid":`button-view-trisandhya-${w.id}`,children:a.jsx(at,{className:"h-4 w-4"})}),a.jsx(O,{variant:"ghost",size:"sm",onClick:()=>y(w),"data-testid":`button-edit-trisandhya-${w.id}`,children:a.jsx(AA,{className:"h-4 w-4"})}),a.jsx(O,{variant:"ghost",size:"sm",onClick:()=>S(w.id),"data-testid":`button-delete-trisandhya-${w.id}`,children:a.jsx(wa,{className:"h-4 w-4"})})]})})]},w.id)):a.jsx(dr,{children:a.jsx(Je,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No PDFs found. Add your first PDF to get started."})})})]})}),u&&u.length>0&&a.jsx(Z,{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Frontend Preview"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"This is how the PDFs will appear to users on the Daily Sadhna page"})]}),a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:u.map(w=>a.jsx(Z,{className:"p-6 hover:shadow-xl transition-all duration-300 bg-card dark:bg-card border-border dark:border-border",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(at,{className:"h-5 w-5 text-primary"}),a.jsx("h3",{className:"text-xl font-semibold text-foreground dark:text-foreground",children:w.languageName})]}),w.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:w.description}),w.fileSize&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["File size: ",(w.fileSize/(1024*1024)).toFixed(2)," MB"]})]})}),a.jsx("div",{className:"flex flex-col gap-2 pt-4 border-t border-border dark:border-border",children:w.pdfUrl?a.jsxs(a.Fragment,{children:[a.jsxs(O,{onClick:()=>window.open(w.pdfUrl,"_blank"),className:"w-full",variant:"default",children:[a.jsx(at,{className:"h-4 w-4 mr-2"}),"Read Online"]}),a.jsxs(O,{onClick:()=>{const j=document.createElement("a");j.href=w.pdfUrl,j.download=`Trisandhya_Path_${w.languageName}.pdf`,document.body.appendChild(j),j.click(),document.body.removeChild(j)},variant:"outline",className:"w-full",children:[a.jsx(vo,{className:"h-4 w-4 mr-2"}),"Download PDF"]})]}):a.jsx("p",{className:"text-sm text-center text-muted-foreground py-2",children:"PDF will be available soon"})})]})},w.id))})]})}),a.jsx(Nt,{open:e||s!==null,onOpenChange:w=>{w||(t(!1),r(null),g())},children:a.jsxs(xt,{className:"max-w-2xl",children:[a.jsx(jt,{children:a.jsx(Ct,{children:s?"Edit Trisandhya PDF":"Add New Trisandhya PDF"})}),a.jsxs("form",{onSubmit:v,className:"space-y-4",children:[!s&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"pdf-file",children:"PDF File *"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(re,{id:"pdf-file",type:"file",accept:".pdf",onChange:N,disabled:f.isPending,"data-testid":"input-trisandhya-pdf-file"}),f.isPending&&a.jsx(We,{className:"h-4 w-4 animate-spin"})]}),l.pdfUrl&&a.jsx("p",{className:"text-sm text-green-600",children:"✓ PDF uploaded successfully"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"language-code",children:"Language Code *"}),a.jsx(re,{id:"language-code",value:l.languageCode,onChange:w=>d({...l,languageCode:w.target.value.toLowerCase()}),placeholder:"e.g., en, hi, or, sa",required:!0,maxLength:10,"data-testid":"input-trisandhya-language-code"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"language-name",children:"Language Name *"}),a.jsx(re,{id:"language-name",value:l.languageName,onChange:w=>d({...l,languageName:w.target.value}),placeholder:"e.g., English, Hindi, Odia, Sanskrit",required:!0,"data-testid":"input-trisandhya-language-name"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"title",children:"Title *"}),a.jsx(re,{id:"title",value:l.title,onChange:w=>d({...l,title:w.target.value}),placeholder:"e.g., Trisandhya Path",required:!0,"data-testid":"input-trisandhya-title"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"description",children:"Description"}),a.jsx(Vr,{id:"description",value:l.description,onChange:w=>d({...l,description:w.target.value}),placeholder:"Description of this Trisandhya Path PDF...",rows:3,"data-testid":"input-trisandhya-description"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"order-index",children:"Display Order"}),a.jsx(re,{id:"order-index",type:"number",value:l.orderIndex,onChange:w=>d({...l,orderIndex:parseInt(w.target.value)}),"data-testid":"input-trisandhya-order-index"})]}),a.jsxs(ma,{children:[a.jsx(O,{type:"button",variant:"outline",onClick:()=>{t(!1),r(null),g()},"data-testid":"button-trisandhya-cancel",children:"Cancel"}),a.jsx(O,{type:"submit",disabled:m.isPending||p.isPending,"data-testid":"button-trisandhya-submit",children:m.isPending||p.isPending?a.jsxs(a.Fragment,{children:[a.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):s?"Update PDF":"Create PDF"})]})]})]})})]})}function rQ(){const{toast:n}=On(),[e,t]=x.useState(!1),[s,r]=x.useState({title:"",message:"",type:"info",targetUrl:"",sendToAll:!0,expiresAt:""}),{data:i,isLoading:o}=Te({queryKey:["/api/admin/notifications"]}),l=Oe({mutationFn:async p=>{const b={...p,expiresAt:p.expiresAt?new Date(p.expiresAt):null};return Ve("POST","/api/admin/notifications",b)},onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/admin/notifications"]}),t(!1),u(),n({title:"Success",description:"Notification created and sent to all users successfully"})},onError:p=>{n({variant:"destructive",title:"Error",description:p.message})}}),d=Oe({mutationFn:async p=>Ve("DELETE",`/api/admin/notifications/${p}`),onSuccess:()=>{Re.invalidateQueries({queryKey:["/api/admin/notifications"]}),n({title:"Success",description:"Notification deleted successfully"})},onError:p=>{n({variant:"destructive",title:"Error",description:p.message})}}),u=()=>{r({title:"",message:"",type:"info",targetUrl:"",sendToAll:!0,expiresAt:""})},h=p=>{p.preventDefault(),l.mutate(s)},f=p=>{confirm("Are you sure you want to delete this notification?")&&d.mutate(p)},m=p=>{switch(p){case"success":return"default";case"warning":return"secondary";case"error":return"destructive";default:return"outline"}};return o?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Notifications Management"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Create and manage notifications for all users"})]}),a.jsxs(O,{onClick:()=>t(!0),"data-testid":"button-create-notification",children:[a.jsx(ji,{className:"h-4 w-4 mr-2"}),"Create Notification"]})]}),a.jsx(Z,{children:a.jsxs(Hy,{children:[a.jsx(Vy,{children:a.jsxs(dr,{children:[a.jsx(wt,{children:"Title"}),a.jsx(wt,{children:"Message"}),a.jsx(wt,{children:"Type"}),a.jsx(wt,{children:"Created"}),a.jsx(wt,{children:"Expires"}),a.jsx(wt,{children:"Actions"})]})}),a.jsx(Wy,{children:i&&i.length>0?i.map(p=>a.jsxs(dr,{"data-testid":`row-notification-${p.id}`,children:[a.jsx(Je,{className:"font-medium",children:p.title}),a.jsx(Je,{className:"max-w-md truncate",children:p.message}),a.jsx(Je,{children:a.jsx(sn,{variant:m(p.type),children:p.type})}),a.jsx(Je,{children:p.createdAt&&pa(new Date(p.createdAt),"PPp")}),a.jsx(Je,{children:p.expiresAt?pa(new Date(p.expiresAt),"PPp"):a.jsx("span",{className:"text-muted-foreground",children:"Never"})}),a.jsx(Je,{children:a.jsx(O,{variant:"ghost",size:"sm",onClick:()=>f(p.id),"data-testid":`button-delete-${p.id}`,children:a.jsx(wa,{className:"h-4 w-4"})})})]},p.id)):a.jsx(dr,{children:a.jsx(Je,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No notifications found. Create your first notification to get started."})})})]})}),a.jsx(Nt,{open:e,onOpenChange:p=>{p||(t(!1),u())},children:a.jsxs(xt,{className:"max-w-2xl",children:[a.jsx(jt,{children:a.jsx(Ct,{children:"Create New Notification"})}),a.jsxs("form",{onSubmit:h,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"title",children:"Title *"}),a.jsx(re,{id:"title",value:s.title,onChange:p=>r({...s,title:p.target.value}),placeholder:"Notification title...",required:!0,"data-testid":"input-title"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"message",children:"Message *"}),a.jsx(Vr,{id:"message",value:s.message,onChange:p=>r({...s,message:p.target.value}),placeholder:"Notification message...",rows:4,required:!0,"data-testid":"input-message"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"type",children:"Type"}),a.jsxs(_g,{value:s.type,onValueChange:p=>r({...s,type:p}),children:[a.jsx(Rm,{id:"type","data-testid":"select-type",children:a.jsx(Mg,{})}),a.jsxs(Dm,{children:[a.jsx(Lr,{value:"info",children:"Info"}),a.jsx(Lr,{value:"success",children:"Success"}),a.jsx(Lr,{value:"warning",children:"Warning"}),a.jsx(Lr,{value:"error",children:"Error"}),a.jsx(Lr,{value:"announcement",children:"Announcement"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"expires-at",children:"Expires At (Optional)"}),a.jsx(re,{id:"expires-at",type:"datetime-local",value:s.expiresAt,onChange:p=>r({...s,expiresAt:p.target.value}),"data-testid":"input-expires-at"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Y,{htmlFor:"action-url",children:"Action URL (Optional)"}),a.jsx(re,{id:"action-url",value:s.targetUrl,onChange:p=>r({...s,targetUrl:p.target.value}),placeholder:"/mahapuran or https://example.com","data-testid":"input-action-url"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Users will be redirected to this URL when they click the notification"})]}),a.jsx("div",{className:"bg-primary/5 dark:bg-primary/10 border border-primary/20 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(T2,{className:"h-5 w-5 text-primary mt-0.5"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium text-foreground dark:text-foreground",children:"Send to All Users"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"This notification will be sent to all registered users immediately upon creation."})]})]})}),a.jsxs(ma,{children:[a.jsx(O,{type:"button",variant:"outline",onClick:()=>{t(!1),u()},"data-testid":"button-cancel",children:"Cancel"}),a.jsx(O,{type:"submit",disabled:l.isPending,"data-testid":"button-submit",children:l.isPending?a.jsxs(a.Fragment,{children:[a.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(T2,{className:"h-4 w-4 mr-2"}),"Create & Send"]})})]})]})]})})]})}function HE(){const[,n]=ba();return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:a.jsx(Z,{className:"w-full max-w-md mx-4",children:a.jsxs(Dn,{className:"pt-6",children:[a.jsxs("div",{className:"flex mb-4 gap-2 items-center",children:[a.jsx(zz,{className:"h-8 w-8 text-red-500"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"404 Page Not Found"})]}),a.jsx("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400 mb-6",children:"The page you're looking for doesn't exist or has been moved."}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(O,{onClick:()=>n("/"),className:"w-full",size:"lg","data-testid":"button-go-home",children:[a.jsx(IR,{className:"h-4 w-4 mr-2"}),"Go to Dashboard"]}),a.jsxs(O,{onClick:()=>window.history.back(),variant:"outline",className:"w-full",size:"lg","data-testid":"button-go-back",children:[a.jsx(_R,{className:"h-4 w-4 mr-2"}),"Go Back"]})]})]})})})}function iQ(){return a.jsxs(uA,{children:[a.jsx(Me,{path:"/admin",component:qX}),a.jsx(Me,{path:"/admin/users",component:KX}),a.jsx(Me,{path:"/admin/media",component:YX}),a.jsx(Me,{path:"/admin/media-categories",component:XX}),a.jsx(Me,{path:"/admin/scriptures/:titleId/skanda/:skandaId",component:hC}),a.jsx(Me,{path:"/admin/scriptures/:titleId",component:uC}),a.jsx(Me,{path:"/admin/scriptures",component:ZX}),a.jsx(Me,{path:"/admin/alarm-sounds",component:eQ}),a.jsx(Me,{path:"/admin/japa-audios",component:tQ}),a.jsx(Me,{path:"/admin/mahapuran-pdfs",component:nQ}),a.jsx(Me,{path:"/admin/trisandhya-pdfs",component:sQ}),a.jsx(Me,{path:"/admin/notifications",component:rQ}),a.jsx(Me,{component:HE})]})}function aQ(){return a.jsxs(uA,{children:[a.jsx(Me,{path:"/",component:Sq}),a.jsx(Me,{path:"/guide",component:uY}),a.jsx(Me,{path:"/media",component:mY}),a.jsx(Me,{path:"/mahapuran",component:gX}),a.jsx(Me,{path:"/mahapuran/:titleId",component:uC}),a.jsx(Me,{path:"/mahapuran/:titleId/skanda/:skandaId",component:hC}),a.jsx(Me,{path:"/mahapuran/:titleId/skanda/:skandaId/chapter/:chapterId",component:nP}),a.jsx(Me,{path:"/scriptures",component:xX}),a.jsx(Me,{path:"/scriptures/:titleId",component:uC}),a.jsx(Me,{path:"/scriptures/:titleId/skanda/:skandaId",component:hC}),a.jsx(Me,{path:"/scriptures/:titleId/skanda/:skandaId/chapter/:chapterId",component:nP}),a.jsx(Me,{path:"/progress",component:pY}),a.jsx(Me,{path:"/alarms",component:ZY}),a.jsx(Me,{path:"/alarms-new",component:cX}),a.jsx(Me,{path:"/settings",component:pX}),a.jsx(Me,{path:"/divine-experiences",component:WX}),a.jsx(Me,{path:"/questions",component:$X}),a.jsx(Me,{path:"/articles",component:GX}),a.jsx(Me,{path:"/bhavishya-malika",component:HX}),a.jsx(Me,{path:"/about",component:yX}),a.jsx(Me,{path:"/contact",component:vX}),a.jsx(Me,{path:"/legal",component:bX}),a.jsx(Me,{component:HE})]})}function oQ(){const{user:n,isAdmin:e,isLoading:t}=Ry(),[s,r]=ba(),i=s.split("?")[0].split("#")[0],o=/^\/admin(\/.*)?$/.test(i),{activeAlarm:l,dismissAlarm:d,snoozeAlarm:u,volume:h}=OG();if(x.useEffect(()=>{!t&&o&&!e&&r("/")},[o,e,r,t]),t)return a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})});if(o&&!e)return a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"text-center space-y-4",children:a.jsxs("div",{className:"text-red-600",children:[a.jsx(vc,{className:"h-16 w-16 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),a.jsx("p",{className:"text-muted-foreground",children:"You don't have permission to access this area."})]})})});const f={"--sidebar-width":"16rem"};return a.jsxs(zV,{style:f,children:[a.jsxs("div",{className:"flex h-screen w-full",children:[o?a.jsx(YV,{}):a.jsx(qV,{}),a.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[a.jsxs("header",{className:"flex items-center justify-between p-4 border-b",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(cI,{"data-testid":"button-sidebar-toggle"}),e&&!o&&a.jsxs(O,{variant:"outline",size:"sm",onClick:()=>r("/admin"),"data-testid":"button-admin-panel",children:[a.jsx(vc,{className:"h-4 w-4 mr-2"}),"Admin Panel"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[!o&&a.jsx(YI,{}),a.jsx(O,{variant:"ghost",size:"sm",onClick:async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),Re.setQueryData(["/api/auth/user"],null),r("/login")}catch{r("/login")}},"data-testid":"button-logout",children:"Logout"}),a.jsx(QV,{})]})]}),a.jsx("main",{className:"flex-1 overflow-auto p-6",children:o?a.jsx(iQ,{}):a.jsx(aQ,{})})]})]}),a.jsx(MG,{isOpen:!!l,alarmType:(l==null?void 0:l.type)||"pratah",alarmTime:(l==null?void 0:l.time)||"",alarmSound:l==null?void 0:l.sound,volume:h,onDismiss:d,onSnooze:u})]})}function lQ(){const{isAuthenticated:n,isLoading:e}=Ry();return e?a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})}):n?a.jsx(oQ,{}):a.jsxs(uA,{children:[a.jsx(Me,{path:"/login",component:fq}),a.jsx(Me,{path:"/",component:$G}),a.jsx(Me,{component:HE})]})}function cQ(){return a.jsx(RG,{children:a.jsx(P$,{client:Re,children:a.jsx(XV,{children:a.jsx(X7,{children:a.jsxs(CD,{children:[a.jsx(QU,{}),a.jsx(zM,{children:a.jsx(lQ,{})}),a.jsx(pG,{})]})})})})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/alarm-sw.js",{scope:"/",updateViaCache:"none"}).then(n=>{n.addEventListener("updatefound",()=>{const e=n.installing;e&&e.addEventListener("statechange",()=>{e.state==="installed"&&navigator.serviceWorker.controller&&confirm("A new version is available. Reload to update?")&&window.location.reload()})})}).catch(n=>{console.error("Service Worker registration failed:",n)})});PM(document.getElementById("root")).render(a.jsx(cQ,{}));
